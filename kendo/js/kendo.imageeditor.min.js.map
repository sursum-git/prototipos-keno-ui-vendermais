{"version":3,"file":"kendo.imageeditor.min.js","names":[],"sources":["../../src/imageeditor/pane.js","../../src/imageeditor/commands.js","../../src/kendo.imageeditor.js"],"sourcesContent":["import \"../kendo.core.js\";\nimport \"../kendo.form.js\";\nimport \"../kendo.html.button.js\";\nimport \"../kendo.buttongroup.js\";\nimport \"../kendo.draganddrop.js\";\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        extend = $.extend,\n        Class = kendo.Class,\n\n        NS = \".k-imageeditor-pane\",\n\n        CLICK = \"click\";\n\n    var paneStyles = {\n        form: \"k-imageeditor-pane-form\",\n        cropOverlay: \"k-imageeditor-crop-overlay\",\n        crop: \"k-imageeditor-crop\",\n        resizeHandle: \"k-resize-handle\",\n        resizeHandlePrefix: \"k-resize-\"\n    };\n\n    const paneButtonSelector = \"[ref-pane-button]\";\n\n    var round = function(f) {\n        return Math.round(f * 1000) / 1000;\n    };\n\n    var Pane = Class.extend({\n        init: function(imageeditor) {\n            var that = this;\n\n            that.imageeditor = imageeditor;\n\n            if (that.imageeditor.currentPaneTool) {\n                that.imageeditor.currentPaneTool.destroy();\n            }\n\n            that.element = $(\"<div role='form' aria-label='Image edit pane.'></div>\").addClass(paneStyles.form);\n        },\n        open: function() {\n            var that = this,\n                imageeditor = that.imageeditor,\n                commonMessages = imageeditor.options.messages.common;\n\n            imageeditor.paneWrapper.append(that.element);\n            that.formWidget = new kendo.ui.Form(that.element, extend(that.formSettings(), {\n                buttonsTemplate: () =>\n                    kendo.html.renderButton(`<button ref-pane-button data-action='confirm'>${commonMessages.confirm}</button>`, {\n                        icon: 'check',\n                        themeColor: 'primary'\n                    }) +\n                    kendo.html.renderButton(`<button ref-pane-button data-action='cancel'>${commonMessages.cancel}</button>`, {\n                        icon: 'cancel-outline'\n                    })\n            }));\n\n            that.bindButtonEvents();\n            imageeditor.paneWrapper.show();\n            imageeditor.currentPaneTool = that;\n        },\n        bindButtonEvents: function() {\n            var that = this,\n                formWidget = that.formWidget,\n                buttons = formWidget.element.find(paneButtonSelector);\n\n            that._clickHandler = that._click.bind(that);\n\n            buttons.on(CLICK + NS, that._clickHandler);\n        },\n        _click: function(ev) {\n            var that = this,\n                target = $(ev.target).closest(paneButtonSelector),\n                action = target.data(\"action\");\n\n            if (that[action]) {\n                that[action]();\n            }\n        },\n        cancel: function() {\n            this.imageeditor.toolbar.element.find(\"[tabindex=0]\").trigger(\"focus\");\n            this.destroy();\n        },\n        confirm: function() {\n            window.console.error(\"Pane's confirm method is not implemented!\");\n            this.destroy();\n        },\n        refresh: function() {\n        },\n        destroy: function() {\n            var that = this,\n                imageeditor = that.imageeditor;\n\n            that.formWidget.element.find(paneButtonSelector).off(NS);\n            that.formWidget.destroy();\n            imageeditor.paneWrapper.html(\"\");\n            imageeditor.paneWrapper.hide();\n            delete imageeditor.currentPaneTool;\n        }\n    });\n\n    var CropPane = Pane.extend({\n        init: function(imageeditor) {\n            var that = this;\n            Pane.fn.init.call(that, imageeditor);\n            that.buildCropModel();\n            that.canvasUI();\n        },\n        confirm: function() {\n            var that = this,\n                model = that.formWidget._model.toJSON();\n\n            that.destroy();\n\n            that.imageeditor.executeCommand({ command: \"CropImageEditorCommand\", options: model });\n        },\n        formSettings: function() {\n            var that = this,\n                cropMessages = that.imageeditor.options.messages.panes.crop,\n                commonMessages = that.imageeditor.options.messages.common,\n                aspectRatioItems = cropMessages.aspectRatioItems,\n                aspectRatioDS = [];\n\n            if (aspectRatioItems) {\n                for (var key in aspectRatioItems) {\n                    aspectRatioDS.push({ value: key, text: aspectRatioItems[key] });\n                }\n            } else {\n                aspectRatioDS = [\n                    { value: \"originalRatio\", text: \"Original ratio\" },\n                    { value: \"1:1\", text: \"1:1 (Square)\" },\n                    { value: \"4:5\", text: \"4:5 (8:10)\" },\n                    { value: \"5:7\", text: \"5:7\" },\n                    { value: \"2:3\", text: \"2:3 (4:6)\" },\n                    { value: \"16:9\", text: \"16:9\" }\n                ];\n            }\n\n            return {\n                formData: that._model,\n                change: that.onChange.bind(that),\n                items: [{\n                    type: \"group\",\n                    label: cropMessages.title || \"Crop Image\",\n                    layout: \"grid\",\n                    grid: { cols: 2, gutter: \"0 8px\" },\n                    items: [{\n                            label: cropMessages.aspectRatio || \"Aspect ratio:\",\n                            field: \"aspectRatio\",\n                            editor: \"DropDownList\",\n                            editorOptions: {\n                                dataValueField: \"value\",\n                                dataTextField: \"text\",\n                                dataSource: aspectRatioDS\n                            },\n                            colSpan: 2\n                        }, {\n                            label: cropMessages.orientation,\n                            field: \"orientation\",\n                            editor: that._orientationEditor.bind(that),\n                            colSpan: 2\n                        }, {\n                            label: commonMessages.width || \"Width:\",\n                            field: \"width\",\n                            attributes: { style: \"max-width: 100px;\" },\n                            editor: \"NumericTextBox\",\n                            editorOptions: {\n                                format: \"n0\",\n                                max: that._model.width,\n                                min: 0\n                            },\n                            colSpan: 1\n                        }, {\n                            label: commonMessages.height || \"Height:\",\n                            field: \"height\",\n                            attributes: { style: \"max-width: 100px;\" },\n                            editor: \"NumericTextBox\",\n                            editorOptions: {\n                                format: \"n0\",\n                                max: that._model.height,\n                                min: 0\n                            },\n                            colSpan: 1\n                        }, {\n                            label: commonMessages.lockAspectRatio || \"Lock aspect ratio\",\n                            field: \"lockAspectRatio\",\n                            colSpan: 2\n                        }\n                    ]\n                }]\n            };\n        },\n        _orientationEditor: function(container, options) {\n            var that = this,\n                cropMessages = that.imageeditor.options.messages.panes.crop,\n                value = options.model[options.field];\n\n            that._orientationWidget = $(\"<div name='\" + options.field + \"'></div>\")\n                .appendTo(container)\n                .kendoButtonGroup({\n                    items: [\n                        { text: cropMessages.portrait || \"Portrait\", attributes: { \"data-value\": \"portrait\" }, selected: value === \"portrait\" },\n                        { text: cropMessages.landscape || \"Landscape\", attributes: { \"data-value\": \"landscape\" }, selected: value === \"landscape\" }\n                    ],\n                    select: function(ev) {\n                        var value = ev.sender.wrapper.find(\".k-selected\").data(\"value\");\n                        options.model.set(options.field, value);\n                    }\n                }).data(\"kendoButtonGroup\");\n        },\n        buildCropModel: function() {\n            var that = this,\n                imageeditor = that.imageeditor,\n                canvas = imageeditor.getCanvasElement(),\n                width = canvas.width,\n                height = canvas.height;\n\n                that._model = {\n                    top: 0,\n                    left: 0,\n                    aspectRatio: \"originalRatio\",\n                    width: width,\n                    height: height,\n                    orientation: (width - height < 0) ? \"portrait\" : \"landscape\",\n                    lockAspectRatio: true\n                };\n        },\n        canvasUI: function() {\n            var that = this,\n                imageeditor = that.imageeditor,\n                canvasContainer = that.imageeditor.canvasContainer,\n                cropOverlay = $(\"<div></div>\").addClass(paneStyles.cropOverlay),\n                cropElement = $(\"<div></div>\").addClass(paneStyles.crop),\n                handle = \"<span class='\" + paneStyles.resizeHandle + \"'></span>\",\n                handles = [ \"nw\", \"n\", \"ne\", \"w\", \"e\", \"sw\", \"s\", \"se\" ],\n                zoomLevel = imageeditor.getZoomLevel();\n\n            for (var i = 0; i < handles.length; i++) {\n                var handleElm = $(handle)\n                    .addClass(paneStyles.resizeHandlePrefix + handles[i])\n                    .attr(\"data-orientation\", handles[i]);\n\n                that._initResizeHandle(handleElm);\n\n                cropElement.append(handleElm);\n            }\n\n            that.cropElement = cropElement;\n\n            that._canvasUI = cropOverlay\n                .append(cropElement)\n                .appendTo(canvasContainer);\n\n            var width = Math.round(that._model.width * zoomLevel);\n            var height = Math.round(that._model.height * zoomLevel);\n            var borderWidth = parseInt(that.cropElement.css(\"border-top-width\"), 10);\n\n            that.cropElement.css({\n                width: width,\n                height: height,\n                backgroundImage: \"url('\" + imageeditor._image.src + \"')\",\n                backgroundSize: kendo.format(\"{0}px {1}px\", width, height),\n                backgroundClip: \"content-box\",\n                backgroundPosition: kendo.format(\"-{0}px -{0}px\", borderWidth)\n            });\n\n            that.cropElement.kendoDraggable({\n                ignore: \".\" + paneStyles.resizeHandle,\n                drag: function(ev) {\n                    that._adjustTopLeft(ev.target.offsetTop + ev.y.delta, ev.target.offsetLeft + ev.x.delta);\n                }\n            });\n        },\n        refresh: function() {\n            var that = this,\n                newModel = that.formWidget._model,\n                zoomLevel = that.imageeditor.getZoomLevel(),\n                width = Math.round(newModel.width * zoomLevel),\n                height = Math.round(newModel.height * zoomLevel),\n                top = Math.round(newModel.top * zoomLevel),\n                left = Math.round(newModel.left * zoomLevel),\n                borderWidth = parseInt(that.cropElement.css(\"border-top-width\"), 10);\n\n            that.cropElement.css({\n                top: top,\n                left: left,\n                width: width,\n                height: height,\n                backgroundSize: kendo.format(\"{0}px {1}px\", that._model.width * zoomLevel, that._model.height * zoomLevel),\n                backgroundPosition: kendo.format(\"-{0}px -{1}px\", left + borderWidth, top + borderWidth)\n            });\n        },\n        _initResizeHandle: function(handle) {\n            var that = this;\n\n            handle.kendoDraggable({\n                drag: function(ev) {\n                    var $target = $(ev.sender.element),\n                        newModel = that.formWidget._model,\n                        oldModel = that._model,\n                        orientation = $target.data(\"orientation\"),\n                        adjustments = {},\n                        zoomLevel = that.imageeditor.getZoomLevel(),\n                        correctedLeft = newModel.left * zoomLevel,\n                        correctedTop = newModel.top * zoomLevel;\n\n                    if (orientation.indexOf(\"w\") >= 0) {\n                        adjustments.left = that.cropElement[0].offsetLeft + ev.x.delta;\n                        adjustments.width = that.cropElement[0].offsetWidth - ev.x.delta;\n                    } else if (orientation.indexOf(\"e\") >= 0) {\n                        adjustments.width = that.cropElement[0].offsetWidth + ev.x.delta;\n                    }\n\n                    if (orientation.indexOf(\"n\") >= 0) {\n                        adjustments.top = that.cropElement[0].offsetTop + ev.y.delta;\n                        adjustments.height = that.cropElement[0].offsetHeight - ev.y.delta;\n                    } else if (orientation.indexOf(\"s\") >= 0) {\n                        adjustments.height = that.cropElement[0].offsetHeight + ev.y.delta;\n                    }\n\n                    if (adjustments.width && ((adjustments.left || correctedLeft) + adjustments.width <= oldModel.width * zoomLevel)) {\n                        newModel.set(\"width\", Math.round(adjustments.width / zoomLevel));\n                    }\n\n                    if (adjustments.height && ((adjustments.top || correctedTop) + adjustments.height <= oldModel.height * zoomLevel)) {\n                        newModel.set(\"height\", Math.round(adjustments.height / zoomLevel));\n                    }\n\n                    if (adjustments.top || adjustments.left) {\n                        that._adjustTopLeft(adjustments.top, adjustments.left);\n                    }\n                }\n            });\n        },\n        _adjustTopLeft: function(top, left, compare) {\n            var that = this,\n                compareModel = compare || that.formWidget._model,\n                newModel = that.formWidget._model,\n                oldModel = that._model,\n                zoomLevel = that.imageeditor.getZoomLevel();\n\n            if (top >= 0 && (top / zoomLevel) + compareModel.height <= oldModel.height) {\n                newModel.set(\"top\", Math.round(top / zoomLevel));\n            }\n\n            if (left >= 0 && (left / zoomLevel) + compareModel.width <= oldModel.width) {\n                newModel.set(\"left\", Math.round(left / zoomLevel));\n            }\n        },\n        onChange: function(ev) {\n            var that = this,\n                zoomLevel = that.imageeditor.getZoomLevel(),\n                newModel = ev.sender._model,\n                oldModel = that._model,\n                maxWidth = oldModel.width,\n                maxHeight = oldModel.height,\n                originalRatio = oldModel.width + \":\" + oldModel.height,\n                gcd = that._gcd(oldModel.width, oldModel.height);\n\n            originalRatio = oldModel.width / gcd + \":\" + oldModel.height / gcd;\n\n            if (ev.field === \"aspectRatio\" && ev.value === \"originalRatio\") {\n                newModel.set(\"top\", 0);\n                newModel.set(\"left\", 0);\n                newModel.set(\"orientation\", oldModel.orientation);\n                newModel.set(\"width\", oldModel.width);\n                newModel.set(\"height\", oldModel.height);\n            } else if (ev.field === \"orientation\") {\n                var tempModel = extend({}, newModel, {\n                    width: newModel.height,\n                    height: newModel.width\n                });\n\n                var newSize = that._calcSize(tempModel, originalRatio, maxWidth, maxHeight);\n\n                newModel.set(\"width\", newSize.width);\n                newModel.set(\"height\", newSize.height);\n                that._orientationWidget.select(ev.value === \"portrait\" ? 0 : 1);\n            } else if (newModel.lockAspectRatio) {\n                var force = ev.field;\n                var size = that._calcSize(newModel, originalRatio, maxWidth, maxHeight, force);\n                newModel.set(\"width\", size.width);\n                newModel.set(\"height\", size.height);\n            }\n\n            var width = Math.round(newModel.width * zoomLevel);\n            var height = Math.round(newModel.height * zoomLevel);\n            var top = Math.round(newModel.top * zoomLevel);\n            var left = Math.round(newModel.left * zoomLevel);\n            var borderWidth = parseInt(that.cropElement.css(\"border-top-width\"), 10);\n\n            that.cropElement.css({\n                top: top,\n                left: left,\n                width: width,\n                height: height,\n                backgroundPosition: kendo.format(\"-{0}px -{1}px\", left + borderWidth, top + borderWidth)\n            });\n        },\n        _calcSize: function(model, originalRatio, maxWidth, maxHeight, force) {\n            var width = Math.min(model.width, maxWidth),\n                height = Math.min(model.height, maxHeight),\n                isPortrait = model.orientation === \"portrait\",\n                ratios = model.aspectRatio;\n\n            if (ratios.indexOf(\":\") < 0) {\n                ratios = originalRatio;\n            }\n\n            ratios = ratios.split(\":\").map(function(value) {\n                return parseInt(value, 10);\n            });\n\n            var wRatio = isPortrait ? Math.min(ratios[0], ratios[1]) : Math.max(ratios[0], ratios[1]);\n            var hRatio = !isPortrait ? Math.min(ratios[0], ratios[1]) : Math.max(ratios[0], ratios[1]);\n            var expectedRatio = round(wRatio / hRatio);\n            var realRatio = round(width / height);\n\n            var sizeByRatio = {\n                width: Math.round(height * expectedRatio),\n                height: Math.round(width / expectedRatio)\n            };\n\n            if (force === \"width\") {\n                return {\n                    width: width,\n                    height: sizeByRatio.height\n                };\n            }\n\n            if (force === \"height\") {\n                return {\n                    width: sizeByRatio.width,\n                    height: height\n                };\n            }\n\n            if (realRatio > expectedRatio) {\n                width = sizeByRatio.width;\n            } else if (realRatio < expectedRatio) {\n                height = sizeByRatio.height;\n            }\n\n            return {\n                width: width,\n                height: height\n            };\n        },\n        _gcd: function(a, b) {\n            return (b === 0) ? a : this._gcd (b, a % b);\n        },\n        destroy: function() {\n            kendo.destroy(this._canvasUI);\n            this._canvasUI.remove();\n            Pane.fn.destroy.call(this);\n        }\n    });\n\n    var ResizePane = Pane.extend({\n        init: function(imageeditor) {\n            Pane.fn.init.call(this, imageeditor);\n            this.buildResizeModel();\n        },\n        confirm: function() {\n            var that = this,\n                originalWidth = that._model.width,\n                originalHeight = that._model.height,\n                model = that.formWidget._model.toJSON();\n\n            if (model.measure === \"percents\") {\n                model.width = originalWidth * (model.width / 100);\n                model.height = originalHeight * (model.height / 100);\n            }\n\n            that.imageeditor.executeCommand({ command: \"ResizeImageEditorCommand\", options: model });\n            that.destroy();\n        },\n        formSettings: function() {\n            var that = this,\n                resizeMessages = that.imageeditor.options.messages.panes.resize,\n                commonMessages = that.imageeditor.options.messages.common;\n\n            return {\n                formData: that._model,\n                change: that.onChange.bind(that),\n                items: [{\n                    type: \"group\",\n                    label: resizeMessages.title || \"Resize image\",\n                    layout: \"grid\",\n                    grid: { cols: 2, gutter: \"0 8px\" },\n                    items: [{\n                        label: commonMessages.width || \"Width:\",\n                        field: \"width\",\n                        attributes: { style: \"max-width: 100px;\" },\n                        editor: \"NumericTextBox\",\n                        editorOptions: {\n                            format: \"n0\",\n                            min: 0\n                        },\n                        colSpan: 1\n                    }, {\n                        field: \"measureW\",\n                        editor: \"DropDownList\",\n                        attributes: { style: \"max-width: 100px;\" },\n                        label: { text: \"&nbsp;\", encoded: false },\n                        editorOptions: {\n                            dataTextField: \"text\",\n                            dataValueField: \"value\",\n                            dataSource: [\n                                { text: resizeMessages.pixels || \"Pixels\", value: \"pixels\" },\n                                { text: resizeMessages.percents || \"Percents\", value: \"percents\" }\n                            ]\n                        },\n                        colSpan: 1\n                    }, {\n                        label: commonMessages.height || \"Height:\",\n                        field: \"height\",\n                        attributes: { style: \"max-width: 100px;\" },\n                        editor: \"NumericTextBox\",\n                        editorOptions: {\n                            format: \"n0\",\n                            min: 0\n                        },\n                        colSpan: 1\n                    }, {\n                        field: \"measureH\",\n                        label: { text: \"&nbsp;\", encoded: false },\n                        attributes: { style: \"max-width: 100px;\" },\n                        editor: \"DropDownList\",\n                        editorOptions: {\n                            dataTextField: \"text\",\n                            dataValueField: \"value\",\n                            dataSource: [\n                                { text: resizeMessages.pixels || \"Pixels\", value: \"pixels\" },\n                                { text: resizeMessages.percents || \"Percents\", value: \"percents\" }\n                            ]\n                        },\n                        colSpan: 1\n                    }, {\n                        label: commonMessages.lockAspectRatio || \"Lock aspect ratio\",\n                        field: \"lockAspectRatio\",\n                        colSpan: 2\n                    }]\n                }]\n            };\n        },\n        buildResizeModel: function() {\n            var that = this,\n                imageeditor = that.imageeditor,\n                canvas = imageeditor.getCanvasElement(),\n                width = canvas.width,\n                height = canvas.height;\n\n                that._model = {\n                    width: width,\n                    height: height,\n                    measure: \"pixels\",\n                    measureW: \"pixels\",\n                    measureH: \"pixels\",\n                    lockAspectRatio: true,\n                    ratio: round(width / height)\n                };\n        },\n        onChange: function(ev) {\n            var that = this,\n                newModel = ev.sender._model,\n                aspectRatioLocked = newModel.lockAspectRatio;\n\n            if (ev.field === \"measureW\" || ev.field === \"measureH\") {\n                newModel.set(\"measureW\", ev.value);\n                newModel.set(\"measureH\", ev.value);\n                newModel.set(\"measure\", ev.value);\n            } else if (ev.field === \"measure\") {\n                that.resetNumericsTo(ev.value);\n            } else if (ev.field === \"width\" && aspectRatioLocked && !that._preventChange) {\n                newModel.set(\"height\", newModel.width / newModel.ratio);\n            } else if (ev.field === \"height\" && aspectRatioLocked && !that._preventChange) {\n                newModel.set(\"width\", newModel.height * newModel.ratio);\n            }\n\n            newModel.set(\"ratio\", round(newModel.width / newModel.height));\n        },\n        resetNumericsTo: function(type) {\n            var that = this,\n                originalWidth = that._model.width,\n                originalHeight = that._model.height,\n                formWidget = that.formWidget,\n                model = formWidget._model,\n                widthNumeric = formWidget.element.find(\"[name=width]\").data(\"kendoNumericTextBox\"),\n                heightNumeric = formWidget.element.find(\"[name=height]\").data(\"kendoNumericTextBox\"),\n                isPercent = type === \"percents\",\n                options = {\n                    percents: {\n                        format: \"#\\\\\\%\"\n                    },\n                    pixels: {\n                        format: \"n0\"\n                    }\n                };\n\n\n            widthNumeric.setOptions(options[type]);\n            heightNumeric.setOptions(options[type]);\n\n            that._preventChange = true;\n            model.set(\"width\", isPercent ? (originalWidth / widthNumeric.value()) * 100 : originalWidth * (widthNumeric.value() / 100));\n            model.set(\"height\", isPercent ? (originalHeight / heightNumeric.value()) * 100 : originalHeight * (heightNumeric.value() / 100));\n            that._preventChange = false;\n        }\n    });\n\n    extend(kendo.ui, {\n        imageeditor: {\n            ImageEditorPane: Pane,\n            panes: {\n                crop: CropPane,\n                resize: ResizePane\n            }\n        }\n    });\n})(window.kendo.jQuery);\n\n","import \"./pane.js\";\nimport \"../kendo.upload.js\";\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        imageeditorNS = kendo.ui.imageeditor,\n        extend = $.extend,\n        Class = kendo.Class;\n\n    var Command = Class.extend({\n        init: function(options) {\n            this.options = extend({}, options, this.options);\n            this.imageeditor = options.imageeditor;\n        }\n    });\n\n    var OpenPaneImageEditorCommand = Command.extend({\n        init: function(options) {\n            Command.fn.init.call(this, options);\n        },\n        exec: function() {\n            var that = this,\n                imageeditor = that.imageeditor,\n                pane = new imageeditorNS.panes[that.options.value](imageeditor);\n\n                pane.open();\n                pane.element.find(\":kendoFocusable\").first().trigger(\"focus\");\n        }\n    });\n\n    var ZoomImageEditorCommand = Command.extend({\n        options: {\n            zoomStep: 0.05,\n            spacing: 20\n        },\n        init: function(options) {\n            Command.fn.init.call(this, options);\n        },\n        exec: function() {\n            var that = this,\n                options = that.options,\n                value = options.value,\n                imageeditor = that.imageeditor,\n                imgHeight = imageeditor._image.height,\n                currentZoom = imageeditor.getZoomLevel(),\n                newHeight = imgHeight,\n                zoomInOut = value === \"zoomIn\" || value === \"zoomOut\";\n\n                if (!isNaN(value)) {\n                    value = parseFloat(value);\n                } else if (typeof value === \"string\") {\n                    value = that._processStringValue(value, currentZoom);\n                }\n\n                newHeight = Math.round(imgHeight * value);\n\n                if (newHeight > 0) {\n                    $(imageeditor._canvas).css(\"height\", newHeight);\n                    imageeditor._zoomLevel = value;\n                }\n\n                if (imageeditor.currentPaneTool) {\n                    imageeditor.currentPaneTool.refresh();\n                }\n\n                if (zoomInOut) {\n                    imageeditor.toolbar.element.find(\"[tabindex=0]\").trigger(\"focus\");\n                }\n        },\n        _processStringValue: function(value, initialZoom) {\n            var that = this,\n                options = that.options,\n                imageeditor = that.imageeditor,\n                imgHeight = imageeditor._image.height,\n                expectedHeight = imageeditor.canvasWrapper.height() - options.spacing,\n                zoomStep = options.zoomStep;\n\n            switch (value) {\n                case \"zoomIn\":\n                    return initialZoom + zoomStep;\n                case \"zoomOut\":\n                    return initialZoom - zoomStep;\n                case \"fitToScreen\":\n                    return Math.round((expectedHeight / imgHeight) * 100) / 100;\n                default:\n                    return 1;\n            }\n        }\n    });\n\n    var CropImageEditorCommand = Command.extend({\n        init: function(options) {\n            Command.fn.init.call(this, options);\n        },\n        exec: function() {\n            var that = this,\n                options = that.options,\n                imageeditor = that.imageeditor,\n                canvas = imageeditor.getCanvasElement(),\n                ctx = imageeditor.getCurrent2dContext(),\n                croppedImage = ctx.getImageData(options.left, options.top, options.width, options.height);\n\n            ctx.clearRect(0, 0, canvas.width, canvas.height);\n            canvas.width = options.width;\n            canvas.height = options.height;\n            ctx.putImageData(croppedImage, 0, 0);\n\n            imageeditor.drawImage(canvas.toDataURL()).done(function(image) {\n                imageeditor.drawCanvas(image);\n                imageeditor.toolbar.element.find(\"[tabindex=0]\").trigger(\"focus\");\n            }).fail(function(ev) {\n                imageeditor.trigger(\"error\", ev);\n            });\n        }\n    });\n\n    var ResizeImageEditorCommand = Command.extend({\n        init: function(options) {\n            Command.fn.init.call(this, options);\n        },\n        exec: function() {\n            var that = this,\n                options = that.options,\n                imageeditor = that.imageeditor,\n                canvas = imageeditor.getCanvasElement(),\n                ctx = imageeditor.getCurrent2dContext(),\n                image = imageeditor.getCurrentImage();\n\n            ctx.clearRect(0, 0, canvas.width, canvas.height);\n            canvas.width = options.width;\n            canvas.height = options.height;\n            ctx.drawImage(image, 0, 0, options.width, options.height);\n\n            imageeditor.drawImage(canvas.toDataURL()).done(function(image) {\n                imageeditor.drawCanvas(image);\n                imageeditor.toolbar.element.find(\"[tabindex=0]\").trigger(\"focus\");\n            }).fail(function(ev) {\n                imageeditor.trigger(\"error\", ev);\n            });\n        }\n    });\n\n    var UndoImageEditorCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                imageeditor = that.imageeditor,\n                canvas = imageeditor.getCanvasElement(),\n                ctx = imageeditor.getCurrent2dContext(),\n                image = imageeditor.undoStack.pop();\n\n            if (image) {\n                imageeditor.redoStack.push(imageeditor.getCurrentImage());\n                delete imageeditor._image;\n\n                ctx.clearRect(0, 0, canvas.width, canvas.height);\n                canvas.width = image.width;\n                canvas.height = image.height;\n                ctx.drawImage(image, 0, 0, image.width, image.height);\n\n                imageeditor.drawImage(canvas.toDataURL()).done(function(image) {\n                    imageeditor.drawCanvas(image);\n                    imageeditor.toolbar.element.find(\"[tabindex=0]\").trigger(\"focus\");\n                }).fail(function(ev) {\n                    imageeditor.trigger(\"error\", ev);\n                });\n            }\n        }\n    });\n\n    var RedoImageEditorCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                imageeditor = that.imageeditor,\n                canvas = imageeditor.getCanvasElement(),\n                ctx = imageeditor.getCurrent2dContext(),\n                image = imageeditor.redoStack.pop();\n\n            if (image) {\n                imageeditor.undoStack.push(imageeditor.getCurrentImage());\n                delete imageeditor._image;\n\n                ctx.clearRect(0, 0, canvas.width, canvas.height);\n                canvas.width = image.width;\n                canvas.height = image.height;\n                ctx.drawImage(image, 0, 0, image.width, image.height);\n\n                imageeditor.drawImage(canvas.toDataURL()).done(function(image) {\n                    imageeditor.drawCanvas(image);\n                    imageeditor.toolbar.element.find(\"[tabindex=0]\").trigger(\"focus\");\n                }).fail(function(ev) {\n                    imageeditor.trigger(\"error\", ev);\n                });\n            }\n        }\n    });\n\n    var SaveImageEditorCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                imageeditor = that.imageeditor,\n                canvas = imageeditor.getCanvasElement();\n\n            kendo.saveAs(extend({}, imageeditor.options.saveAs, {\n                dataURI: canvas.toDataURL()\n            }));\n\n            imageeditor.toolbar.element.find(\"[data-command=SaveImageEditorCommand]\").trigger(\"focus\");\n        }\n    });\n\n    var OpenImageEditorCommand = Command.extend({\n        exec: function() {\n            var that = this,\n                imageeditor = that.imageeditor,\n                upload = imageeditor._upload;\n\n            if (!upload) {\n                var input = $(\"<input type='file' />\");\n                input.kendoUpload({\n                    select: that.onSelect.bind(that),\n                    error: that.onError.bind(that),\n                    multiple: false,\n                    validation: {\n                        allowedExtensions: [\".jpg\", \".jpeg\", \".gif\", \".png\", \".bmp\", \".tiff\", \".webp\"]\n                    }\n                });\n\n                imageeditor._upload = upload = input.getKendoUpload();\n\n            }\n\n            upload.element.click();\n        },\n        onSelect: function(ev) {\n            var that = this,\n                imageeditor = that.imageeditor,\n                file = ev.files[0].rawFile,\n                reader = new FileReader();\n\n            reader.addEventListener(\"load\", function() {\n                imageeditor.drawImage(reader.result).done(function(image) {\n                    if (!imageeditor.trigger(\"imageLoaded\", { image: image })) {\n                        imageeditor.drawCanvas(image);\n                        imageeditor._initUndoRedoStack();\n                        imageeditor._toggleTools();\n                    }\n                }).fail(function(ev) {\n                    imageeditor.trigger(\"error\", ev);\n                });\n            }, false);\n\n\n            if (file) {\n                reader.readAsDataURL(file);\n            }\n\n        },\n        onError: function(ev) {\n            var that = this,\n                imageeditor = that.imageeditor;\n\n            imageeditor.trigger(\"error\", ev);\n        }\n    });\n\n    extend(kendo.ui.imageeditor, {\n        ImageEditorCommand: Command,\n        commands: {\n            OpenPaneImageEditorCommand: OpenPaneImageEditorCommand,\n            ZoomImageEditorCommand: ZoomImageEditorCommand,\n            CropImageEditorCommand: CropImageEditorCommand,\n            ResizeImageEditorCommand: ResizeImageEditorCommand,\n            UndoImageEditorCommand: UndoImageEditorCommand,\n            RedoImageEditorCommand: RedoImageEditorCommand,\n            SaveImageEditorCommand: SaveImageEditorCommand,\n            OpenImageEditorCommand: OpenImageEditorCommand\n        }\n    });\n\n})(window.kendo.jQuery);\n\n","import \"./kendo.dropdownlist.js\";\nimport \"./kendo.toolbar.js\";\nimport \"./imageeditor/commands.js\";\n\nexport const __meta__ = {\n    id: \"imageeditor\",\n    name: \"ImageEditor\",\n    category: \"web\",\n    depends: [\"core\", \"toolbar\", \"dropdownlist\"]\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        extend = $.extend,\n        isPlainObject = $.isPlainObject,\n        Widget = kendo.ui.Widget,\n        ui = kendo.ui,\n\n        NS = \".kendoImageEditor\",\n\n        outerHeight = kendo._outerHeight,\n\n        ERROR = \"error\",\n        IMAGELOADED = \"imageLoaded\",\n        IMAGERENDERED = \"imageRendered\",\n        EXECUTE = \"execute\",\n\n        CLICK = \"click\",\n        TOGGLE = \"toggle\",\n        CHANGE = \"change\",\n\n        CANVAS_TEMPLATE = (label) => `<canvas role='img' aria-label='${label}'>Canvas element</canvas>`;\n\n    var imageEditorStyles = {\n        wrapper: \"k-imageeditor\",\n        header: \"k-imageeditor-header\",\n        toolbar: \"k-imageeditor-toolbar\",\n        paneWrapper: \"k-imageeditor-action-pane\",\n        contentWrapper: \"k-imageeditor-content\",\n        canvasWrapper: \"k-imageeditor-canvas-container\",\n        canvasContainer: \"k-imageeditor-canvas\"\n    };\n\n    var ImageEditor = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            Widget.fn.init.call(that, element, options);\n            options = $.extend(true, {}, options);\n\n            that._wrapper();\n            that._renderHeader();\n            that._contentWrapper();\n            that._keyHandler();\n\n            if (options.imageUrl) {\n                that._drawCanvas();\n            }\n\n            that._initUndoRedoStack();\n            that._toggleTools();\n\n            kendo.notify(that);\n        },\n\n        options: {\n            name: 'ImageEditor',\n            width: \"100%\",\n            height: 570,\n            imageUrl: \"\",\n            imageLabel: \"\",\n            toolbar: {\n            },\n            saveAs: {\n                fileName: \"image.png\"\n            },\n            messages: {\n                toolbar: {\n                    open: \"Open Image\",\n                    save: \"Save Image\",\n                    undo: \"Undo\",\n                    redo: \"Redo\",\n                    crop: \"Crop\",\n                    resize: \"Resize\",\n                    zoomIn: \"Zoom In\",\n                    zoomOut: \"Zoom Out\",\n                    zoomDropdown: \"Zoom options\",\n                    zoomActualSize: \"Show actual size\",\n                    zoomFitToScreen: \"Fit to screen\"\n                },\n                panes: {\n                    crop: {\n                        title: \"Crop Image\",\n                        aspectRatio: \"Aspect Ratio:\",\n                        aspectRatioItems: {\n                            \"originalRatio\": \"Original ratio\",\n                            \"1:1\": \"1:1 (Square)\",\n                            \"4:5\": \"4:5 (8:10)\",\n                            \"5:7\": \"5:7\",\n                            \"2:3\": \"2:3 (4:6)\",\n                            \"16:9\": \"16:9\"\n                        },\n                        orientation: \"Orientation:\",\n                        portrait: \"Portrait\",\n                        landscape: \"Landscape\"\n                    },\n                    resize: {\n                        title: \"Resize image\",\n                        pixels: \"Pixels\",\n                        percents: \"Percents\"\n                    }\n                },\n                common: {\n                    width: \"Width:\",\n                    height: \"Height:\",\n                    cancel: \"Cancel\",\n                    confirm: \"Confirm\",\n                    lockAspectRatio: \"Lock aspect ratio\"\n                }\n            }\n        },\n\n        events: [\n            ERROR,\n            IMAGELOADED,\n            IMAGERENDERED,\n            EXECUTE\n        ],\n\n        defaultTools: {\n            open: { type: \"button\", icon: \"upload\", name: \"open\", command: \"OpenImageEditorCommand\", showText: \"overflow\" },\n            save: { type: \"button\", icon: \"download\", name: \"save\", command: \"SaveImageEditorCommand\", showText: \"overflow\", toggleCondition: \"canExport\" },\n            separator: { type: \"separator\" },\n            undo: { type: \"button\", icon: \"undo\", name: \"undo\", command: \"UndoImageEditorCommand\", showText: \"overflow\", toggleCondition: \"undo\" },\n            redo: { type: \"button\", icon: \"redo\", name: \"redo\", command: \"RedoImageEditorCommand\", showText: \"overflow\", toggleCondition: \"redo\" },\n            separator1: { type: \"separator\" },\n            crop: { type: \"button\", icon: \"crop\", name: \"crop\", command: \"OpenPaneImageEditorCommand\", options: \"crop\", showText: \"overflow\", toggleCondition: \"canExport\" },\n            resize: { type: \"button\", icon: \"image-resize\", name: \"resize\", command: \"OpenPaneImageEditorCommand\", options: \"resize\", showText: \"overflow\", toggleCondition: \"canExport\" },\n            zoomIn: { type: \"button\", icon: \"zoom-in\", name: \"zoomIn\", command: \"ZoomImageEditorCommand\", showText: \"overflow\", options: \"zoomIn\", toggleCondition: \"enable\" },\n            zoomOut: { type: \"button\", icon: \"zoom-out\", name: \"zoomOut\", command: \"ZoomImageEditorCommand\", showText: \"overflow\", options: \"zoomOut\", toggleCondition: \"enable\" },\n            zoomDropdown: {\n                type: \"component\",\n                name: \"zoomDropdown\",\n                command: \"ZoomImageEditorCommand\",\n                toggleCondition: \"enable\",\n                overflow: \"never\",\n                component: \"DropDownList\",\n                componentOptions: {\n                    placeholder: \"Search\",\n                    icon: \"search\",\n                    dataSource: [\n                        { name: \"zoomActualSize\", icon: \"zoom-actual-size\", value: \"actualSize\" },\n                        { name: \"zoomFitToScreen\", icon: \"zoom-best-fit\", value: \"fitToScreen\" }\n                    ],\n                    dataTextField: \"text\",\n                    dataValueField: \"value\",\n                    valuePrimitive: true,\n                    template: ({ icon, text }) => `${kendo.ui.icon(kendo.htmlEncode(icon))} ${kendo.htmlEncode(text)}`,\n                    commandOn: \"change\",\n                    optionLabel: \"Zoom options\",\n                    dataBound: (e) => {\n                        e.sender.list.find(\".k-list-optionlabel\").hide();\n                    }\n                }\n            }\n        },\n\n        _wrapper: function() {\n            var that = this,\n                options = that.options,\n                width = options.width,\n                height = options.height;\n\n            that.wrapper = that.element\n                .addClass(imageEditorStyles.wrapper);\n\n            if (width) {\n                that.wrapper.width(width);\n            }\n\n            if (height) {\n                that.wrapper.height(height);\n            }\n\n            that._resizeHandler = kendo.onResize(function() {\n                that.resize(true);\n            });\n        },\n\n        _renderHeader: function() {\n            var that = this,\n                options = that.options;\n\n            that.header = $(\"<div />\").addClass(imageEditorStyles.header);\n            that.wrapper.append(that.header);\n\n            if (options.toolbar) {\n                that._initToolbar();\n                that.toolbar._tabIndex();\n            }\n        },\n\n        _initToolbar: function() {\n            var that = this,\n                options = that.options,\n                toolbarElement = $(\"<div></div>\").addClass(imageEditorStyles.toolbar),\n                toolbarOptions = extend({}, options.toolbar),\n                tools = toolbarOptions.items ? toolbarOptions.items : Object.keys(that.defaultTools);\n\n            toolbarOptions.tools = tools;\n            toolbarOptions.defaultTools = that.defaultTools;\n            toolbarOptions.parentMessages = that.options.messages.toolbar;\n\n            that.header.append(toolbarElement);\n            that.toolbar = new kendo.ui.ToolBar(toolbarElement, toolbarOptions);\n            that.options.toolbar = that.toolbar.options;\n            that.toolbar.toggleTools();\n\n            that.toolbar.bind(CLICK, that._toolbarClick.bind(that));\n            that.toolbar.bind(TOGGLE, that._toolbarClick.bind(that));\n            that.toolbar.bind(CHANGE, that._toolbarClick.bind(that));\n\n            return that.toolbar;\n        },\n\n        _toolbarClick: function(ev) {\n            var command = $(ev.target).data(\"command\"),\n                options = $(ev.target).data(\"options\");\n\n            options = $(ev.target).val() || options;\n\n            if (!command) {\n                return;\n            }\n\n            this.executeCommand({\n                command: command,\n                options: options\n            });\n        },\n\n        _contentWrapper: function() {\n            var that = this,\n                contentWrapper = $(\"<div></div>\").addClass(imageEditorStyles.contentWrapper),\n                canvasWrapper = $(\"<div></div>\").addClass(imageEditorStyles.canvasWrapper),\n                canvasContainer = $(\"<div></div>\").addClass(imageEditorStyles.canvasContainer),\n                paneWrapper = $(\"<div></div>\").addClass(imageEditorStyles.paneWrapper).hide(),\n                toolbarHeight = outerHeight(that.header);\n\n            that.canvasWrapper = canvasWrapper;\n            that.canvasContainer = canvasContainer;\n            that.paneWrapper = paneWrapper;\n\n            canvasWrapper.append(canvasContainer);\n\n            contentWrapper.height(outerHeight(that.wrapper) - toolbarHeight);\n\n            contentWrapper.append(canvasWrapper).append(paneWrapper);\n            that.wrapper.append(contentWrapper);\n        },\n\n        _keyHandler: function() {\n            var that = this,\n                prevent = false;\n\n            that.wrapper.on(\"keydown\" + NS, function(ev) {\n                if (ev.ctrlKey) {\n                    switch (ev.keyCode) {\n                        case 48: // ctrl+0\n                            that.executeCommand({ command: \"ZoomImageEditorCommand\", options: \"fitToScreen\" });\n                            prevent = true;\n                            break;\n                        case 189: // ctrl+-\n                            that.executeCommand({ command: \"ZoomImageEditorCommand\", options: \"zoomOut\" });\n                            prevent = true;\n                            break;\n                        case 187: // ctrl++\n                            that.executeCommand({ command: \"ZoomImageEditorCommand\", options: \"zoomIn\" });\n                            prevent = true;\n                            break;\n                        case 90: // ctrl+z\n                            that.executeCommand({ command: \"UndoImageEditorCommand\" });\n                            prevent = true;\n                            break;\n                        case 89: // ctrl+y\n                            that.executeCommand({ command: \"RedoImageEditorCommand\" });\n                            prevent = true;\n                            break;\n                    }\n\n                    if (prevent) {\n                        ev.preventDefault();\n                    }\n                }\n            });\n        },\n\n        _drawCanvas: function() {\n            var that = this;\n            var imageUrl = that.options.imageUrl;\n\n            that.drawImage(imageUrl).done(function(image) {\n                if (!that.trigger(IMAGELOADED, { image: image })) {\n                    that.drawCanvas(image);\n                }\n            }).fail(function(ev) {\n                that.trigger(ERROR, ev);\n            });\n        },\n\n        _initUndoRedoStack: function() {\n            var that = this;\n\n            that.undoStack = [];\n            that.redoStack = [];\n        },\n\n        _toggleTools: function() {\n            var that = this,\n                canRedo = that.redoStack.length > 0,\n                canUndo = that.undoStack.length > 0,\n                hasImage = !!that._image,\n                canExport = true;\n\n            try {\n                that._canvas.toDataURL();\n            } catch (error) {\n                canExport = false;\n            }\n\n            if (that.toolbar) {\n                that.toolbar.toggleTools({\n                    redo: canRedo,\n                    undo: canUndo,\n                    enable: hasImage,\n                    canExport: canExport\n                });\n            }\n        },\n\n        drawImage: function(imageUrl) {\n            var that = this,\n                deferred = new $.Deferred(),\n                image = new Image();\n\n            image.onload = function() {\n                kendo.ui.progress(that.canvasContainer, false);\n                deferred.resolve(image);\n            };\n\n            image.onerror = function() {\n                kendo.ui.progress(that.canvasContainer, false);\n                deferred.reject(arguments);\n            };\n\n            kendo.ui.progress(that.canvasContainer, true);\n\n            image.src = imageUrl;\n\n            return deferred.promise();\n        },\n\n        drawCanvas: function(image) {\n            var that = this;\n            var canvas = $(kendo.template(CANVAS_TEMPLATE)(that.options.imageLabel))[0];\n            var ctx = canvas.getContext('2d');\n\n            if (that._canvas) {\n                $(that._canvas).remove();\n            }\n\n            if (that._image) {\n                that.undoStack.push(that._image);\n            }\n\n            that._canvas = canvas;\n            that._ctx = ctx;\n            that._image = image;\n\n            canvas.width = image.width;\n            canvas.height = image.height;\n\n            ctx.drawImage(image, 0, 0);\n\n            that.canvasContainer.append(canvas);\n\n            if (image.height > that.canvasWrapper.height()) {\n                that.executeCommand({ command: \"ZoomImageEditorCommand\", options: \"fitToScreen\" });\n            } else {\n                that.executeCommand({ command: \"ZoomImageEditorCommand\", options: that.getZoomLevel() });\n            }\n\n            that.trigger(IMAGERENDERED, {\n                canvas: canvas,\n                ctx: ctx,\n                image: image\n            });\n\n            that._toggleTools();\n        },\n\n        getCanvasElement: function() {\n            return this._canvas;\n        },\n\n        getCurrent2dContext: function() {\n            return this._ctx;\n        },\n\n        getCurrentImage: function() {\n            return this._image;\n        },\n\n        executeCommand: function(args) {\n            var commandName = args.command,\n                commandOptions = extend({ imageeditor: this }, isPlainObject(args.options) ? args.options : { value: args.options }),\n                command = new ui.imageeditor.commands[commandName](commandOptions);\n\n            if (!this.trigger(EXECUTE, args)) {\n                this._toggleTools();\n                return command.exec();\n            }\n        },\n\n        getZoomLevel: function() {\n            return this._zoomLevel || 1;\n        },\n\n        destroy: function() {\n            var that = this;\n\n            that.element.off(NS);\n\n            if (that.currentPaneTool) {\n                that.currentPaneTool.destroy();\n            }\n\n            if (that.toolbar) {\n                that.toolbar.destroy();\n            }\n\n            if (that._upload) {\n                that._upload.destroy();\n            }\n\n\n            Widget.fn.destroy.call(that);\n        }\n    });\n    ui.plugin(ImageEditor);\n})(window.kendo.jQuery);\nexport default kendo;\n\n"],"mappings":"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"}