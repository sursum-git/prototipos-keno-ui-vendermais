{"version":3,"file":"kendo.scheduler.recurrence.min.js","names":[],"sources":["../../src/kendo.scheduler.recurrence.js"],"sourcesContent":["import \"./kendo.dropdownlist.js\";\nimport \"./kendo.datepicker.js\";\nimport \"./kendo.numerictextbox.js\";\nimport \"./kendo.buttongroup.js\";\nimport \"./kendo.icons.js\";\n\nexport const __meta__ = {\n    id: \"scheduler.recurrence\",\n    name: \"Recurrence\",\n    category: \"web\",\n    depends: [ \"dropdownlist\", \"datepicker\", \"numerictextbox\", \"buttongroup\", \"icons\" ],\n    hidden: true\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        encode = kendo.htmlEncode,\n        timezone = kendo.timezone,\n        Class = kendo.Class,\n        ui = kendo.ui,\n        Widget = ui.Widget,\n        DropDownList = ui.DropDownList,\n        ButtonGroup = ui.ButtonGroup,\n        kendoDate = kendo.date,\n        setTime = kendoDate.setTime,\n        setDayOfWeek = kendoDate.setDayOfWeek,\n        adjustDST = kendoDate.adjustDST,\n        firstDayOfMonth = kendoDate.firstDayOfMonth,\n        getMilliseconds = kendoDate.getMilliseconds,\n        DAYS_IN_LEAPYEAR = [0,31,60,91,121,152,182,213,244,274,305,335,366],\n        DAYS_IN_YEAR = [0,31,59,90,120,151,181,212,243,273,304,334,365],\n        MONTHS = [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31],\n        WEEK_DAYS = {\n            0: \"SU\",\n            1: \"MO\",\n            2: \"TU\",\n            3: \"WE\",\n            4: \"TH\",\n            5: \"FR\",\n            6: \"SA\"\n        },\n        WEEK_DAYS_IDX = {\n            \"SU\": 0,\n            \"MO\": 1,\n            \"TU\": 2,\n            \"WE\": 3,\n            \"TH\": 4,\n            \"FR\": 5,\n            \"SA\": 6\n        },\n        DATE_FORMATS = [\n            \"yyyy-MM-ddTHH:mm:ss.fffzzz\",\n            \"yyyy-MM-ddTHH:mm:sszzz\",\n            \"yyyy-MM-ddTHH:mm:ss\",\n            \"yyyy-MM-ddTHH:mm\",\n            \"yyyy-MM-ddTHH\",\n            \"yyyy-MM-dd\",\n            \"yyyyMMddTHHmmssfffzzz\",\n            \"yyyyMMddTHHmmsszzz\",\n            \"yyyyMMddTHHmmss\",\n            \"yyyyMMddTHHmm\",\n            \"yyyyMMddTHH\",\n            \"yyyyMMdd\"\n        ],\n        RULE_NAMES = [\"months\", \"weeks\", \"yearDays\", \"monthDays\", \"weekDays\", \"hours\", \"minutes\", \"seconds\"],\n        RULE_NAMES_LENGTH = RULE_NAMES.length,\n        RECURRENCE_DATE_FORMAT = \"yyyyMMddTHHmmssZ\",\n        limitation = {\n            months: function(date, end, rule) {\n                var monthRules = rule.months,\n                    months = ruleValues(monthRules, date.getMonth() + 1),\n                    changed = false;\n\n                if (months !== null) {\n                    if (months.length) {\n                        date.setMonth(months[0] - 1, 1);\n                    } else {\n                        date.setFullYear(date.getFullYear() + 1, monthRules[0] - 1, 1);\n                    }\n\n                    changed = true;\n                }\n\n                return changed;\n            },\n\n            monthDays: function(date, end, rule) {\n                var monthLength, month, days,\n                    changed = false,\n                    hours = date.getHours(),\n                    normalize = function(monthDay) {\n                        if (monthDay < 0) {\n                            monthDay = monthLength + monthDay + 1;\n                        }\n                        return monthDay;\n                    };\n\n                while (date <= end) {\n                    month = date.getMonth();\n                    monthLength = getMonthLength(date);\n                    days = ruleValues(rule.monthDays, date.getDate(), normalize);\n\n                    if (days === null) {\n                        return changed;\n                    }\n\n                    changed = true;\n\n                    if (days.length) {\n                        date.setMonth(month, days.sort(numberSortPredicate)[0]);\n                        adjustDST(date, hours);\n\n                        if (month === date.getMonth()) {\n                            break;\n                        }\n                    } else {\n                        date.setMonth(month + 1, 1);\n                    }\n                }\n\n                return changed;\n            },\n\n            yearDays: function(date, end, rule) {\n                var year, yearDays,\n                    changed = false,\n                    hours = date.getHours(),\n                    normalize = function(yearDay) {\n                        if (yearDay < 0) {\n                            yearDay = year + yearDay;\n                        }\n                        return yearDay;\n                    };\n\n                while (date < end) {\n                    year = leapYear(date) ? 366 : 365;\n                    yearDays = ruleValues(rule.yearDays, dayInYear(date), normalize);\n\n                    if (yearDays === null) {\n                        return changed;\n                    }\n\n                    changed = true;\n                    year = date.getFullYear();\n\n                    if (yearDays.length) {\n                        date.setFullYear(year, 0, yearDays.sort(numberSortPredicate)[0]);\n                        adjustDST(date, hours);\n                        break;\n                    } else {\n                        date.setFullYear(year + 1, 0, 1);\n                    }\n                }\n\n                return changed;\n            },\n\n            weeks: function(date, end, rule) {\n                var weekStart = rule.weekStart,\n                    year, weeks, day,\n                    changed = false,\n                    hours = date.getHours(),\n                    normalize = function(week) {\n                        if (week < 0) {\n                            week = 53 + week;\n                        }\n                        return week;\n                    };\n\n                while (date < end) {\n                    weeks = ruleValues(rule.weeks, weekInYear(date, weekStart), normalize);\n\n                    if (weeks === null) {\n                        return changed;\n                    }\n\n                    changed = true;\n                    year = date.getFullYear();\n\n                    if (weeks.length) {\n                        day = (weeks.sort(numberSortPredicate)[0] * 7) - 1;\n\n                        date.setFullYear(year, 0, day);\n                        setDayOfWeek(date, weekStart, -1);\n\n                        adjustDST(date, hours);\n                        break;\n                    } else {\n                        date.setFullYear(year + 1, 0, 1);\n                    }\n                }\n\n                return changed;\n            },\n\n            weekDays: function(date, end, rule) {\n                var offsetDate = new Date(date.getTime() + rule.offsets.start);\n                var normalizeDay = offsetDate.getDay() - date.getDay();\n                var weekDays = rule.weekDays;\n                var weekStart = rule.weekStart;\n                var weekDayRules = ruleWeekValues(weekDays, offsetDate, weekStart);\n                var hours = date.getHours();\n                var traverseRuleForNextMont = function(rule) {\n                    var nextMonthFirstDay = new Date(date.getFullYear(), date.getMonth() + 1, 1);\n                    var ruleDay = normalizeDayIndex(rule.day, weekStart);\n\n                    if (nextMonthFirstDay.getDay() <= ruleDay) {\n                        if (!weekDayRule || normalizeDayIndex(weekDayRule.day, weekStart) > ruleDay) {\n                            weekDayRule = rule;\n                        }\n                    }\n                };\n                var weekDayRule, day;\n\n\n                if (weekDayRules === null) {\n                    return false;\n                }\n\n                weekDayRule = weekDayRules[0];\n\n                if (!weekDayRule) {\n                    if (rule.freq === \"monthly\" && !rule.positions || rule.position > 0) {\n                        weekDays.forEach(traverseRuleForNextMont);\n                    }\n                    if (!weekDayRule) {\n                        weekDayRule = weekDays[0];\n                    }\n                    setDayOfWeek(date, weekStart);\n                }\n\n                day = weekDayRule.day;\n                day -= normalizeDay;\n\n                if (weekDayRule.offset) {\n                    while (date <= end && !isInWeek(date, weekDayRule, weekStart)) {\n                        if (weekInMonth(date, weekStart) === numberOfWeeks(date, weekStart)) {\n                            date.setMonth(date.getMonth() + 1, 1);\n                            adjustDST(date, hours);\n                        } else {\n                            date.setDate(date.getDate() + 7);\n                            adjustDST(date, hours);\n\n                            setDayOfWeek(date, weekStart, -1);\n                        }\n                    }\n                }\n\n                if (date.getDay() !== day) {\n                    setDayOfWeek(date, day);\n                }\n\n                return true;\n            },\n\n            hours: function(date, end, rule) {\n                var hourRules = rule.hours,\n                    startTime = rule._startTime,\n                    startHours = startTime.getHours(),\n                    hours = ruleValues(hourRules, startHours),\n                    changed = false;\n\n                if (hours !== null) {\n                    changed = true;\n\n                    date.setHours(startHours);\n                    adjustDST(date, startHours);\n\n                    if (hours.length) {\n                        hours = hours[0];\n                        date.setHours(hours);\n                    } else {\n                        hours = date.getHours();\n                        date.setDate(date.getDate() + 1);\n                        adjustDST(date, hours);\n\n                        hours = hourRules[0];\n                        date.setHours(hours);\n                        adjustDST(date, hours);\n                    }\n\n                    if (rule.minutes) {\n                        date.setMinutes(0);\n                    }\n\n                    startTime.setHours(hours, date.getMinutes());\n                }\n\n                return changed;\n            },\n\n            minutes: function(date, end, rule) {\n                var minuteRules = rule.minutes,\n                    currentMinutes = date.getMinutes(),\n                    minutes = ruleValues(minuteRules, currentMinutes),\n                    hours = rule._startTime.getHours(),\n                    changed = false;\n\n                if (minutes !== null) {\n                    changed = true;\n\n                    if (minutes.length) {\n                        minutes = minutes[0];\n                    } else {\n                        hours += 1;\n                        minutes = minuteRules[0];\n                    }\n\n                    if (rule.seconds) {\n                        date.setSeconds(0);\n                    }\n\n                    date.setHours(hours, minutes);\n\n                    hours = hours % 24;\n                    adjustDST(date, hours);\n                    rule._startTime.setHours(hours, minutes, date.getSeconds());\n                }\n\n                return changed;\n            },\n\n            seconds: function(date, end, rule) {\n                var secondRules = rule.seconds,\n                    hours = rule._startTime.getHours(),\n                    seconds = ruleValues(secondRules, date.getSeconds()),\n                    minutes = date.getMinutes(),\n                    changed = false;\n\n                if (seconds !== null) {\n                    changed = true;\n\n                    if (seconds.length) {\n                        date.setSeconds(seconds[0]);\n                    } else {\n                        minutes += 1;\n                        date.setMinutes(minutes, secondRules[0]);\n\n                        if (minutes > 59) {\n                            minutes = minutes % 60;\n                            hours = (hours + 1) % 24;\n                        }\n                    }\n\n                    rule._startTime.setHours(hours, minutes, date.getSeconds());\n                }\n\n                return changed;\n            }\n        },\n        BaseFrequency = Class.extend({\n            next: function(date, rule) {\n                var startTime = rule._startTime,\n                    day = startTime.getDate(),\n                    minutes, seconds;\n\n                if (rule.seconds) {\n                    seconds = date.getSeconds() + 1;\n\n                    date.setSeconds(seconds);\n                    startTime.setSeconds(seconds);\n                    startTime.setDate(day);\n\n                } else if (rule.minutes) {\n                    minutes = date.getMinutes() + 1;\n\n                    date.setMinutes(minutes);\n                    startTime.setMinutes(minutes);\n                    startTime.setDate(day);\n                } else {\n                    return false;\n                }\n\n                return true;\n            },\n\n            normalize: function(options) {\n                var rule = options.rule;\n\n                if (options.idx === 4 && rule.hours) {\n                    rule._startTime.setHours(0);\n                    this._hour(options.date, rule);\n                }\n            },\n\n            limit: function(date, end, rule) {\n                var interval = rule.interval,\n                    ruleName, firstRule,\n                    modified,\n                    idx, day;\n\n                while (date <= end) {\n                    modified = firstRule = undefined;\n                    day = date.getDate();\n\n                    for (idx = 0; idx < RULE_NAMES_LENGTH; idx++) {\n                        ruleName = RULE_NAMES[idx];\n\n                        if (rule[ruleName]) {\n                            modified = limitation[ruleName](date, end, rule);\n                            if (firstRule !== undefined && modified) {\n                                break;\n                            } else {\n                                firstRule = modified;\n                            }\n                        }\n\n                        if (modified) {\n                            this.normalize({ date: date, rule: rule, day: day, idx: idx });\n                        }\n                    }\n\n                    if ((interval === 1 || !this.interval(rule, date)) && idx === RULE_NAMES_LENGTH) {\n                        break;\n                    }\n                }\n            },\n\n            interval: function(rule, current) {\n                var start = new Date(rule._startPeriod);\n                var date = new Date(current);\n                var hours = current.getHours();\n                var weekStart = rule.weekStart;\n                var interval = rule.interval;\n                var frequency = rule.freq;\n                var modified = false;\n                var excess = 0;\n                var month = 0;\n                var day = 1;\n                var diff;\n\n                var startTimeHours;\n\n                if (frequency === \"hourly\") {\n                    diff = date.getTimezoneOffset() - start.getTimezoneOffset();\n                    startTimeHours = rule._startTime.getHours();\n\n                    date = date.getTime();\n                    if (hours !== startTimeHours) {\n                        date += (startTimeHours - hours) * kendoDate.MS_PER_HOUR;\n                    }\n                    date -= start;\n\n                    if (diff) {\n                        date -= diff * kendoDate.MS_PER_MINUTE;\n                    }\n\n                    diff = Math.floor(date / kendoDate.MS_PER_HOUR);\n                    excess = intervalExcess(diff, interval);\n\n                    if (excess !== 0) {\n                        this._hour(current, rule, excess);\n                        modified = true;\n                    }\n                } else if (frequency === \"daily\") {\n                    kendoDate.setTime(date, -start, true);\n\n                    diff = Math.round(date / kendoDate.MS_PER_DAY);\n                    excess = intervalExcess(diff, interval);\n\n                    if (excess !== 0) {\n                        this._date(current, rule, excess);\n                        modified = true;\n                    }\n\n                } else if (frequency === \"weekly\") {\n                    excess = this._getNumberOfWeeksBetweenDates(start, current);\n\n                    var normalizedCurrentIndex = normalizeDayIndex(current.getDay(), weekStart);\n                    var normalizedStartIndex = normalizeDayIndex(start.getDay(), weekStart);\n\n                    if (normalizedCurrentIndex < normalizedStartIndex) {\n                        excess += 1;\n                    }\n\n                    excess = intervalExcess(excess, interval);\n                    if (excess !== 0) {\n                        kendoDate.setDayOfWeek(current, rule.weekStart, -1);\n\n                        current.setDate(current.getDate() + (excess * 7));\n                        adjustDST(current, hours);\n\n                        modified = true;\n                    }\n                } else if (frequency === \"monthly\") {\n                    diff = current.getFullYear() - start.getFullYear();\n                    diff = current.getMonth() - start.getMonth() + (diff * 12);\n\n                    excess = intervalExcess(diff, interval);\n\n                    if (excess !== 0) {\n                        day = rule._hasRuleValue ? 1 : current.getDate();\n\n                        current.setFullYear(current.getFullYear(), current.getMonth() + excess, day);\n                        adjustDST(current, hours);\n\n                        modified = true;\n                    }\n                } else if (frequency === \"yearly\") {\n                    diff = current.getFullYear() - start.getFullYear();\n                    excess = intervalExcess(diff, interval);\n\n                    if (!rule.months) {\n                        month = current.getMonth();\n                    }\n\n                    if (!rule.yearDays && !rule.monthDays && !rule.weekDays) {\n                        day = current.getDate();\n                    }\n\n                    if (excess !== 0) {\n                        current.setFullYear(current.getFullYear() + excess, month, day);\n                        adjustDST(current, hours);\n\n                        modified = true;\n                    }\n                }\n\n                return modified;\n            },\n\n            _getNumberOfWeeksBetweenDates: function(first, second) {\n                 var weeks = (second - first) / 604800000;\n                 var exactWeeks = Math.floor(weeks);\n\n                //this is happening when weeks pass DST change\n                if (weeks - exactWeeks > 0.99) {\n                    exactWeeks = Math.round(weeks);\n                }\n                return exactWeeks;\n            },\n\n            _hour: function(date, rule, interval) {\n                var startTime = rule._startTime,\n                    hours = startTime.getHours();\n\n                if (interval) {\n                    hours += interval;\n                }\n\n                date.setHours(hours);\n\n                hours = hours % 24;\n                startTime.setHours(hours);\n                adjustDST(date, hours);\n            },\n\n            _date: function(date, rule, interval) {\n                var hours = date.getHours();\n\n                date.setDate(date.getDate() + interval);\n                if (!adjustDST(date, hours)) {\n                    this._hour(date, rule);\n                }\n            }\n        }),\n        HourlyFrequency = BaseFrequency.extend({\n            next: function(date, rule) {\n                if (!BaseFrequency.fn.next(date, rule)) {\n                    this._hour(date, rule, 1);\n                }\n            },\n\n            normalize: function(options) {\n                var rule = options.rule;\n\n                if (options.idx === 4) {\n                    rule._startTime.setHours(0);\n                    this._hour(options.date, rule);\n                }\n            }\n        }),\n        DailyFrequency = BaseFrequency.extend({\n            next: function(date, rule) {\n                if (!BaseFrequency.fn.next(date, rule)) {\n                    this[rule.hours ? \"_hour\" : \"_date\"](date, rule, 1);\n                }\n            }\n        }),\n        WeeklyFrequency = DailyFrequency.extend({\n            setup: function(rule, eventStartDate) {\n                if (!rule.weekDays) {\n                    rule.weekDays = [{\n                        day: eventStartDate.getDay(),\n                        offset: 0\n                    }];\n                }\n            }\n        }),\n        MonthlyFrequency = BaseFrequency.extend({\n            next: function(date, rule) {\n                var day, hours;\n                if (!BaseFrequency.fn.next(date, rule)) {\n                    if (rule.hours) {\n                        this._hour(date, rule, 1);\n                    } else if (rule.monthDays || rule.weekDays || rule.yearDays || rule.weeks) {\n                        this._date(date, rule, 1);\n                    } else {\n                        day = date.getDate();\n                        hours = date.getHours();\n\n                        date.setMonth(date.getMonth() + 1);\n                        adjustDST(date, hours);\n\n                        while (date.getDate() !== day) {\n                            date.setDate(day);\n                            adjustDST(date, hours);\n                        }\n\n                        this._hour(date, rule);\n                    }\n                }\n            },\n            normalize: function(options) {\n                var rule = options.rule,\n                    date = options.date,\n                    hours = date.getHours();\n\n                if (options.idx === 0 && !rule.monthDays && !rule.weekDays) {\n                    date.setDate(options.day);\n                    adjustDST(date, hours);\n                } else {\n                    BaseFrequency.fn.normalize(options);\n                }\n            },\n            setup: function(rule, eventStartDate, date) {\n                if (!rule.monthDays && !rule.weekDays) {\n                    date.setDate(eventStartDate.getDate());\n                }\n            }\n        }),\n        YearlyFrequency = MonthlyFrequency.extend({\n            next: function(date, rule) {\n                var day,\n                    hours = date.getHours();\n\n                if (!BaseFrequency.fn.next(date, rule)) {\n                    if (rule.hours) {\n                        this._hour(date, rule, 1);\n                    } else if (rule.monthDays || rule.weekDays || rule.yearDays || rule.weeks) {\n                        this._date(date, rule, 1);\n                    } else if (rule.months) {\n                        day = date.getDate();\n\n                        date.setMonth(date.getMonth() + 1);\n                        adjustDST(date, hours);\n\n                        while (date.getDate() !== day) {\n                            date.setDate(day);\n                            adjustDST(date, hours);\n                        }\n\n                        this._hour(date, rule);\n                    } else {\n                        date.setFullYear(date.getFullYear() + 1);\n                        adjustDST(date, hours);\n\n                        this._hour(date, rule);\n                    }\n                }\n            },\n            setup: function() {}\n        }),\n        frequencies = {\n            \"hourly\": new HourlyFrequency(),\n            \"daily\": new DailyFrequency(),\n            \"weekly\": new WeeklyFrequency(),\n            \"monthly\": new MonthlyFrequency(),\n            \"yearly\": new YearlyFrequency()\n        },\n        CLICK = \"click\",\n        CHANGE = \"change\";\n\n    function intervalExcess(diff, interval) {\n        var excess;\n        if (diff !== 0 && diff < interval) {\n            excess = interval - diff;\n        } else {\n            excess = diff % interval;\n            if (excess) {\n                excess = interval - excess;\n            }\n        }\n\n        return excess;\n    }\n\n    function dayInYear(date) {\n        var month = date.getMonth();\n        var days = leapYear(date) ? DAYS_IN_LEAPYEAR[month] : DAYS_IN_YEAR[month];\n\n        return days + date.getDate();\n    }\n\n    function weekInYear(date, weekStart) {\n        var year, days;\n\n        date = new Date(date.getFullYear(), date.getMonth(), date.getDate());\n        adjustDST(date, 0);\n\n        year = date.getFullYear();\n\n        if (weekStart !== undefined) {\n            setDayOfWeek(date, weekStart, -1);\n            date.setDate(date.getDate() + 4);\n        } else {\n            date.setDate(date.getDate() + (4 - (date.getDay() || 7)));\n        }\n\n        adjustDST(date, 0);\n        days = Math.floor((date.getTime() - new Date(year, 0, 1, -6)) / 86400000);\n\n        return 1 + Math.floor(days / 7);\n    }\n\n    function weekInMonth(date, weekStart) {\n        var firstWeekDay = firstDayOfMonth(date).getDay();\n        var firstWeekLength = 7 - (firstWeekDay + 7 - (weekStart || 7)) || 7;\n\n        if (firstWeekLength < 0) {\n            firstWeekLength += 7;\n        }\n\n        return Math.ceil((date.getDate() - firstWeekLength) / 7) + 1;\n    }\n\n    function normalizeDayIndex(weekDay, weekStart) {\n        return weekDay + (weekDay < weekStart ? 7 : 0);\n    }\n\n    function normalizeOffset(date, rule, weekStart) {\n        var offset = rule.offset;\n\n        if (!offset) {\n            return weekInMonth(date, weekStart);\n        }\n\n        var lastDate = new Date(date.getFullYear(), date.getMonth() + 1, 0);\n        var weeksInMonth = weekInMonth(lastDate, weekStart);\n\n        var day = normalizeDayIndex(rule.day, weekStart);\n\n        var skipFirst = day < normalizeDayIndex(new Date(date.getFullYear(), date.getMonth(), 1).getDay(), weekStart);\n        var skipLast = day > normalizeDayIndex(lastDate.getDay(), weekStart);\n\n        if (offset < 0) {\n            offset = weeksInMonth + (offset + 1 - (skipLast ? 1 : 0));\n        } else if (skipFirst) {\n            offset += 1;\n        }\n\n        weeksInMonth -= (skipLast ? 1 : 0);\n\n        if (offset < (skipFirst ? 1 : 0) || offset > weeksInMonth) {\n            return null;\n        }\n\n        return offset;\n    }\n\n    function numberOfWeeks(date, weekStart) {\n        return weekInMonth(new Date(date.getFullYear(), date.getMonth() + 1, 0), weekStart);\n    }\n\n    function isInWeek(date, rule, weekStart) {\n        return weekInMonth(date, weekStart) === normalizeOffset(date, rule, weekStart);\n    }\n\n    function ruleWeekValues(weekDays, date, weekStart) {\n        var currentDay = normalizeDayIndex(date.getDay(), weekStart);\n        var length = weekDays.length;\n        var ruleWeekOffset;\n        var weekDay, day;\n        var weekNumber;\n        var result = [];\n        var idx = 0;\n\n        for (;idx < length; idx++) {\n            weekDay = weekDays[idx];\n\n            weekNumber = weekInMonth(date, weekStart);\n            ruleWeekOffset = normalizeOffset(date, weekDay, weekStart);\n\n            if (ruleWeekOffset === null) {\n                continue;\n            }\n\n            if (weekNumber < ruleWeekOffset) {\n                result.push(weekDay);\n            } else if (weekNumber === ruleWeekOffset) {\n                day = normalizeDayIndex(weekDay.day, weekStart);\n\n                if (currentDay < day) {\n                    result.push(weekDay);\n                } else if (currentDay === day) {\n                    return null;\n                }\n            }\n        }\n\n        return result;\n    }\n\n    function ruleValues(rules, value, normalize) {\n        var idx = 0,\n            length = rules.length,\n            availableRules = [],\n            ruleValue;\n\n        for (; idx < length; idx++) {\n            ruleValue = rules[idx];\n\n            if (normalize) {\n                ruleValue = normalize(ruleValue);\n            }\n\n            if (value === ruleValue) {\n                return null;\n            } else if (value < ruleValue) {\n                availableRules.push(ruleValue);\n            }\n        }\n\n        return availableRules;\n    }\n\n    function parseArray(list, range) {\n        var idx = 0,\n            length = list.length,\n            value;\n\n        for (; idx < length; idx++) {\n            value = parseInt(list[idx], 10);\n            if (isNaN(value) || value < range.start || value > range.end || (value === 0 && range.start < 0)) {\n                return null;\n            }\n\n            list[idx] = value;\n        }\n\n        return list.sort(numberSortPredicate);\n    }\n\n    function parseWeekDayList(list) {\n        var idx = 0, length = list.length,\n            value, valueLength, day;\n\n        for (; idx < length; idx++) {\n            value = list[idx];\n            valueLength = value.length;\n            day = value.substring(valueLength - 2).toUpperCase();\n\n            day = WEEK_DAYS_IDX[day];\n            if (day === undefined) {\n                return null;\n            }\n\n            list[idx] = {\n                offset: parseInt(value.substring(0, valueLength - 2), 10) || 0,\n                day: day\n            };\n        }\n        return list;\n    }\n\n    function serializeWeekDayList(list) {\n        var idx = 0, length = list.length,\n            value, valueString, result = [];\n\n        for (; idx < length; idx++) {\n            value = list[idx];\n            if (typeof value === \"string\") {\n                valueString = value;\n            } else {\n                valueString = \"\" + WEEK_DAYS[value.day];\n\n                if (value.offset) {\n                    valueString = value.offset + valueString;\n                }\n            }\n\n            result.push(valueString);\n        }\n        return result.toString();\n    }\n\n    function getMonthLength(date) {\n        var month = date.getMonth();\n\n        if (month === 1) {\n            if (new Date(date.getFullYear(), 1, 29).getMonth() === 1) {\n                return 29;\n            }\n            return 28;\n        }\n        return MONTHS[month];\n    }\n\n    function leapYear(year) {\n        year = year.getFullYear();\n        return ((year % 4 === 0) && (year % 100 !== 0)) || (year % 400 === 0);\n    }\n\n    function numberSortPredicate(a, b) {\n        return a - b;\n    }\n\n    function parseExceptions(exceptions, zone) {\n        var idx = 0, length, date,\n            dates = [];\n\n        if (exceptions) {\n            exceptions = exceptions.split(exceptions.indexOf(\";\") !== -1 ? \";\" : \",\");\n            length = exceptions.length;\n\n            for (; idx < length; idx++) {\n                date = parseUTCDate(exceptions[idx], zone);\n\n                if (date) {\n                    dates.push(date);\n                }\n            }\n        }\n\n        return dates;\n    }\n\n    function isException(exceptions, date, zone) {\n        var dates = Array.isArray(exceptions) ? exceptions : parseExceptions(exceptions, zone),\n            dateTime = date.getTime() - date.getMilliseconds(),\n            idx = 0, length = dates.length;\n\n        for (; idx < length; idx++) {\n            if (dates[idx].getTime() === dateTime) {\n                return true;\n            }\n        }\n\n        return false;\n    }\n\n    function toExceptionString(dates, zone) {\n        var idx = 0;\n        var length;\n        var date;\n        var result = [].concat(dates);\n\n        for (length = result.length; idx < length; idx++) {\n            date = result[idx];\n            date = kendo.timezone.convert(date, zone || date.getTimezoneOffset(), \"Etc/UTC\");\n            result[idx] = kendo.toString(date, RECURRENCE_DATE_FORMAT);\n        }\n\n        return result.join(\",\");\n    }\n\n    function startPeriodByFreq(start, rule) {\n        var date = new Date(start);\n\n        switch (rule.freq) {\n            case \"yearly\":\n                date.setFullYear(date.getFullYear(), 0, 1);\n                break;\n\n            case \"monthly\":\n                date.setFullYear(date.getFullYear(), date.getMonth(), 1);\n                break;\n\n            case \"weekly\":\n                setDayOfWeek(date, rule.weekStart, -1);\n                break;\n\n            default:\n                break;\n        }\n\n        if (rule.hours) {\n            date.setHours(0);\n        }\n\n        if (rule.minutes) {\n            date.setMinutes(0);\n        }\n\n        if (rule.seconds) {\n            date.setSeconds(0);\n        }\n\n        return date;\n    }\n\n    function endPeriodByFreq(start, rule) {\n        var date = new Date(start);\n\n        switch (rule.freq) {\n            case \"yearly\":\n                date.setFullYear(date.getFullYear(), 11, 31);\n                break;\n\n            case \"monthly\":\n                date.setFullYear(date.getFullYear(), date.getMonth() + 1, 0);\n                break;\n\n            case \"weekly\":\n                setDayOfWeek(date, rule.weekStart, -1);\n                date.setDate(date.getDate() + 6);\n                break;\n\n            default:\n                break;\n        }\n\n        if (rule.hours) {\n            date.setHours(23);\n        }\n\n        if (rule.minutes) {\n            date.setMinutes(59);\n        }\n\n        if (rule.seconds) {\n            date.setSeconds(59);\n        }\n\n        return date;\n    }\n\n    function eventsByPosition(periodEvents, start, positions, until) {\n        var periodEventsLength = periodEvents.length;\n        var events = [];\n        var position;\n        var event;\n        var inPeriod;\n\n        for (var idx = 0, length = positions.length; idx < length; idx++) {\n            position = positions[idx];\n\n            if (position < 0) {\n                position = periodEventsLength + position;\n            } else {\n                position -= 1; //convert to zero based index\n            }\n\n            event = periodEvents[position];\n            inPeriod = until ? event.start < until : true;\n\n            if (event && event.start >= start && inPeriod) {\n                events.push(event);\n            }\n        }\n\n        return events;\n    }\n\n    function removeExceptionDates(periodEvents, exceptionDates, zone) {\n        var events = [];\n        var event;\n\n        for (var idx = 0; idx < periodEvents.length; idx++) {\n            event = periodEvents[idx];\n            if (!isException(exceptionDates, event.start, zone)) {\n                events.push(event);\n            }\n        }\n\n        return events;\n    }\n\n    function expand(event, start, end, zone) {\n        var rule,\n            startTime, endTime, endDate,\n            hours, minutes, seconds,\n            durationMS, startPeriod, inPeriod,\n            ruleStart, ruleEnd,\n            useEventStart, freqName,\n            exceptionDates,\n            eventStartTime,\n            eventStartMS,\n            eventStart,\n            count, freq,\n            positions,\n            currentIdx,\n            periodEvents,\n            events = [],\n            shiftedStart,\n            shiftedEnd,\n            shiftedStartTime,\n            shifterEndTime;\n\n        rule = parseRule(event.recurrenceRule, zone, { // offsets argument\n            start: (getZoneOffset(event.start, zone) - getZoneOffset(event.start, event.startTimezone || zone)) * kendo.date.MS_PER_MINUTE,\n            end: (getZoneOffset(event.end, zone) - getZoneOffset(event.end, event.endTimezone || zone)) * kendo.date.MS_PER_MINUTE\n        });\n\n        if (!rule) {\n            return [event];\n        }\n\n        positions = rule.positions;\n        currentIdx = positions ? 0 : 1;\n\n        ruleStart = rule.start;\n        ruleEnd = rule.end;\n\n        if (ruleStart || ruleEnd) {\n            event = event.clone({\n                start: ruleStart ? new Date(ruleStart.value[0]) : undefined,\n                end: ruleEnd ? new Date(ruleEnd.value[0]) : undefined\n            });\n        }\n\n        eventStart = event.start;\n        eventStartMS = eventStart.getTime();\n        eventStartTime = getMilliseconds(eventStart);\n\n        exceptionDates = parseExceptions(event.recurrenceException, zone);\n\n        if (!exceptionDates[0] && rule.exdates) {\n            exceptionDates = rule.exdates.value;\n            event.set(\"recurrenceException\", toExceptionString(exceptionDates, zone));\n        }\n\n        startPeriod = start = new Date(start);\n        end = new Date(end);\n\n        freqName = rule.freq;\n        freq = frequencies[freqName];\n        count = rule.count;\n\n        if (rule.until && rule.until < end) {\n            end = new Date(rule.until);\n        }\n\n        useEventStart = freqName === \"yearly\" || freqName === \"monthly\" || freqName === \"weekly\";\n\n        if (start < eventStartMS || count || rule.interval > 1 || useEventStart ||\n             ((freqName === \"daily\" || freqName === \"hourly\") && !rule.seconds)) {\n                    start = new Date(eventStartMS);\n        } else {\n            hours = start.getHours();\n            minutes = start.getMinutes();\n            seconds = start.getSeconds();\n\n            if (!rule.hours) {\n                hours = eventStart.getHours();\n            }\n\n            if (!rule.minutes) {\n                minutes = eventStart.getMinutes();\n            }\n\n            if (!rule.seconds) {\n                seconds = eventStart.getSeconds();\n            }\n\n            start.setHours(hours, minutes, seconds, eventStart.getMilliseconds());\n        }\n\n        rule._startPeriod = new Date(start);\n\n        if (positions) {\n            start = startPeriodByFreq(start, rule);\n            end = endPeriodByFreq(end, rule);\n\n            var diff = getMilliseconds(end) - getMilliseconds(start);\n            if (diff < 0) {\n                hours = start.getHours();\n                end.setHours(hours, start.getMinutes(), start.getSeconds(), start.getMilliseconds());\n                kendoDate.adjustDST(end, hours);\n            }\n\n            rule._startPeriod = new Date(start);\n            rule._endPeriod = endPeriodByFreq(start, rule);\n        }\n\n        durationMS = event.duration();\n        var allDayCompensation = event.isAllDay ? 86400000 : 0;\n        rule._startTime = startTime = kendoDate.toInvariantTime(start);\n\n        if (freq.setup) {\n            freq.setup(rule, eventStart, start);\n        }\n\n        freq.limit(start, end, rule);\n\n        while (start <= end) {\n            endDate = new Date(start);\n            setTime(endDate, durationMS);\n            var inPeriodCheckEndDate = new Date(start);\n            setTime(inPeriodCheckEndDate, durationMS + allDayCompensation);\n\n            inPeriod = start >= startPeriod || inPeriodCheckEndDate > startPeriod;\n\n            if (inPeriod && !isException(exceptionDates, start, zone) || positions) {\n                startTime = kendoDate.toUtcTime(kendoDate.getDate(start)) + getMilliseconds(rule._startTime);\n                endTime = startTime + durationMS;\n\n                if (eventStartMS !== start.getTime() || eventStartTime !== getMilliseconds(rule._startTime)) {\n                    var startZone = event.startTimezone || event.endTimezone;\n                    var endZone = event.endTimezone || event.startTimezone;\n\n                    if (!event.isAllDay) {\n                        if ((zone && startZone) || (!zone && !startZone)) {\n                            var startOffsetDiff = getZoneOffset(start, zone) - getZoneOffset(event.start, zone);\n                            var endOffsetDiff = getZoneOffset(endDate, zone) - getZoneOffset(event.end, zone);\n                            var startTZOffsetDiff = getZoneOffset(start, startZone) - getZoneOffset(event.start, startZone);\n                            var endTZOffsetDiff = getZoneOffset(endDate, endZone) - getZoneOffset(event.end, endZone);\n\n                            if (startOffsetDiff !== startTZOffsetDiff) {\n                                var offsetTicksStart = (startOffsetDiff - startTZOffsetDiff) * 60000;\n                                shiftedStart = new Date(start.getTime() - offsetTicksStart);\n                                shiftedStartTime = startTime - offsetTicksStart;\n                            }\n\n                            if (endOffsetDiff !== endTZOffsetDiff) {\n                                var offsetTicksEnd = (endOffsetDiff - endTZOffsetDiff) * 60000;\n                                shiftedEnd = new Date(endDate.getTime() - offsetTicksEnd);\n                                shifterEndTime = endTime - offsetTicksEnd;\n                            }\n                        }\n                    }\n\n\n                    events.push(event.toOccurrence({\n                        start: shiftedStart || new Date(start),\n                        end: shiftedEnd || endDate,\n                        _startTime: shiftedStartTime || startTime,\n                        _endTime: shifterEndTime || endTime\n                    }));\n\n                    shiftedStart = shiftedEnd = shiftedStartTime = shifterEndTime = null;\n                } else {\n                    event._startTime = startTime;\n                    event._endTime = endTime;\n                    events.push(event);\n                }\n            }\n\n            if (positions) {\n                freq.next(start, rule);\n                freq.limit(start, end, rule);\n\n                if (start > rule._endPeriod) {\n                    periodEvents = eventsByPosition(events.slice(currentIdx), eventStart, positions, rule.until);\n                    periodEvents = removeExceptionDates(periodEvents, exceptionDates, zone);\n                    events = events.slice(0, currentIdx).concat(periodEvents);\n\n                    rule._endPeriod = endPeriodByFreq(start, rule);\n\n                    currentIdx = events.length;\n                }\n\n                if (count && count === currentIdx) {\n                    break;\n                }\n\n            } else {\n                if (count && count === currentIdx) {\n                    break;\n                }\n\n                currentIdx += 1;\n\n                var isMissingDSTHour = isDSTMissingHour(start);\n                freq.next(start, rule);\n\n                if (isMissingDSTHour && rule.freq !== \"hourly\" && kendoDate.toInvariantTime(event.start).getTime() !== kendoDate.toInvariantTime(start).getTime()) {\n                    rule._startTime = startTime = new Date(start.getTime() - 3600000);\n                }\n\n                freq.limit(start, end, rule);\n            }\n        }\n\n        return events;\n    }\n\n    function isDSTMissingHour(date) {\n        var dateOffset = date.getTimezoneOffset();\n        var dateMinusHour = new Date(date.getTime() - 3600000);\n        var dateMinusHourOffset = dateMinusHour.getTimezoneOffset();\n\n        return dateOffset < dateMinusHourOffset;\n    }\n\n    function getZoneOffset(date, zone) {\n        return zone ? kendo.timezone.offset(date, zone) : date.getTimezoneOffset();\n    }\n\n    function parseUTCDate(value, zone) {\n        value = kendo.parseDate(value, DATE_FORMATS); //Parse UTC to local time\n\n        if (value && zone) {\n            value = timezone.apply(value, zone);\n        }\n\n        return value;\n    }\n\n    function parseDateRule(dateRule, zone) {\n        var pairs = dateRule.split(\";\");\n        var pair;\n        var property;\n        var value;\n        var tzid;\n        var valueIdx, valueLength;\n\n        for (var idx = 0, length = pairs.length; idx < length; idx++) {\n            pair = pairs[idx].split(\":\");\n            property = pair[0];\n            value = pair[1];\n\n            if (property.indexOf(\"TZID\") !== -1) {\n                tzid = property.substring(property.indexOf(\"TZID\")).split(\"=\")[1];\n            }\n\n            if (value) {\n                value = value.split(\",\");\n\n                for (valueIdx = 0, valueLength = value.length; valueIdx < valueLength; valueIdx++) {\n                    value[valueIdx] = parseUTCDate(value[valueIdx], tzid || zone);\n                }\n            }\n        }\n\n        if (value) {\n            return {\n                value: value,\n                tzid: tzid\n            };\n        }\n    }\n\n    function parseRule(recur, zone, offsets) {\n        var instance = {};\n        var splits, value;\n        var idx = 0, length;\n        var ruleValue = false;\n        var rule, part, parts;\n        var property, weekStart, weekDays;\n        var predicate = function(a, b) {\n            var day1 = a.day,\n                day2 = b.day;\n\n            if (day1 < weekStart) {\n               day1 += 7;\n            }\n\n            if (day2 < weekStart) {\n                day2 += 7;\n            }\n\n            return day1 - day2;\n        };\n\n        if (!recur) {\n            return null;\n        }\n\n        parts = recur.split(\"\\n\");\n\n        if (!parts[1] && (recur.indexOf(\"DTSTART\") !== -1 || recur.indexOf(\"DTEND\") !== -1 || recur.indexOf(\"EXDATE\") !== -1)) {\n            parts = recur.split(\" \");\n        }\n\n        for (idx = 0, length = parts.length; idx < length; idx++) {\n            part = kendo.trim(parts[idx]);\n\n            if (part.indexOf(\"DTSTART\") !== -1) {\n                instance.start = parseDateRule(part, zone);\n            } else if (part.indexOf(\"DTEND\") !== -1) {\n                instance.end = parseDateRule(part, zone);\n            } else if (part.indexOf(\"EXDATE\") !== -1) {\n                instance.exdates = parseDateRule(part, zone);\n            } else if (part.indexOf(\"RRULE\") !== -1) {\n                rule = part.substring(6);\n            } else if (kendo.trim(part)) {\n                rule = part;\n            }\n        }\n\n        rule = rule.split(\";\");\n\n        for (idx = 0, length = rule.length; idx < length; idx++) {\n            property = rule[idx];\n            splits = property.split(\"=\");\n            value = kendo.trim(splits[1]).split(\",\");\n\n            switch (kendo.trim(splits[0]).toUpperCase()) {\n                case \"FREQ\":\n                    instance.freq = value[0].toLowerCase();\n                    break;\n                case \"UNTIL\":\n                    instance.until = parseUTCDate(value[0], zone);\n                    break;\n                case \"COUNT\":\n                    instance.count = parseInt(value[0], 10);\n                    break;\n                case \"INTERVAL\":\n                    instance.interval = parseInt(value[0], 10);\n                    break;\n                case \"BYSECOND\":\n                    instance.seconds = parseArray(value, { start: 0, end: 60 });\n                    ruleValue = true;\n                    break;\n                case \"BYMINUTE\":\n                    instance.minutes = parseArray(value, { start: 0, end: 59 });\n                    ruleValue = true;\n                    break;\n                case \"BYHOUR\":\n                    instance.hours = parseArray(value, { start: 0, end: 23 });\n                    ruleValue = true;\n                    break;\n                case \"BYMONTHDAY\":\n                    instance.monthDays = parseArray(value, { start: -31, end: 31 });\n                    ruleValue = true;\n                    break;\n                case \"BYYEARDAY\":\n                    instance.yearDays = parseArray(value, { start: -366, end: 366 });\n                    ruleValue = true;\n                    break;\n                case \"BYMONTH\":\n                    instance.months = parseArray(value, { start: 1, end: 12 });\n                    ruleValue = true;\n                    break;\n                case \"BYDAY\":\n                    instance.weekDays = weekDays = parseWeekDayList(value);\n                    ruleValue = true;\n                    break;\n                case \"BYWEEKNO\":\n                    instance.weeks = parseArray(value, { start: -53, end: 53 });\n                    ruleValue = true;\n                    break;\n                case \"BYSETPOS\":\n                    instance.positions = parseArray(value, { start: -366, end: 366 });\n                    break;\n                case \"WKST\":\n                    instance.weekStart = weekStart = WEEK_DAYS_IDX[value[0]];\n                    break;\n            }\n        }\n\n        if (instance.freq === undefined || (instance.count !== undefined && instance.until)) {\n            return null;\n        }\n\n        if (!instance.interval) {\n            instance.interval = 1;\n        }\n\n        if (weekStart === undefined) {\n            instance.weekStart = weekStart = kendo.culture().calendar.firstDay;\n        }\n\n        if (weekDays) {\n            instance.weekDays = weekDays.sort(predicate);\n        }\n\n        if (instance.positions && !ruleValue) {\n            instance.positions = null;\n        }\n\n        instance._hasRuleValue = ruleValue;\n        instance.offsets = offsets;\n\n        return instance;\n    }\n\n    function serializeDateRule(dateRule, zone) {\n        var value = dateRule.value;\n        var tzid = dateRule.tzid || \"\";\n        var length = value.length;\n        var idx = 0;\n        var val;\n\n        for (; idx < length; idx++) {\n            val = value[idx];\n            val = timezone.convert(val, tzid || zone || val.getTimezoneOffset(), \"Etc/UTC\");\n            value[idx] = kendo.toString(val, \"yyyyMMddTHHmmssZ\");\n        }\n\n        if (tzid) {\n            tzid = \";TZID=\" + tzid;\n        }\n\n        return tzid + \":\" + value.join(\",\") + \" \";\n    }\n\n    function serialize(rule, zone) {\n        var weekStart = rule.weekStart;\n        var ruleString = \"FREQ=\" + rule.freq.toUpperCase();\n        var exdates = rule.exdates || \"\";\n        var start = rule.start || \"\";\n        var end = rule.end || \"\";\n        var until = rule.until;\n\n        if (weekStart === undefined) {\n            weekStart = kendo.culture().calendar.firstDay;\n        }\n\n        if (rule.interval > 1) {\n            ruleString += \";INTERVAL=\" + rule.interval;\n        }\n\n        if (rule.count) {\n            ruleString += \";COUNT=\" + rule.count;\n        }\n\n        if (until) {\n            until = timezone.convert(until, zone || until.getTimezoneOffset(), \"Etc/UTC\");\n\n            ruleString += \";UNTIL=\" + kendo.toString(until, \"yyyyMMddTHHmmssZ\");\n        }\n\n        if (rule.months) {\n            ruleString += \";BYMONTH=\" + rule.months;\n        }\n\n        if (rule.weeks) {\n            ruleString += \";BYWEEKNO=\" + rule.weeks;\n        }\n\n        if (rule.yearDays) {\n            ruleString += \";BYYEARDAY=\" + rule.yearDays;\n        }\n\n        if (rule.monthDays) {\n            ruleString += \";BYMONTHDAY=\" + rule.monthDays;\n        }\n\n        if (rule.weekDays) {\n            ruleString += \";BYDAY=\" + serializeWeekDayList(rule.weekDays);\n        }\n\n        if (rule.hours) {\n            ruleString += \";BYHOUR=\" + rule.hours;\n        }\n\n        if (rule.minutes) {\n            ruleString += \";BYMINUTE=\" + rule.minutes;\n        }\n\n        if (rule.seconds) {\n            ruleString += \";BYSECOND=\" + rule.seconds;\n        }\n\n        if (rule.positions) {\n            ruleString += \";BYSETPOS=\" + rule.positions;\n        }\n\n        if (weekStart !== undefined) {\n            ruleString += \";WKST=\" + WEEK_DAYS[weekStart];\n        }\n\n        if (start) {\n            start = \"DTSTART\" + serializeDateRule(start, zone);\n        }\n\n        if (end) {\n            end = \"DTEND\" + serializeDateRule(end, zone);\n        }\n\n        if (exdates) {\n            exdates = \"EXDATE\" + serializeDateRule(exdates, zone);\n        }\n\n        if (start || end || exdates) {\n            ruleString = start + end + exdates + \"RRULE:\" + ruleString;\n        }\n\n        return ruleString;\n    }\n\n    kendo.recurrence = {\n        rule: {\n            parse: parseRule,\n            serialize: serialize\n        },\n        expand: expand,\n        dayInYear: dayInYear,\n        weekInYear: weekInYear,\n        weekInMonth: weekInMonth,\n        numberOfWeeks: numberOfWeeks,\n        isException: isException,\n        toExceptionString: toExceptionString\n    };\n\n    var RECURRENCE_VIEW_TEMPLATE = kendo.template(({ frequency, messages, end }) =>\n       (frequency !== \"never\" ?\n            '<div class=\"k-form-field\">' +\n                `<label id=\"recur_interval_label\" class=\"k-label k-form-label\" for=\"recur_interval\">${encode(messages.repeatEvery)}</label>` +\n                '<div class=\"k-form-field-wrap\">' +\n                    `<input id=\"recur_interval\" ref-recur-interval title=\"${encode(messages.repeatEvery)} ${encode(messages.interval)}\" aria-labelledby=\"recur_interval_label\">${encode(messages.interval)}` +\n                '</div>' +\n            '</div>' : ''\n       ) +\n       (frequency === \"weekly\" ?\n            '<div class=\"k-form-field\">' +\n                `<label class=\"k-label k-form-label\">${encode(messages.repeatOn)}</label>` +\n                '<div class=\"k-form-field-wrap\">' +\n                    `<div class=\"k-button-group-stretched k-recur-weekday-buttons\" title=\"${encode(messages.repeatOn)}\"></div></div>` +\n                '</div>' +\n            '</div>' : ''\n        ) +\n        (frequency === \"monthly\" ?\n            `<div class=\"k-form-field\"><label class=\"k-label k-form-label\">${encode(messages.repeatOn)}</label></div>` +\n                '<div class=\"k-form-field-wrap\">' +\n                    '<ul class=\"k-radio-list\">' +\n                        '<li class=\"k-radio-item\">' +\n                            `<label class=\"k-radio-label\"><input class=\"k-recur-month-radio k-radio\" type=\"radio\" name=\"month\" value=\"monthday\" title=\"${encode(messages.repeatOn)}\" />${encode(messages.date)}:</label>` +\n                            `<input ref-recur-monthday aria-label=\"${encode(messages.date)}\" title=\"${encode(messages.date)}\" />` +\n                        '</li>' +\n                        '<li class=\"k-radio-item\">' +\n                            `<input class=\"k-recur-month-radio k-radio\" type=\"radio\" name=\"month\" value=\"weekday\" aria-label=\"${encode(messages.repeatOn)} ${encode(messages.day)}\" title=\"${encode(messages.repeatOn)} ${encode(messages.day)}\" />` +\n                            `<input class=\"k-recur-weekday-offset\" title=\"${encode(messages.repeatOn)}\" ${kendo.attr(\"style-width\")}=\"8em\" />` +\n                            `<input class=\"k-recur-weekday\" title=\"${encode(messages.day)}\" ${kendo.attr(\"style-width\")}=\"8em\" />` +\n                        '</li>' +\n                    '</ul>' +\n                '</div>' +\n            '</div>' : ''\n        ) +\n       (frequency === \"yearly\" ?\n            `<div class=\"k-form-field\"><label class=\"k-label k-form-label\">${encode(messages.repeatOn)}</label>` +\n                '<div class=\"k-form-field-wrap\">' +\n                    '<ul class=\"k-radio-list\">' +\n                        '<li class=\"k-radio-item\">' +\n                            `<input class=\"k-recur-year-radio k-radio\" type=\"radio\" name=\"year\" value=\"monthday\" title=\"${encode(messages.repeatOn)} ${encode(messages.month)}\" />` +\n                            `<input class=\"k-recur-month\" aria-label=\"${encode(messages.month)}\" title=\"${encode(messages.month)}\" ${kendo.attr(\"style-width\")}=\"8em\" />` +\n                            `<input ref-recur-monthday aria-label=\"${encode(messages.date)}\" title=\"${encode(messages.date)}\" />` +\n                        '</li>' +\n                        '<li class=\"k-radio-item\">' +\n                            `<input class=\"k-recur-year-radio k-radio\" type=\"radio\" name=\"year\" value=\"weekday\" title=\"${encode(messages.repeatOn)} ${encode(messages.day)}\" />` +\n                            `<input class=\"k-recur-weekday-offset\" title=\"${encode(messages.repeatOn)}\" ${kendo.attr(\"style-width\")}=\"8em\"/><input class=\"k-recur-weekday\" title=\"${encode(messages.day)}\" ${kendo.attr(\"style-width\")}=\"8em\"/>${encode(messages.of)}<input class=\"k-recur-month\" title=\"${encode(messages.of + messages.month)}\" ${kendo.attr(\"style-width\")}=\"8em\"/>` +\n                        '</li>' +\n                    '</ul>' +\n                '</div>' +\n            '</div>' : ''\n       ) +\n       (frequency !== \"never\" ?\n            `<div class=\"k-form-field\"><label class=\"k-label k-form-label\">${encode(end.label)}</label>` +\n                '<div class=\"k-form-field-wrap\">' +\n                    '<ul class=\"k-radio-list\">' +\n                        '<li class=\"k-radio-item\">' +\n                            `<label class=\"k-radio-label\"><input class=\"k-recur-end-never k-radio\" type=\"radio\" name=\"end\" value=\"never\" title=\"${encode(end.label)}\" />${encode(end.never)}</label>` +\n                        '</li>' +\n                        '<li class=\"k-radio-item\">' +\n                            `<label class=\"k-radio-label\"><input class=\"k-recur-end-count k-radio\" type=\"radio\" name=\"end\" value=\"count\" title=\"${encode(end.label)}\" />${encode(end.after)}</label>` +\n                            `<input ref-recur-count aria-label=\"${encode(end.occurrence)}\" title=\"${encode(end.occurrence)}\" />${encode(end.occurrence)}` +\n                        '</li>' +\n                        '<li class=\"k-radio-item\">' +\n                            `<label class=\"k-radio-label\"><input class=\"k-recur-end-until k-radio\" type=\"radio\" name=\"end\" value=\"until\" title=\"${encode(end.label)}\" />${encode(end.on)}</label>` +\n                            `<input title=\"${encode(end.on)}\" aria-label=\"${encode(end.on)}\" ref-recur-until />` +\n                        '</li>' +\n                    '</ul>' +\n                '</div>' +\n            '</div>' : ''\n       )\n    );\n\n    var DAY_RULE = [\n        { day: 0, offset: 0 },\n        { day: 1, offset: 0 },\n        { day: 2, offset: 0 },\n        { day: 3, offset: 0 },\n        { day: 4, offset: 0 },\n        { day: 5, offset: 0 },\n        { day: 6, offset: 0 }\n    ];\n\n    var WEEKDAY_RULE = [\n        { day: 1, offset: 0 },\n        { day: 2, offset: 0 },\n        { day: 3, offset: 0 },\n        { day: 4, offset: 0 },\n        { day: 5, offset: 0 }\n    ];\n\n    var WEEKEND_RULE = [\n        { day: 0, offset: 0 },\n        { day: 6, offset: 0 }\n    ];\n\n    var BaseRecurrenceEditor = Widget.extend({\n        init: function(element, options) {\n            var start;\n            var that = this;\n            var frequencies = options && options.frequencies;\n\n            Widget.fn.init.call(that, element, options);\n\n            that.wrapper = that.element;\n\n            options = that.options;\n            options.start = start = options.start || kendoDate.today();\n\n            if (frequencies) {\n                options.frequencies = frequencies;\n            }\n\n            if (typeof start === \"string\") {\n                options.start = kendo.parseDate(start, \"yyyyMMddTHHmmss\");\n            }\n\n            if (options.firstWeekDay === null) {\n                options.firstWeekDay = kendo.culture().calendar.firstDay;\n            }\n\n            that._namespace = \".\" + options.name;\n        },\n\n        options: {\n            value: \"\",\n            start: \"\",\n            timezone: \"\",\n            spinners: true,\n            firstWeekDay: null,\n            frequencies: [\n                \"never\",\n                \"daily\",\n                \"weekly\",\n                \"monthly\",\n                \"yearly\"\n            ],\n            mobile: false,\n            messages: {\n                repeat: \"Repeat\",\n                recurrenceEditorTitle: \"Recurrence editor\",\n                frequencies: {\n                    never: \"Never\",\n                    hourly: \"Hourly\",\n                    daily: \"Daily\",\n                    weekly: \"Weekly\",\n                    monthly: \"Monthly\",\n                    yearly: \"Yearly\"\n                },\n                hourly: {\n                    repeatEvery: \"Repeat every: \",\n                    interval: \" hour(s)\"\n                },\n                daily: {\n                    repeatEvery: \"Repeat every: \",\n                    interval: \" day(s)\"\n                },\n                weekly: {\n                    interval: \" week(s)\",\n                    repeatEvery: \"Repeat every: \",\n                    repeatOn: \"Repeat on: \"\n                },\n                monthly: {\n                    repeatEvery: \"Repeat every: \",\n                    repeatOn: \"Repeat on: \",\n                    interval: \" month(s)\",\n                    day: \"Day \",\n                    date: \"Date\"\n                },\n                yearly: {\n                    repeatEvery: \"Repeat every: \",\n                    repeatOn: \"Repeat on: \",\n                    interval: \" year(s)\",\n                    of: \" of \",\n                    month: \"month\",\n                    day: \"day\",\n                    date: \"Date\"\n                },\n                end: {\n                    label: \"End:\",\n                    mobileLabel: \"Ends\",\n                    never: \"Never\",\n                    after: \"After \",\n                    occurrence: \" occurrence(s)\",\n                    on: \"On \"\n                },\n                offsetPositions: {\n                    first: \"first\",\n                    second: \"second\",\n                    third: \"third\",\n                    fourth: \"fourth\",\n                    last: \"last\"\n                },\n                weekdays: {\n                    day: \"day\",\n                    weekday: \"weekday\",\n                    weekend: \"weekend day\"\n                }\n            }\n        },\n\n        events: [\"change\"],\n\n        _initInterval: function() {\n            var that = this,\n                input = that._container.find(\"[ref-recur-interval]\"),\n                rule = that._value;\n\n            that._interval = input.kendoNumericTextBox({\n                    spinners: that.options.spinners,\n                    value: rule.interval || 1,\n                    decimals: 0,\n                    format: \"#\",\n                    min: 1,\n                    change: function() {\n                        rule.interval = this.value();\n                        that._trigger();\n                    }\n                }).data(\"kendoNumericTextBox\");\n\n                that._interval.wrapper.addClass('k-recur-interval');\n        },\n\n        _weekDayButtons: function(firstDay) {\n            var that = this,\n                names = kendo.culture().calendar.days.names,\n                abbreviated = kendo.culture().calendar.days.namesAbbr,\n                repeatOn = that.options.messages.weekly.repeatOn,\n                length = names.length,\n                idx = 0,\n                values = [],\n                items = [];\n\n            for (; idx < length; idx++) {\n                values.push(idx);\n            }\n\n            names = names.slice(firstDay).concat(names.slice(0, firstDay));\n            abbreviated = abbreviated.slice(firstDay).concat(abbreviated.slice(0, firstDay));\n            values = values.slice(firstDay).concat(values.slice(0, firstDay));\n\n            for (idx = 0; idx < length; idx++) {\n                items.push({\n                    text: abbreviated[idx],\n                    attributes: {\n                        \"data-value\": values[idx],\n                        \"aria-label\": repeatOn + \" \" + names[idx]\n                    }\n                });\n            }\n\n            if (that._container.find(\".k-recur-weekday-buttons\").length > 0) {\n                that._weekDayButtonGroup = new ButtonGroup(that._container.find(\".k-recur-weekday-buttons\"), {\n                    items: items,\n                    selection: \"multiple\",\n                    select: function() {\n                        var rule = that._value,\n                            selectedDays = that._weekDayButtonGroup.current();\n\n                        rule.weekDays = selectedDays.map(function(i, day) {\n                            return {\n                                day: Number(day.getAttribute(\"data-value\")),\n                                offset: 0\n                            };\n                        });\n\n                        if (!that.options.mobile) {\n                            that._trigger();\n                        }\n                    }\n                });\n            }\n        },\n\n        _weekDayRule: function(clear) {\n            var that = this;\n            var weekday = (that._weekDay.element || that._weekDay).val();\n            var offset = Number((that._weekDayOffset.element || that._weekDayOffset).val());\n            var weekDays = null;\n            var positions = null;\n\n            if (!clear) {\n                if (weekday === \"day\") {\n                    weekDays = DAY_RULE;\n                    positions = offset;\n                } else if (weekday === \"weekday\") {\n                    weekDays = WEEKDAY_RULE;\n                    positions = offset;\n                } else if (weekday === \"weekend\") {\n                    weekDays = WEEKEND_RULE;\n                    positions = offset;\n                } else {\n                    weekDays = [{\n                        offset: offset,\n                        day: Number(weekday)\n                    }];\n                }\n            }\n\n            that._value.weekDays = weekDays;\n            that._value.positions = positions;\n        },\n\n        _weekDayView: function() {\n            var that = this;\n            var weekDays = that._value.weekDays;\n            var positions = that._value.positions;\n            var weekDayOffsetWidget = that._weekDayOffset;\n            var weekDayOffset;\n            var weekDayValue;\n            var length;\n            var method;\n\n            if (weekDays) {\n                length = weekDays.length;\n\n                if (positions) {\n                    if (length === 7) {\n                        weekDayValue = \"day\";\n                        weekDayOffset = positions;\n                    } else if (length === 5) {\n                        weekDayValue = \"weekday\";\n                        weekDayOffset = positions;\n                    } else if (length === 2) {\n                        weekDayValue = \"weekend\";\n                        weekDayOffset = positions;\n                    }\n                }\n\n                if (!weekDayValue) {\n                    weekDays = weekDays[0];\n                    weekDayValue = weekDays.day;\n                    weekDayOffset = weekDays.offset || \"\";\n                }\n\n                method = weekDayOffsetWidget.value ? \"value\" : \"val\";\n\n                weekDayOffsetWidget[method](weekDayOffset);\n                that._weekDay[method](weekDayValue);\n            }\n        },\n\n        _initWeekDay: function() {\n            var that = this, data;\n\n            var weekdayMessage = that.options.messages.weekdays;\n            var offsetMessage = that.options.messages.offsetPositions;\n\n            var weekDayInput = that._container.find(\".k-recur-weekday\");\n\n            var change = function() {\n                that._weekDayRule();\n                that._trigger();\n            };\n\n            if (weekDayInput[0]) {\n                that._weekDayOffset = new DropDownList(that._container.find(\".k-recur-weekday-offset\"), {\n                    autoWidth: true,\n                    change: change,\n                    dataTextField: \"text\",\n                    dataValueField: \"value\",\n                    dataSource: [\n                        { text: offsetMessage.first, value: \"1\" },\n                        { text: offsetMessage.second, value: \"2\" },\n                        { text: offsetMessage.third, value: \"3\" },\n                        { text: offsetMessage.fourth, value: \"4\" },\n                        { text: offsetMessage.last, value: \"-1\" }\n                    ]\n                });\n\n                data = [\n                    { text: weekdayMessage.day, value: \"day\" },\n                    { text: weekdayMessage.weekday, value: \"weekday\" },\n                    { text: weekdayMessage.weekend, value: \"weekend\" }\n                ];\n\n                that._weekDay = new DropDownList(weekDayInput, {\n                    autoWidth: true,\n                    value: that.options.start.getDay(),\n                    change: change,\n                    dataTextField: \"text\",\n                    dataValueField: \"value\",\n                    dataSource: data.concat($.map(kendo.culture().calendar.days.names, function(dayName, idx) {\n                        return {\n                            text: dayName,\n                            value: idx\n                        };\n                    }))\n                });\n\n                that._weekDayView();\n            }\n        },\n\n        _initWeekDays: function() {\n            var that = this;\n            var rule = that._value;\n            var weekDayButtonGroup = that._weekDayButtonGroup;\n\n            if (weekDayButtonGroup && rule.weekDays && rule.weekDays.length) {\n                var ruleDays = rule.weekDays,\n                    ruleDaysLength = ruleDays.length,\n                    selectors = [],\n                    i = 0,\n                    selectedWeekDayButtons;\n\n                for (; i < ruleDaysLength; i++) {\n                    selectors.push(\"[data-value='\" + ruleDays[i].day + \"']\");\n                }\n\n                selectedWeekDayButtons = weekDayButtonGroup.element.find(selectors.join(\",\"));\n                weekDayButtonGroup.select(selectedWeekDayButtons);\n            }\n        },\n\n        _initMonthDay: function() {\n            var that = this;\n            var rule = that._value;\n            var monthDayInput = that._container.find(\"[ref-recur-monthday]\");\n\n            if (monthDayInput[0]) {\n                that._monthDay = new kendo.ui.NumericTextBox(monthDayInput, {\n                    spinners: that.options.spinners,\n                    min: 1,\n                    max: 31,\n                    decimals: 0,\n                    format: \"#\",\n                    value: rule.monthDays ? rule.monthDays[0] : that.options.start.getDate(),\n                    change: function() {\n                        var value = this.value();\n\n                        rule.monthDays = value ? [value] : value;\n                        that._trigger();\n                    }\n                });\n\n                that._monthDay.wrapper.addClass('k-recur-monthday');\n            }\n        },\n\n        _initCount: function() {\n            var that = this,\n                input = that._container.find(\"[ref-recur-count]\"),\n                rule = that._value;\n\n            that._count = input.kendoNumericTextBox({\n                spinners: that.options.spinners,\n                value: rule.count || 1,\n                decimals: 0,\n                format: \"#\",\n                min: 1,\n                change: function() {\n                    rule.count = this.value();\n                    that._trigger();\n                }\n            }).data(\"kendoNumericTextBox\");\n\n            that._count.wrapper.addClass('k-recur-count');\n        },\n\n        _initUntil: function() {\n            var that = this,\n                input = that._container.find(\"[ref-recur-until]\"),\n                start = that.options.start,\n                rule = that._value,\n                until = rule.until,\n                min = until && until < start ? until : start,\n                startInput = that.wrapper.closest(\".k-scheduler-edit-form\").find(\"[name=start]:visible\"),\n                validDateValidationMessage = kendo.format(kendo.ui.Validator.prototype.options.messages.date, that.options.messages.end.on),\n                dateCompareValidationMessage = kendo.ui.Validator.prototype.options.messages.dateCompare,\n                initialValue = new Date(start.getFullYear(), start.getMonth(), start.getDate(), 23, 59, 59);\n\n            input.attr(\"data-validDate-msg\", validDateValidationMessage);\n            input.attr(\"data-untilDateCompare-msg\", dateCompareValidationMessage);\n\n            if (startInput.length === 0) {\n                startInput = that.wrapper.closest(\".k-scheduler-edit-form\").find(\"[name=start]\");\n            }\n\n            if (startInput.length > 0 && startInput.val()) {\n                min = kendo.parseDate(startInput.val());\n\n                if (initialValue < min) {\n                    initialValue = min;\n                }\n            }\n\n            that._until = input.kendoDatePicker({\n                min: min,\n                value: until || initialValue,\n                change: function() {\n                    var date = this.value();\n                    if (date) {\n                        rule.until = new Date(date.getFullYear(), date.getMonth(), date.getDate(), 23, 59, 59);\n                    }\n                    that._trigger();\n                }\n            }).data(\"kendoDatePicker\");\n\n            that._until.wrapper.addClass('k-recur-until');\n\n            if (startInput) {\n                startInput.on(\"change\", function() {\n                    var untilEl = that._until.element,\n                        readonly = Boolean(untilEl.attr(\"readonly\")),\n                        enable = !(Boolean(untilEl.is(\"[disabled]\") || untilEl.parents(\"fieldset\").is(':disabled')));\n\n                    that._until.setOptions({\n                        min: startInput.val(),\n                        readonly,\n                        enable\n                    });\n                });\n            }\n        },\n\n        _trigger: function() {\n            if (!this.options.mobile) {\n                this.trigger(\"change\");\n            }\n        }\n    });\n\n    var RecurrenceEditor = BaseRecurrenceEditor.extend({\n        init: function(element, options) {\n            var that = this;\n\n            BaseRecurrenceEditor.fn.init.call(that, element, options);\n\n            that._initFrequency();\n\n            that._initContainer();\n\n            that.value(that.options.value);\n        },\n\n        options: {\n            name: \"RecurrenceEditor\"\n        },\n\n        events: [ \"change\" ],\n\n        destroy: function() {\n            var that = this;\n\n            that._frequency.destroy();\n\n            if (this._weekDayButtonGroup) {\n                this._weekDayButtonGroup.destroy();\n            }\n\n            that._container.find(\"input[type=radio],input[type=checkbox]\").off(CLICK + that._namespace);\n\n            kendo.destroy(that._container);\n\n            BaseRecurrenceEditor.fn.destroy.call(that);\n        },\n\n        value: function(value) {\n            var that = this;\n            var timezone = that.options.timezone;\n            var freq, freqButton;\n\n            if (value === undefined) {\n                if (!that._value.freq) {\n                    return \"\";\n                }\n\n                return serialize(that._value, timezone);\n            }\n\n            that._value = parseRule(value, timezone) || {};\n\n            freq = that._value.freq;\n\n            if (freq) {\n                freqButton = that._frequency.element.find(\"[data-value='\" + freq + \"']\");\n                that._frequency.select(freqButton);\n            } else {\n                that._frequency.select(0);\n            }\n\n            that._initView(that._frequency.current().data(\"value\"));\n        },\n\n        _initContainer: function() {\n            var element = this.element,\n                container = $('<div class=\"k-recur-view\" />'),\n                editContainer = element.parent(\".k-edit-field\");\n\n            if (editContainer[0]) {\n                container.insertAfter(editContainer);\n            } else {\n                element.append(container);\n            }\n\n            this._container = container;\n        },\n\n        _initFrequency: function() {\n            var that = this,\n                options = that.options,\n                frequencies = options.frequencies,\n                messages = options.messages.frequencies,\n                buttonGroupElement = $('<div class=\"k-button-group-stretched k-flex-1\"/>').attr({ title: options.messages.recurrenceEditorTitle }),\n                frequency;\n\n            frequencies = $.map(frequencies, function(frequency) {\n                return {\n                    text: messages[frequency],\n                    attributes: { \"data-value\": frequency, \"aria-label\": options.messages.repeat + messages[frequency] }\n                };\n            });\n\n            frequency = frequencies[0];\n            if (frequency && frequency.attributes && frequency.attributes[\"data-value\"] === \"never\") {\n                frequency.attributes[\"data-value\"] = \"\";\n            }\n\n            that.element.append(buttonGroupElement);\n            that._frequency = new ButtonGroup(buttonGroupElement, {\n                items: frequencies,\n                select: function() {\n                    that._value = {};\n                    that._initView(that._frequency.current().data(\"value\"));\n                    that.trigger(\"change\");\n                }\n            });\n        },\n\n        _initView: function(frequency) {\n            var that = this;\n            var rule = that._value;\n            var options = that.options;\n            var recurrenceViewHtml;\n\n            var data = {\n                 frequency: frequency || \"never\",\n                 firstWeekDay: options.firstWeekDay,\n                 messages: options.messages[frequency],\n                 end: options.messages.end\n            };\n\n            if (that._weekDayButtonGroup) {\n                that._weekDayButtonGroup.destroy();\n                that._container.find(\".k-recur-weekday-buttons\").empty();\n                that._weekDayButtonGroup = null;\n            }\n\n            kendo.destroy(that._container);\n\n            recurrenceViewHtml = $(RECURRENCE_VIEW_TEMPLATE(data));\n            kendo.applyStylesFromKendoAttributes(recurrenceViewHtml, [\"width\"]);\n\n            that._container.html(recurrenceViewHtml);\n\n            if (!frequency) {\n                that._value = {};\n                return;\n            }\n\n            rule.freq = frequency;\n\n            if (frequency === \"weekly\" && !rule.weekDays) {\n                rule.weekDays = [{\n                    day: options.start.getDay(),\n                    offset: 0\n                }];\n            }\n\n            that._weekDayButtons(options.firstWeekDay);\n\n            that._initInterval();\n            that._initWeekDays();\n            that._initMonthDay();\n            that._initWeekDay();\n            that._initMonth();\n            that._initCount();\n            that._initUntil();\n\n            that._period();\n            that._end();\n        },\n\n        _initMonth: function() {\n            var that = this;\n            var rule = that._value;\n            var month = rule.months || [that.options.start.getMonth() + 1];\n            var monthInputs = that._container.find(\".k-recur-month\");\n            var options;\n\n            if (monthInputs[0]) {\n                options = {\n                    autoWidth: true,\n                    change: function() {\n                        rule.months = [Number(this.value())];\n                        that.trigger(\"change\");\n                    },\n                    dataTextField: \"text\",\n                    dataValueField: \"value\",\n                    dataSource: $.map(kendo.culture().calendar.months.names, function(monthName, idx) {\n                        return {\n                            text: monthName,\n                            value: idx + 1\n                        };\n                    })\n                };\n\n                that._month1 = new DropDownList(monthInputs[0], options);\n                that._month2 = new DropDownList(monthInputs[1], options);\n\n                if (month) {\n                    month = month[0];\n                    that._month1.value(month);\n                    that._month2.value(month);\n                }\n            }\n\n        },\n\n        _end: function() {\n            var that = this;\n            var rule = that._value;\n            var container = that._container;\n            var namespace = that._namespace;\n            var click = function(e) {\n                that._toggleEnd(e.currentTarget.value);\n                that.trigger(\"change\");\n            };\n            var endRule;\n\n            that._buttonNever = container.find(\".k-recur-end-never\").on(CLICK + namespace, click);\n            that._buttonCount = container.find(\".k-recur-end-count\").on(CLICK + namespace, click);\n            that._buttonUntil = container.find(\".k-recur-end-until\").on(CLICK + namespace, click);\n\n            if (rule.count) {\n                endRule = \"count\";\n            } else if (rule.until) {\n                endRule = \"until\";\n            }\n\n            that._toggleEnd(endRule);\n        },\n\n        _period: function() {\n            var that = this;\n            var rule = that._value;\n            var monthly = rule.freq === \"monthly\";\n\n            var toggleRule = monthly ? that._toggleMonthDay : that._toggleYear;\n\n            var selector = \".k-recur-\" + (monthly ? \"month\" : \"year\") + \"-radio\";\n            var radioButtons = that._container.find(selector);\n\n            if (!monthly && rule.freq !== \"yearly\") {\n                return;\n            }\n\n            radioButtons.on(CLICK + that._namespace, function(e) {\n                toggleRule.call(that, e.currentTarget.value);\n                that.trigger(\"change\");\n            });\n\n            that._buttonMonthDay = radioButtons.eq(0);\n            that._buttonWeekDay = radioButtons.eq(1);\n\n            toggleRule.call(that, rule.weekDays ? \"weekday\" : \"monthday\");\n        },\n\n        _toggleEnd: function(endRule) {\n            var that = this;\n            var count, until;\n            var enableCount, enableUntil;\n\n            if (endRule === \"count\") {\n                that._buttonCount.prop(\"checked\", true);\n\n                enableCount = true;\n                enableUntil = false;\n\n                count = that._count.value();\n                until = null;\n            } else if (endRule === \"until\") {\n                that._buttonUntil.prop(\"checked\", true);\n\n                enableCount = false;\n                enableUntil = true;\n\n                count = null;\n                until = that._until.value();\n            } else {\n                that._buttonNever.prop(\"checked\", true);\n\n                enableCount = enableUntil = false;\n                count = until = null;\n            }\n\n            if (that._count) {\n                that._count.enable(enableCount);\n            }\n\n            if (that._until) {\n                that._until.enable(enableUntil);\n            }\n\n            that._value.count = count;\n            that._value.until = until;\n        },\n\n        _toggleMonthDay: function(monthRule) {\n            var that = this;\n            var enableMonthDay = false;\n            var enableWeekDay = true;\n            var clear = false;\n            var monthDays;\n\n            if (monthRule === \"monthday\") {\n                that._buttonMonthDay.prop(\"checked\", true);\n\n                monthDays = [that._monthDay.value()];\n\n                enableMonthDay = true;\n                enableWeekDay = false;\n                clear = true;\n            } else {\n                that._buttonWeekDay.prop(\"checked\", true);\n                monthDays = null;\n            }\n\n            that._weekDay.enable(enableWeekDay);\n            that._weekDayOffset.enable(enableWeekDay);\n            that._monthDay.enable(enableMonthDay);\n\n            that._value.monthDays = monthDays;\n\n            that._weekDayRule(clear);\n        },\n\n        _toggleYear: function(yearRule) {\n            var that = this;\n            var enableMonth1 = false;\n            var enableMonth2 = true;\n            var month;\n\n            if (yearRule === \"monthday\") {\n                enableMonth1 = true;\n                enableMonth2 = false;\n\n                month = that._month1.value();\n            } else {\n                month = that._month2.value();\n            }\n\n            that._month1.enable(enableMonth1);\n            that._month2.enable(enableMonth2);\n\n            that._value.months = [month];\n            that._toggleMonthDay(yearRule);\n        }\n    });\n\n    ui.plugin(RecurrenceEditor);\n\n\n    var RECURRENCE_HEADER_TEMPLATE = kendo.template(({ headerTitle }) =>\n        '<div data-role=\"content\">' +\n            '<ul class=\"k-listgroup k-listgroup-flush\">' +\n                '<li class=\"k-item k-listgroup-item\">' +\n                    '<label class=\"k-label k-listgroup-form-row\">' +\n                        `<span class=\"k-item-title k-listgroup-form-field-label\">${headerTitle}</span>` +\n                        '<div class=\"k-recur-pattern k-listgroup-form-field-wrapper\"></div>' +\n                    '</label>' +\n                '</li>' +\n                '<li class=\"k-item k-listgroup-item k-recur-view\"></li>' +\n            '</ul>' +\n        '</div>'\n    );\n\n    var RECURRENCE_REPEAT_PATTERN_TEMPLATE = kendo.template(({ frequency, messages }) =>\n        (frequency !== \"never\" ?\n            '<label class=\"k-label k-listgroup-form-row\">' +\n                `<span class=\"k-item-title k-listgroup-form-field-label\">${encode(messages.repeatEvery)}</span>` +\n                '<div class=\"k-recur-editor-wrap k-listgroup-form-field-wrapper\">' +\n                    '<input ref-recur-interval type=\"number\" pattern=\"\\\\d*\"/>' +\n                    (messages.interval.length ? `<span class=\"k-recur-editor-text\">${encode(messages.interval)}</span>` : '') +\n                '</div>' +\n            '</label>' : ''\n        ) +\n        (frequency === \"weekly\" ?\n            '<ul class=\"k-recur-items-wrap k-listgroup k-listgroup-flush\">' +\n                '<li class=\"k-item k-listgroup-item k-no-click\">' +\n                    '<label class=\"k-label k-listgroup-form-row\">' +\n                        `<span class=\"k-item-title k-listgroup-form-field-label\">${encode(messages.repeatOn)}</span>` +\n                    '</label>' +\n                '</li>' +\n                `<div class=\"k-button-group-stretched k-recur-weekday-buttons\" title=\"${encode(messages.repeatOn)}\">` +\n            '</ul>' : '') +\n        (frequency === \"monthly\" ?\n            '<ul class=\"k-recur-items-wrap k-listgroup k-listgroup-flush\">' +\n                '<li class=\"k-item k-listgroup-item\">' +\n                    '<label class=\"k-label k-listgroup-form-row\">' +\n                        `<span class=\"k-item-title k-listgroup-form-field-label\">${encode(messages.repeatBy)}</span>` +\n                        '<div class=\"k-repeat-rule k-listgroup-form-field-wrapper\"></div>' +\n                    '</label>' +\n                '</li>' +\n                `<li class=\"k-monthday-view k-item k-listgroup-item\" ${kendo.attr(\"style-display\")}=\"none\">` +\n                    '<label class=\"k-label k-listgroup-form-row\">' +\n                        `<span class=\"k-item-title k-listgroup-form-field-label\">${encode(messages.day)}</span>` +\n                        `<div class=\"k-listgroup-form-field-wrapper\"><input ref-recur-monthday type=\"number\" aria-label=\"${encode(messages.date)}\" title=\"${encode(messages.day)}\" pattern=\"\\\\d*\"/></div>` +\n                    '</label>' +\n                '</li>' +\n                `<li class=\"k-weekday-view k-item k-listgroup-item\" ${kendo.attr(\"style-display\")}=\"none\">` +\n                    '<label class=\"k-label k-listgroup-form-row\">' +\n                        `<span class=\"k-item-title k-listgroup-form-field-label\">${encode(messages.every)}</span>` +\n                        `<div class=\"k-listgroup-form-field-wrapper\"><select class=\"k-recur-weekday-offset\" title=\"${encode(messages.every)}\"></select></div>` +\n                    '</label>' +\n                '</li>' +\n                `<li class=\"k-weekday-view k-item k-listgroup-item\" ${kendo.attr(\"style-display\")}=\"none\">` +\n                    '<label class=\"k-label k-listgroup-form-row\">' +\n                        `<span class=\"k-item-title k-listgroup-form-field-label\">${encode(messages.day)}</span>` +\n                        `<div class=\"k-listgroup-form-field-wrapper\"><select class=\"k-recur-weekday\" title=\"${encode(messages.day)}\"></select></div>` +\n                    '</label>' +\n                '</li>' +\n            '</ul>' : '') +\n        (frequency === \"yearly\" ?\n            '<ul class=\"k-recur-items-wrap k-listgroup k-listgroup-flush\">' +\n                '<li class=\"k-item k-listgroup-item\">' +\n                    '<label class=\"k-label k-listgroup-form-row\">' +\n                        `<span class=\"k-item-title k-listgroup-form-field-label\">${encode(messages.repeatBy)}</span>` +\n                        '<div class=\"k-repeat-rule k-listgroup-form-field-wrapper\"></div>' +\n                    '</label>' +\n                '</li>' +\n                `<li class=\"k-monthday-view k-item k-listgroup-item\" ${kendo.attr(\"style-display\")}=\"none\">` +\n                    '<label class=\"k-label k-listgroup-form-row\">' +\n                        `<span class=\"k-item-title k-listgroup-form-field-label\">${encode(messages.day)}</span>` +\n                        `<div class=\"k-listgroup-form-field-wrapper\"><input ref-recur-monthday type=\"number\" aria-label=\"${encode(messages.date)}\" title=\"${encode(messages.day)}\" pattern=\"\\\\d*\"/></div>` +\n                    '</label>' +\n                '</li>' +\n                `<li class=\"k-weekday-view k-item k-listgroup-item\" ${kendo.attr(\"style-display\")}=\"none\">` +\n                    '<label class=\"k-label k-listgroup-form-row\">' +\n                        `<span class=\"k-item-title k-listgroup-form-field-label\">${encode(messages.every)}</span>` +\n                        `<div class=\"k-listgroup-form-field-wrapper\"><select class=\"k-recur-weekday-offset\" title=\"${encode(messages.every)}\"></select></div>` +\n                    '</label>' +\n                '</li>' +\n                `<li class=\"k-weekday-view k-item k-listgroup-item\" ${kendo.attr(\"style-display\")}=\"none\">` +\n                    '<label class=\"k-label k-listgroup-form-row\">' +\n                        `<span class=\"k-item-title k-listgroup-form-field-label\">${encode(messages.day)}</span>` +\n                        `<div class=\"k-listgroup-form-field-wrapper\"><select class=\"k-recur-weekday\" title=\"${encode(messages.day)}\"></select></div>` +\n                    '</label>' +\n                '</li>' +\n                '<li class=\"k-item k-item k-listgroup-item\">' +\n                    '<label class=\"k-label k-listgroup-form-row\">' +\n                        `<span class=\"k-item-title k-listgroup-form-field-label\">${encode(messages.month)}</span>` +\n                        `<div class=\"k-listgroup-form-field-wrapper\"><select class=\"k-recur-month\" title=\"${encode(messages.month)}\"></select></div>` +\n                    '</label>' +\n                '</li>' +\n           '</ul>' : '')\n    );\n\n    var RECURRENCE_END_PATTERN_TEMPLATE = kendo.template(({ endPattern, messages }) => {\n        if (endPattern === \"count\") {\n            return '<label class=\"k-label k-listgroup-form-row\">' +\n                `<span class=\"k-item-title k-listgroup-form-field-label\">${encode(messages.after)}</span>` +\n                `<div class=\"k-listgroup-form-field-wrapper\"><input ref-recur-count aria-label=\"${encode(messages.occurrence)}\" type=\"number\" pattern=\"\\\\d*\" /></div>` +\n            '</label>';\n        } else if (endPattern === \"until\") {\n            return '<label class=\"k-label k-listgroup-form-row\">' +\n                `<span class=\"k-item-title k-listgroup-form-field-label\">${encode(messages.on)}</span>` +\n                `<div class=\"k-listgroup-form-field-wrapper\"><input type=\"date\" aria-label=\"${encode(messages.on)}\" ref-recur-until /></div>` +\n            '</label>';\n        }\n    });\n\n    var RECURRENCE_GROUP_BUTTON_TEMPLATE = kendo.template(({ dataSource, value }) =>\n        '<select class=\"k-scheduler-select\">' +\n            dataSource.map((item) => `<option value=\"${item.value}\" ${value === item.value ? 'selected' : ''}>${encode(item.text)}</option>`).join('') +\n        '</select>'\n    );\n\n    var MobileRecurrenceEditor = BaseRecurrenceEditor.extend({\n        init: function(element, options) {\n            var that = this;\n\n            BaseRecurrenceEditor.fn.init.call(that, element, options);\n\n            options = that.options;\n\n            that._optionTemplate = kendo.template(({ value, text }) => `<option value=\"${encode(value)}\">${encode(text)}</option>`);\n\n            that.value(options.value);\n\n            that._pane = options.pane || that.wrapper.closest(\"[data-role=pane]\").data(\"kendoPane\");\n\n            that._initRepeatButton();\n\n            that._initParentRepeatEnd();\n\n            that._defaultValue = that._value;\n        },\n\n        options: {\n            name: \"MobileRecurrenceEditor\",\n            animations: {\n                left: \"slide\",\n                right: \"slide:right\"\n            },\n            mobile: true,\n            messages: {\n                cancel: \"Cancel\",\n                update: \"Save\",\n                endTitle: \"Repeat ends\",\n                repeatTitle: \"Repeat pattern\",\n                headerTitle: \"Repeat event\",\n                end: {\n                    patterns: {\n                        never: \"Never\",\n                        after: \"After...\",\n                        on: \"On...\"\n                    },\n                    never: \"Never\",\n                    after: \"End repeat after\",\n                    on: \"End repeat on\"\n                },\n                daily: {\n                    interval: \"\"\n                },\n                hourly: {\n                    interval: \"\"\n                },\n                weekly: {\n                    interval: \"\"\n                },\n                monthly: {\n                    interval: \"\",\n                    repeatBy: \"Repeat by: \",\n                    dayOfMonth: \"Day of the month\",\n                    dayOfWeek: \"Day of the week\",\n                    repeatEvery: \"Repeat every\",\n                    every: \"Every\",\n                    day: \"Day \"\n                },\n                yearly: {\n                    interval: \"\",\n                    repeatBy: \"Repeat by: \",\n                    dayOfMonth: \"Day of the month\",\n                    dayOfWeek: \"Day of the week\",\n                    repeatEvery: \"Repeat every: \",\n                    every: \"Every\",\n                    month: \"Month\",\n                    day: \"Day\"\n                }\n            }\n        },\n\n        events: [ \"change\" ],\n\n        value: function(value) {\n            var that = this;\n            var timezone = that.options.timezone;\n\n            if (value === undefined) {\n                if (!that._value.freq) {\n                    return \"\";\n                }\n\n                return serialize(that._value, timezone);\n            }\n\n            that._value = parseRule(value, timezone) || {};\n        },\n\n        destroy: function() {\n            this._destroyView();\n\n            kendo.destroy(this._endFields);\n\n            this.element.off(CLICK + this._namespace);\n\n            BaseRecurrenceEditor.fn.destroy.call(this);\n        },\n\n        _initInterval: function() {\n            var that = this;\n            var rule = that._value;\n\n            that._container.find(\"[ref-recur-interval]\")\n                .val(that._value.interval || 1)\n                .on(CHANGE + that._namespace, function(e) {\n                    rule.interval = e.target.value;\n                    that._trigger();\n                });\n\n        },\n\n        _initRepeatButton: function() {\n            var that = this;\n            var freq = that.options.messages.frequencies[this._value.freq || \"never\"];\n\n            that._chevronButton = $(kendo.ui.icon(\"chevron-right\"));\n            that._repeatValue = $('<span class=\"\">' + freq + '</span>');\n\n            that.element.append(that._repeatValue).append(that._chevronButton);\n\n            that.element.parents(\"li.k-item\").on(CLICK + that._namespace, function(e) {\n                e.preventDefault();\n                that._createView(\"repeat\");\n                that._pane.navigate(that._view, that.options.animations.left);\n            });\n        },\n\n        _endLiItem: function() {\n            var that = this;\n            return '<li class=\"k-item k-listgroup-item\"><label class=\"k-label k-listgroup-form-row\"><span class=\"k-item-title k-listgroup-form-field-label\">' + that.options.messages.end.mobileLabel + '</span></label></li>';\n        },\n\n        _initParentRepeatEnd: function() {\n            var that = this;\n\n            var endLabelField = $(that._endLiItem()).insertAfter(that.element.parents(\"li.k-item\"));\n\n            var endEditField = $('<div class=\"k-scheduler-recur-end-wrap k-listgroup-form-field-wrapper\"><span class=\"k-scheduler-recur-end\"></span></div>')\n                .appendTo(endLabelField.find(\".k-label\"));\n\n            endLabelField.on(CLICK + that._namespace, function(e) {\n                e.preventDefault();\n                that._navigateToView(\"repeat\");\n            });\n\n            that._endParentLabelField = endLabelField.toggle(!!that._value.freq);\n            that._endParentEndButton = endEditField.find(\".k-scheduler-recur-end\").text(that._endText());\n        },\n\n        _initRepeatEnd: function() {\n            var that = this;\n\n            var endLabelField = $(that._endLiItem()).insertAfter(that._container);\n\n            var endEditField = $(`<div class=\"k-scheduler-recur-end-wrap k-listgroup-form-field-wrapper\"><span class=\"k-scheduler-recur-end\"></span>${kendo.ui.icon(\"chevron-right\")}</div>`)\n                .appendTo(endLabelField.find(\".k-label\"));\n\n            endLabelField.on(CLICK + that._namespace, function(e) {\n                e.preventDefault();\n                that._navigateToView(\"end\");\n            });\n\n            that._endLabelField = endLabelField.toggleClass(\"k-disabled\", !that._value.freq);\n            that._endButton = endEditField.find(\".k-scheduler-recur-end\").text(that._endText());\n        },\n\n        _navigateToView: function(viewName) {\n            var that = this;\n            that._createView(viewName);\n            that._pane.navigate(that._view, that.options.animations.left);\n        },\n\n        _endText: function() {\n            var rule = this._value;\n            var messages = this.options.messages.end;\n\n            var text = messages.never;\n\n            if (rule.count) {\n                text = kendo.format(\"{0} {1}\", messages.after, rule.count);\n            } else if (rule.until) {\n                text = kendo.format(\"{0} {1:d}\", messages.on, rule.until);\n            }\n\n            return text;\n        },\n\n        _initFrequency: function() {\n            var that = this;\n            var frequencyMessages = that.options.messages.frequencies;\n\n            var html = RECURRENCE_GROUP_BUTTON_TEMPLATE({\n                dataSource: $.map(this.options.frequencies, function(frequency) {\n                    return {\n                        text: frequencyMessages[frequency],\n                        value: frequency !== \"never\" ? frequency : \"\"\n                    };\n                }),\n                value: that._value.freq || \"\",\n                ns: kendo.ns\n            });\n\n            that._view.element\n                .find(\".k-recur-pattern\")\n                .append(html);\n\n            that._view.element.find(\".k-scheduler-select\")\n                .on(CHANGE + that._namespace, function(e) {\n                    var value = e.target.value;\n                    that._value = { freq: value };\n                    that._defaultValue = $.extend({}, that._value);\n                    that._initRepeatView();\n                    that._endButton.text(that._endText());\n                    that._endParentEndButton.text(that._endText());\n                });\n        },\n\n        _initEndNavigation: function() {\n            var that = this;\n            var endMessages = that.options.messages.end.patterns;\n            var rule = that._value;\n            var value = \"\";\n\n            if (rule.count) {\n                value = \"count\";\n            } else if (rule.until) {\n                value = \"until\";\n            }\n\n            var html = RECURRENCE_GROUP_BUTTON_TEMPLATE({\n                dataSource: [\n                    { text: endMessages.never, value: \"\" },\n                    { text: endMessages.after, value: \"count\" },\n                    { text: endMessages.on, value: \"until\" }\n                ],\n                value: value,\n                ns: kendo.ns\n            });\n\n            that._view.element\n                .find(\".k-recur-pattern\")\n                .append(html);\n\n            that._view.element.find(\".k-scheduler-select\")\n                .on(CHANGE + that._namespace, function(e) {\n                    var value = e.target.value;\n                    var count = null;\n                    var until = null;\n\n                    that._initEndView(value);\n\n                    if (that._count.length) {\n                        count = that._count.val();\n                        until = null;\n                    } else if (that._until.length) {\n                        count = null;\n                        until = that._until.val ? kendo.parseDate(that._until.val(), \"yyyy-MM-dd\") : that._until.value();\n                    }\n\n                    rule.count = count;\n                    rule.until = until;\n                });\n        },\n\n        _createView: function(viewType) {\n            var that = this;\n            var options = that.options;\n            var messages = options.messages;\n            var headerTitle = messages[viewType === \"repeat\" ? \"repeatTitle\" : \"endTitle\"];\n\n            var html = '<div data-role=\"view\" class=\"k-popup-edit-form k-scheduler-edit-form\" id=\"recurrence\">' +\n                       '<div data-role=\"header\" class=\"k-appbar k-appbar-primary\">' +\n                            kendo.html.renderButton(`<button class=\"k-header-cancel k-scheduler-cancel\" title=\"${messages.cancel}\" aria-label=\"${messages.cancel}\"></button>`, {\n                                fillMode: \"flat\",\n                                icon: \"chevron-left\"\n                            }) +\n                            '<span class=\"k-spacer\"></span>' +\n                            `<span>${encode(messages.headerTitle)}</span>` +\n                            '<span class=\"k-spacer\"></span>' +\n                            kendo.html.renderButton(`<button class=\"k-header-done k-scheduler-update\" title=\"${messages.update}\" aria-label=\"${messages.update}\"></button>`, {\n                                fillMode: \"flat\",\n                                icon: \"check\"\n                            }) +\n                       '</div>';\n\n            var returnViewId = that._pane.view().id;\n\n            that._view = that._pane.append(html + RECURRENCE_HEADER_TEMPLATE({ headerTitle: headerTitle }));\n\n            that._view.element.on(CLICK + that._namespace, \".k-scheduler-cancel, .k-scheduler-update\", function(e) {\n                e.preventDefault();\n                e.stopPropagation();\n\n                if ($(this).hasClass(\"k-scheduler-update\")) {\n                    that.trigger(\"change\");\n                    that._defaultValue = $.extend({}, that._value);\n                } else {\n                    that._value = that._defaultValue;\n                }\n\n                var frequency = that._value.freq;\n\n                that._endParentEndButton.text(that._endText());\n                that._endParentLabelField.toggle(!!frequency && frequency !== \"never\");\n                that._endButton.text(that._endText());\n\n                that._repeatValue.text(messages.frequencies[frequency || \"never\"]);\n\n                that._pane.one(\"viewShow\", function() {\n                    that._destroyView();\n                });\n\n                that._pane.navigate(returnViewId, that.options.animations.right);\n            });\n\n            that._container = that._view.element.find(\".k-recur-view\");\n\n            if (viewType === \"repeat\") {\n                that._initFrequency();\n                that._initRepeatView();\n                that._initRepeatEnd();\n            } else {\n                that._initEndNavigation();\n                that._initEndView();\n            }\n        },\n\n        _destroyView: function() {\n            if (this._view) {\n\n                this._view.destroy();\n                this._view.element.remove();\n                this._container = null;\n            }\n\n\n            this._view = null;\n        },\n\n        _initRepeatView: function() {\n            var that = this;\n            var frequency = that._value.freq || \"never\";\n\n            var data = {\n                 frequency: frequency,\n                 firstWeekDay: that.options.firstWeekDay,\n                 messages: that.options.messages[frequency]\n            };\n\n            var html = RECURRENCE_REPEAT_PATTERN_TEMPLATE(data);\n            var $html = $(html);\n            kendo.applyStylesFromKendoAttributes($html, [\"display\"]);\n\n            var container = that._container = that._container || this._pane.view().content.find(\"li.k-recur-view\");\n            var rule = that._value;\n\n            if (that._endLabelField) {\n                that._endLabelField.toggleClass(\"k-disabled\", frequency === \"never\");\n            }\n\n            kendo.destroy(container);\n            container.html($html);\n\n            if (!html) {\n                that._value = {};\n                container.hide();\n                return;\n            } else {\n                container.show();\n            }\n\n            if (frequency === \"weekly\" && !rule.weekDays) {\n                 rule.weekDays = [{\n                    day: that.options.start.getDay(),\n                    offset: 0\n                 }];\n            }\n\n            that._weekDayButtons(that.options.firstWeekDay);\n\n            that._initInterval();\n            that._initMonthDay();\n            that._initWeekDays();\n            that._initWeekDay();\n            that._initMonth();\n\n            that._period();\n        },\n\n        _initMonthDay: function() {\n            var that = this;\n            var rule = that._value;\n            var monthDayInput = that._monthDay = that._container.find(\"[ref-recur-monthday]\");\n\n            monthDayInput.attr({\n                min: 1,\n                max: 31\n            })\n            .val(rule.monthDays ? rule.monthDays[0] : that.options.start.getDate())\n            .on(CHANGE + that._namespace, function(e) {\n                rule.count = e.target.value;\n                that._trigger();\n            });\n        },\n\n        _initCount: function() {\n            var that = this,\n                input = that._count = that._container.find(\"[ref-recur-count]\"),\n                rule = that._value;\n\n            input.val(rule.count || 1)\n                .on(CHANGE + that._namespace, function(ev) {\n                    rule.count = ev.target.value;\n                    that._trigger();\n                });\n\n            input.parent().addClass('k-recur-count');\n        },\n\n        _initEndView: function(endPattern) {\n            var that = this;\n            var rule = that._value;\n\n            if (endPattern === undefined) {\n                if (rule.count) {\n                    endPattern = \"count\";\n                } else if (rule.until) {\n                    endPattern = \"until\";\n                }\n            }\n\n            var data = {\n                 endPattern: endPattern,\n                 messages: that.options.messages.end\n            };\n\n            kendo.destroy(that._container);\n            that._container.html(RECURRENCE_END_PATTERN_TEMPLATE(data));\n\n            that._initCount();\n            that._initUntil();\n        },\n\n        _initWeekDay: function() {\n            var that = this, data;\n\n            var weekdayMessage = that.options.messages.weekdays;\n            var offsetMessage = that.options.messages.offsetPositions;\n\n            var weekDaySelect = that._container.find(\".k-recur-weekday\");\n\n            var change = function() {\n                that._weekDayRule();\n                that.trigger(\"change\");\n            };\n\n            if (weekDaySelect[0]) {\n                that._weekDayOffset = that._container.find(\".k-recur-weekday-offset\")\n                                          .html(that._options([\n                                            { text: offsetMessage.first, value: \"1\" },\n                                            { text: offsetMessage.second, value: \"2\" },\n                                            { text: offsetMessage.third, value: \"3\" },\n                                            { text: offsetMessage.fourth, value: \"4\" },\n                                            { text: offsetMessage.last, value: \"-1\" }\n                                          ]))\n                                          .on(\"change\", change);\n\n                data = [\n                    { text: weekdayMessage.day, value: \"day\" },\n                    { text: weekdayMessage.weekday, value: \"weekday\" },\n                    { text: weekdayMessage.weekend, value: \"weekend\" }\n                ];\n\n                data = data.concat($.map(kendo.culture().calendar.days.names, function(dayName, idx) {\n                    return {\n                        text: dayName,\n                        value: idx\n                    };\n                }));\n\n                that._weekDay = weekDaySelect.html(that._options(data))\n                                             .on(\"change\", change)\n                                             .val(that.options.start.getDay());\n\n                that._weekDayView();\n            }\n        },\n\n        _initMonth: function() {\n            var that = this;\n            var rule = that._value;\n            var start = that.options.start;\n            var month = rule.months || [start.getMonth() + 1];\n            var monthSelect = that._container.find(\".k-recur-month\");\n            var monthNames = kendo.culture().calendar.months.names;\n\n            if (monthSelect[0]) {\n                var data = $.map(monthNames, function(monthName, idx) {\n                    return {\n                        text: monthName,\n                        value: idx + 1\n                    };\n                });\n\n                monthSelect.html(that._options(data))\n                           .on(\"change\", function() {\n                               rule.months = [Number(this.value)];\n                           });\n\n                that._monthSelect = monthSelect;\n\n                if (month) {\n                    monthSelect.val(month[0]);\n                }\n            }\n\n        },\n\n        _period: function() {\n            var that = this;\n            var rule = that._value;\n            var container = that._container;\n            var messages = that.options.messages[rule.freq];\n            var repeatRuleGroupButton = container.find(\".k-repeat-rule\");\n            var weekDayView = container.find(\".k-weekday-view\");\n            var monthDayView = container.find(\".k-monthday-view\");\n\n            if (repeatRuleGroupButton[0]) {\n                var currentValue = rule.weekDays ? \"weekday\" : \"monthday\";\n\n                var html = RECURRENCE_GROUP_BUTTON_TEMPLATE({\n                    value: currentValue,\n                    dataSource: [\n                        { text: messages.dayOfMonth, value: \"monthday\" },\n                        { text: messages.dayOfWeek, value: \"weekday\" }\n                    ],\n                    ns: kendo.ns\n                });\n\n                var init = function(val) {\n                    var weekDayName = that._weekDay.val();\n                    var weekDayOffset = that._weekDayOffset.val();\n                    var monthDay = that._monthDay.val();\n                    var month = that._monthSelect ? that._monthSelect.val() : null;\n\n                    if (val === \"monthday\") {\n                        rule.weekDays = null;\n                        rule.monthDays = monthDay ? [monthDay] : monthDay;\n                        rule.months = month ? [Number(month)] : month;\n\n                        weekDayView.hide();\n                        monthDayView.show();\n                    } else {\n                        rule.monthDays = null;\n                        rule.months = month ? [Number(month)] : month;\n\n                        rule.weekDays = [{\n                            offset: Number(weekDayOffset),\n                            day: Number(weekDayName)\n                        }];\n\n                        weekDayView.show();\n                        monthDayView.hide();\n                    }\n                };\n\n                repeatRuleGroupButton\n                    .append(html);\n\n                repeatRuleGroupButton.find(\".k-scheduler-select\")\n                    .on(CHANGE + that._namespace, function(e) {\n                        init(e.target.value);\n                    });\n\n                init(currentValue);\n            }\n        },\n\n        _initUntil: function() {\n            var that = this;\n            var input = that._container.find(\"[ref-recur-until]\");\n            var start = that.options.start;\n            var rule = that._value;\n            var until = rule.until;\n            var min = until && until < start ? until : start;\n            var validDateValidationMessage = kendo.format(kendo.ui.Validator.prototype.options.messages.date, that.options.messages.end.on);\n            var dateCompareValidationMessage = kendo.ui.Validator.prototype.options.messages.dateCompare;\n\n            input.attr(\"data-validDate-msg\", validDateValidationMessage);\n            input.attr(\"data-untilDateCompare-msg\", dateCompareValidationMessage);\n\n            if (kendo.support.input.date) {\n                that._until = input.attr(\"min\", kendo.toString(min, \"yyyy-MM-dd\"))\n                                   .val(kendo.toString(until || start, \"yyyy-MM-dd\"))\n                                   .on(\"change\", function() {\n                                        var date = kendo.parseDate(this.value, \"yyyy-MM-dd\");\n                                        if (date) {\n                                            rule.until = date;\n                                        }\n                                        that._trigger();\n                                   });\n                that._until.parent().addClass('k-recur-until');\n            } else {\n                that._until = input.kendoDatePicker({\n                    min: min,\n                    value: until || start,\n                    change: function() {\n                        var date = this.value();\n                        if (date) {\n                            rule.until = date;\n                        }\n                        that._trigger();\n                    }\n                }).data(\"kendoDatePicker\");\n\n                that._until.wrapper.addClass('k-recur-until');\n            }\n        },\n\n        _options: function(data, optionLabel) {\n            var idx = 0;\n            var html = \"\";\n            var length = data.length;\n            var template = this._optionTemplate;\n\n            if (optionLabel) {\n                html += template({ value: \"\", text: optionLabel });\n            }\n\n            for (; idx < length; idx++) {\n                html += template(data[idx]);\n            }\n\n            return html;\n        }\n    });\n\n    ui.plugin(MobileRecurrenceEditor);\n\n})(window.kendo.jQuery);\nexport default kendo;\n\n"],"mappings":"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"}