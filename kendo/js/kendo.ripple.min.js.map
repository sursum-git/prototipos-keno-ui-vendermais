{"version":3,"file":"kendo.ripple.min.js","names":[],"sources":["../../node_modules/@progress/kendo-ripple/dist/es2015/ripple-base.js","../../src/kendo.ripple.js"],"sourcesContent":["const closest = (element, selector) => {\n    if (element.closest) {\n        return element.closest(selector);\n    }\n    const matches = Element.prototype.matches ?\n        (el, sel) => el.matches(sel)\n        : (el, sel) => el.msMatchesSelector(sel);\n    let node = element;\n    while (node) {\n        if (matches(node, selector)) {\n            return node;\n        }\n        node = node.parentElement;\n    }\n};\nconst createRipple = doc => {\n    const ripple = doc.createElement('div');\n    ripple.className = 'k-ripple';\n    const blob = doc.createElement('div');\n    blob.className = 'k-ripple-blob';\n    ripple.appendChild(blob);\n    return [ripple, blob];\n};\nconst once = (element, eventName, fn) => {\n    const listener = () => {\n        fn();\n        element.removeEventListener(eventName, listener, false);\n    };\n    const remove = () => element.addEventListener(eventName, listener, false);\n    remove();\n    return { remove };\n};\nconst activate = (containerSelector, options) => e => {\n    const target = e.target;\n    const doc = target.document || target.ownerDocument;\n    let container;\n    if (options.container) {\n        container = options.container(target);\n    }\n    else {\n        container = closest(target, containerSelector);\n    }\n    if (!container) {\n        return;\n    }\n    // focus event of ripple container triggers double-focus\n    const doubleFocus = /focus/i.test(e.type) && container.classList.contains(\"k-ripple-target\");\n    if (doubleFocus) {\n        return;\n    }\n    if (!target.classList.contains('k-checkbox') && !target.classList.contains('k-radio')) {\n        // suppress focus when animating ripples\n        container.classList.add(\"k-ripple-target\");\n        const [ripple, blob] = createRipple(doc);\n        const state = {\n            animated: false,\n            released: false,\n            blob,\n            container,\n            ripple\n        };\n        const eventType = {\n            'focusin': 'focusout',\n            'keydown': 'keyup',\n            'mousedown': 'mouseup',\n            'pointerdown': 'pointerup',\n            'touchdown': 'touchup',\n            'animationstart': 'animationend'\n        }[e.type];\n        once(e.currentTarget, eventType, () => release(state));\n        container.appendChild(ripple);\n        // recalc to allow the effect to animate\n        window.getComputedStyle(ripple).getPropertyValue('opacity');\n        const rect = container.getBoundingClientRect();\n        let left = 0;\n        let top = 0;\n        if ((/mouse|pointer|touch/).test(e.type)) {\n            left = e.clientX - rect.left;\n            top = e.clientY - rect.top;\n        }\n        else {\n            left = rect.width / 2;\n            top = rect.height / 2;\n        }\n        // coordinates of the farthest corner\n        const xMax = left < rect.width / 2 ? rect.width : 0;\n        const yMax = top < rect.height / 2 ? rect.height : 0;\n        // distance to the farthest corner\n        const dx = left - xMax;\n        const dy = top - yMax;\n        // blob size is twice the blob radius\n        const size = 2 * Math.sqrt(dx * dx + dy * dy);\n        const duration = 500;\n        blob.style.width = blob.style.height = `${size}px`;\n        // force reflow for Safari 11 to align ripple blob\n        if (blob.offsetWidth < 0) {\n            throw new Error(\"Inconceivable!\");\n        }\n        blob.style.cssText = `\n        width: ${size}px;\n        height: ${size}px;\n        transform: translate(-50%, -50%) scale(1);\n        left: ${left}px;\n        top: ${top}px;\n    `;\n        setTimeout(() => finishAnimation(state), duration);\n    }\n    else {\n        e.target.classList.remove('k-ripple-focus');\n        if (e.type !== 'animationend') {\n            e.target.classList.add('k-ripple-focus');\n        }\n    }\n};\nconst finishAnimation = (state) => {\n    state.animated = true;\n    deactivate(state);\n};\nconst release = (state) => {\n    state.released = true;\n    deactivate(state);\n};\nconst deactivate = (state) => {\n    // deactivation happens when both\n    // - the activation event has been released (release)\n    // - the ripple has finished animating (finishAnimation)\n    if (!state.released || !state.animated) {\n        return;\n    }\n    const { blob, ripple, container } = state;\n    if (container) {\n        once(container, 'blur', () => container.classList.remove(\"k-ripple-target\"));\n    }\n    if (blob) {\n        once(blob, 'transitionend', () => {\n            if (ripple && ripple.parentNode) {\n                ripple.parentNode.removeChild(ripple);\n            }\n        });\n        blob.style.transition = 'opacity 200ms linear';\n        blob.style.opacity = '0';\n    }\n};\n/**\n * @hidden\n */\nexport const register = (root, elements) => {\n    const flatten = arr => [].concat.apply([], arr);\n    const handlers = flatten(elements.map((item) => {\n        const defaultOptions = {\n            events: ['mousedown', 'touchdown'],\n            global: false\n        };\n        const { selector, options = defaultOptions } = item;\n        const activator = activate(selector, options);\n        const events = options.events || defaultOptions.events;\n        const container = options.global ? document.body : root;\n        events.forEach(evt => container.addEventListener(evt, activator, false));\n        return { events, options, activator };\n    }));\n    return () => {\n        if (!root) {\n            return;\n        }\n        const removeListener = ({ events, options, activator }) => {\n            const container = options.global ? document.body : root;\n            events.forEach(evt => container.removeEventListener(evt, activator, false));\n        };\n        handlers.forEach(removeListener);\n        root = null;\n    };\n};\n","export const __meta__ = {\n    id: \"ripplecontainer\",\n    name: \"RippleContainer\",\n    category: \"web\",\n    depends: [ \"core\" ]\n};\n\nimport { register } from \"@progress/kendo-ripple\";\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        Widget = ui.Widget,\n        extend = $.extend;\n\n    var RippleContainer = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            Widget.fn.init.call(that, element);\n\n            element = that.wrapper = that.element;\n\n            element.addClass(\"k-ripple-container\");\n\n            that.options = extend({}, that.options, options);\n\n            that.registerListeners();\n        },\n\n        options: {\n            name: \"RippleContainer\",\n            elements: [\n                { selector: \".k-button:not(li)\" },\n                { selector: \".k-list-ul > .k-list-item\", options: { global: true } },\n                { selector: \".k-checkbox-label, .k-radio-label\" },\n                {\n                    selector: \".k-checkbox, .k-radio\",\n                    options: {\n                        events: [ \"focusin\", \"animationend\", \"click\"]\n                    }\n                }\n            ]\n        },\n\n        removeListeners: function() {},\n\n        registerListeners: function() {\n            var that = this;\n            var root = that.element[0];\n            var elements = that.options.elements;\n\n            that.removeListeners();\n\n            var callback = register(root, elements);\n\n            that.removeListeners = callback;\n        },\n\n        destroy: function() {\n            var that = this;\n\n            Widget.fn.destroy.call(that);\n\n            that.removeListeners();\n        }\n    });\n\n    ui.plugin(RippleContainer);\n\n})(window.kendo.jQuery);\nexport default kendo;\n\n"],"x_google_ignoreList":[0],"mappings":"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"}