/**
 * Kendo UI v2026.1.212 (http://www.telerik.com/kendo-ui)
 * Copyright 2026 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Kendo UI commercial licenses may be obtained at
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
 * If you do not own a commercial license, this file shall be governed by the trial license terms.
 */
(function(e,t){typeof exports==`object`&&typeof module<`u`?t(exports,require(`kendo.dom.min.js`),require(`kendo.data.min.js`),require(`kendo.columnsorter.min.js`),require(`kendo.editable.min.js`),require(`kendo.window.min.js`),require(`kendo.filtermenu.min.js`),require(`kendo.columnmenu.min.js`),require(`kendo.selectable.min.js`),require(`kendo.resizable.min.js`),require(`kendo.treeview.draganddrop.min.js`),require(`kendo.pager.min.js`),require(`kendo.filtercell.min.js`),require(`kendo.textbox.min.js`),require(`kendo.form.min.js`),require(`kendo.toolbar.min.js`),require(`kendo.icons.min.js`),require(`kendo.reorderable.min.js`),require(`kendo.excel.min.js`),require(`kendo.ooxml.min.js`),require(`kendo.pdf.min.js`),require(`kendo.progressbar.min.js`),require(`kendo.menu.min.js`)):typeof define==`function`&&define.amd?define([`exports`,`kendo.dom.min`,`kendo.data.min`,`kendo.columnsorter.min`,`kendo.editable.min`,`kendo.window.min`,`kendo.filtermenu.min`,`kendo.columnmenu.min`,`kendo.selectable.min`,`kendo.resizable.min`,`kendo.treeview.draganddrop.min`,`kendo.pager.min`,`kendo.filtercell.min`,`kendo.textbox.min`,`kendo.form.min`,`kendo.toolbar.min`,`kendo.icons.min`,`kendo.reorderable.min`,`kendo.excel.min`,`kendo.ooxml.min`,`kendo.pdf.min`,`kendo.progressbar.min`,`kendo.menu.min`],t):(e=typeof globalThis<`u`?globalThis:e||self,t((e.kendo=e.kendo||{},e.kendo._globals=e.kendo._globals||{},e.kendo._globals.Treelist={}),e.kendo._globals.Dom,e.kendo._globals.Data,e.kendo._globals.Columnsorter,e.kendo._globals.Editable,e.kendo._globals.Window,e.kendo._globals.Filtermenu,e.kendo._globals.Columnmenu,e.kendo._globals.Selectable,e.kendo._globals.Resizable,e.kendo._globals.TreeviewDraganddrop,e.kendo._globals.Pager,e.kendo._globals.Filtercell,e.kendo._globals.Textbox,e.kendo._globals.Form,e.kendo._globals.Toolbar,e.kendo._globals.Icons,e.kendo._globals.Reorderable,e.kendo._globals.Excel,e.kendo._globals.Ooxml,e.kendo._globals.Pdf,e.kendo._globals.Progressbar,e.kendo._globals.Menu))})(this,function(e,t,n,r,i,a,o,s,c,l,u,d,f,p,m,h,g,_,v,y,b,x,S){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:`Module`}}),(function(e,t){var n=window.kendo,r=n.ui.ContextMenu,i=e.extend,a=n.htmlEncode,o=`action`,s=r.extend({init:function(e,t){var n=this;r.fn.init.call(n,e,t),n._overrideTemplates(),n._extendItems(),n.bind(`select`,n._onSelect.bind(n)),n.bind(`open`,n._onOpen.bind(n))},_overrideTemplates:function(){this.templates.sprite=({icon:e,spriteCssClass:t})=>`${e||t?n.ui.icon({icon:a(e||``),iconClass:a(t||``)}):``}`},defaultItems:{separator:{name:`separator`,separator:!0},create:{name:`create`,text:`Add`,icon:`plus`,command:`AddCommand`,rules:`isEditable`},createChild:{name:`createChild`,text:`Add Child`,icon:`plus`,command:`CreateChildCommand`,rules:`isEditable`},edit:{name:`edit`,text:`Edit`,icon:`pencil`,command:`EditCommand`,rules:`isEditable`},destroy:{name:`destroy`,text:`Delete`,icon:`trash`,command:`DeleteCommand`,rules:`isEditable`},select:{name:`select`,text:`Select`,icon:`table-body`,rules:`isSelectable`,items:[{name:`selectRow`,text:`Row`,icon:`table-row-groups`,command:`SelectRowCommand`},{name:`selectAllRows`,text:`All rows`,icon:`grid`,command:`SelectAllRowsCommand`,softRules:`isMultiRowSelectionEnabled`},{name:`clearSelection`,text:`Clear selection`,icon:`table-unmerge`,softRules:`hasSelection`,command:`ClearSelectionCommand`}]},exportPDF:{name:`exportPDF`,text:`Export to PDF`,icon:`file-pdf`,command:`ExportPDFCommand`},exportExcel:{name:`exportExcel`,text:`Export to Excel`,icon:`file-excel`,command:`ExportExcelCommand`},sortAsc:{name:`sortAsc`,text:`Sort Ascending`,icon:`sort-asc-small`,rules:`isSortable`,command:`SortCommand`,options:`dir:asc`},sortDesc:{name:`sortDesc`,text:`Sort Descending`,icon:`sort-desc-small`,rules:`isSortable`,command:`SortCommand`,options:`dir:desc`},expandItem:{name:`expandItem`,text:`Expand Item`,icon:`folder-open`,softRules:`isExpandable`,command:`ToggleItemCommand`,options:`expand:true`},collapseItem:{name:`collapseItem`,text:`Collapse Item`,icon:`folder`,softRules:`isCollapsible`,command:`ToggleItemCommand`,options:`expand:false`}},events:r.fn.events.concat([o]),_onSelect:function(t){var n=e(t.item).data(`command`),r=e(t.item).data(`options`);r=r?r.split(`,`).map(e=>{if(e.indexOf(`:`)>-1){var[t,e]=e.split(`:`);return{[t||`_`]:e}}return{[e]:!0}}).reduce((e,t)=>Object.assign(e,t),{}):{};var i=e(t.target);n&&this.action({command:n,options:Object.assign(r,{target:i})})},_onOpen:function(t){var r=t.sender,i=r.options.items,a=e(t.event?t.event.target:null);if(!i&&e.isEmptyObject(this.defaultItems)||a.closest(`.k-grid-column-menu`).length){t.preventDefault();return}this._toggleSeparatorVisibility(),r.element.find(`[${n.attr(`soft-rules`)}]`).each((t,i)=>{var o=e(i).attr(n.attr(`soft-rules`)).split(`;`);r.enable(i,this._validateSoftRules(o,a))})},_toggleSeparatorVisibility:function(){this.element.find(`.k-item.k-separator`).filter((t,n)=>{var r=e(n).prev(`.k-item:not(.k-separator)`),i=e(n).next(`.k-item:not(.k-separator)`);return!(r.length&&i.length)}).hide()},_extendItems:function(){var t=this,n=t.options.items,r,i;if(n&&n.length)for(var a=0;a<n.length;a++)r=n[a],i=e.isPlainObject(r)&&Object.keys(r).length===1&&r.name,i&&(r=r.name),e.isPlainObject(r)?t._append(r):t.defaultItems[r]?(r=t.defaultItems[r],t._append(r)):typeof r==`string`&&(r={name:r,text:r,spriteCssClass:r,command:r+`Command`},t._append(r));else for(var o in t.defaultItems)r=t.defaultItems[o],t._append(r)},_extendItem:function(e){var t=this,r=t.options.messages,a=e.attr||{};if(e.command&&(a[n.attr(`command`)]=e.command),e.options&&(a[n.attr(`options`)]=e.options),e.softRules&&(a[n.attr(`soft-rules`)]=e.softRules),e.items)for(var o=0;o<e.items.length;o++)e.items.forEach(e=>{t._extendItem(e)});i(e,{text:r.commands[e.name],icon:e.icon||``,spriteCssClass:e.spriteCssClass||``,attr:a,uid:n.guid()})},_validateSoftRules:function(e,t){if(!e||!(e&&e.length))return!0;for(var n=0;n<e.length;n++)if(!this._readState(e[n],t))return!1;return!0},_validateRules:function(e){var t=e.rules?e.rules.split(`;`):[];if(!t.length)return!0;for(var n=0;n<t.length;n++)if(!this._readState(t[n]))return!1;return!0},_readState:function(e,t){var r=this.options.states;return n.isFunction(r[e])?r[e](t):r[e]},_append:function(e){var t=this;t._extendItem(e),t._validateRules(e)&&t.append(e)},action:function(e){this.trigger(o,e)}});n.ui.treelist=n.ui.treelist||{},i(n.ui.treelist,{ContextMenu:s})})(window.kendo.jQuery),(function(e,t){var n=window.kendo,r=e.extend,i=n.Class.extend({init:function(e){this.options=e,this.treelist=e.treelist}}),a=i.extend({exec:function(){var e=this,t=e.treelist,r=t.dataSource,i=r.sort()||[],a=e.options,o=a.dir,s=a.target.attr(n.attr(`field`)),c=t.options.sortable.mode&&t.options.sortable.mode===`multiple`,l=t.options.compare,u,d;if(c){for(d=0,u=i.length;d<u;d++)if(i[d].field===s){i.splice(d,1);break}i.push({field:s,dir:o,compare:l})}else i=[{field:s,dir:o,compare:l}];r.sort(i)}}),o=i.extend({exec:function(){this.treelist.addRow()}}),s=i.extend({exec:function(){var e=this,t=e.treelist,n=e.options.target.closest(`tr`);t.addRow(n)}}),c=i.extend({exec:function(){var e=this,t=e.treelist,n=t._editMode()===`incell`,r=n?e.options.target:e.options.target.closest(`tr`);n?t.editCell(r):t.editRow(r)}}),l=i.extend({exec:function(){var e=this,t=e.treelist,n=e.options.target.closest(`tr`);t.removeRow(n)}}),u=i.extend({exec:function(){var e=this,t=e.treelist,r=n.ui.Selectable.parseOptions(t.options.selectable),i=e.options.target.closest(`tr`);t.select(r.cell?i.find(`td`):i)}}),d=i.extend({exec:function(){var e=this.treelist,t=n.ui.Selectable.parseOptions(e.options.selectable),r=e.items();e.select(t.cell?r.find(`td`):r)}}),f=i.extend({exec:function(){this.treelist.clearSelection()}}),p=i.extend({exec:function(){this.treelist.saveAsPDF()}}),m=i.extend({exec:function(){this.treelist.saveAsExcel()}}),h=i.extend({exec:function(){var e=this,t=e.treelist,n=e.options.target;e.options.expand===`true`?t.expand(n):t.collapse(n)}});n.ui.treelist=n.ui.treelist||{},r(n.ui.treelist,{TreeListCommand:i,commands:{SortCommand:a,AddCommand:o,CreateChildCommand:s,EditCommand:c,DeleteCommand:l,SelectRowCommand:u,SelectAllRowsCommand:d,ClearSelectionCommand:f,ExportPDFCommand:p,ExportExcelCommand:m,ToggleItemCommand:h}})})(window.kendo.jQuery);let C={id:`treelist`,name:`TreeList`,category:`web`,description:`The TreeList widget displays self-referencing data and offers rich support for interacting with data, sorting, filtering, and selection.`,depends:[`dom`,`data`,`pager`,`toolbar`,`icons`,`reorderable`,`menu`],features:[{id:`treelist-sorting`,name:`Sorting`,description:`Support for column sorting`,depends:[`columnsorter`]},{id:`treelist-filtering`,name:`Filtering`,description:`Support for record filtering`,depends:[`filtermenu`]},{id:`treelist-columnmenu`,name:`Column menu`,description:`Support for header column menu`,depends:[`columnmenu`]},{id:`treelist-editing`,name:`Editing`,description:`Support for record editing`,depends:[`editable`,`window`,`textbox`,`form`]},{id:`treelist-selection`,name:`Selection`,description:`Support for row selection`,depends:[`selectable`]},{id:`treelist-column-resize`,name:`Column resizing`,description:`Support for column resizing`,depends:[`resizable`]},{id:`treelist-dragging`,name:`Drag & Drop`,description:`Support for drag & drop of rows`,depends:[`treeview.draganddrop`]},{id:`treelist-excel-export`,name:`Excel export`,description:`Export data as Excel spreadsheet`,depends:[`excel`]},{id:`treelist-pdf-export`,name:`PDF export`,description:`Export data as PDF`,depends:[`pdf`,`drawing`,`progressbar`]},{id:`treelist-paging`,name:`Paging`,description:`Support for treelist paging`,depends:[`pager`]}]};(function(e,t){var n=kendo.data,r=kendo.htmlEncode,i=kendo.dom,a=i.element,o=i.text,s=i.html,c=kendo._outerWidth,l=e.extend({F10:121},kendo.keys),u=kendo._outerHeight,d=kendo.ui,f=d.DataBoundWidget,p=n.DataSource,m=n.ObservableArray,h=n.Query,g=n.Model,_=kendo.support.browser,v=kendo.template,y=kendo.toCamelCase,b=kendo._activeElement,x=kendo.support.touch,S=Array.isArray,C=e.extend,w=e.map,T=e.grep,E=e.inArray,D=e.isPlainObject,ee=Array.prototype.push,te=`string`,O=`change`,ne=`itemChange`,re=`error`,ie=`progress`,k=`.`,A=`.kendoTreeList`,j=`click`,ae=`input`,oe=`beforeEdit`,M=`edit`,se=`page`,ce=`pageChange`,N=`save`,le=`saveChanges`,ue=`expand`,de=`collapse`,fe=`cellClose`,pe=`remove`,P=`td:not(.k-group-cell):not(.k-hierarchy-cell):visible,th:not(.k-group-cell):not(.k-hierarchy-cell):visible`,me=`.k-filter-row td:not(.k-group-cell):not(.k-hierarchy-cell):visible,.k-filter-row th:not(.k-group-cell):not(.k-hierarchy-cell):visible`,he=`dataBinding`,ge=`dataBound`,F=`cancel`,_e=`tabIndex`,ve=`filterMenuInit`,ye=`filterMenuOpen`,be=`columnHide`,xe=`columnShow`,Se=`th.k-header`,Ce=`columnReorder`,we=`columnResize`,Te=`columnMenuInit`,Ee=`columnMenuOpen`,De=`columnLock`,Oe=`columnUnlock`,ke=`filter`,Ae=`navigate`,je=`sort`,I=`parentId`,Me=`dragstart`,Ne=`drag`,Pe=`drop`,Fe=`dragend`,L=`tr:visible`,R=`td:visible`,Ie=`th:visible`,Le=`k-grid-norecords`,Re=`tr:not(.k-footer-template):visible`,z=!1,ze=`height`,Be=`incell`,Ve=`inline`,He=`popup`,Ue=`table`,We=`k-checkbox`,B=`input[data-role='checkbox'].`+We,Ge=`<input class="`+We+`" data-role="checkbox" aria-label="Select row" aria-checked="false" type="checkbox">`,Ke=`<input class="`+We+`" data-role="checkbox" aria-label="Select all rows" aria-checked="false" type="checkbox">`,qe=()=>kendo.ui.icon(`reorder`),Je=`k-selected`,Ye=`[\\x20\\t\\r\\n\\f]`,Xe=RegExp(`(^|`+Ye+`)(k-filter-row)(`+Ye+`|$)`),Ze=`[class*='-i-arrow-rotate-cw']`,Qe=`[ref-treelist-expand-collapse-icon]`,$e=`caret-alt-right`,et=`caret-alt-left`,tt=`aria-label`,tt=`aria-label`,nt=`aria-expanded`,rt=`aria-activedescendant`,it=`[ref-blank-icon]`,V={wrapper:`k-treelist k-grid`,header:`k-header k-table-th`,button:`k-button`,alt:`k-table-alt-row`,editCell:`k-edit-cell`,editRow:`k-grid-edit-row`,dirtyCell:`k-dirty-cell`,toolbar:`k-toolbar`,gridToolbar:`k-grid-toolbar`,gridHeader:`k-grid-header`,gridHeaderWrap:`k-grid-header-wrap`,gridContent:`k-grid-content`,gridContentWrap:`k-grid-content`,gridFilter:`k-grid-filter-menu`,footerTemplate:`k-footer-template`,focused:`k-focus`,loading:`k-i-loading`,refresh:`arrow-rotate-cw`,retry:`k-request-retry`,selected:`k-selected`,status:`k-status`,link:`k-link`,filterable:`k-filterable`,icon:`k-icon`,iconFilter:`filter`,iconCollapse:`caret-alt-down`,iconExpand:`caret-alt-right`,iconPlaceHolder:`k-treelist-toggle k-icon k-svg-icon`,input:`k-input`,dropPositions:`k-i-insert-top k-i-insert-bottom k-i-plus k-i-insert-middle`,dropTop:`insert-top`,dropBottom:`insert-bottom`,dropAdd:`plus`,dropMiddle:`insert-middle`,dropDenied:`cancel`,dragStatus:`k-drag-status`,dragClue:`k-drag-clue`,dragClueText:`k-clue-text`,headerCellInner:`k-cell-inner`,columnTitle:`k-column-title`},at={create:{icon:`plus`,className:`k-grid-add`,methodName:`addRow`},createchild:{icon:`plus`,className:`k-grid-add`,methodName:`addRow`},destroy:{icon:`x`,className:`k-grid-remove-command`,methodName:`removeRow`},edit:{icon:`pencil`,className:`k-button-primary k-grid-edit-command`,methodName:`editRow`},update:{icon:`save`,className:`k-button-primary k-grid-save-command`,methodName:`saveRow`},canceledit:{icon:`cancel`,className:`k-grid-cancel-command`,methodName:`_cancelEdit`},cancel:{icon:`cancel-outline`,text:`Cancel changes`,className:`k-grid-cancel-changes`,methodName:`cancelChanges`},save:{icon:`check`,text:`Save changes`,className:`k-grid-save-changes`,methodName:`saveChanges`},excel:{icon:`file-excel`,className:`k-grid-excel`,methodName:`saveAsExcel`},pdf:{icon:`file-pdf`,className:`k-grid-pdf`,methodName:`saveAsPDF`},search:{template:({message:e})=>`<span class='k-spacer'></span><span class='k-searchbox k-input k-grid-search'>`+kendo.ui.icon({icon:`search`,iconClass:`k-input-icon`})+`<input autocomplete='off' placeholder='${e}' title='${e}' aria-label='${e}' class='k-input-inner' /></span>`}},ot=[`create`,`createChild`,`edit`,`destroy`,`separator`,`select`,`separator`,`exportPDF`,`exportExcel`,`separator`,`expandItem`,`collapseItem`,`separator`],st=[`sortAsc`,`sortDesc`,`separator`],ct=kendo.Class.extend({init:function(e,t){var n=this;n.data=e||[],n.options=C(n.options,t)},options:{defaultParentId:null,idField:`id`,parentIdField:I},childrenMap:function(){var e=this,t={},n=e.data.length,r,i,a,o=e.options.idField,s=e.options.parentIdField;if(e._childrenMap)return e._childrenMap;for(var c=0;c<n;c++)r=this.data[c],i=r[o],a=r[s],t[i]=t[i]||[],t[a]=t[a]||[],t[a].push(r);return e._childrenMap=t,t},idsMap:function(){var e=this,t={},n=e.data,r=n.length,i,a=e.options.idField;if(e._idMap)return e._idMap;for(var o=0;o<r;o++)i=n[o],t[i[a]]=i;return e.idsMap=t,t},dataMaps:function(){var e=this,t={},n=e.data,r=n.length,i={},a,o,s,c=e.options.idField,l=e.options.parentIdField;if(e._dataMaps)return e._dataMaps;for(var u=0;u<r;u++)a=n[u],o=a[c],s=a[l],i[o]=a,t[o]=t[o]||[],t[s]=t[s]||[],t[s].push(a);return e._dataMaps={children:t,ids:i},e._dataMaps},rootNodes:function(){for(var e=this,t=e.data,n=e.options.defaultParentId,r=t.length,i=[],a,o=e.options.parentIdField,s=0;s<r;s++)a=t[s],a[o]===n&&i.push(a);return i},removeCollapsedSubtreesFromRootNodes:function(e){e||={};var t=this,n=t.rootNodes(),r=[],i;t._childrenMap=e.childrenMap=e.childrenMap||t.childrenMap(),e.maxDepth=e.maxDepth||1/0;for(var a=0;a<n.length;a++)i=t.removeCollapsedSubtrees(n[a],e),r=r.concat(i);return r},removeCollapsedSubtrees:function(e,t){t||={};var n=this,r=[],i,a,o=t.childrenMap||{},s=t.maxDepth||1/0,c=o[e[n.options.idField]]||[],l=$(e.expanded)?t.expanded:e.expanded;if(r.push(e),c&&l)for(i=0;i<c.length&&!(r.length>=s);i++)a=n.removeCollapsedSubtrees(c[i],t),r=r.concat(a);return r}}),H=function(e){this.data=e||[]};H.prototype=new h,H.prototype.constructor=H,H.process=function(e,n,r){n||={};var i=new H(e),a=n.group,o=h.normalizeGroup(a||[]).concat(h.normalizeSort(n.sort||[])),s=n.filterCallback,c=n.filter,l=n.skip,u=n.take,d,f,p,m,g;return o&&r&&(i=i.sort(o,t,t,r)),c&&(i=i.filter(c),s&&(i=s(i)),d=i.toArray().length),o&&!r&&(i=i.sort(o),a&&(e=i.toArray())),n.processFromRootNodes&&(m=new ct(i.toArray(),n),c&&(p=m.childrenMap()),g=m.removeCollapsedSubtreesFromRootNodes({childrenMap:c||o&&o.length?t:n.childrenMap,expanded:n.expanded,maxDepth:l+u||1/0}),f=m.childrenMap(),i=new H(g)),l!==t&&u!==t&&(i=i.range(l,u)),a&&(i=i.group(a,e)),{total:d,data:i.toArray(),childrenMap:f,filteredChildrenMap:p}};var U=g.define({id:`id`,parentId:I,fields:{id:{type:`number`},parentId:{type:`number`,nullable:!0}},init:function(e){g.fn.init.call(this,e),this._loaded=!1,this.parentIdField||=I,this.parentId=this.get(this.parentIdField)},accept:function(e){g.fn.accept.call(this,e),this.parentId=this.get(this.parentIdField)},set:function(e,t,n){e==I&&this.parentIdField!=I&&(this[this.parentIdField]=t),g.fn.set.call(this,e,t,n),e==this.parentIdField&&(this.parentId=this.get(this.parentIdField))},loaded:function(e){if(e!==t)this._loaded=e;else return this._loaded},shouldSerialize:function(e){return g.fn.shouldSerialize.call(this,e)&&e!==`_loaded`&&e!=`_error`&&e!=`_edit`&&!(this.parentIdField!==`parentId`&&e===`parentId`)}});U.parentIdField=I,U.define=function(e,n){n===t&&(n=e,e=U);var r=n.parentId||I;n.parentIdField=r;var i=g.define(e,n);return r&&(i.parentIdField=r),i};function W(e){return function(t){return t[e]}}function G(e){return function(t){return!e(t)}}var lt=p.extend({init:function(e){e||={};var t=this;t._dataMaps=t._getDataMaps(),e.schema=C(!0,{},{modelBase:U,model:U},e.schema),p.fn.init.call(this,e)},_addRange:function(){},_createNewModel:function(e){var t=this,n={},r=e instanceof g,i=this._modelParentIdField();return r&&(n=e),n=p.fn._createNewModel.call(this,n),r||(e.parentId?e[n.parentIdField]=e.parentId:t._isPageable()&&e[i]&&(e[n.parentIdField]=e[i]),n.accept(e)),n},_shouldWrap:function(){return!0},_push:function(e,t){var n=p.fn._readData.call(this,e);n||=e,this[t](n)},_getData:function(){return this._data||[]},_readData:function(e){var t=this,n=t._isPageable()?t._getData().toJSON():t.data();return e=p.fn._readData.call(this,e),this._replaceData((n.toJSON?n.toJSON():n).concat(e),n),e instanceof m?e:n},_replaceData:function(e,t){for(var n=e.length,r=0;r<n;r++)t[r]=e[r];t.length=n},_readAggregates:function(e){var t=C(this._aggregateResult,this.reader.aggregates(e));return``in t&&(t[this._defaultParentId()]=t[``],delete t[``]),t},read:function(e){var n=this;return n._isPageable()&&(n._dataMaps={},n._modelOptions().expanded||(n._skip=0,n._page=1,n._collapsedTotal=t)),p.fn.read.call(n,e)},remove:function(e){return this._removeChildData(e),this._removeFromDataMaps(e),p.fn.remove.call(this,e)},_removeChildData:function(e,t){var n=this,r=n._isPageable(),i=r?this._getData():this.data(),a=r?n._getChildrenMap()||n.childrenMap(i):n._childrenMap(i),o=this._subtree(a,e.id),s=$(t)?!1:t,c=this._removeItems(o,s);n._removeFromDataMaps(c)},pushDestroy:function(e){var t=this;S(e)||(e=[e]);for(var n=0;n<e.length;n++)t._removeChildData(e[n],!0),t._removeFromDataMaps(e[n]);p.fn.pushDestroy.call(t,e)},insert:function(e,t){var n=this,r=n._createNewModel(t);return n._insertInDataMaps(r),p.fn.insert.call(n,e,r)},_filterCallback:function(e){var t=this,n,r,i={},a=[],o=e.toArray(),s=t._modelIdField(),c=t._modelParentIdField(),l=t._isPageable(),u=[],d;for(n=0;n<o.length;n++)if(r=o[n],l){for(u=[],i[r[s]]||(i[r[s]]=!0,u.push(r)),d=t._parentNode(r);d&&!i[d[s]];)i[d[s]]=!0,u.unshift(d),d=t._parentNode(d);u.length&&(a=a.concat(u))}else for(;r&&(i[r[s]]||(i[r[s]]=!0,a.push(r)),!i[r[c]]);)i[r[c]]=!0,r=this.parentNode(r),r&&a.push(r);return new h(a)},_subtree:function(e,t){for(var n=this,r=e[t]||[],i=n._defaultParentId(),a=n._modelIdField(),o=0,s=r.length;o<s;o++)r[o][a]!==i&&(r=r.concat(n._subtree(e,r[o][a])));return r},_childrenMap:function(e){var t={},n,r,i,a;for(e=this._observeView(e),n=0;n<e.length;n++)r=e[n],i=r.id,a=r.parentId,t[i]=t[i]||[],t[a]=t[a]||[],t[a].push(r);return t},childrenMap:function(e){return this._createTreeView(e).childrenMap()},_getChildrenMap:function(){return this._getDataMaps().children},_initIdsMap:function(e){var t=this,n=t._getDataMaps();return $(n.ids)&&(n.ids=t._idsMap(e)),n.ids},_idsMap:function(e){return this._createTreeView(e).idsMap()},_getIdsMap:function(){return this._getDataMaps().ids||{}},_getFilteredChildrenMap:function(){return this._getDataMaps().filteredChildren},_setFilteredChildrenMap:function(e){var t=this._getDataMaps();t.filteredChildren=e},_initDataMaps:function(e){var t=this;return t._dataMaps=t._createTreeView(e).dataMaps(),t._dataMaps},_initChildrenMapForParent:function(e){var t=this,n=t._getData(),r=t._getChildrenMap(),i=t._modelIdField(),a=t._modelParentIdField(),o=(e||{})[i];if(r&&e){r[o]=[];for(var s=0;s<n.length;s++)n[s][a]===o&&r[o].push(n[s])}},_getDataMaps:function(){var e=this;return e._dataMaps=e._dataMaps||{},e._dataMaps},_createTreeView:function(e,t){return new ct(e,C(t,this._defaultTreeModelOptions()))},_defaultTreeModelOptions:function(){var e=this,t=e._modelOptions();return{defaultParentId:e._defaultParentId(),idField:e._modelIdField(),parentIdField:e._modelParentIdField(),expanded:t.expanded}},_defaultDataItemType:function(){return this.reader.model||kendo.data.ObservableObject},_calculateAggregates:function(e,t){t||={};var n=this,r={},i,a,o,s=t.filter,c=t.skip,l=t.take,u=!$(c)&&!$(l)?c+l:1/0,d=n._isPageable(),f=t.filteredChildrenMap,p=t.childrenMap,m;if(d){if($(t.aggregate))return r;m=f||p||n.childrenMap(n._getData())}!d&&s&&(e=h.process(e,{filter:s,filterCallback:this._filterCallback.bind(this)}).data);var g=d?m:n._childrenMap(e);for(r[this._defaultParentId()]=new h(this._subtree(g,this._defaultParentId())).aggregate(t.aggregate),o=0;o<e.length&&!(o>=u);o++)i=e[o],a=this._subtree(g,i.id),r[i.id]=new h(a).aggregate(t.aggregate);return r},_queryProcess:function(e,t){var n=this,r={};if(t||={},t.filterCallback=this._filterCallback.bind(this),n._isPageable())return n._processPageableQuery(e,t);var i=this._defaultParentId();r=h.process(e,t);var a=this._childrenMap(r.data),o,s,c,l;for(e=a[i]||[],s=0;s<e.length;s++)c=e[s],c.id!==i&&(l=a[c.id],o=!!(l&&l.length),c.loaded()||c.loaded(o||!c.hasChildren),(c.loaded()||c.hasChildren!==!0)&&(c.hasChildren=o),o&&(e=e.slice(0,s+1).concat(l,e.slice(s+1))));return r.data=e,r},_processPageableQuery:function(e,n){var r=this,i=r._getDataMaps(),a,o;return(r._getData()!==e||!i.children||!i.ids)&&(i=r._initDataMaps(r._getData())),n.childrenMap=i.children||{},n.idsMap=i.ids||{},a=r._processTreeQuery(e,n),r._replaceWithObservedData(a.data,e),r._processDataItemsState(a.data,a.childrenMap),r._replaceItemsInDataMaps(a.data),a.dataToAggregate=r._dataToAggregate(a.data,n),n.filter||r.filter()?(o=a.filteredChildrenMap,r._replaceInMapWithObservedData(o,e),r._setFilteredChildrenMap(o),n.filteredChildrenMap=o,r._calculateCollapsedTotal(a.data)):r._collapsedTotal=t,a},_dataToAggregate:function(e){var t=this,n=e[0]||{};return t._parentNodes(n).concat(e)},_replaceItemsInDataMaps:function(e){for(var n=this,r=S(e)?e:[e],i=n._defaultDataItemType(),a=n._defaultParentId(),o=n._modelIdField(),s=n._modelParentIdField(),c=n._getDataMaps(),l,u,d,f=0;f<r.length;f++)l=r[f],l instanceof i&&(n._insertInIdsMap(l),u=n._parentNodes(l),d=u&&u.length?u[u.length-1]:t,l[s]===a?n._replaceInMap(c.children,a,l,i):d&&n._replaceInMap(c.children,d[o],l,i))},_replaceInMap:function(e,t,n,r){var i=this._modelIdField();e[t]=e[t]||[],r||=this._defaultDataItemType();var a=e[t].filter(function(e){return n[i]===e[i]})[0],o=a?e[t].indexOf(a):-1;o!==-1&&!(a instanceof r)&&(e[t][o]=n)},_replaceWithObservedData:function(e,t){for(var n=this,r=n._getDataMaps().ids||{},i=n._modelIdField(),a=n._defaultDataItemType(),o,s,c,l,u,d=0;d<e.length;d++)o=e[d],s=o[i],o instanceof a||(r[s]instanceof a?e[d]=r[s]:(c=n._getById(s),l=t.indexOf(c),c&&l!==-1&&(u=t.at(l),e[d]=u)))},_replaceInMapWithObservedData:function(e,t){var n=this;for(var r in e)n._replaceWithObservedData(e[r],t)},_insertInDataMaps:function(e){var t=this;t._isPageable()&&(t._insertInIdsMap(e),t._insertInChildrenMap(e))},_insertInIdsMap:function(e){var t=this,n=t._getIdsMap(),r=t._modelIdField();$(e[r])||(n[e[r]]=e)},_insertInChildrenMap:function(e,t){var n=this,r=n._getChildrenMap()||{},i=n._modelIdField(),a=n._modelParentIdField(),o=e[i],s=e[a];t||=0,r[o]=r[o]||[],r[s]=r[s]||[],r[s].splice(t,0,e)},_removeFromDataMaps:function(e){var t=this;if(e=S(e)?e:[e],t._isPageable())for(var n=0;n<e.length;n++)t._removeFromIdsMap(e[n]),t._removeFromChildrenMap(e[n])},_removeFromIdsMap:function(e){var n=this,r=n._getIdsMap(),i=n._modelIdField();$(e[i])||(r[e[i]]=t)},_removeFromChildrenMap:function(e){var t=this,n=t._getChildrenMap()||{},r=e[t._modelParentIdField()];n[r]=n[r]||[];var i=t._indexInChildrenMap(e);i!==-1&&n[r].splice(i,1)},_indexInChildrenMap:function(e){var t=this;return t._itemIndexInMap(e,t._getChildrenMap())},_itemIndexInMap:function(e,t){var n=this,r=t||{},i=e[n._modelParentIdField()];r[i]=r[i]||[];var a=r[i].filter(function(t){return e.uid===t.uid})[0];return a?r[i].indexOf(a):-1},_getById:function(e){for(var t=this,n=t._modelIdField(),r=t._getData(),i=0;i<r.length;i++)if(r[i][n]===e)return r[i]},_isLastItemInView:function(e){var t=this.view();return t.length&&t[t.length-1]===e},_defaultPageableQueryOptions:function(){var e=this,t=e._getDataMaps();return{skip:e.skip(),take:e.take(),page:e.page(),pageSize:e.pageSize(),sort:e.sort(),filter:e.filter(),group:e.group(),aggregate:e.aggregate(),filterCallback:e._filterCallback.bind(e),childrenMap:t.children,idsMap:t.ids}},_isPageable:function(){var e=this.pageSize();return!$(e)&&e>0&&!this.options.serverPaging},_updateTotalForAction:function(e,t){var n=this;p.fn._updateTotalForAction.call(n,e,t),n._isPageable()&&n._updateCollapsedTotalForAction(e,t)},_updateCollapsedTotalForAction:function(e,t){var n=this,r=parseInt(n._collapsedTotal,10);if(!Wt(n._collapsedTotal)){n._calculateCollapsedTotal();return}e===`add`?r+=t.length:e===`remove`?r-=t.length:(e!==`itemchange`&&e!==`sync`&&!n.options.serverPaging||e===`sync`)&&(r=n._calculateCollapsedTotal()),n._collapsedTotal=r},_setFilterTotal:function(e,t){var n=this;p.fn._setFilterTotal.call(n,e,t)},collapsedTotal:function(){var e=this;return $(e._collapsedTotal)?e._calculateCollapsedTotal():e._collapsedTotal},_calculateCollapsedTotal:function(e){var t=this,n=t._dataWithoutCollapsedSubtrees(e);return n.length&&(t._collapsedTotal=n.length),t._collapsedTotal},_dataWithoutCollapsedSubtrees:function(e){return this._removeCollapsedSubtrees(e||this._getData())},_removeCollapsedSubtrees:function(e){var t=this;return t._createTreeView(e).removeCollapsedSubtreesFromRootNodes({expanded:t._modelOptions().expanded,childrenMap:t.filter()?t._getFilteredChildrenMap():t._getChildrenMap()})},_processTreeQuery:function(e,t){return H.process(e,C(t,this._defaultTreeModelOptions(),{processFromRootNodes:!0}))},_processDataItemsState:function(e,t){var n=e.length,r;for(r=0;r<n;r++)this._processDataItemState(e[r],t)},_processDataItemState:function(e,t){var n=this._defaultParentId();if(e.id!==n){var r=t[e.id]||[],i=!!(r&&r.length);e.loaded&&(e.loaded()||e.loaded(i||!e.hasChildren),(e.loaded()||e.hasChildren!==!0)&&(e.hasChildren=i))}},_queueRequest:function(e,t){t.call(this)},_modelLoaded:function(e){var t=this.get(e);t.loaded(!0),t.hasChildren=this.childNodes(t).length>0},_modelError:function(e,t){this.get(e)._error=t},success:function(e,t){(!t||t.id===void 0)&&(this._data=this._observe([])),p.fn.success.call(this,e,t),this._total=this._data.length},load:function(t){var n=`_query`,r=this.options.serverSorting||this.options.serverPaging||this.options.serverFiltering||this.options.serverGrouping||this.options.serverAggregates,i=e.Deferred().resolve().promise();if(t.loaded()){if(r)return i}else t.hasChildren&&(n=`read`,this._removeChildData(t));return this[n]({id:t.id}).done(this._modelLoaded.bind(this,t.id)).fail(this._modelError.bind(this,t.id))},contains:function(e,t){for(var n=this,r=n._modelIdField(),i=n._modelParentIdField(),a=e[r],o=n._isPageable();t;){if(t[i]===a)return!0;t=o?n._parentNode(t):n.parentNode(t)}return!1},_byParentId:function(e,t){var n=[],r=this.view(),i;if(e===t)return[];for(var a=0;a<r.length;a++)i=r.at(a),i.parentId==e&&n.push(i);return n},_defaultParentId:function(){return this.reader.model.fn.defaults[this.reader.model.parentIdField]},_modelOptions:function(){return(this.options.schema||{}).model||{}},_modelIdField:function(){return this._modelOptions().id||`id`},_modelParentIdField:function(){return this._modelOptions().parentId||I},childNodes:function(e){return this._byParentId(e.id,this._defaultParentId())},allChildNodes:function(e,t){for(var n=this.data().filter(function(t){return t.parentId===e.id}),r=0;r<n.length;r++)t.push(n[r]),this.allChildNodes(n[r],t)},rootNodes:function(){return this._byParentId(this._defaultParentId())},_rootNode:function(e){return this._parentNodes(e)[0]},_pageableRootNodes:function(e){e||={};for(var t=this,n=t._defaultParentId(),r=t._modelParentIdField(),i=[],a=t._nodesWithoutParentInView(e),o,s,c=0;c<a.length;c++)o=a[c],o[r]===n?i.push(o):(s=t._rootNode(o),s&&i.indexOf(s)===-1&&i.push(s));return i},parentNode:function(e){return this.get(e.parentId)},_parentNode:function(e){var t=this,n=t._modelParentIdField(),r=t._initIdsMap(t._getData()),i=e[n];return r[i]||t._getById(i)},_parentNodes:function(e){for(var t=this,n=t._parentNode(e),r=[];n;)r.unshift(n),n=t._parentNode(n);return r},_parentNodesNotInView:function(){for(var e=this,t=e.view(),n=[],r=e._defaultParentId(),i=e._modelIdField(),a=e._modelParentIdField(),o,s=[],c,l,u,d=0;d<t.length;d++)l=t[d],l[i],u=l[a],o=e._parentInView(u),!o&&u!==r&&(s=e._parentNodes(l),c=s&&s.length?s[s.length-1]:e._getById(u),c&&n.indexOf(c)===-1&&n.push(c));return n},_nodesWithoutParentInView:function(e){e||={};for(var t=this,n=t.view(),r=e.childrenMap||t.childrenMap(t._getData()),i=t._modelIdField(),a=t._modelParentIdField(),o,s,c=[],l=0;l<n.length;l++)o=n[l],r[o[i]],s=t._parentInView(o[a]),s||c.push(o);return c},_parentInView:function(e){for(var t=this.view(),n=0;n<t.length;n++)if(t[n].id===e)return t[n]},level:function(e){var t=-1;e instanceof U||(e=this.get(e));do e=this.parentNode(e),t++;while(e);return t},_pageableModelLevel:function(e){var t=this;return!e||!t._isPageable()?0:t._parentNodes(e).length},filter:function(e){var n=p.fn.filter;if(e===t)return n.call(this,e);n.call(this,e)},_pageableQueryOptions:function(e){var t=this._getDataMaps();return e.childrenMap=t.children,e.idsMap=t.ids,e},_flatData:function(e,t){return t=this._isPageable()?!0:t,p.fn._flatData.call(this,e,t)},data:function(e){var t=this,n=p.fn.data.call(t,e);return t._isPageable()&&(t._initDataMaps(t._getData()),t._calculateCollapsedTotal()),n},cancelChanges:function(e){var t=this;p.fn.cancelChanges.call(t,e),t._restorePageSizeAfterAddChild()},_modelCanceled:function(e){var t=this;t._isPageable()&&t._removeFromDataMaps(e)},_changesCanceled:function(){var e=this;e._isPageable()&&e._initDataMaps(e._getData())},_setAddChildPageSize:function(){var e=this,t={};e._isPageable()&&(e._addChildPageSize=e.pageSize()+1,t=e._defaultPageableQueryOptions(),t.take=e._addChildPageSize,t.pageSize=e._addChildPageSize,e._query(t))},_restorePageSizeAfterAddChild:function(){var e=this,n={};e._isPageable()&&($(e._addChildPageSize)||(n=e._defaultPageableQueryOptions(),n.take=e._addChildPageSize-1,n.pageSize=e._addChildPageSize-1,e._query(n))),e._addChildPageSize=t},sync:function(){var e=this;return p.fn.sync.call(e).then(function(){e._restorePageSizeAfterAddChild()})},_syncEnd:function(){var e=this;e._isPageable()&&e._initDataMaps(e._getData())}});lt.create=function(e){return Array.isArray(e)?e={data:e}:e instanceof m&&(e={data:e.toJSON()}),e instanceof lt?e:new lt(e)};function ut(){return this.style.display!==`none`}function dt(n){var r=kendo.attr(`index`);return[].sort.call(n,function(n,i){n=e(n),i=e(i);var a=n.attr(r),o=i.attr(r);return a===t&&(a=e(n).index()),o===t&&(o=e(i).index()),a=parseInt(a,10),o=parseInt(o,10),a>o?1:a<o?-1:0})}function K(t){var n=t.find(`>tr:not(.k-filter-row)`),r=function(){var t=e(this);return!t.hasClass(`k-group-cell`)&&!t.hasClass(`k-hierarchy-cell`)},i=e();return n.length>1&&(i=n.find(`th[data-index]`).filter(r)),i=i.add(n.last().find(`th`).filter(r)),dt(i)}function ft(e){var t=[],n=e.className;let r=n===V.iconPlaceHolder?{"ref-blank-icon":``}:{};for(var i=0,o=e.level;i<o;i++)t.push(a(`span`,{className:n,"aria-hidden":!0,...r}));return t}function pt(e){for(var t,n=0,r=0,i=e.length;r<i;r++)t=e[r].style.width,t&&t.indexOf(`%`)==-1&&(n+=parseInt(t,10));return n}function mt(e,t){if(e=e[0],t=t[0],e.rows.length&&t.rows.length&&e.rows.length!==t.rows.length){var n=e.offsetHeight,r=t.offsetHeight,i,a;n>r?(i=t.rows[t.rows.length-1],Xe.test(i.className)&&(i=t.rows[t.rows.length-2]),a=n-r):(i=e.rows[e.rows.length-1],Xe.test(i.className)&&(i=e.rows[e.rows.length-2]),a=r-n),i.style.height=i.offsetHeight+a+`px`}}var ht=d.Pager.extend({options:{name:`TreeListPager`},totalPages:function(){var e=this,t=e.dataSource;return t&&t._filter?d.Pager.fn.totalPages.call(e):Math.ceil((e._collapsedTotal()||0)/(e.pageSize()||1))},_createDataSource:function(e){this.dataSource=kendo.data.TreeListDataSource.create(e.dataSource)},_collapsedTotal:function(){var e=this.dataSource;return e&&e.collapsedTotal()||0}}),q=kendo.Observable.extend({init:function(e,t){kendo.Observable.fn.init.call(this),t=this.options=C(!0,{},this.options,t),this.element=e,this.bind(this.events,t),this.model=this.options.model,this.fields=this._fields(this.options.columns),this._initContainer(),this.createEditable()},options:{renderForm:!1},events:[],_initContainer:function(){this.wrapper=this.element},createEditable:function(){var e=this.options;e.renderForm?(this.form=new d.Form(this.wrapper.find(`.k-treelist-form`),{items:this.fields,buttonsTemplate:()=>``,formData:this.model,change:e.change}),this.editable=this.form.editable):this.editable=new d.Editable(this.wrapper,{fields:this.fields,target:e.target,skipFocus:e.skipFocus||!1,clearContainer:e.clearContainer,model:this.model,change:e.change})},_isEditable:function(e){return Vt(e,this.model)},_fields:function(e){var t=[],n,r,i;for(n=0,r=e.length;n<r;n++)i=e[n],this._isEditable(i)&&t.push({field:i.field,format:i.format,editor:i.editor,editorOptions:C(!0,{format:i.format},i.editorOptions),label:i.title||i.field||``});return t},end:function(){return this.editable.end()},close:function(){this.destroy()},destroy:function(){this.editable.destroy(),this.editable.element.find(`[`+kendo.attr(`container-for`)+`]`).empty().end().removeAttr(kendo.attr(`role`)),this.model=this.wrapper=this.element=this.columns=this.editable=null}}),gt=q.extend({init:function(e,t){q.fn.init.call(this,e,t),this._attachHandlers(),kendo.cycleForm(this.wrapper),this.open()},events:[F,N],options:{window:{modal:!0,resizable:!1,draggable:!0,title:`Edit`,visible:!1}},_initContainer:function(){var t=this.options,n=[];this.wrapper=e(`<div class="k-popup-edit-form"/>`).attr(kendo.attr(`uid`),this.model.uid).append(`<div class="k-edit-form-container"/>`),t.template?(this._appendTemplate(n),this.fields=[]):(this.options.renderForm=!0,n.push(s(`<div class="k-treelist-form"></div>`))),new i.Tree(this.wrapper.children()[0]).render(n),this.wrapper.appendTo(t.appendTo),this.window=new d.Window(this.wrapper,t.window)},_appendTemplate:function(e){var t=this.options.template;typeof t===te&&(t=kendo.unescape(t)),t=kendo.template(t)(this.model),e.push(s(t))},_attachHandlers:function(){var e=this._cancelProxy=this._cancel.bind(this);this.window.wrapper.on(j+A,`button[data-command='canceledit']`,this._cancelProxy),this._saveProxy=this._save.bind(this),this.window.wrapper.on(j+A,`button[data-command='update']`,this._saveProxy),this.window.bind(`close`,function(t){t.userTriggered&&e(t)})},_detachHandlers:function(){this._cancelProxy=null,this._saveProxy=null,this.window.wrapper.off(A)},_cancel:function(e){this.trigger(F,e)},_save:function(){this.trigger(N)},open:function(){this.window.center().open()},close:function(){this.window.bind(`deactivate`,this.destroy.bind(this)).close()},destroy:function(){this.form&&this.form.destroy(),this._detachHandlers(),this.window.destroy(),this.window=null,q.fn.destroy.call(this)}}),_t=q.extend({destroy:function(){var e=this;e.editable.destroy(),e.editable.element.off().empty().removeAttr(kendo.attr(`role`)),e.model=e.wrapper=e.element=e.columns=e.editable=null}}),J=f.extend({init:function(t,n,r){if(f.fn.init.call(this,t,n),r&&(this._events=r),z=kendo.support.isRtl(t),V.iconExpand=z?et:$e,this._dataSource(this.options.dataSource),this._columns(),this._layout(),this._aria(),this._ariaId(),this._navigatable(),this._selectable(),this._sortable(),this._resizable(),this._filterable(),this._filterRow(),this._attachEvents(),this._toolbar(),this._scrollable(),this._reorderable(),this._columnMenu(),this._minScreenSupport(),this._draggable(),this._pageable(),this.options.autoBind&&this.dataSource.fetch(),this._hasLockedColumns){var i=this;this.wrapper.addClass(`k-grid-lockedcolumns`),this._resizeHandler=function(){i.resize()},e(window).on(`resize`+A,this._resizeHandler)}this.options.contextMenu&&this._initContextMenu(),kendo.notify(this)},_draggable:function(){var t=this,n=this.options.editable,r=t.dataSource,i=r._modelIdField(),a=r._modelParentIdField(),o=t._isPageable(),s,c;!n||!n.move||(s=n.move.reorderable,n.move.clickMoveClick!==!1&&this._hasDragHandleColumn&&(c=!0),this._dragging=new kendo.ui.HierarchicalDragAndDrop(this.wrapper,{autoScroll:!0,holdToDrag:x,filter:t._hasDragHandleColumn?`[ref-treelist-drag-cell]`:`tbody>tr`,itemSelector:`tr`,allowedContainers:this.table,clickMoveClick:c,hintText:function(t){return t=t.closest(`tr`),t.children(`td`).map(function(){return e(this).text().replace(/<(\/?)script([^>]*)>/gi,``)}).toArray().join(`<span class='k-drag-separator'></span>`)},contains:(function(e,t){var n=this.dataItem(t),r=this.dataItem(e);return r==n||this.dataSource.contains(r,n)}).bind(this),itemFromTarget:function(e){var n=e.closest(`tr`),r=n.prev(),i=n.next(),a,o;return r&&(a=!t.sameLevel(r,n)),i&&(o=!t.sameLevel(i,n)),{item:n,content:n,first:a,last:o}},dragstart:(function(e){this.wrapper.addClass(`k-treelist-dragging`),this.wrapper.find(`.k-grid-content`).length&&this.wrapper.find(`.k-grid-content table, .k-grid-content-locked table`).css(`position`,`relative`);var t=this.dataItem(e);return this.trigger(Me,{source:t})}).bind(this),drag:(function(e){e.source=this.dataItem(e.source),this.trigger(Ne,e)}).bind(this),drop:(function(e){return e.source=this.dataItem(e.source),e.destination=this.dataItem(e.destination),this.wrapper.removeClass(`k-treelist-dragging`),this.wrapper.find(`.k-grid-content`).length&&this.wrapper.find(`.k-grid-content table, .k-grid-content-locked table`).css(`position`,`static`),this.trigger(Pe,e)}).bind(this),dragend:(function(e){var n=this.dataItem(e.destination),s=this.dataItem(e.source),c=s[a],l=r._indexInChildrenMap(s),u=e.position;if(u==`over`){o&&(r._removeFromChildrenMap(s),s[a]=n?n[i]:null,r._initChildrenMapForParent(n),s[a]=c);var d=s.set(`parentId`,n?n.id:null);o&&d&&(r._removeFromChildrenMap(s),s[a]=c,r._removeFromChildrenMap(s),r._insertInChildrenMap(s,l))}else u==`before`?t.insertBefore(s,n):u==`after`&&t.insertAfter(s,n);e.source=s,e.destination=n,this.trigger(Fe,e)}).bind(this),reorderable:s,dropHintContainer:function(e){return e.children(`td:visible`).eq(0)},dropPositionFrom:function(e){let t=e.parent(),n=e.parent().contents(),r=e[0],i=!1;if(t.find(it).length)return e.prevAll(it).length>0?`after`:`before`;if(t.is(`[ref-treelist-drag-cell]`))i=n[0]!==r;else{let e=n.length;for(let t=0;t<e&&n[t]!==r;t++)n[t].nodeType===3&&(i=!0)}return i?`after`:`before`}}))},sameLevel:function(){return arguments[0].find(it).length===arguments[1].find(it).length},insertAfter:function(e,t){this.insertAction(e,t,1)},insertBefore:function(e,t){this.insertAction(e,t,0)},insertAction:function(e,t,n){var r=this,i=r.dataSource,a=i._modelParentIdField(),o,s=i.indexOf(e),c=r._isPageable(),l=i._indexInChildrenMap(t),u,d=i._getChildrenMap()||{},f=e[a];r._unbindDataSource(),r._unbindDataChange(),c&&i._removeFromChildrenMap(e),e[a]!=t[a]&&e.set(`parentId`,t&&t.parentId?t.parentId:null),i._data.splice(s,1),o=i.indexOf(t),u=o+n,c&&(l+=n,d[f].length<=l&&(l=d[f].length),i._insertInChildrenMap(e,l)),i._data.splice(u,0,e),i._destroyed.pop(),r._bindDataChange(),r._bindDataSource(),r.refresh()},_bindDataChange:function(){var e=this.dataSource;e._data&&e._changeHandler&&(e._data.bind(O,e._changeHandler),e._data.trigger(O))},_unbindDataChange:function(){var e=this.dataSource;e._data&&e._changeHandler&&e._data.unbind(O,e._changeHandler)},_bindDataSource:function(){var e=this,t=e.dataSource;t&&t.bind(O,e._refreshHandler)},_unbindDataSource:function(){var e=this,t=e.dataSource;t&&t.unbind(O,e._refreshHandler)},itemFor:function(e){return typeof e==`number`&&(e=this.dataSource.get(e)),this.tbody.find(`[`+kendo.attr(`uid`)+`=`+e.uid+`]`)},_itemFor:function(e){var t=this,n=t.lockedContent?t.lockedTable:t.table;return typeof e==`number`&&(e=this.dataSource.get(e)),n.find(`[`+kendo.attr(`uid`)+`=`+e.uid+`]`)},_scrollable:function(){if(this.options.scrollable){var t=this.thead.closest(`.k-grid-header-wrap`),n=e(this.lockedContent).on(`DOMMouseScroll`+A+` mousewheel`+A,this._wheelScroll.bind(this));this.content.on(`scroll`+A,function(){kendo.scrollLeft(t,this.scrollLeft),n.scrollTop(this.scrollTop)}),this.element.find(`.k-grid-content, .k-grid-content-locked`).wrapAll(`<div class='k-grid-container' />`);var r=kendo.touchScroller(this.content);r&&r.movable&&(this._touchScroller=r,r.movable.bind(`change`,function(e){kendo.scrollLeft(t,-e.sender.x),n&&n.scrollTop(-e.sender.y)}))}},_wheelScroll:function(t){if(!t.ctrlKey){var n=kendo.wheelDeltaY(t),r=e(t.currentTarget);n&&(r[0].scrollHeight>r[0].clientHeight&&(r[0].scrollTop<r[0].scrollHeight-r[0].clientHeight&&n<0||r[0].scrollTop>0&&n>0)&&t.preventDefault(),r.one(`wheel`+A,!1),this.content.scrollTop(this.content.scrollTop()+-n))}},_progress:function(){var e=this.options.messages;this.tbody.find(`tr`).length||this._showStatus(kendo.template(({className:e,messages:t})=>`<span class='${e}'></span> ${r(t.loading)}`)({className:V.icon+` `+V.loading,messages:e}))},_error:function(e){this.dataSource.rootNodes().length||this._render({error:e})},refresh:function(t){var n=this;if(t||={},!(t.action==`itemchange`&&this.editor)&&!this.trigger(he)){var r=e(this.current()),i=!1,a,o;this._cancelEditor(),this._render(),this._adjustHeight(),this.options.navigatable&&((this._isActiveInTable()||this.editor)&&(i=r.is(`th`),a=i?r.parent().children(`:not(.k-group-cell)`).index(r[0]):Math.max(this.cellIndex(r),0),o=!i&&r.parent().index()),this._restoreCurrent(a,i,o)),n._checkBoxSelection&&n._deselectCheckRows(n.items(),!0),n._aria(),this.trigger(ge)}},items:function(){return this._hasLockedColumns?this._items(this.tbody).add(this._items(this.lockedTable)):this._items(this.tbody)},_items:function(t){return t.find(`tr[data-uid]`).filter(function(){return!e(this).hasClass(V.footerTemplate)})},_footerItems:function(){var t=this.tbody;return this._hasLockedColumns&&(t=t.add(this.lockedTable)),t.find(`tr`).filter(function(){return e(this).hasClass(V.footerTemplate)})},dataItems:function(){var e=kendo.ui.DataBoundWidget.fn.dataItems.call(this);if(this._hasLockedColumns){for(var t=e.length,n=Array(2*t),r=t;--r>=0;)n[r]=n[r+t]=e[r];e=n}return e},_showNoRecordsTemplate:function(){var t=`<div class="{0}">{1}</div>`,n=`<div class="k-grid-norecords-template"{1}>{0}</div>`,r=this.options.scrollable&&!this.wrapper[0].style.height?` ${kendo.attr(`style-margin`)}="0 auto" ${kendo.attr(`style-position`)}="static"`:``,i,a;this._contentTree.render([]),this._hasLockedColumns&&this._lockedContentTree.render([]),i=kendo.format(n,this.options.messages.noRows,r),a=e(kendo.template(()=>kendo.format(t,Le,i))({})),kendo.applyStylesFromKendoAttributes(a,[`margin`,`position`]),a.insertAfter(this.table)},_showStatus:function(t){var n=this.element.find(`.k-status`),r=e(this.content).add(this.lockedContent);n.length||(n=e(`<div class='k-status' role='alert' aria-live='polite' />`).appendTo(this.element)),this._contentTree.render([]),this._hasLockedColumns&&this._lockedContentTree.render([]),r.hide(),n.html(t)},_hideStatus:function(){this.element.find(`.k-status`).remove(),this._hideNoRecordsTempalte(),e(this.content).add(this.lockedContent).show()},_hideNoRecordsTempalte:function(){this.element.find(`.`+Le).remove()},_adjustHeight:function(){var e=this,t=this.element,n=t.find(k+V.gridContentWrap),r=t.find(k+V.gridHeader),i=t.find(k+V.gridToolbar),a=t.find(k+V.status),o=e._isPageable()&&e.pager&&e.pager.element.is(`:visible`)?u(e.pager.element):0,s,c=kendo.support.scrollbar();t.css(ze,this.options.height),function(e){var t,n;return e[0].style.height?!0:(t=e.height(),e.height(`auto`),n=e.height(),e.height(``),t!=n)}(t)&&(s=e.options.hasHeader?t.height()-u(r)-u(i)-u(a)-o:t.height()-u(i)-u(a)-o,n.height(s),this._hasLockedColumns&&(c=this.table[0].offsetWidth>this.table.parent()[0].clientWidth?c:0,this.lockedContent.height(s-c)))},_resize:function(e,t){this._applyLockedContainersWidth(),this._adjustHeight(),this.pager&&this.pager.element&&this.pager.resize(t)},_minScreenSupport:function(){this.hideMinScreenCols()&&(this.minScreenResizeHandler=this.hideMinScreenCols.bind(this),e(window).on(`resize`,this.minScreenResizeHandler))},_iterateMinScreenCols:function(e,n){for(var r=!1,i=0;i<e.length;i++){var a=e[i],o=a.minScreenWidth;o!==t&&o!==null&&(r=!0,o>n?this.hideColumn(a):this.showColumn(a)),!a.hidden&&a.columns&&(r=this._iterateMinScreenCols(a.columns,n)||r)}return r},hideMinScreenCols:function(){var e=this.columns,t=window.innerWidth>0?window.innerWidth:screen.width;return this._iterateMinScreenCols(e,t)},destroy:function(){this._destroyColumnAttachments(),f.fn.destroy.call(this);var t=this.dataSource;t.unbind(O,this._refreshHandler),t.unbind(re,this._errorHandler),t.unbind(ie,this._progressHandler),this._navigatableTables&&(this._navigatableTables.off(A),this._navigatableTables=null,this._headertables=null),this._current=null,this._resizeHandler&&e(window).off(`resize`+A,this._resizeHandler),this._dragging&&=(this._dragging.destroy(),null),this.resizable&&=(this.resizable.destroy(),null),this.reorderable&&=(this.reorderable.destroy(),null),this._draggableInstance&&this._draggableInstance.element&&(this._draggableInstance.destroy(),this._draggableInstance=null),this.selectable&&this.selectable.destroy(),this._userEvents&&=(this._userEvents.destroy(),null),this.minScreenResizeHandler&&e(window).off(`resize`,this.minScreenResizeHandler),this._destroyEditor(),this.element.off(A),this.wrapper&&this.wrapper.off(A),this._touchScroller&&this._touchScroller.destroy(),this._destroyPager(),t&&(t._dataMaps=null),this._autoExpandable=null,this._refreshHandler=this._errorHandler=this._progressHandler=this._dataSourceFetchProxy=null,this.thead=this.content=this.tbody=this.table=this.element=this.lockedHeader=this.lockedContent=null,this._statusTree=this._headerTree=this._contentTree=this._lockedHeaderColsTree=this._lockedContentColsTree=this._lockedHeaderTree=this._lockedContentTree=null,kendo.destroy(this.wrapper)},options:{name:`TreeList`,columns:[],autoBind:!0,scrollable:!0,selectable:!1,sortable:!1,toolbar:null,height:null,columnMenu:!1,messages:{noRows:`No records to display`,loading:`Loading...`,requestFailed:`Request failed.`,retry:`Retry`,dragHandleLabel:`Drag row`,commands:{edit:`Edit`,update:`Save`,canceledit:`Cancel`,create:`Add new record`,createchild:`Add child record`,destroy:`Delete`,excel:`Export to Excel`,pdf:`Export to PDF`,search:`Search...`,select:`Select`,selectRow:`Select Row`,selectAllRows:`All rows`,clearSelection:`Clear selection`,exportPdf:`Export to PDF`,exportExcel:`Export to Excel`,sortAsc:`Sort Ascending`,sortDesc:`Sort Descending`,expandItem:`Expand Item`,collapseItem:`Collapse Item`},sortHeader:`Press Enter to sort`,filterCellTitle:`filter cell`},excel:{hierarchy:!0},resizable:!1,search:!1,filterable:!1,editable:!1,reorderable:!1,pageable:!1,renderAllRows:!0,rowTemplate:null,altRowTemplate:null,hasHeader:!0,contextMenu:!1},events:[O,oe,M,se,N,le,pe,ue,de,he,ge,F,Me,Ne,Pe,Fe,ve,ne,fe,ye,be,xe,Ce,we,Te,Ee,De,Oe,ke,Ae,je],getOptions:function(){var t=this.options;t.dataSource=null;var n=C(!0,{},this.options);n.columns=kendo.deepExtend([],this.columns);var r=this.dataSource,i=r.options.data&&r._data;return r.options.data=null,n.dataSource=e.extend(!0,{},r.options),r.options.data=i,n.dataSource.data=i,n.dataSource.page=r.page(),n.dataSource.filter=e.extend(!0,{},r.filter()),n.dataSource.pageSize=r.pageSize(),n.dataSource.sort=r.sort(),n.dataSource.group=r.group(),n.dataSource.aggregate=r.aggregate(),n.dataSource.transport&&(n.dataSource.transport.dataSource=null),n.pageable&&n.pageable.pageSize&&(n.pageable.pageSize=r.pageSize()),n},setOptions:function(e){var t=this.getOptions();kendo.deepExtend(t,e),e.dataSource||(t.dataSource=this.dataSource);var n=this.wrapper,r=this._events,i=this.element;this.destroy(),this.options=null,n[0]!==i[0]&&(n.before(i),n.remove()),i.empty(),this.init(i,t,r),this._setEvents(t)},_destroyColumnAttachments:function(){var t=this;t.thead&&t.thead.add(t.lockedHeader).find(`th`).each(function(){var t=e(this),n=t.data(`kendoFilterMenu`),r=t.data(`kendoColumnSorter`),i=t.data(`kendoColumnMenu`);n&&n.destroy(),r&&r.destroy(),i&&i.destroy()})},_toggle:function(n,r){var i=this,a=e.Deferred().resolve().promise(),o=n.loaded();if(i._isIncellEditable()&&i.editor&&(e(b()).change(),i.closeCell()),n._error&&=(n.expanded=!1,t),!o&&n.expanded)return a;r===void 0&&(r=!n.expanded),n.expanded=r;function s(){i._toggleData(),i._isPageable()?i.refresh():i._render(),i._syncLockedContentHeight()}return o||(a=this.dataSource.load(n).always((function(){s()}))),s(),a},_toggleData:function(){var e=this;e._isPageable()&&e._togglePageableData()},_togglePageableData:function(){var e=this,t=e.dataSource,n=t._getData(),r,i=t._defaultPageableQueryOptions();e._renderProgress(!0);var a=t._getChildrenMap()||t.childrenMap(t._getData());t._processDataItemsState(n,a),r=t._processPageableQuery(n,i),i.childrenMap=r.childrenMap,i.filteredChildrenMap=r.filteredChildrenMap,t._aggregateResult=t._calculateAggregates(r.dataToAggregate,i),t.view(r.data),t.filter()||t._calculateCollapsedTotal(),e._refreshPager(),e._renderProgress(!1)},_refreshPager:function(){var e=this.pager;e&&e.refresh()},expand:function(e){return this._toggle(this.dataItem(e),!0)},collapse:function(e){return this._toggle(this.dataItem(e),!1)},_toggleChildren:function(t){var n=e(t.target),r=this.dataItem(n);if(r){var i=r.expanded?de:ue;this.trigger(i,{model:r})||this._toggle(r),t.preventDefault()}},_navigatable:function(){var t=this;if(!t.options.navigatable){t.table.attr(`tabindex`,0);return}var n=t.table.add(t.lockedTable),r=t.thead.parent().add(e(`>table`,t.lockedHeader));t.options.scrollable&&(n=n.add(r)),r.find(`a.k-link`).attr(`tabIndex`,-1),this._navigatableTables=n,this._headertables=r,n.on(kendo.support.touch?`touchstart`+A:`mousedown`+A,L+`>:visible`,t._tableClick.bind(t)).on(`focus`+A,t._tableFocus.bind(t)).on(`focusout`+A,t._tableBlur.bind(t)).on(`keydown`+A,t._tableKeyDown.bind(t))},cellIndex:function(t){var n=0;return this.lockedTable&&!e.contains(this.lockedTable[0],t[0])&&(n=Y(X(this.columns)).length),e(t).parent().children().index(t)+n},_isActiveInTable:function(){var t=kendo._activeElement();return t?this.table[0]===t||e.contains(this.table[0],t)||this.lockedTable&&(this.lockedTable[0]===t||e.contains(this.lockedTable[0],t)):!1},_restoreCurrent:function(n,r,i){var a,o,s;n===t||n<0||(this._current&&this._current.removeClass(`k-focus`),r?this._setCurrent(this.thead.find(`th`).eq(n)):(a=i||0,n||=0,o=e(),this.lockedTable&&(o=this.lockedTable.find(`>tbody>tr:visible`).eq(a)),o=o.add(this.tbody.children().eq(a)),s=o.find(`>td:visible`).eq(n),this._setCurrent(s)),this._current&&(Q(this.table,!0),this._current.addClass(`k-focus`)))},current:function(e){return this._setCurrent(e,!0)},_setCurrent:function(t,n,r){var i=this,a=i._current;return t=e(t),r?t[0]&&(i._current=t,i._updateCurrentAttr(i._current,t),i._scrollCurrent(),n||this.trigger(Ae,{element:t})):(t.length&&(!a||a[0]!==t[0])&&(this._updateCurrentAttr(a,t),this._scrollCurrent(),n||this.trigger(Ae,{element:t})),t&&t.length&&(this._lastCellIndex=t.parent().children(P).index(t))),i._current},_scrollCurrent:function(){var t=this._current,n=this.options.scrollable;if(!(!t||!n)){var r=t.parent(),i=r.closest(`table`).parent(),a=i.is(`.k-grid-content-locked,.k-grid-header-locked`),o=i.is(`.k-grid-content-locked,.k-grid-content`),s=e(this.content)[0];o&&this._scrollTo(this._relatedRow(r)[0],s),this.lockedContent&&(this.lockedContent[0].scrollTop=s.scrollTop),a||this._scrollTo(t[0],s)}},_findCurrentCell:function(){var t=this,n=t.current(),r=e(t.table).add(t.header).add(t.lockedTable).add(t.lockedHeader);return n&&r.find(n).length>0?n:r.find(k+V.focused)},_scrollTo:function(t,n){var r=t.tagName.toLowerCase(),i=r===`td`||r===`th`,a=e(t).closest(`table`)[0],o=t[i?`offsetWidth`:`offsetHeight`],s=n[i?`scrollLeft`:`scrollTop`],c=n[i?`clientWidth`:`clientHeight`],l=e(t).css(`position`)===`relative`&&z&&i?Math.abs(a.offsetLeft-t.offsetLeft):t[i?`offsetLeft`:`offsetTop`],u=l+o,d=0,f=0,p=0;z&&i&&(_.msie||_.edge?f=a.offsetLeft:(_.mozilla||_.webkit&&_.version>85)&&(p=a.offsetLeft-kendo.support.scrollbar())),s=Math.abs(s+f-p),d=s>l?l:u>s+c?o<=c?u-c:l:s,d=Math.abs(d+f)+p,n[i?`scrollLeft`:`scrollTop`]=d},_aria:function(){var e=this.wrapper,t=`treegrid`,n=this.table,r=e.find(`.k-grid-toolbar`),i=e.find(`.k-grouping-header`),a=n.attr(`id`),o=n.attr(`tabindex`),s,c,l,u,d=this.thead.find(`tr`).length+this.wrapper.find(`.k-grid-footer-wrap table tr`).length,f=this._trailingColumns(),p=this.virtualScroll,m=this.options.pageable,h;n.attr({role:t,tabindex:o>=0?o:0}),n.find(`tbody, thead, tfoot`).attr(`role`,`rowgroup`),n.find(`tr`).attr(`role`,`row`),n.find(`th`).attr(`role`,`columnheader`),n.find(`td`).attr(`role`,`gridcell`),(m&&this.dataSource.totalPages()>1||p&&p.rows)&&(h=this._groups()>0?-1:d+this.dataSource.total(),n.attr(`aria-rowcount`,h)),h&&h>0&&this._ariaRowIndex(),(p&&p.columns||!n.attr(`aria-colcount`)&&(n.find(`td:hidden`).length>0||e.find(`.k-grid-content-locked td:hidden`).length>0))&&(n.attr(`aria-colcount`,f+Y(this.columns).length),this._ariaColumnIndex()),a||(a=kendo.guid(),n.attr(`id`,a)),this.pager&&this.pager.element.attr(`aria-controls`,a),r.attr({role:`toolbar`,"aria-label":this.options.messages.toolbarLabel,"aria-controls":a}),i.attr({role:`toolbar`,"aria-label":this.options.messages.groupingHeaderLabel,"aria-controls":a}),c=this._ariaHeaderFooter(`header`,`thead`,`th, td`,`columnheader`),l=this._ariaHeaderFooter(`footer`,`tfoot`,`td`,`gridcell`),e.find(`.k-grid-content-locked`).length>0&&this._ariaLockedContent(),(c||l)&&(s=this.tbody.attr(`id`)||kendo.guid(),u=[c,s,l].join(` `),this.tbody.attr(`id`,s),n.attr(`aria-owns`,u))},_ariaColumnIndex:function(){var t=this._trailingColumns(),n=this.tbody.find(`>tr`).last().find(`> td[data-virtual]`),r=this.thead.find(`>tr`).not(`.k-filter-row`),i=this.wrapper.find(`.k-grid-header-locked thead > tr`).not(`.k-filter-row`),a=Number.MAX_VALUE,o=0,s=0,c=0,l=0,u,d,f,p,m,h=function(t,n){var r=n.getAttribute(`data-index`),i=Number(r),c=e(n).closest(`.k-grid-header-locked`);c.length===0&&i<a&&(a=i),c.length>0&&s<i&&(s=i),c.length===0&&o<i&&(o=i),r===null?(n.setAttribute(`aria-colindex`,u+1),u+=n.getAttribute(`colspan`)):(n.setAttribute(`aria-colindex`,Number(i)+1),u=Number(i)+1+n.getAttribute(`colspan`))};for(n.length===2?(c=Number(n[0].getAttribute(`colspan`)),l=Number(n[1].getAttribute(`colspan`))):n.length===1&&n.prev().length===0?c=Number(n[0].getAttribute(`colspan`)):n.length===1&&n.prev().length===1&&(l=Number(n[0].getAttribute(`colspan`))),d=0;d<i.length;d++)u=0,i.eq(d).find(`th`).each(h);for(d=0;d<r.length;d++)u=0,r.eq(d).find(`th`).each(h);for(d=0;d<=s;d++)p=d+t,f=this.wrapper.find(`.k-grid-content-locked tbody > tr > td:nth-child(`+(d+1)+`)`),f.attr(`aria-colindex`,p+1);for(d=c;d<=o-a-l;d++)m=c===0?d+1:d-c+2,p=a+d+t,f=this.tbody.find(`> tr > td:nth-child(`+m+`)`),f.attr(`aria-colindex`,p+1)},_ariaHeaderFooter:function(e,t,n,r){var i=this,a=i.wrapper,o=a.find(`.k-grid-`+e+` .k-grid-`+e+`-wrap table`),s=a.find(`.k-grid-`+e+` .k-grid-`+e+`-locked table`),c=``,l;return o.length>0&&(l=o.find(t+`, tbody`),c=l.attr(`id`)||kendo.guid(),o.attr(`role`,`none`),o.find(`tr`).attr(`role`,`row`),o.find(n).attr(`role`,r),l.attr({role:`rowgroup`,id:c})),s.length>0&&i._ariaLocked(e,t,n,r),s.find(`td`).attr(`role`,`gridcell`),o.find(`td`).attr(`role`,`gridcell`),c},_ariaId:function(){var e=this.element.attr(`id`)||`aria`;e&&(this._cellId=e+`_active_cell`)},_ariaLocked:function(t,n,r,i){var a=this,o=a.wrapper,s=o.find(`.k-grid-`+t+` .k-grid-`+t+`-wrap table`),c=o.find(`.k-grid-`+t+` .k-grid-`+t+`-locked table`),l=s.find(`tr`),u=c.find(`tr`);c.attr(`role`,`none`),c.find(n+`, tbody`).attr(`role`,`none`),u.attr(`role`,`none`),c.find(r).attr(`role`,i),l.each(function(n,i){var o=[];o=a._cellsIds(u.eq(n).find(r),`locked_`+t,n),o=o.concat(a._cellsIds(e(i).find(r),t,n)),i.setAttribute(`aria-owns`,o.join(` `))})},_ariaLockedContent:function(){var t=this,n=t.table.find(`tr`),r=t.wrapper.find(`.k-grid-content-locked table`),i=r.find(`tr`);r.attr(`role`,`none`),r.find(`tbody`).attr(`role`,`none`),i.attr(`role`,`none`),r.find(`td`).attr(`role`,`gridcell`),n.each(function(n,r){var a=[];a=t._cellsIds(i.eq(n).find(`td`),`locked_datacell`,n),a=a.concat(t._cellsIds(e(r).find(`td`),`datacell`,n)),r.setAttribute(`aria-owns`,a.join(` `))})},_ariaAddHiddenColIndex:function(){var e=this.virtualScroll||{},t=this.columns,n=this.table,r=Y(t).length;!e.columns&&!n.attr(`aria-colcount`)&&(this._ariaColumnIndex(),n.attr(`aria-colcount`,r))},_ariaRemoveHiddenColIndex:function(){var e=this.virtualScroll||{},t=this.columns;Y(t).length,e.columns||(this.wrapper.find(`td, th`).removeAttr(`aria-colindex`),this.table.removeAttr(`aria-colcount`))},_ariaRowIndex:function(){var e=this.thead.find(`>tr`),t=e.length,n=this.tbody.find(`>tr`),r=this.wrapper.find(`.k-grid-footer-wrap tfoot > tr`),i=this.dataSource.total(),a=this.dataSource.skip()||0,o=1,s,c;for(s=0;s<t;s++)e.eq(s).attr(`aria-rowindex`,o+s);for(o=t+a,s=0;s<n.length;s++)c=n.eq(s),o+=1,c.attr(`aria-rowindex`,o);for(o=t+i+1,s=0;s<r.length;s++)r.eq(s).attr(`aria-rowindex`,o+s)},_cellsIds:function(e,t,n){var r=[];return e.each(function(e,i){var a=i.getAttribute(`id`)||t+`_`+n+`_`+e;i.setAttribute(`id`,a),r.push(a)}),r},_trailingColumns:function(){return this._groups()},_groups:function(){var e=this.dataSource.group();return e?e.length:0},_currentDataIndex:function(e,n){var r=n.attr(`data-index`);if(!r)return t;var i=X(this.columns).length;return i&&!e.closest(`div`).hasClass(`k-grid-content-locked`)[0]?r-i:r},_prevVerticalCell:function(t,n){var r,i=n.parent(),a=t.children(L),o=a.index(i),s=this._currentDataIndex(t,n),c=P+`,`+me;if((s||n.hasClass(`k-header`))&&!i.hasClass(`k-filter-row`))return r=At(n),r.eq(r.length-2);if(s=Math.max(i.children(c).index(n),this._lastCellIndex||0),i.hasClass(`k-filter-row`))return K(t).filter(ut).eq(s);if(o==-1){if(i=t.find(`tr.k-filter-row:visible`),!i[0])return K(t).filter(ut).eq(s)}else i=o===0?e():a.eq(o-1);return r=i.children(c),r.length>s?r.eq(s):r.eq(0)},_nextVerticalCell:function(e,n){var r,i=n.parent(),a=e.children(L),o=a.index(i),s=this._currentDataIndex(e,n),c=P+`,`+me;if(o!=-1&&s===t&&n.hasClass(`k-header`))return jt(n).eq(1);s=s?parseInt(s,10):i.children(c).index(n),s=Math.max(s,this._lastCellIndex||0),i=o==-1?a.eq(0):a.eq(o+n[0].rowSpan);var l=s;if(this._currentDataIndex(e,n)!==t)for(var u=i.children(`:not(.k-group-cell):not(.k-hierarchy-cell)`),d=u.filter(`:hidden`),f=0,p=d.length;f<p;f++)u.index(d[f])<s&&l--;return s=l,r=i.children(c),r.length>s?r.eq(s):r.eq(0)},_verticalContainer:function(e,t){var n=e.parent(),r=this._navigatableTables.length,i=Math.floor(r/2),a=E(n[0],this._navigatableTables);return t&&(i*=-1),a+=i,(a>=0||a<r)&&(n=this._navigatableTables.eq(a)),n.find(t?`thead`:`tbody`)},_filterFocusable:function(){return this.wrapper.find(`.k-filter-row`).find(`.k-dropdownlist, .k-input .k-input-inner:visible, input[type='radio']:visible, input[type='checkbox']:visible`)},_updateCurrentAttr:function(t,n){var r=e(t).data(`headerId`);e(t).removeClass(V.focused),this.table.removeAttr(rt),r?(r=r.replace(this._cellId,``),e(t).attr(`id`,r)):e(t).removeAttr(`id`),n.data(`headerId`,n.attr(`id`)).attr(`id`,this._cellId).addClass(V.focused),this.table.attr(rt,this._cellId),this._current=n},_tableKeyDown:function(t){var n=!1,r=this.current(),i=e(t.target),a=!t.isDefaultPrevented()&&!i.is(`:button,a,:input,a>.k-icon,a>.k-svg-icon`);if(r||=e(this.lockedTable).add(this.table).find(L+` > td:visible`).first(),t.altKey&&t.keyCode==l.DOWN){r.find(`.k-grid-filter-menu, .k-grid-column-menu`).click(),t.stopImmediatePropagation();return}t.keyCode===l.F10&&this.toolbar&&this.toolbar.length&&(this.toolbar.find(`[tabindex=0]:visible`).first().trigger(`focus`),n=!0),a&&t.keyCode==l.UP&&(n=this._moveUp(r,t.shiftKey)),a&&t.keyCode==l.DOWN&&(n=this._moveDown(r,t.shiftKey)),a&&t.ctrlKey&&r.is(`.k-header`)&&this.options.reorderable&&t.keyCode==(z?l.RIGHT:l.LEFT)?this._moveColumn(r,!0):a&&t.ctrlKey&&r.is(`.k-header`)&&this.options.reorderable&&t.keyCode==(z?l.LEFT:l.RIGHT)?this._moveColumn(r,!1):a&&t.keyCode==(z?l.LEFT:l.RIGHT)?t.altKey?(this._handleExpand(r),n=!0):n=this._moveRight(r):a&&t.keyCode==(z?l.RIGHT:l.LEFT)&&(t.altKey?(this._handleCollapse(r),n=!0):n=this._moveLeft(r)),a&&t.keyCode==l.PAGEDOWN&&(n=this._handlePageDown()),a&&t.keyCode==l.PAGEUP&&(n=this._handlePageUp()),(t.keyCode==l.ENTER||t.keyCode==l.F2)&&(n=this._handleEnterKey(r,t.currentTarget,i)),t.keyCode==l.ESC&&(n=this._handleEscKey(r,t.currentTarget)),a&&t.keyCode==l.HOME&&(n=this._handleHome(r,t.ctrlKey)),a&&t.keyCode==l.END&&(n=this._handleEnd(r,t.ctrlKey)),t.keyCode==l.TAB&&(n=this._handleTabKey(r,t.currentTarget,t.shiftKey,i)),n&&(t.preventDefault(),t.stopPropagation())},_moveColumn:function(t,n){var r=this.wrapper.data().kendoReorderable.element.find(this._draggableInstance.options.filter+`:visible`),i=Et(Ot(this.columns)),a=r.index(e(t)),o=n?-1:1,s=i[a],c=kt(i,this.columns,a,a+o);c>=0&&(this.reorderColumn(c,s,n),this.trigger(Ce,{newIndex:c,oldIndex:a,column:s}))},_handleExpand:function(e){var t=this,n=e.parent(),r=t.dataItem(n);return e.hasClass(`k-header`)?!1:r&&r.hasChildren&&!r.expanded&&!t.trigger(ue,{model:r})?(this.expand(n),!0):!1},_handleCollapse:function(e){var t=this,n=e.parent(),r=t.dataItem(n);return e.hasClass(`k-header`)?!1:r&&r.hasChildren&&r.expanded&&!t.trigger(de,{model:r})?(t.collapse(n),!0):!1},_handleHome:function(e,t){var n=e.parent(),r=n.parent(),i=this.lockedTable&&this.lockedTable.children(`tbody`)[0]===r[0],a=r[0]===this.tbody[0],o;if(t?o=this.lockedTable?this.lockedTable.find(L+` > td:visible`).first():this.table.find(L+` > td:visible`).first():(a||i)&&(a&&this.lockedTable&&(n=this._relatedRow(n)),o=n.children(R).first()),o&&o.length)return this._setCurrent(o),!0},_handleEnd:function(e,t){var n=e.parent(),r=n.parent(),i=this.lockedTable&&this.lockedTable.children(`tbody`)[0]===r[0],a=r[0]===this.tbody[0],o;if(t?o=this.table.find(Re).last().children(R).last():(a||i)&&(!a&&this.lockedTable&&(n=this._relatedRow(n)),o=n.children(R).last()),o&&o.length)return this._setCurrent(o),!0},_handlePageDown:function(){var e=this;return e._isPageable()?(e.dataSource._restorePageSizeAfterAddChild(),e.dataSource.page(e.dataSource.page()+1),!0):!1},_handlePageUp:function(){var e=this;return e._isPageable()?(e.dataSource._restorePageSizeAfterAddChild(),e.dataSource.page(e.dataSource.page()-1),!0):!1},_handleEscKey:function(t,n){var r=kendo._activeElement(),i,a=this,o,s,c,l;return!t||!t.parent().hasClass(`k-grid-edit-row`)?t.has(r).length?(Q(a.table,!0),!0):t.parent().hasClass(`k-filter-row`)?(this._filterFocusable().attr(_e,-1),Q(this.table,!0),!0):!1:(a._isIncellEditable()?(o=t.parent(),c=t.index(),s=o.index(),l=o.closest(`tbody`),a.closeCell(!0),a._setCurrent(l.children().eq(s).children().eq(c),!1,!0)):(i=e(t).parent().index(),r&&r.blur(),this.cancelRow(),i>=0&&this._setCurrent(this.items().eq(i).children(R).first())),Q(a.table,!0),!0)},_handleEnterKey:function(t,n,r){var i=this.options.editable,a=r.closest(`[role=gridcell]`),o,s,c;return!r.is(`table`)&&!e.contains(t[0],r[0])&&(t=a),t.is(`th`)?(s=t.find(`.k-link`),t.has(e(b())).length>0?!1:(s.length?s.click():t.parent().hasClass(`k-filter-row`)?(c=this._filterFocusable(),c.attr(_e,0),t.find(`:kendoFocusable`).first().trigger(`focus`)):t.find(B).trigger(`focus`),!0)):(o=t.find(`:kendoFocusable`).first(),o[0]&&t.hasClass(`k-focus`)?(o.trigger(`focus`),!0):i&&!r.is(`:button,.k-button,textarea`)?(a[0]||(a=t),this._handleEditing(a,!1,n),!0):(!i&&t.is(`td[aria-expanded]`)&&(t.is(`[aria-expanded=false]`)?this._handleExpand(t):this._handleCollapse(t)),!1))},_handleTabKey:function(t,n,r,i){var a=this,o=a.options.editable&&a._isIncellEditable(),s,c;if(!o||t.is(`th`)||(this.options.scrollable?this._headertables.filter(n).length:this.thead.filter(i).length)){if(t.parent().hasClass(`k-filter-row`)){if(c=this._filterFocusable(),!r&&c[c.length-1]===document.activeElement)return c.first().trigger(`focus`),!0;if(r&&c[0]===document.activeElement)return c.last().trigger(`focus`),!0}return!1}return s=e(b()).closest(k+V.editCell),a.options._tabCycleStop?!1:(s[0]&&s[0]!==t[0]&&(t=s),s=a._tabNext(t,n,r),s.length?(a._handleEditing(t,s,s.closest(Ue)),!0):(a._preventPageSizeRestore=!1,!1))},_tabNext:function(e,t,n){var r=this,i=!0,a=n?e.prevAll(P).first():e.nextAll(`:visible`).first();return a.length||(a=e.parent(),r.lockedTable&&(i=n&&t==r.lockedTable[0]||!n&&t==r.table[0],a=r._relatedRow(a)),i&&(a=a[n?`prevAll`:`nextAll`](`tr:not(.k-grouping-row):not(.k-detail-row):visible`).first()),a=n?a.children(P).last():a.children(P).first(),r.dataSource._restorePageSizeAfterAddChild()),a},_handleEditing:function(t,n,r){var i=this,a=e(kendo._activeElement()),o=_.msie,s,c,l,u=i.options.editable&&i.options.editable.update!==!1,d=i._isIncellEditable(),f=e(n).parents(`tr`).index(),p=e(n).index(),m=e(t).parents(`tr`).index(),h=t.index(),g;if(r=e(r),l=d?t.hasClass(V.editCell):t.parent().hasClass(`k-grid-edit-row`),i.editor){if(s=i.editor.wrapper,s&&e.contains(s[0],a[0])&&(_.opera?a.trigger(`blur`).change().triggerHandler(`blur`):(a.trigger(`blur`),o&&a.trigger(`blur`))),!i.editor){Q(i.table);return}if(i.editor.end())d?(i._preventPageSizeRestore=!0,i.closeCell(),i._preventPageSizeRestore=!1,e(i.table).add(i.lockedTable).find(k+V.editCell).length===0&&i._setCurrent(r.find(`tbody`).children().eq(m).children().eq(h))):(i.saveRow(),l=!0);else{d?i._setCurrent(s):i._setCurrent(s.children().filter(R).first()),c=s.find(`:kendoFocusable`).first()[0],c&&c.focus();return}}if(n=e(n).length&&r.find(n).length===0?r.find(`tbody`).children().eq(f).children().eq(p):n,n&&i._setCurrent(n),Q(i.table,!0),u)if(!l&&!n||n){if(!i.current())return;var v=i.current().index();d?(i.editCell(i.current()),g=e(i.table).add(i.lockedTable).find(k+V.editCell)[0],g?i._current=e(g):i._setCurrent(i._findCurrentCell())):(i.editRow(i.current().parent()),i._setCurrent(i.editor.wrapper.children().eq(v)),i.current().removeClass(`k-focus`))}else i.dataSource._restorePageSizeAfterAddChild()},_moveRight:function(e){var t=e.nextAll(R).first(),n=e.parent(),r=n.index();return(e.hasClass(`k-header`)||n.is(`.k-filter-row`))&&(t=e.nextAll(Ie).first(),!t[0]&&this.lockedTable&&e.closest(`table`)[0]===this.lockedHeader.find(`table`)[0]&&(t=this.thead.find(`tr`).eq(r).find(Ie).first())),!t[0]&&this.lockedTable&&e.closest(`table`)[0]===this.lockedTable[0]&&(t=this._relatedRow(n).children(R).first()),t[0]&&t[0]!==e[0]&&Q(this.table,!0),this._setCurrent(t),!0},_moveLeft:function(e){var t=e.prevAll(R).first(),n=e.parent(),r=n.index();return(e.hasClass(`k-header`)||n.is(`.k-filter-row`))&&(t=e.prevAll(Ie).first(),!t[0]&&this.lockedTable&&e.closest(`table`)[0]===this.thead.parent()[0]&&(t=this.lockedHeader.find(`>table>thead>tr`).eq(r).children(Ie).last())),!t[0]&&this.lockedTable&&e.closest(`table`)[0]===this.table[0]&&(t=this._relatedRow(n).children(R).last()),t[0]&&t[0]!==e[0]&&Q(this.table,!0),this._setCurrent(t),!0},_moveUp:function(e,t){var n=e.parent().parent(),r;t?(r=e.parent(),r=r.prevAll(Re).first(),r=e.parent().is(Re)?r.children().eq(e.index()):r.children(P).last()):(r=this._prevVerticalCell(n,e),r[0]||(this._lastCellIndex=0,n=this._verticalContainer(n,!0),r=this._prevVerticalCell(n,e),r[0]&&Q(this.table,!0)));var i=this._lastCellIndex||0;return this._setCurrent(r),this._lastCellIndex=i,!0},_moveDown:function(e,t){var n=e.parent().parent(),r;t?(r=e.parent(),r=r.nextAll(Re).first(),r=e.parent().is(Re)?r.children().eq(e.index()):r.children(P).first()):(r=this._nextVerticalCell(n,e),r[0]||(this._lastCellIndex=0,n=this._verticalContainer(n),r=this._nextVerticalCell(n,e),r[0]&&Q(this.table,!0)));var i=this._lastCellIndex||0;return this._setCurrent(r),this._lastCellIndex=i,!0},_tableClick:function(t){var n=this,r=e(t.currentTarget),i=r.is(`tr:not('.k-filter-row')>th`),a=e(t.target),o=this.table.add(this.lockedTable),s=this.thead.parent().add(e(`>table`,this.lockedHeader)),c=yt(a.add(a.closest(`.k-button-icon`))),l=r.closest(`table`)[0];kendo.support.touch||l!==o[0]&&l!==o[1]&&l!==s[0]&&l!==s[1]||(this.options.navigatable&&!c&&this._setCurrent(r),(i||!c)&&setTimeout(function(){(!yt(kendo._activeElement())||!e.contains(l,kendo._activeElement()))&&Q(n.table,!0)}),i&&t.preventDefault())},_tableFocus:function(e){var t=this.current(),n=this.lockedTable?this.lockedTable:this.table;t&&t.is(`:visible`)?t.addClass(V.focused):this._setCurrent(n.find(L+` > td:visible`).first()),this.table.attr(_e,0)},_tableBlur:function(){var e=this.current();e&&e.removeClass(V.focused)},_attachEvents:function(){var e=this,t=k+V.retry;e._userEvents=new kendo.UserEvents(e.element,{tap:e._onPress.bind(e),allowSelection:!0}),this.element.on(j+A,t,this._dataSourceFetchProxy).on(j+A,`.k-button[data-command]`,this._commandClick.bind(this)).on(ae+A,`.k-grid-search input`,this._search.bind(this)),this._attachCellEditingEventHandlers()},_onPress:function(e){var t=this;t._isToggleIcon(e.event.target)&&t._toggleChildren.call(t,e.event)},_isToggleIcon:function(t){let n=Qe+`,`+Ze;return e(t).closest(`:not(path,svg)`).is(n)},_attachCellEditingEventHandlers:function(){var t=this,n=t.options.editable,r=t.selectable&&t.selectable.options.multiple,i=function(n){var r=b(),i=t.editor||{},a=i.element;a&&!e.contains(a[0],r)&&a[0]!==r&&!e(r).closest(`.k-animation-container`).length&&i.end()&&(!n.relatedTarget&&t._isPageable()&&!$(t.dataSource._addChildPageSize)&&(t._preventPageSizeRestore=!1),t.closeCell()),t._preventPageSizeRestore=!1};t._isIncellEditable()&&n.update!==!1&&t.wrapper.on(t.options._editCellEvent||j+A,`tr:not(.k-grouping-row) > td`,function(n){var i=e(this),a=t.lockedTable&&i.closest(`table`)[0]===t.lockedTable[0];if(!t._isToggleIcon(n.target)){if(i.hasClass(V.editCell)||i.has(`a.k-grid-delete`).length||i.has(`button.k-grid-delete`).length||i.closest(`tbody`)[0]!==t.tbody[0]&&!a||e(n.target).is(`:input`)||e(n.target).is(Qe)){t.editor||t.dataSource._restorePageSizeAfterAddChild(),t._preventPageSizeRestore=!1;return}t.editor?i.is(`:not(.k-command-cell)`)&&t.editor.end()&&(r&&e(b()).trigger(`blur`),t.closeCell(),t.editCell(i)):t.editCell(i)}}).on(`mousedown`+A,`tr:not(.k-grouping-row) > td`,function(n){t.editor&&t._isPageable()&&!$(t.dataSource._addChildPageSize)?t._preventPageSizeRestore=e(n.target).parents(k+V.editRow).length>0:t._preventPageSizeRestore=!1}).on(`focusin`+A,function(){e.contains(this,b())||(clearTimeout(t._closeCellTimeout),t._closeCellTimeout=null)}).on(`focusout`+A,function(e){t._closeCellTimeout=setTimeout(function(){i(e)},1)})},_commandByName:function(e){var t=this.columns,n=Array.isArray(this.options.toolbar)?this.options.toolbar:[],r,i,a,o;if(e){if(e=e.toLowerCase(),at[e])return at[e];for(r=0;r<t.length;r++)if(a=t[r].command,a){for(i=0;i<a.length;i++)if(o=a[i].name,o&&o.toLowerCase()==e)return a[i]}for(r=0;r<n.length;r++)if(o=n[r].name,o&&o.toLowerCase()==e)return n[r]}},_commandClick:function(n){var r=e(n.currentTarget),i=r.attr(`data-command`)||r.parent().attr(`data-command`),a=this._commandByName(i),o=r.parentsUntil(this.wrapper,`tr`);o=o.length?o:t,a&&(a.methodName?this[a.methodName](o):a.click&&a.click.call(this,n),n.preventDefault&&n.preventDefault())},_search:function(e){var t=this,n=e.currentTarget;clearTimeout(t._searchTimeOut),t._searchTimeOut=setTimeout(function(){t._searchTimeOut=null;var e=t.options,r=e.search?e.search.fields:null,i={filters:[],logic:`or`},a=n.value;if(r||=Ct(e.columns),a)for(var o=0;o<r.length;o++)i.filters.push({field:r[o],operator:`contains`,value:a});else i={};t.dataSource.filter(i)},300)},_ensureExpandableColumn:function(){this._autoExpandable&&delete this._autoExpandable.expandable;var e=T(this.columns,G(W(`hidden`)));e=T(e,G(W(`command`))),e=T(e,G(W(`selectable`))),e=T(e,G(W(`draggable`)));var t=T(e,W(`expandable`));this.columns.length&&!t.length&&(this._autoExpandable=e[0],e[0].expandable=!0)},_columns:function(){var t=this,n=this.options.columns||[],r;this.columns=w(n,function(e){return e=typeof e==`string`?{field:e}:e,C({encoded:!0},e)});var i=X(n);if(i.length>0){if(this.options.rowTemplate||this.options.altRowTemplate)throw Error(`Having both row template and locked columns is not supported`);this._hasLockedColumns=!0,this.columns=i.concat(Z(this.columns))}if(this.columns=Dt(this.columns),this._ensureExpandableColumn(),this._columnTemplates(),this._columnAttributes(),e.grep(Y(t.columns),function(e){return e.selectable&&(t._includeChildren=e.includeChildren),e.selectable}).length&&(t._checkBoxSelection=!0,t.element.on(j+A,`tbody > tr `+B,t._checkboxClick.bind(t)),t.element.on(j+A,`thead > tr `+B,t._headerCheckboxClick.bind(t))),r=e.grep(Y(t.columns),function(e){return e.draggable}),r.length){t._hasDragHandleColumn=!0;for(var a=0;a<r.length;a++)r[a].headerAttributes=e.extend({"aria-label":t.options.messages.dragHandleLabel},r[a].headerAttributes)}},_columnTemplates:function(){var e,t,n,r=Y(this.columns);for(e=0,t=r.length;e<t;e++)n=r[e],n.template&&=kendo.template(n.template),this._isIncellEditable()&&(n.dirtyCellTemplate=this._createDirtyColumnTemplate(n),n.dirtyIndicatorTemplate=this._createIndicatorTemplate(n)),n.headerTemplate&&=kendo.template(n.headerTemplate),n.footerTemplate&&=kendo.template(n.footerTemplate)},_columnAttributes:function(){var e,t,n=Pt(this.columns);function r(e){var t,n,r;if(e&&e.style&&e.style.split)for(t=e.style.split(`;`),e.style={},n=0;n<t.length;n++){r=t[n].split(`:`);var i=kendo.trim(r[0]);i&&(e.style[y(i)]=kendo.trim(r[1]))}}for(e=0,t=n.length;e<t;e++)r(n[e].attributes),r(n[e].headerAttributes)},_clearSortClasses:function(){var e=this;e.content&&e.content.find(`col:not(.k-group-col):not(.k-hierarchy-col)`).removeClass(`k-sorted`),e.lockedContent&&e.lockedContent.find(`col:not(.k-group-col):not(.k-hierarchy-col)`).removeClass(`k-sorted`)},_layout:function(){var e=this;this.columns;var t=this.element;this.wrapper=t.addClass(V.wrapper);var n=({gridHeader:e,gridHeaderWrap:t,gridContentWrap:n,toolbar:r,gridToolbar:i})=>{var a=this.options.hasHeader?`<div class='${e}'>`:``;return this.options.hasHeader&&this._hasLockedColumns&&(a+=`<div class='k-grid-header-locked'><table class='k-grid-header-table k-table'><colgroup></colgroup><thead class='k-table-thead' role='rowgroup'></thead></table></div>`),this.options.hasHeader&&(a+=`<div class='${t}'><table class='k-grid-header-table k-table'><colgroup></colgroup><thead class='k-table-thead' role='rowgroup'></thead></table></div></div>`),this._hasLockedColumns&&(a+=`<div class='k-grid-content-locked'><table class='k-grid-table k-table' role='treegrid'><colgroup></colgroup><tbody class='k-table-tbody' role='rowgroup'></tbody></table></div>`),a+=`<div class='${n} k-auto-scrollable'><table class='k-grid-table k-table' role='treegrid'><colgroup></colgroup><tbody class='k-table-tbody' role='rowgroup'></tbody></table></div>`,this.options.scrollable||(a=`<table class='k-grid-table k-table' role='treegrid' ><colgroup></colgroup>${this.options.hasHeader?`<thead class='k-table-thead ${e}' role='rowgroup'></thead>`:``}<tbody class='k-table-tbody' role='rowgroup'></tbody></table>`),this.options.toolbar&&(a=`<div class='${r} ${i}'></div>`+a),a};n=n.bind(e),t.append(kendo.template(n)(V)+`<div class='k-status' role='alert' aria-live='polite'></div>`),this.toolbar=t.find(k+V.gridToolbar);var r=t.find(k+V.gridHeader).find(`thead`).addBack().filter(`thead`);if(this.thead=r.last(),this.options.scrollable){var i=kendo.support.isRtl(t);t.find(`div.`+V.gridHeader).css(i?`padding-left`:`padding-right`,kendo.support.scrollbar())}var a=t.find(k+V.gridContentWrap);a.length?this.content=a:a=t,this.table=a.find(`>table`).addClass(`k-grid-table`),this.tbody=this.table.find(`>tbody`),this._hasLockedColumns&&(this.lockedHeader=r.first().closest(`.k-grid-header-locked`),this.lockedContent=t.find(`.k-grid-content-locked`),this.lockedTable=this.lockedContent.children().addClass(`k-grid-table`)),this._initVirtualTrees(),this._renderCols(),e.options.hasHeader&&this._renderHeader()},_initVirtualTrees:function(){this._headerColsTree=new i.Tree(this.thead.prev()[0]),this._contentColsTree=new i.Tree(this.tbody.prev()[0]),this._headerTree=new i.Tree(this.thead[0]),this._contentTree=new i.Tree(this.tbody[0]),this._statusTree=new i.Tree(this.element.children(`.k-status`)[0]),this.lockedHeader&&(this._lockedHeaderColsTree=new i.Tree(this.lockedHeader.find(`colgroup`)[0]),this._lockedContentColsTree=new i.Tree(this.lockedTable.find(`>colgroup`)[0]),this._lockedHeaderTree=new i.Tree(this.lockedHeader.find(`thead`)[0]),this._lockedContentTree=new i.Tree(this.lockedTable.find(`>tbody`)[0]))},_processToolbarItems:function(e){var t=this,n=t.options.messages.commands,r=[];return e.map(e=>{var i=(D(e)?e.name||``:e).toLowerCase(),a=n[i];if(!i&&!(D(e)&&e.template))throw Error(`Commands should have name specified`);e=C({},at[i],{name:i,text:(at[i]||{}).text||a||Ht(i),type:e.template?null:`button`},e),i===`search`&&(r.push({type:`spacer`}),e.template=e.template({message:e.text||n.search})),e.imageClass&&(e.spriteCssClass=e.imageClass,e.iconClass=e.imageClass),t._commandByName(i)&&(e.attributes||={},e.attributes[`data-command`]=i,e.click=e=>{e.event.preventDefault(),e.event.stopPropagation(),t._commandClick({currentTarget:e.target})}),e.className&&(e.attributes||={},e.attributes.class=e.className),r.push(e)}),r},_toolbar:function(){var e=this.options.toolbar,t=this.toolbar;e&&(Array.isArray(e)?t.kendoToolBar({navigateOnTab:!this.options.navigatable,items:this._processToolbarItems(e)}):D(e)?t.kendoToolBar({navigateOnTab:!this.options.navigatable,items:this._processToolbarItems(e.items||[]),overflow:e.overflow}):t.append(kendo.template(e)({})))},_initContextMenu:function(){var e=this,t=e.options,n=D(t.contextMenu)&&S(t.contextMenu.body)?{items:t.contextMenu.body}:{items:ot},r=D(t.contextMenu)&&S(t.contextMenu.head)?{items:t.contextMenu.head}:{items:st},i=D(t.contextMenu)?t.contextMenu:{};n=C({},{messages:t.messages,target:e.tbody,filter:`.k-table-td`,action:e._action.bind(e),states:e._buildStates()},i,n),r=C({},{messages:t.messages,target:e.thead,filter:`.k-table-th`,action:e._action.bind(e),states:e._buildStates()},i,r),e.tbodyContextMenu=new d.treelist.ContextMenu(`<ul></ul>`,n),e.theadContextMenu=new d.treelist.ContextMenu(`<ul></ul>`,r)},_buildStates:function(){var e=this;return{isEditable:e.options.editable,isSelectable:e.options.selectable,isMultiRowSelectionEnabled:e.options.selectable===`multiple, row`,isSortable:e.options.sortable&&e.options.hasHeader,alwaysDisabled:!1,hasSelection:()=>this.select()?this.select().length>0:!1,isSorted:()=>!(this.dataSource.sort()&&this.dataSource.sort().length>0),isExpandable:e=>{let t=this.dataItem(e);return t&&t.hasChildren&&!t.expanded},isCollapsible:e=>{let t=this.dataItem(e);return t&&t.hasChildren&&t.expanded}}},_action:function(e){var t=e.command,n=C({treelist:this},e.options);return new d.treelist.commands[t](n).exec()},_lockedColumns:function(){return T(this.columns,W(`locked`))},_nonLockedColumns:function(){return T(this.columns,G(W(`locked`)))},_templateColumns:function(){return T(this.columns,W(`template`))},_render:function(t){var n=this;t||={},t=n._renderOptions(t);var i=this.options.messages,a=n._isPageable(),o=n.dataSource,s={children:t.filteredChildrenMap||t.childrenMap,ids:t.idsMap},c=a?s&&s.children&&s.ids?s:o._initDataMaps(o._getData()):{},l=c.children,u=c.ids;t.childrenMap=l,t.idsMap=u;var d=n._dataToRender(t),f=n._renderedModelLevel(d[0],t),p=kendo.attr(`uid`),m,h=this.select().removeClass(`k-selected`).map(function(t,n){return e(n).attr(p)}),g;this._absoluteIndex=0,n._clearRenderMap(),t.error?this._showStatus(kendo.template(({messages:e,buttonClass:t})=>`${r(e.requestFailed)} <button class='${t}'><span class='k-button-text'>${r(e.retry)}</span></button>`)({buttonClass:[V.button,V.retry].join(` `),messages:i})):d.length?(a&&(g=n._viewChildrenMap(t)),this._hideStatus(),m=this._hasFooterTemplate(),n._renderRows(t,d,Y(Z(this.columns)),h,l,g,m),this._hasLockedColumns&&(this._absoluteIndex=0,this._lockedContentTree.render(this._trs({columns:Y(X(this.columns)),editedColumn:t.editedColumn,editedColumnIndex:t.editedColumnIndex,aggregates:t.aggregates,selected:h,data:d,childrenMap:l,viewChildrenMap:g,hasFooterTemplate:m,visible:!0,level:f,isLockedTable:!0})))):(this._hideStatus(),this._showNoRecordsTemplate()),this._touchScroller&&this._touchScroller.contentResized(),this.items().filter(function(){return e.inArray(e(this).attr(p),h)>=0}).addClass(`k-selected`),this._syncLockedContentHeight(),n._togglePagerVisibility(),n._setExpanderElement()},_renderRows:function(e,t,n,r,i,a,o){this._contentTree.render(this._trs({columns:n,editedColumn:e.editedColumn,editedColumnIndex:e.editedColumnIndex,aggregates:e.aggregates,selected:r,data:t,childrenMap:i,viewChildrenMap:a,hasFooterTemplate:o,visible:!0,level:0}))},_setExpanderElement:function(){var t=this,n=`k-grid-content-expander`,r=`<div class="`+n+`"></div>`,i;t.options.scrollable&&t.wrapper.is(`:visible`)&&(i=t.table.parent().children(`.`+n),!t.dataSource||!t.dataSource.view().length?(i[0]||(i=e(r).appendTo(t.table.parent())),t.thead&&i.width(t.thead.width())):i[0]&&i.remove())},_renderProgress:function(e){kendo.ui.progress(this.wrapper,e)},_renderOptions:function(e){e||={};var t=this,n=t.dataSource._getDataMaps(),r=t.dataSource.filter();return t._isPageable()&&(e.childrenMap=n.children,e.idsMap=n.ids,r&&(e.filteredChildrenMap=n.filteredChildren)),e},_renderedModelLevel:function(e,t){return this._isPageable()?this.dataSource._pageableModelLevel(e,t):0},_viewChildrenMap:function(e){e||={};var t=this,n=t.dataSource,r=n.childrenMap(n.view()),i=n._modelIdField(),a=n._parentNodesNotInView(),o,s,c,l,u,d,f,p;t._clearRenderMap();for(var m=0;m<a.length;m++){o=a[m],s=o[i],t._markNodeAsNonRenderable(s),r[s]=r[s]||[],c=n._parentNodes(o),p=c.slice(),p.push(o);for(var h=0;h<p.length-1;h++)l=p[h],u=l[i],t._markNodeAsNonRenderable(u),r[u]=r[u]||[],d=p[h+1],f=d[i],t._markNodeAsNonRenderable(f),r[f]=r[f]||[],r[u].indexOf(d)===-1&&r[u].unshift(d)}return r},_clearRenderMap:function(){this._skipRenderingMap={}},_dataToRender:function(e){var t=this;return t._isPageable()?t.dataSource._pageableRootNodes(e):t.dataSource.rootNodes()},_markNodeAsNonRenderable:function(e){this._skipRenderingMap[e]=!0},_adjustRowsHeight:function(e,t){if(this._hasLockedColumns){var n=e[0].rows,r=n.length,i,a=t[0].rows,o=e.add(t),s=o.length,c=[];for(i=0;i<r&&a[i];i++)n[i].style.height&&(n[i].style.height=a[i].style.height=``);for(i=0;i<r&&a[i];i++){var l=n[i].offsetHeight,u=a[i].offsetHeight,d=0;l>u?d=l:l<u&&(d=u),c.push(d)}for(i=0;i<s;i++)o[i].style.display=`none`;for(i=0;i<r;i++)c[i]&&(n[i].style.height=a[i].style.height=c[i]+1+`px`);for(i=0;i<s;i++)o[i].style.display=``}},_ths:function(t,n){for(var r=[],i,c,l,u,d,f,p,m,h=0,g=t.length;h<g;h++){if(i=t[h],l=[],u=[V.header],i.selectable){m=Y(t),p=E(i,m),d={scope:`col`,role:`columnheader`,className:u.join(` `)},i.headerTemplate&&(c=i.headerTemplate({})),c=i.headerTemplate?c:kendo.template(()=>Ke)({}),n&&!i.colSpan&&(d.rowSpan=n),p>-1&&(d[kendo.attr(`index`)]=p),l.push(s(c)),r.push(a(`th`,e.extend(!0,{},d,i.headerAttributes),l));continue}if(c=i.headerTemplate?i.headerTemplate({}):i.title||i.field||``,f=i.headerTemplate?s(c):o(c),this.options.sortable?i.draggable||l.push(a(`span`,{className:V.headerCellInner},[a(`span`,{className:V.link},[a(`span`,{className:V.columnTitle},[f])])])):l.push(f),d={"data-field":i.field,"data-title":i.title,style:i.hidden===!0?{display:`none`}:{},className:u.join(` `),role:`columnheader`},this.options.sortable&&i.sortable!==!1){let e=`${i.title||i.field}. ${this.options.messages.sortHeader}`;d[`aria-label`]=e,d.title=e}i.columns||(d.rowSpan=n||1),i.headerAttributes&&(i.headerAttributes.colSpan===1&&delete i.headerAttributes.colSpan,i.headerAttributes.class&&(d.className+=` `+i.headerAttributes.class)),i[`data-index`]>-1&&(d[`data-index`]=i[`data-index`]);let g={...i.headerAttributes};delete g.class,d=C(!0,{},d,g),r.push(a(`th`,d,l))}return r},_cols:function(e){for(var t=[],n,r,i=0;i<e.length;i++)e[i].hidden!==!0&&(n=e[i].width,r={},n&&parseInt(n,10)!==0&&(r.style={width:typeof n==`string`?n:n+`px`}),e[i].draggable&&(r.class=`k-drag-col`),t.push(a(`col`,r)));return t},_clearColsCache:function(){this._headerColsTree.render([]),this.options.scrollable&&this._contentColsTree.render([]),this._hasLockedColumns&&(this._lockedHeaderColsTree.render([]),this._lockedContentColsTree.render([]))},_renderCols:function(){var e=Z(this.columns);this.options.hasHeader&&this._headerColsTree.render(this._cols(Y(e))),this.options.scrollable&&this._contentColsTree.render(this._cols(Y(e))),this._hasLockedColumns&&(e=X(this.columns),this.options.hasHeader&&this._lockedHeaderColsTree.render(this._cols(Y(e))),this._lockedContentColsTree.render(this._cols(Y(e))),this.options.hasHeader||this._applyLockedContainersWidth())},_retrieveFirstColumn:function(t,n){var r=e();if(n.length&&t[0]){for(var i=t[0];i.columns&&i.columns.length;)i=i.columns[0],n=n.filter(`:not(:first)`);r=r.add(n)}return r},_updateFirstColumnClass:function(){var t=this,n=t.columns||[],r=t.thead.find(`>tr:not(:first, .k-filter-row)`),i;n=Z(n),i=t._retrieveFirstColumn(n,r),t.lockedHeader&&(r=t.lockedHeader.find(`thead>tr:not(.k-filter-row):not(:first)`),n=X(t.columns),i=i.add(t._retrieveFirstColumn(n,r))),i.each(function(){var t=e(this).find(`th`);t.removeClass(`k-first`),t.eq(0).addClass(`k-first`)})},_updateRowSpans:function(e){for(var t=e.length-1;t>=0;t--)wt(e[t].cells).length>0&&(e[t].rowSpan=e.length-t)},_setColumnDataIndexes:function(e){for(var t=0;t<e.length;t++)e[t][`data-index`]=t},_updateColumnCellIndex:function(){var e,t=0;this.lockedHeader&&(e=this.lockedHeader.find(`thead`),t=It(e,X(this.columns))),It(this.thead,Z(this.columns),t)},_setParentsVisibility:function(e,t){var n=this.columns,r,i=[],a,o=t?function(e){return Et(e.columns).length&&e.hidden}:function(e){return!Et(e.columns).length&&!e.hidden};if(Nt(e,n,i)&&i.length)for(r=i.length-1;r>=0;r--)a=i[r],o(a)&&(a.hidden=!t)},_prepareColumns:function(t,n,r,i,a){for(var o=i||t[t.length-1],s=t[o.index+1],c=0,l=0;l<n.length;l++){var u=e.extend({},n[l],{headerAttributes:n[l].headerAttributes||{}});o.cells.push(u),n[l].columns&&n[l].columns.length&&(s||(s={rowSpan:0,cells:[],index:t.length},t.push(s)),n[l].columns.length&&(u.headerAttributes.colSpan=wt(n[l].columns).length||1,u.headerAttributes[`data-colspan`]=Y(n[l].columns).length),this._prepareColumns(t,n[l].columns,u,s,n[l]),u.hidden||(c+=u.headerAttributes.colSpan-1),o.rowSpan=t.length-o.index),n[l].rowIndex=o.index,a&&(n[l].parentColumn=a),n[l].cellIndex=o.cells.length-1}r&&(r.headerAttributes.colSpan+=c)},_renderHeaderTree:function(e,t,n){var r,i=[],o=[],s=[];if(n)for(i=[{rowSpan:1,cells:[],index:0}],this._prepareColumns(i,t),this._updateRowSpans(i),r=0;r<i.length;r++)o.push(a(`tr`,{role:`row`,class:`k-table-row`},this._ths(i[r].cells,i[r].rowSpan)));else o.push(a(`tr`,{role:`row`,class:`k-table-row`},this._ths(t)));this._hasFilterRow()&&(this._filterThs(t,s),o.push(a(`tr`,{class:`k-filter-row k-table-row`},s))),e.render(o)},_renderHeader:function(){var e=Z(this.columns),n=T(this.columns,function(e){return e.columns!==t}).length>0;this._setColumnDataIndexes(Y(this.columns)),this._renderHeaderTree(this._headerTree,e,n),this._hasLockedColumns&&(e=X(this.columns),this._renderHeaderTree(this._lockedHeaderTree,e,n),this._applyLockedContainersWidth(),this._syncLockedHeaderHeight()),this._updateFirstColumnClass()},_filterThs:function(e,t){for(var n,r,i=kendo.attr(`uid`),o=0,s=e.length;o<s;o++)n=e[o],n.columns&&this._filterThs(n.columns,t),!(n.columns&&n.columns.length)&&(r={style:n.hidden===!0?{display:`none`}:{},className:`k-table-th k-header`,title:this.options.messages.filterCellTitle,"aria-label":this.options.messages.filterCellTitle},r[i]=n.headerAttributes.id,t.push(a(`th`,r)))},_updateFilterThs:function(t,n,r){var i=Y([n]),a=e(this.lockedHeader).add(this.thead).find(`tr.k-filter-row th`),o,s,c=kendo.attr(`uid`);function l(e,t){for(var n=0;n<e.length;n++)if(e.eq(n).attr(c)===t)return n}for(var u=i.length-1;u>=0;u--)n=i[u],s=l(a,n.headerAttributes.id),o=l(a,r.headerAttributes.id),a.eq(s)[t?`insertBefore`:`insertAfter`](a.eq(o))},_applyLockedContainersWidth:function(){if(this._hasLockedColumns){var e=this.options.hasHeader?pt(this.lockedHeader.find(`>table>colgroup>col`)):pt(this.lockedTable.find(`>colgroup>col`)),t=this.options.hasHeader?this.thead.parent():this.tbody.parent(),n=pt(t.find(`>colgroup>col`)),r=this.wrapper[0].clientWidth,i=kendo.support.scrollbar();e>=r&&(e=r-3*i),this.lockedHeader.add(this.lockedContent).width(e),t.add(this.table).width(n);var a=r-e;this.content.width(a-1),t.parent().width(a-i-2)}},_generateRowOptions:function(e,t,n,r,i,a){return{model:e,attr:t,level:n?this._renderedModelLevel(e,r):i,editedColumn:r.editedColumn,editedColumnIndex:r.editedColumnIndex,hasChildren:a,visible:r.visible,isAlt:this._absoluteIndex%2==0}},_renderRow:function(e,t,n){return this._tds(e,t,n)},_trs:function(t){var n=this,r,i,a,o,s,c,l,u,d=[],f=t.level,p=t.data,m=this.dataSource,h=m.aggregates()||{},g=m._modelIdField(),_=m._modelParentIdField(),v=t.columns,y=n._isPageable(),b=t.isLockedTable,x=t.childrenMap||m.childrenMap(m._getData());for(c=0,l=p.length;c<l;c++){if(a=[`k-table-row`],r=p[c],u=r[g],s=y?x[u]:r.loaded()?m.childNodes(r):[],o=s&&s.length,i={role:`row`},i[kendo.attr(`uid`)]=r.uid,!b&&o&&(i[nt]=!!r.expanded),t.visible?(!y||y&&!n._skipRenderingMap[u])&&(this._absoluteIndex%2!=0&&a.push(V.alt),this._absoluteIndex++):i.style={display:`none`},e.inArray(r.uid,t.selected)>=0&&a.push(V.selected),r._edit&&a.push(`k-grid-edit-row`),i.className=a.join(` `),!n._skipRenderingMap[u]){var S,C=n._generateRowOptions(r,i,y,t,f,o);S=n.options.rowTemplate?this._trFromTemplate(C):this._renderRow(C,v,this._td.bind(this)),d.push(S)}if(o&&(n.options.renderAllRows||r.expanded)){if(y&&(s=(t.viewChildrenMap||{})[u]||[]),s.length===0)continue;d=d.concat(this._trs({columns:v,editedColumn:t.editedColumn,editedColumnIndex:t.editedColumnIndex,aggregates:h,selected:t.selected,visible:y?t.visible:t.visible&&!!r.expanded,data:s,childrenMap:t.childrenMap||x,hasFooterTemplate:t.hasFooterTemplate,viewChildrenMap:t.viewChildrenMap,level:f+1,isLockedTable:t.isLockedTable}))}}return t.hasFooterTemplate&&r&&(i={className:V.footerTemplate+` k-table-row`,"data-parentId":r[_]},t.visible||(i.style={display:`none`}),d.push(this._tds({model:h[r[_]],attr:i,level:f,editedColumn:t.editedColumn,editedColumnIndex:t.editedColumnIndex},v,this._footerId))),d},_trFromTemplate:function(t){var n=this.options.rowTemplate,r=this.options.altRowTemplate,i,a;return r||=n,kendo.isFunction(n)||(n=kendo.template(n)),kendo.isFunction(r)||(r=kendo.template(r)),a=this._absoluteIndex%2==0?r(t):n(t),e(a).length?(i=this.parseRowTemplate(e(a)[0],t),i):o(a)},parseRowTemplate:function(t,n){for(var r=t.nodeName.toLocaleLowerCase(),i=t.childNodes,s=[],c,l=this.parseAttributes(t),u=0;u<i.length;u++)/\S/.test(i[u].nodeValue)&&i[u].nodeName.toLocaleLowerCase()===`td`&&s.push(this._createCellElement(i[u]));return n&&!n.visible&&(l.style=l.style||{},l.style=e.extend(!0,l.style,{display:`none`})),c=this._isTextNode(r)?o(t.nodeValue):a(r,l,s),c},_createCellElement:function(t){for(var n=this.parseAttributes(t),r=e(t).find(`.`+V.iconHidden).remove(),i=e(t).find(Qe).remove()[0],o=[],c=0;c<r.length;c++)o.push(a(`span`,this.parseAttributes(r[c])));return i&&o.push(s(i.outerHTML,!0)),o.push(s(e(t).html())),a(`td`,n,o)},parseAttributes:function(t){if(this._isTextNode(t.nodeName))return null;t=e(t)[0];for(var n=t.attributes,r=n.length,i={},a=0;a<r;a++)i[n[a].name]=n[a].value;return i},_isTextNode:function(e){return e.indexOf(`text`)>=0},_footerId:function(t){var n=[],r=t.column,i=t.column.footerTemplate||e.noop,o=t.model[r.field]||{},c={role:`gridcell`,class:`k-table-td`,style:r.hidden===!0?{display:`none`}:{}};return r.expandable&&(n=n.concat(ft({level:t.level+1,className:V.iconPlaceHolder}))),r.attributes&&C(!0,c,r.attributes,{style:r.hidden===!0?{display:`none`}:{}}),n.push(s(i(o)||``)),a(`td`,c,n)},_hasFooterTemplate:function(){return!!T(Y(this.columns),function(e){return e.footerTemplate}).length},_tds:function(e,t,n){for(var r=[],i,o=(e.editedColumn||{}).field,s=this._isIncellEditable(),c=t.length,l=0;l<c;l++){i=t[l];var u=n({model:e.model,column:i,editColumn:!s||s&&i.field===o&&e.editedColumnIndex===l,level:e.level});r.push(u)}return a(`tr`,e.attr,r)},_td:function(t){var n=[],r=t.model,i=t.column,o=kendo.defaults.iconType,c,l={role:`gridcell`,class:`k-table-td`,style:i.hidden===!0?{display:`none`}:{}},u=this._isIncellEditable(),d=!1;return i.attributes&&C(!0,l,i.attributes),i.headerAttributes&&i.headerAttributes.id&&(l[`aria-describedby`]=i.headerAttributes.id),r._edit&&i.field&&t.editColumn&&(u||!u&&Vt(i,r))?(l[kendo.attr(`container-for`)]=i.field,u&&(l.className&&l.className.indexOf(V.editCell)!==-1?l.className+=` k-table-td`+V.editCell:l.className||=`k-table-td `+V.editCell)):(i.expandable&&(n=ft({level:t.level,className:V.iconPlaceHolder}),r.hasChildren?(l.ariaExpanded=r.expanded,c=r.expanded?V.iconCollapse:V.iconExpand):c=V.iconPlaceHolder,r._error?c=V.refresh:!r.loaded()&&r.expanded&&(c=`loading`,l[`aria-busy`]=!0),n.push(s(kendo.ui.icon(e(`<span ref-treelist-expand-collapse-icon ${c===V.iconPlaceHolder?`ref-blank-icon`:``} class="k-treelist-toggle ${c===V.iconPlaceHolder?``:c===`loading`?`k-i-loading`:``}"></span>`),{icon:c,type:o}),!0)),l.style[`white-space`]=`nowrap`),Ut(i,r)&&(l.className?l.className+=V.dirtyCell:l.className||=V.dirtyCell),i.draggable&&(l.class+=` k-drag-cell k-touch-action-none`,l[`ref-treelist-drag-cell`]=!0,l[tt]===void 0&&(l[tt]=this.options.messages.dragHandleLabel),l.style.cursor=`move`),i.command?(l.className&&l.className.indexOf(`k-command-cell`)!==-1?l.className+=` k-command-cell`:l.className||=`k-command-cell`,d=T(i.command,function(e){return e===M||e.name===M}).length>0,n=r._edit&&!this._isIncellEditable()&&d?this._buildCommands([`update`,`canceledit`]):this._buildCommands(i.command)):n.push(this._cellContent(i,r)),l.className=[l.class,l.className].join(` `).trim()),a(`td`,l,n)},_cellContent:function(e,t){var n=this,r,i=n._isIncellEditable(),a;return e.selectable?s(Ge):e.draggable?s(qe()):(e.template?r=n._evalColumnTemplate(e,t):e.field?(r=t.get(e.field),a=i?e.dirtyIndicatorTemplate(t):``,r!==null&&!$(r)?(e.format&&(r=kendo.format(e.format,r)),r=a+r):r=a):(r===null||$(r))&&(r=``),e.template||!e.encoded||i?s(r):o(r))},_evalColumnTemplate:function(e,t){return this._isIncellEditable()?e.dirtyCellTemplate(t):e.template(t)},_createDirtyColumnTemplate:function(e){var t=this;return v(function(n){return t._dirtyIndicatorTemplate(e.field)(n)+this.columnTemplate(n)},t._customTemplateSettings()).bind({columnTemplate:e.template})},_createIndicatorTemplate:function(e){return v(this._dirtyIndicatorTemplate(e.field))},_dirtyIndicatorTemplate:function(e){var t=this._customTemplateSettings().paramName;return e&&t?({dirty:t,dirtyFields:n})=>t&&n&&n[e]?`<span class="k-dirty"></span>`:``:()=>``},_customTemplateSettings:function(){return C({},kendo.Template,this.options.templateSettings)},_buildCommands:function(e,t){var n,r=[];for(n=0;n<e.length;n++)r.push(this._handleCommand(e[n],t));return r},_handleCommand:function(e,t){var n=(e.name||e).toLowerCase(),r=this.options.messages.commands[n];return e=C({},at[n],{text:r},e),e.template?s(kendo.template(e.template)({message:e.text||this.options.messages.commands.search})):this._button(e,n,e.icon,t)},_button:function(e,t,n,r){e.className&&e.className.indexOf(`k-primary`)>-1&&(e.className=e.className.replace(`k-primary`,`k-button-primary`)),(!e.className||e.className.indexOf(`k-button-primary`)===-1)&&(e.className=e.className||``),r&&e.className&&(e.className=e.className.split(` `).filter(e=>e.indexOf(`command`)===-1).join(` `));let i=`<button data-command="`+t+`" class="`+e.className+`">`+(e.text||(e.text===``?``:e.name))+`</button>`;return s(kendo.html.renderButton(i,{icon:n,iconClass:e.imageClass}))},_positionResizeHandle:function(t){var n=e(t.currentTarget),r=this.resizeHandle,i=n.position(),a,o=0,s,l,d,f,p,m,h,g,v=c(n),y=n.closest(`div`),b=t.buttons===void 0?t.which||t.button:t.buttons,x=this.options.columnResizeHandleWidth||3,S=x*3/2;if(a=v,!(b!==void 0&&b!==0)){r||=this.resizeHandle=e(`<div class="k-resize-handle"><div class="k-resize-handle-inner"></div></div>`);var C=K(n.closest(`thead`)).filter(`:visible`);if(z)g=kendo.scrollLeft(y),(_.mozilla||_.webkit&&_.version>=85)&&(g*=-1),h=parseFloat(y.css(`borderLeftWidth`)),a=n.offset().left+g-parseFloat(n.css(`marginLeft`))-(y.offset().left+h),o=a<=g?S:0,s=n.closest(`.k-grid-header-wrap, .k-grid-header-locked`),m=s[0].scrollWidth-s[0].offsetWidth,p=parseFloat(s.css(`marginLeft`)),l=_.msie?2*kendo.scrollLeft(s)+h-p-o:0,d=_.webkit&&_.version<85?m-o-p+h:-o,f=_.mozilla?h-p-o:0,a-=d+f+l;else for(var w=0;w<C.length&&C[w]!=n[0];w++)a+=C[w].offsetWidth;y.append(r),r.show().css({top:i.top,left:a-S,height:u(n),width:x*3}).data(`th`,n);var E=this;r.off(`dblclick`+A).on(`dblclick`+A,function(){var t=n.index();e.contains(E.thead[0],n[0])&&(t+=T(E.columns,function(e){return e.locked&&!e.hidden}).length),E.autoFitColumn(t)})}},autoFitColumn:function(t){var n=this,r=n.options,i=n.columns,a,o,s,l,u=n.lockedHeader?K(n.lockedHeader.find(`>table>thead`)).filter(ut).length:0,d;if(t=typeof t==`number`?i[t]:D(t)?T(i,function(e){return e===t})[0]:T(i,function(e){return e.field===t})[0],!(!t||t.hidden)){a=E(t,i),l=t.locked,s=l?n.lockedHeader.children(`table`):n.thead.parent(),o=s.find(`[data-index='`+a+`']`);var f=l?n.lockedTable:n.table,p=n.footer||e();n.footer&&n.lockedContent&&(p=l?n.footer.children(`.k-grid-footer-locked`):n.footer.children(`.k-grid-footer-wrap`));var m=p.find(`table`).first();n.lockedHeader&&u>=a&&!l&&(a-=u);for(var h=0;h<i.length&&i[h]!==t;h++)i[h].hidden&&a--;d=r.scrollable?s.find(`col:not(.k-group-col):not(.k-hierarchy-col)`).eq(a).add(f.children(`colgroup`).find(`col:not(.k-group-col):not(.k-hierarchy-col)`).eq(a)).add(m.find(`colgroup`).find(`col:not(.k-group-col):not(.k-hierarchy-col)`).eq(a)):f.children(`colgroup`).find(`col:not(.k-group-col):not(.k-hierarchy-col)`).eq(a);var g=s.add(f).add(m),_=c(o);d.width(``),g.css(`table-layout`,`fixed`),d.width(`auto`),g.addClass(`k-autofitting`),g.css(`table-layout`,``);var v=Math.ceil(Math.max(c(o),c(f.find(`tr`).eq(0).children(`td:visible`).eq(a)),c(m.find(`tr`).eq(0).children(`td:visible`).eq(a))));if(d.width(v),t.width=v,r.scrollable){for(var y=s.find(`col`),b,x=0,S=0,C=y.length;S<C;S+=1)if(b=y[S].style.width,b&&b.indexOf(`%`)==-1)x+=parseInt(b,10);else{x=0;break}x&&g.each(function(){this.style.width=x+`px`})}g.removeClass(`k-autofitting`),n.trigger(we,{column:t,oldWidth:_,newWidth:v}),n._applyLockedContainersWidth(),n._syncLockedContentHeight(),n._syncLockedHeaderHeight()}},_adjustLockedHorizontalScrollBar:function(){var e=this.table,t=e.parent(),n=e[0].offsetWidth>t[0].clientWidth?kendo.support.scrollbar():0;this.lockedContent.height(u(t)-n)},_syncLockedContentHeight:function(){this.lockedTable&&(this._touchScroller||this._adjustLockedHorizontalScrollBar(),this._adjustRowsHeight(this.table,this.lockedTable),this._syncLockedScroll())},_syncLockedHeaderHeight:function(){if(this.lockedHeader){var e=this.lockedHeader.children(`table`),t=this.thead.parent();this._adjustRowsHeight(e,t),mt(e,t)}},_syncLockedScroll:function(){this.options.scrollable&&(this.lockedContent[0].scrollTop=this.content[0].scrollTop)},_resizable:function(){if(this.options.resizable){this.resizable&&this.resizable.destroy();var t=this;e(this.lockedHeader).find(`thead`).add(this.thead).on(`mousemove`+A,`tr:not(.k-filter-row) > th`,this._positionResizeHandle.bind(this)),this.resizable=new kendo.ui.Resizable(this.wrapper,{handle:`.k-resize-handle`,start:function(n){var r=e(n.currentTarget).data(`th`),i=e.inArray(r[0],K(r.closest(`thead`)).filter(`:visible`)),a,o;t.wrapper.addClass(`k-grid-column-resizing`),t.lockedHeader&&e.contains(t.lockedHeader[0],r[0])?(a=t.lockedHeader,o=t.lockedTable):(a=t.thead.parent(),o=t.table),this.col=o.children(`colgroup`).find(`col`).eq(i).add(a.find(`col`).eq(i)),this.th=r,this.startLocation=n.x.location,this.columnWidth=c(r),this.table=this.col.closest(`table`),this.totalWidth=this.table.width()},resize:function(e){var t=z?-1:1,n=11,r=e.x.location*t-this.startLocation*t;this.columnWidth+r<n&&(r=n-this.columnWidth),this.table.width(this.totalWidth+r),this.col.width(this.columnWidth+r)},resizeend:function(){t.wrapper.removeClass(`k-grid-column-resizing`);var e=this.th.attr(`data-field`),n=T(Y(t.columns),function(t){return t.field==e}),r=Math.floor(c(this.th));n[0].width=r,t._resize(),t._syncLockedContentHeight(),t._syncLockedHeaderHeight(),t.trigger(we,{column:n,oldWidth:this.columnWidth,newWidth:r}),this.table=this.col=this.th=null}})}},_sortable:function(){var n,r,i,a,o,s,c,l=this.options.sortable,u=T(this.columns,function(e){return e.columns!==t}).length>0,d=this._sort.bind(this);if(l)for(a=u?this.lockedHeader?dt(K(this.lockedHeader.find(`>table>thead`)).add(K(this.thead))):K(this.thead):e(this.lockedHeader).add(this.thead).find(`tr:not(.k-filter-row) th`),n=Y(this.columns),s=0,c=a.length;s<c;s++)r=n[s],r.sortable!==!1&&!r.command&&!r.draggable&&r.field&&!r.selectable&&(o=a.eq(s),i=o.data(`kendoColumnSorter`),i&&i.destroy(),o.kendoColumnSorter(C({},l,r.sortable,{dataSource:this.dataSource,change:d})))},_filterable:function(){var n,r=this.options.filterable,i,a,o,s,c,l,u=T(this.columns,function(e){return e.columns!==t}).length>0;if(!(!r||this.options.columnMenu)){var d=(function(e){this.trigger(ve,{field:e.field,container:e.container})}).bind(this),f=(function(e){this.trigger(ye,{field:e.field,container:e.container})}).bind(this),p=this._filter.bind(this);if(n=u?this.lockedHeader?K(this.lockedHeader.find(`>table>thead`).add(this.thead)):K(this.thead):e(this.lockedHeader).add(this.thead).find(`tr:not(.k-filter-row) th`),o=Y(this.columns),r&&typeof r.mode==te&&r.mode.indexOf(`menu`)==-1&&(r=!1),r)for(i=0,a=n.length;i<a;i++)s=o[i],c=n.eq(i),l=c.data(`kendoFilterMenu`),l&&l.destroy(),!(s.draggable||s.command||s.filterable===!1||s.selectable)&&c.kendoFilterMenu(C(!0,{},r,s.filterable,{dataSource:this.dataSource,init:d,open:f,change:p,appendTo:k+V.headerCellInner}))}},_filterRow:function(){var t=this;if(t._hasFilterRow()){for(var n,r=kendo.attr(`uid`),i=Y(t.columns),a=t.options.filterable,o=this._filter.bind(this),s,c=0;c<i.length;c++){var l,u=i[c],d=t.options.filterable.operators,f=!1,m=this.wrapper.find(`.k-grid-header .k-filter-row th[`+r+`="`+u.headerAttributes.id+`"]`),h=u.field,g=u.parentColumn;if(delete u.parentColumn,h&&u.filterable!==!1){var _=u.filterable&&u.filterable.cell||{};s=m.find(`.k-filtercell`).data(`kendoFilterCell`),s&&(s.destroy(),m.empty()),l=t.options.dataSource,l instanceof p&&(l=t.options.dataSource.options);var v=C(!0,{},a.messages);if(u.filterable&&C(!0,v,u.filterable.messages),_.enabled===!1){m.html(`&nbsp;`);continue}_.dataSource&&(l=_.dataSource,f=!0),u.filterable&&u.filterable.operators&&(d=u.filterable.operators),n={column:u,dataSource:t.dataSource,suggestDataSource:l,customDataSource:f,field:h,messages:v,values:u.values,template:_.template,delay:_.delay,inputWidth:_.inputWidth,suggestionOperator:_.suggestionOperator,minLength:_.minLength,dataTextField:_.dataTextField,operator:_.operator,operators:d,showOperators:_.showOperators,change:o},e(`<span/>`).attr(kendo.attr(`field`),h).appendTo(m).kendoFilterCell(n),u.parentColumn=g}else m.html(`&nbsp;`)}this._filterFocusable().attr(_e,-1)}},_hasFilterRow:function(){var t=this.options.filterable,n=t&&typeof t.mode==te&&t.mode.indexOf(`row`)!=-1,r=this.columns,i=e.grep(r,function(e){return e.filterable===!1});return r.length&&i.length==r.length&&(n=!1),n},_change:function(){var e=this,t;e._checkBoxSelection&&(t=e.selectable.value(),e._uncheckCheckBoxes(),e._checkRows(t),t.length&&t.length===e.items().length?e._toggleHeaderCheckState(!0):e._toggleHeaderCheckState(!1)),this.trigger(O)},_isLocked:function(){return this.lockedHeader!==null},_selectable:function(){var n=this,r=this.options.selectable,i,a=this.table,o,s=n._isLocked(),c,u;r&&(r=kendo.ui.Selectable.parseOptions(r),this._hasLockedColumns&&(a=a.add(this.lockedTable),o=r.multiple&&r.cell),i=`>tbody>tr:not(.k-footer-template)`,r.cell&&(i+=`>td`),this.selectable=new kendo.ui.Selectable(a,{filter:i,aria:!0,multiple:r.multiple,change:this._change.bind(this),useAllItems:o,continuousItems:this._continuousItems.bind(this,i,r.cell),relatedTarget:!r.cell&&this._hasLockedColumns?this._selectableTarget.bind(this):t}),n.options.navigatable&&(c=r.multiple,u=r.cell,a.on(`keydown`+A,function(t){var r=n.current();if(r){var i=t.target;if(t.keyCode===l.SPACEBAR&&!t.shiftKey&&e.inArray(i,a)>-1&&!r.is(`.k-header`)){if(t.preventDefault(),t.stopPropagation(),r=u?r:r.parent(),s&&!u&&(r=r.add(n._relatedRow(r))),c){if(!t.ctrlKey)n.selectable.clear();else if(r.hasClass(V.selected)){r.removeClass(V.selected),n.trigger(O);return}}else n.selectable.clear();u||(n.selectable._lastActive=r),n.selectable.value(r),n.trigger(O)}else !u&&(t.shiftKey&&t.keyCode==l.LEFT||t.shiftKey&&t.keyCode==l.RIGHT||t.shiftKey&&t.keyCode==l.UP||t.shiftKey&&t.keyCode==l.DOWN||t.keyCode===l.SPACEBAR&&t.shiftKey)&&(t.preventDefault(),t.stopPropagation(),r=r.parent(),s&&(r=r.add(n._relatedRow(r))),c?(n.selectable._lastActive||(n.selectable._lastActive=r),n.selectable.selectRange(n.selectable._firstSelectee(),r)):(n.selectable.clear(),n.selectable.value(r)),n.trigger(O))}})))},_continuousItems:function(t,n){if(this.lockedContent){for(var r=e(t,this.lockedTable),i=e(t,this.table),a=n?X(this.columns).length:1,o=n?this.columns.length-a:1,s=[],c=0;c<r.length;c+=a)ee.apply(s,r.slice(c,c+a)),ee.apply(s,i.splice(0,o));return s}},_selectableTarget:function(t){for(var n,r=e(),i=0,a=t.length;i<a;i++)n=this._relatedRow(t[i]),E(n[0],t)<0&&(r=r.add(n));return r},_relatedRow:function(t){var n=this.lockedTable;if(t=e(t),!n)return t;var r=t.closest(this.table.add(this.lockedTable)),i=r.find(`>tbody>tr`).index(t);return r=r[0]===this.table[0]?n:this.table,r.find(`>tbody>tr`).eq(i)},select:function(t){var n=this,r=this.selectable;return n._checkBoxSelection?(t&&(n._checkRows(t),n.select().length===n.items().length&&n._toggleHeaderCheckState(!0)),n.items().filter(`.`+Je)):r?(t!==void 0&&(r.options.multiple||(r.clear(),t=t.first()),this._hasLockedColumns&&(t=t.add(e.map(t,this._relatedRow.bind(this))))),r.value(t)):e()},clearSelection:function(){var e=this;if(e.selectable&&!e._checkBoxSelection&&e.selectable.clear(),e._checkBoxSelection){e._deselectCheckRows(e.select(),!0);return}},_uncheckCheckBoxes:function(){var e=this;e.table.add(e.lockedTable).find(`tbody `+B).attr(`aria-checked`,!1).prop(`checked`,!1).attr(`aria-label`,`Select row`)},_deselectCheckRows:function(t,n){var r=this;t=r.table.add(r.lockedTable).find(t),r._isLocked()&&(t=t.add(t.map(function(){return r._relatedRow(this)}))),t.each(function(){e(this).removeClass(Je).find(B).attr(`aria-checked`,!1).prop(`checked`,!1).attr(`aria-label`,`Select row`)}),r._toggleHeaderCheckState(!1),n||r.trigger(O)},_headerCheckboxClick:function(t){var n=this,r=e(t.target),i=r.prop(`checked`),a=r.closest(`.k-grid`).getKendoTreeList();n===a&&(i?n.select(a.items()):n.clearSelection(),n.trigger(O))},_checkboxClick:function(t){var n=this,r=e(t.target).closest(`tr`),i=!r.hasClass(Je),a=n.dataItem(r),o=[],s=``;if(n===r.closest(`.k-grid`).getKendoTreeList()){if(n._includeChildren){n.dataSource.allChildNodes(a,o);for(var c=0;c<o.length;c++)s+=`tr[data-uid='`+o[c].uid+`'],`}s+=`tr[data-uid='`+a.uid+`']`,r=e(s),i?(n.select(r),n.trigger(O)):n._deselectCheckRows(r)}},_checkRows:function(t){t.each(function(){e(this).addClass(Je).find(B).prop(`checked`,!0).attr(`aria-label`,`Deselect row`).attr(`aria-checked`,!0)})},_toggleHeaderCheckState:function(e){var t=this;e?t.thead.add(t.lockedHeader).find(`tr `+B).prop(`checked`,!0).attr(`aria-checked`,!0).attr(`aria-label`,`Deselect all rows`):t.thead.add(t.lockedHeader).find(`tr `+B).prop(`checked`,!1).attr(`aria-checked`,!1).attr(`aria-label`,`Select all rows`)},_dataSource:function(e){var n=this,r=this.dataSource,i=n.options.pageable;r&&(r.unbind(O,this._refreshHandler),r.unbind(re,this._errorHandler),r.unbind(je,this._sortHandler),r.unbind(ie,this._progressHandler)),this._refreshHandler=this.refresh.bind(this),this._errorHandler=this._error.bind(this),this._sortHandler=this._clearSortClasses.bind(this),this._progressHandler=this._progress.bind(this),D(e)&&(C(e,{table:n.table,fields:n.columns}),D(i)&&i.pageSize!==t&&(e.pageSize=i.pageSize)),r=this.dataSource=lt.create(e),i&&(r._collapsedTotal=t),r.bind(O,this._refreshHandler),r.bind(re,this._errorHandler),r.bind(je,this._sortHandler),r.bind(ie,this._progressHandler),this._dataSourceFetchProxy=(function(){this.dataSource.fetch()}).bind(this)},setDataSource:function(e){this._dataSource(e),this._sortable(),this._filterable(),this._filterRow(),this._columnMenu(),this._pageable(),this._contentTree.render([]),this.options.autoBind&&this.dataSource.fetch()},dataItem:function(t){if(t instanceof U)return t;var n=e(t).closest(`tr`).attr(kendo.attr(`uid`));return $(n)?null:this.dataSource.getByUid(n)},editRow:function(e){var t=this,n;if(!(this._isIncellEditable()||!this.options.editable)&&(typeof e===te&&(e=this.tbody.find(e)),n=t._isPageable()&&t._isPopupEditable()&&e instanceof U?e:this.dataItem(e),n)){if(t.editor?(n._edit=!0,this._render(),this._cancelEditor()):t._preventPageSizeRestore=!1,this._editMode()!=`popup`&&(n._edit=!0),this.trigger(oe,{model:n})){t.dataSource._restorePageSizeAfterAddChild();return}this._render(),this._createEditor(n),this.trigger(M,{container:this.editor.wrapper,model:n})}},_cancelEdit:function(t){if(this.editor){var n;t=C(t,{container:this.editor.wrapper,model:this.editor.model}),!this.trigger(F,t)&&(this.options.navigatable&&(n=this.items().index(e(this.current()).parent())),this.cancelRow(),this.options.navigatable&&(this._setCurrent(this.items().eq(n).children().filter(R).first()),Q(this.table,!0)))}},cancelRow:function(){this._isIncellEditable()||(this._cancelEditor(),this._render())},saveRow:function(){var e=this.editor,t;this._isIncellEditable()||e&&(t={model:e.model,container:e.wrapper},e.end()&&!this.trigger(N,t)&&this.dataSource.sync())},addRow:function(e){var t=this,n=t.dataSource,r=t._isPageable(),i=t._isIncellEditable(),a=t._isInlineEditable(),o=this.editor,s=0,c={};if(!(o&&!o.end()||!this.options.editable)){if(e){e instanceof U||(e=this.dataItem(e)),c[e.parentIdField]=e.id,s=this.dataSource.indexOf(e)+1,this.expand(e).then(function(){var o=r&&n._isLastItemInView(e)&&(i||a);t._insertAt(c,s,o)});return}this._insertAt(c,s)}},_insertAt:function(e,t,n){var r=this,i=r.dataSource;e=r.dataSource.insert(t,e),n&&i._setAddChildPageSize();var a=this._itemFor(e),o;r._isIncellEditable()?(o=a.children(`td`).eq(r._firstEditableColumnIndex(a)),r.editCell(o)):a&&a[0]?r.editRow(a):(r._isPageable()||r.dataSource.filter())&&(r._isPopupEditable()||r._isInlineEditable())&&r.editRow(e)},_firstEditableColumnIndex:function(e){var t=this,n=t.dataItem(e),r=Y(t.columns),i=r.length,a,o;for(o=0;o<i;o++)if(a=r[o],n&&(!n.editable||n.editable(a.field))&&!a.command&&!a.draggable&&a.field&&a.hidden!==!0)return o;return-1},removeRow:function(t){var n=this.dataItem(t),r={model:n,row:t};this.options.editable&&n&&!this.trigger(pe,r)&&(document.activeElement===e(t).find(`.k-grid-delete`)[0]&&e(t).find(`.k-grid-delete`).trigger(`blur`),this.dataSource.remove(n),this._isIncellEditable()||this.dataSource.sync())},_cancelEditor:function(){var e=this,t,n=e.editor;n&&(t=n.model,e._destroyEditor(),e._isIncellEditable()?e._shouldRestorePageSize()&&e.dataSource._restorePageSizeAfterAddChild():e.dataSource.cancelChanges(t),t._edit=!1),e._preventPageSizeRestore=!1},_shouldRestorePageSize:function(){var e=this;return e._isPageable()&&e._isIncellEditable()&&!e._preventPageSizeRestore},_destroyEditor:function(){this.editor&&=(this.editor.close(),null)},_createEditor:function(e){let t=this.itemFor(e),n=Y(this.columns),r=[],i=this;for(var a=0;a<n.length;a++)r.push(C({},n[a])),delete r[a].parentColumn;t=t.add(this._relatedRow(t));let o=this._editMode(),s={columns:r,model:e,target:this,clearContainer:!1,template:this.options.editable.template};o==`inline`?this.editor=new q(t,s):(C(s,{window:C({},i.options.editable.window,{_footerTemplate:()=>`<div class="k-actions k-actions-start k-actions-horizontal k-window-actions">`+i._buildCommands([`update`],!0)[0].html+i._buildCommands([`canceledit`],!0)[0].html+`</div>`}),fieldRenderer:this._cellContent.bind(this),skipFocus:!0,save:this.saveRow.bind(this),cancel:this._cancelEdit.bind(this),appendTo:this.wrapper}),this.editor=new gt(t,s))},_createIncellEditor:function(e,t){var n=this,r=C({},t.columns[0]);return delete r.parentColumn,new _t(e,C({},{fieldRenderer:n._cellContent.bind(n),appendTo:n.wrapper,clearContainer:!1,target:n,columns:[r],model:t.model,change:t.change}))},editCell:function(t){var n=this;t=e(t);var r=Y(n.columns)[n.cellIndex(t)],i=n.dataItem(t);n._isIncellEditable()&&i&&Vt(r,i)&&n._editCell(t,r,i,t.index())},_editCell:function(e,t,n,r){var i=this,a;if(i.trigger(oe,{model:n})){i.dataSource._restorePageSizeAfterAddChild();return}i.closeCell(),n._edit=!0,i._cancelEditor(),i._render({editedColumn:t,editedColumnIndex:r}),a=i.table.add(i.lockedTable).find(k+V.editCell).first(),i.editor=i._createIncellEditor(a,{columns:[t],model:n,change:function(t){i.trigger(N,{values:t.values,container:e,model:n})&&t.preventDefault()}}),i.lockedTable&&i._syncLockedContentHeight(),i.current()&&i.current().removeClass(`k-focus`),i._current=a,i.trigger(M,{container:e,model:n})},closeCell:function(e){var t=this,n=(t.editor||{}).element,r,i;!n||!n[0]||!t._isIncellEditable()||(i=t.dataItem(n),!(e&&t.trigger(F,{container:n,model:i}))&&(t.trigger(fe,{type:e?F:N,model:i,container:n}),t._cancelEditor(),n.removeClass(V.editCell),r=n.parent().removeClass(V.editRow),t.lockedContent&&t._relatedRow(r).removeClass(V.editRow),t._render(),t.trigger(ne,{item:r,data:i,ns:d}),t.lockedContent&&Bt(r.css(`height`,``)[0],t._relatedRow(r).css(`height`,``)[0])))},cancelChanges:function(){this.dataSource.cancelChanges()},saveChanges:function(){var e=this,t=(e.editor||{}).editable;(t&&t.end()||!t)&&!e.trigger(le)&&e.dataSource.sync()},_editMode:function(){var e=`inline`,t=this.options.editable;return t!==!0&&(e=typeof t==`string`?t:t.mode||e),e.toLowerCase()},_isIncellEditable:function(){return this._editMode()===Be},_isInlineEditable:function(){return this._editMode()===Ve},_isPopupEditable:function(){return this._editMode()===He},hideColumn:function(e){this._toggleColumnVisibility(e,!0)},showColumn:function(e){this._toggleColumnVisibility(e,!1)},_toggleColumnVisibility:function(e,t){e=this._findColumn(e),!(!e||e.hidden===t)&&(e.hidden=t,this._setParentsVisibility(e,!t),this._ensureExpandableColumn(),this._clearColsCache(),this._renderCols(),this._renderHeader(),this._render(),this._adjustTablesWidth(),t?this._ariaAddHiddenColIndex():this._ariaRemoveHiddenColIndex(),this.trigger(t?be:xe,{column:e}),!t&&!e.width&&this.table.add(this.thead.closest(`table`)).width(``),this._updateFirstColumnClass())},_findColumn:function(e){return e=typeof e==`number`?this.columns[e]:D(e)?T(Y(this.columns),function(t){return t===e})[0]:T(Y(this.columns),function(t){return t.field===e})[0],e},_adjustTablesWidth:function(){var e,t,n=this.thead.prev().children(),r,i=0;for(e=0,t=n.length;e<t;e++)if(r=n[e].style.width,r&&r.indexOf(`%`)==-1)i+=parseInt(r,10);else{i=0;break}i&&this.table.add(this.thead.closest(`table`)).width(i)},_reorderable:function(){if(this.options.reorderable){var t=(this.options.scrollable===!0?`.k-grid-header `:`table>.k-grid-header `)+Se,n=this;this._draggableInstance=new d.Draggable(this.wrapper,{group:kendo.guid(),filter:t,ignore:`.k-filter-row *`,hint:function(t){return e(`<div class="k-reorder-clue k-drag-clue" />`).html(t.attr(kendo.attr(`title`))||t.attr(kendo.attr(`field`))||t.text()).prepend(kendo.ui.icon({icon:`cancel`,iconClass:`k-drag-status`}))}}),this.reorderable=new d.Reorderable(this.wrapper,{draggable:this._draggableInstance,dragOverContainers:this._allowDragOverContainers.bind(this),inSameContainer:function(t){return e(t.source).parent()[0]===e(t.target).parent()[0]&&kt(Ot(n.columns),n.columns,t.sourceIndex,t.targetIndex)>-1},change:function(e){var t=Ot(n.columns),r=t[e.oldIndex],i=kt(t,n.columns,e.oldIndex,e.newIndex);n.trigger(Ce,{newIndex:i,oldIndex:E(r,t),column:r}),n.reorderColumn(i,r,e.position===`before`)}})}},_allowDragOverContainers:function(e,t){var n=Ot(this.columns);return n[e].lockable!==!1&&kt(n,this.columns,e,t)>-1},_reorderTrees:function(t,n,r,i,a,o,s,c){for(var l=e(),u=a.find(`tr`).eq(i[0].rowIndex),d=o.children[i[0].rowIndex],f=u.children(),p,m,h=s?t[0]:t[t.length-1],g,_,v,y,b,x=0;x<i.length;x++)m=i[x].cellIndex,l=l.add(f.eq(m)),p=r.children[h.rowIndex].children,r===o&&s&&(m+=x),p.splice(s?h.cellIndex+x:h.cellIndex+1+x,0,d.children[m]);if(r===o&&s?d.children.splice(i[0].cellIndex+i.length,i.length):d.children.splice(i[0].cellIndex,i.length),g=n.find(`tr`).eq(h.rowIndex),b=g.find(`>th.k-header`).eq(h.cellIndex),b.length&&l[0]!==b[0]&&l[s?`insertBefore`:`insertAfter`](b),c>=i[0].rowIndex+1&&c!=1){for(_=[],x=0;x<i.length;x++)i[x].columns&&(_=_.concat(i[x].columns));if(!_.length)return;for(v=[],x=0;x<t.length;x++)t[x].columns&&(v=v.concat(t[x].columns));if(!v.length&&(n!==a||h.cellIndex-i[0].cellIndex>1||i[0].cellIndex-h.cellIndex>1)&&(y=St(this.columns,h,i[0],s,this.columns),v=[y],!y&&_.length&&n.find(`tr`).length>i[0].rowIndex+1)){this._insertTree(_,a,o,n,r);return}if(!v.length)return;this._reorderTrees(v,n,r,_,a,o,s,c)}},_insertTree:function(t,n,r,i,a){var o=[],s,c=e(),l;s=n.find(`tr`).eq(t[0].rowIndex),l=r.children[t[0].rowIndex];for(var u=0;u<t.length;u++)t[u].columns&&(o=o.concat(t[u].columns)),a.children[t[0].rowIndex].children.splice(u,0,l.children[t[u].rowIndex]),c=c.add(s.find(`>th.k-header`).eq(t[u].cellIndex));r.children[t[0].rowIndex].children.splice(t[0].cellIndex,t.length),i.find(`tr`).eq(t[0].rowIndex).append(c),o.length&&this._insertTree(o,n,r,i,a)},_reorderHeader:function(t,n,r){var i=n.columns?Lt([n]):1,o=t.columns?Lt([t]):1,s=bt(n),c=bt(t),l=c?this.lockedHeader:this.thead,u=s?this.lockedHeader:this.thead,d=c?this._lockedHeaderTree:this._headerTree,f=s?this._lockedHeaderTree:this._headerTree,p,m=l.find(`tr:not(.k-filter-row)`),h;if(i===o||i<m.length)this._reorderTrees([t],l,d,[n],u,f,r,i),Rt(l,d),zt(u,f);else{if(l!==u){p=i-m.length,m.each(function(e){for(var t=this.cells,n=0;n<t.length;n++)t[n].colSpan<=1&&t[n].attributes.rowspan&&(d.children[e].children[n].attr.rowSpan+=p,t[n].rowSpan+=p)});for(var g=0;g<p;g++)d.children.push(a(`tr`,{role:`row`})),h=l.is(`thead`)?l:l.find(`thead`),this._hasFilterRow()?e(`<tr class='k-table-row' role='row'></tr>`).insertBefore(h.find(`tr.k-filter-row`)):h.append(`<tr class='k-table-row' role='row'></tr>`)}this._reorderTrees([t],l,d,[n],u,f,r,i),zt(u,f)}},reorderColumn:function(n,r,i){var a,o=r.parentColumn,s=o?o.columns:this.columns,c=E(r,s),l=s[n],u=!!l.locked,d=T(this.columns,function(e){return e.columns!==t}).length>0,f=Z(s).length;if(c!==n&&!(u&&!r.locked&&f==1)&&!(!u&&r.locked&&s.length-f==1)){if(i===t&&(i=n<c),d&&this._reorderHeader(l,r,i),a=!!r.locked,a=a!=u,r.locked=u,s.splice(i?n:n+1,0,r),s.splice(c<n?c:c+1,1),this._setColumnDataIndexes(Y(this.columns)),this._clearColsCache(),this._renderCols(),d)this.lockedHeader?(s=Z(this.columns),this._prepareColumns([{rowSpan:1,cells:[],index:0}],s),s=X(this.columns),this._prepareColumns([{rowSpan:1,cells:[],index:0}],s)):this._prepareColumns([{rowSpan:1,cells:[],index:0}],this.columns);else{var p=e(this.lockedHeader).add(this.thead).find(`tr:not(.k-filter-row) th`);p.eq(c)[i?`insertBefore`:`insertAfter`](p.eq(n));var m=this._headerTree.children[0].children;this._hasLockedColumns&&(m=this._lockedHeaderTree.children[0].children.concat(m)),m.splice(i?n:n+1,0,m[c]),m.splice(c<n?c:c+1,1),this._hasLockedColumns&&(this._lockedHeaderTree.children[0].children=m.splice(0,X(s).length),this._headerTree.children[0].children=m)}this._updateColumnCellIndex(),this._applyLockedContainersWidth(),this._syncLockedHeaderHeight(),this._updateFirstColumnClass(),this._hasFilterRow()&&this._updateFilterThs(i,r,l),this.refresh(),a&&(u?this.trigger(De,{column:r}):this.trigger(Oe,{column:r}))}},lockColumn:function(e){var t=this.columns;if(e=typeof e==`number`?t[e]:T(t,function(t){return t.field===e})[0],!(!e||e.hidden)){var n=X(t).length-1;this.reorderColumn(n,e,!1)}},unlockColumn:function(e){var t=this.columns;if(e=typeof e==`number`?t[e]:T(t,function(t){return t.field===e})[0],!(!e||e.hidden)){var n=X(t).length;this.reorderColumn(n,e,!0)}},_columnMenu:function(){var n=e(this.lockedHeader).add(this.thead).find(`th`),r=this.columns,i=this.options,a=i.columnMenu,o,s,c,l,u,d=this._columnMenuInit.bind(this),f=this._columnMenuOpen.bind(this),p=this._sort.bind(this),m=this._filter.bind(this),h=T(this.columns,function(e){return e.lockable!==!1}).length>0,g=T(this.columns,function(e){return e.columns!==t}).length>0;if(g?(r=Y(r),n=this.lockedHeader?dt(K(this.lockedHeader.find(`>table>thead`)).add(K(this.thead))):K(this.thead)):n=e(this.lockedHeader).add(this.thead).find(`tr:not(.k-filter-row) th`),a){typeof a==`boolean`&&(a={});for(var _=0;_<n.length;_++)o=r[_],o.field&&(s=n.eq(_).data(`kendoColumnMenu`),s&&s.destroy(),l=!1,o.sortable!==!1&&a.sortable!==!1&&i.sortable!==!1&&(l=C({},i.sortable,{compare:(o.sortable||{}).compare})),u=!1,i.filterable&&o.filterable!==!1&&a.filterable!==!1&&(u=C({pane:this.pane},o.filterable,i.filterable)),c={dataSource:this.dataSource,values:o.values,columns:a.columns,sortable:l,filterable:u,messages:a.messages,owner:this,closeCallback:vt,init:d,open:f,sort:p,filtering:m,pane:this.pane,hasLockableColumns:X(r).length>0&&h&&!g,appendTo:k+V.headerCellInner,reorderable:!!i.reorderable},n.eq(_).kendoColumnMenu(c))}},_columnMenuInit:function(e){this.trigger(Te,{field:e.field,container:e.container})},_columnMenuOpen:function(e){this.trigger(Ee,{field:e.field,container:e.container})},_filter:function(e){this.trigger(ke,{filter:e.filter,field:e.field})&&e.preventDefault()},_sort:function(e){this.trigger(je,{sort:e.sort})&&e.preventDefault()},_pageable:function(){var t=this,n,r=t.options.pageable;r&&(n=t.wrapper.children(`div.k-grid-pager`),n.length||(n=e(`<div class="k-pager k-grid-pager"/>`).appendTo(t.wrapper)),t._destroyPager(),typeof r==`object`&&r instanceof kendo.ui.TreeListPager?t.pager=r:t.dataSource&&!t.dataSource.options.serverPaging&&t._createPager(n),t.pager&&t.pager.bind(ce,function(e){t.trigger(se,{page:e.index})&&e.preventDefault()}))},_createPager:function(e,t){var n=this;n.pager=new ht(e,C({},n.options.pageable,{dataSource:n.dataSource,navigatable:n.options.navigatable},t))},_destroyPager:function(){this.pager&&=(this.pager.destroy(),null)},_isPageable:function(){var e=this;return e.options.pageable&&(!e.dataSource||e.dataSource&&e.dataSource._isPageable())},_togglePagerVisibility:function(){var e=this,t=e.options.pageable;t&&(D(t)||t instanceof ht)&&t.alwaysVisible===!1&&e.wrapper.find(`.k-grid-pager`).toggle((e.dataSource.collapsedTotal()||0)>=e.dataSource.pageSize())}});function vt(e){Q(e.closest(`.k-treelist`).find(`[role=treegrid]`),!0)}function yt(t){return e(t).is(`:button,a,:input,a>.k-icon,a>.k-svg-icon,textarea,span.k-select,span.k-icon:not(.k-treelist-toggle),span.k-svg-icon:not(.k-treelist-toggle),span.k-link,.k-input,.k-multiselect-wrap,.k-tool-icon,.k-input-value-text,.k-input-inner,.k-button-icon,.k-switch-thumb,.k-switch-track,.k-switch-label-off,.k-switch-label-on`)}function bt(e){return e.parentColumn?!!bt(e.parentColumn):!!e.locked}function xt(e,t,n,r){var i,a=!!n.locked,o;do i=e[t],t+=r?1:-1,o=!!i.locked;while(i&&t>-1&&t<e.length&&i!=n&&!i.columns&&o===a);return i}function St(e,t,n,r,i){if(t.columns)return t=t.columns,t[r?0:t.length-1];var a=Mt(t,e),o=a?a.columns:e,s=E(t,o);s===0&&r&&o.length!==1?s++:s==o.length-1&&!r&&s!==0?s--:(s>0||s===0&&!r&&s!==0)&&(s+=r?-1:1);var c=E(n,o);t=xt(o,s,n,c>s);var l=E(t,i);return t.columns&&(!l||l===o.length-1)?null:t&&t!=n&&t.columns?St(e,t,n,r,i):null}function Y(e){for(var t=[],n=0;n<e.length;n++){if(!e[n].columns){t.push(e[n]);continue}t=t.concat(Y(e[n].columns))}return t}function Ct(e){var t=[];e=Y(e);for(var n=0;n<e.length;n++)typeof e[n]==`string`?t.push(e[n]):e[n].field&&t.push(e[n].field);return t}function wt(e){return T(e,function(e){return!e.hidden})}function Tt(e){return Et([e]).length>0}function Et(e){return T(e,function(e){var t=!e.hidden;return t&&e.columns&&(t=Et(e.columns).length>0),t})}function Dt(e,t,n){return w(e,function(e){var r;e.parentIds=n,(!Tt(e)||t)&&(r=!0);var i=kendo.guid();return e.headerAttributes=C({headers:n},e.headerAttributes),!e.headerAttributes||!e.headerAttributes.id?e.headerAttributes=C({id:i},e.headerAttributes):i=e.headerAttributes.id,e.columns&&=Dt(e.columns,r,n?n+` `+i:i),C({hidden:r},e)})}function Ot(e){return Pt(X(e)).concat(Pt(Z(e)))}function kt(e,t,n,r){var i=e[n],a=e[r],o=Mt(i,t);return t=o?o.columns:t,E(a,t)}function At(t){var n=t.closest(`table`),r=e().add(t),i=t.closest(`tr`),a=n.find(`tr`),o=a.index(i);if(o>0){for(var s=a.eq(o-1).find(`th`).filter(function(){return!e(this).attr(`rowspan`)}),c=0,l=i.find(`th`).index(t),u=t.prevAll().filter(function(){return this.colSpan>1}),d=0;d<u.length;d++)c+=u[d].colSpan||1;for(l+=Math.max(c-1,0),c=0,d=0;d<s.length;d++){var f=s.eq(d);if(f.attr(`data-colspan`)?c+=f[0].getAttribute(`data-colspan`):c+=1,l>=d&&l<c){r=At(f).add(r);break}}}return r}function jt(t){var n=t.closest(`thead`),r=e().add(t),i=t.closest(`tr`),a=n.find(`tr`),o=a.index(i)+t[0].rowSpan,s=kendo.attr(`colspan`);if(o<=a.length-1){var c=i.next(),l=t.prevAll(),u;l=l.filter(function(){return!this.rowSpan||this.rowSpan===1});var d=0;for(u=0;u<l.length;u++)d+=parseInt(l.eq(u).attr(s),10)||1;var f=c.find(`th`),p=parseInt(t.attr(s),10)||1;for(u=0;u<p;){c=f.eq(u+d),r=r.add(jt(c));var m=parseInt(c.attr(s),10);m>1&&(p-=m-1),u++}}return r}function Mt(e,t){var n=[];return Nt(e,t,n),n[n.length-1]}function Nt(e,t,n){n||=[];for(var r=0;r<t.length;r++){if(e===t[r])return!0;if(t[r].columns){var i=n.length;if(n.push(t[r]),!Nt(e,t[r].columns,n))n.splice(i,n.length-i);else return!0}}return!1}function Pt(e){for(var t=[],n=[],r=0;r<e.length;r++)t.push(e[r]),e[r].columns&&(n=n.concat(e[r].columns));return n.length&&(t=t.concat(Pt(n))),t}function Ft(e,t,n,r){var i,a;for(n||=0,r||={},r[n]=r[n]||0,a=0;a<t.length;a++){if(t[a]==e){i={cell:r[n],row:n};break}else if(t[a].columns&&(i=Ft(e,t[a].columns,n+1,r),i))break;r[n]++}return i}function It(t,n,r){r||=0;var i,a,o=n;n=Y(n);for(var s={},c=t.find(`>tr:not(.k-filter-row)`),l=function(){var t=e(this);return!t.hasClass(`k-group-cell`)&&!t.hasClass(`k-hierarchy-cell`)},u=0,d=n.length;u<d;u++)i=Ft(n[u],o),s[i.row]||(s[i.row]=c.eq(i.row).find(`.k-header`).filter(l)),a=s[i.row].eq(i.cell),a.attr(kendo.attr(`index`),r+u);return n.length}function Lt(e){for(var t=1,n=0,r=0;r<e.length;r++)if(e[r].columns){var i=Lt(e[r].columns);i>n&&(n=i)}return t+n}function X(e){return T(e,W(`locked`))}function Z(e){return T(e,G(W(`locked`)))}function Rt(e,t){var n=e.find(`tr:not(.k-filter-row)`),r=n.length;n.each(function(e){for(var n=this.cells,i=0;i<n.length;i++)n[i].colSpan<=1&&n[i].attributes.rowspan&&(t.children[e].children[i].attr.rowSpan=r-e,n[i].rowSpan=r-e)})}function zt(t,n){var r=t.find(`tr`),i=[];r.filter(function(t){var n=!e(this).children().length;return n&&i.push(t),n}).remove();for(var a=i.length-1;a>=0;a--)n.children.splice(i[a],1);Rt(t,n)}function Q(t,n){if(n===!0){t=e(t);var r=t.parent().scrollTop(),i=kendo.scrollLeft(t.parent());kendo.focusElement(t),kendo.scrollLeft(t.parent().scrollTop(r),i)}else e(t).one(`focusin`,function(e){e.preventDefault()}).trigger(`focus`)}function Bt(e,t){var n,r=e.offsetHeight,i=t.offsetHeight;r>i?n=r+`px`:r<i&&(n=i+`px`),n&&(e.style.height=t.style.height=n)}function Vt(e,t){return!e||!t||!e.field||e.selectable||e.command||e.draggable||e.editable&&!e.editable(t)?!1:e.field&&t.editable&&t.editable(e.field)}function Ht(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Ut(e,t){var n=(e||{}).field||``;return t.dirty&&t.dirtyFields&&t.dirtyFields[n]&&Vt(e,t)}function $(e){return e===void 0}function Wt(e){return typeof e==`number`&&!isNaN(e)}kendo.ExcelMixin&&kendo.ExcelMixin.extend(J.prototype),kendo.PDFMixin&&(kendo.PDFMixin.extend(J.prototype),J.prototype._drawPDF=function(n){var r=this;if(r.options.pdf.paperSize&&r.options.pdf.paperSize!=`auto`)return r._drawPDF_autoPageBreak(n);var i=new e.Deferred,a=r.dataSource,o=r.options.pdf.allPages;this._initPDFProgress(n);var s=new kendo.drawing.Group,c=a.page();function l(){o&&c!==t?(a.unbind(`change`,u),a.one(`change`,function(){i.resolve(s)}),a.page(c)):i.resolve(s)}function u(){r._drawPDFShadow({width:r.wrapper.width()},{avoidLinks:r.options.pdf.avoidLinks}).done(function(e){var t=a.page(),r=o?a.totalPages():1,i={page:e,pageNumber:t,progress:t/r,totalPages:r};n.notify(i),s.append(i.page),t<r?a.page(t+1):l()}).fail(function(e){i.reject(e)})}return o?(a.bind(`change`,u),a.page(1)):u(),i.promise()},J.prototype._initPDFProgress=function(t){var n=e(`<div class='k-loading-pdf-mask'><div class='k-loading-color'></div></div>`);n.prepend(this.wrapper.clone().css({position:`absolute`,top:0,left:0})),this.wrapper.append(n);var r=e(`<div class='k-loading-pdf-progress'>`).appendTo(n).kendoProgressBar({type:`chunk`,chunkCount:10,min:0,max:1,value:0}).data(`kendoProgressBar`);t.progress(function(e){r.value(e.progress)}).always(function(){kendo.destroy(n),n.remove()})},J.prototype._drawPDF_autoPageBreak=function(n){var r=this,i=new e.Deferred,a=r.dataSource,o=r.options.pdf.allPages,s=r.wrapper.find(`table[role="treeList"] > tbody`),c=e(`<div>`).css({position:`absolute`,left:-1e4,top:-1e4}),l=r.wrapper.clone().css({height:`auto`,width:`auto`}).appendTo(c);l.find(`.k-grid-content`).css({height:`auto`,width:`auto`,overflow:`visible`}),l.find(`table[role="treeList"], .k-grid-footer table`).css({height:`auto`,width:`100%`,overflow:`visible`}),l.find(`.k-grid-pager, .k-grid-toolbar, .k-grouping-header`).remove(),l.find(`.k-grid-header, .k-grid-footer`).css({paddingRight:0}),this._initPDFProgress(n);var u=l.find(`table[role="treeList"] > tbody`).empty(),d=a.page();function f(){o&&d!==t?(a.one(`change`,p),a.page(d)):(r.refresh(),p())}function p(){c.appendTo(document.body);var t=e.extend({},r.options.pdf,{_destructive:!0,progress:function(e){n.notify({page:e.page,pageNumber:e.pageNum,progress:.5+e.pageNum/e.totalPages/2,totalPages:e.totalPages})}});kendo.drawing.drawDOM(l,t).always(function(){c.remove()}).then(function(e){i.resolve(e)}).fail(function(e){i.reject(e)})}function m(){var e=a.page(),t=o?a.totalPages():1;u.append(s.find(`tr`)),e<t?a.page(e+1):(a.unbind(`change`,m),f())}return o?(a.bind(`change`,m),a.page(1)):m(),i.promise()}),C(!0,kendo.data,{TreeListDataSource:lt,TreeListModel:U}),C(kendo.ui.treelist,{editor:q,defaultBodyContextMenu:ot,defaultHeadContextMenu:st}),d.plugin(J),d.plugin(ht)})(window.kendo.jQuery);var w=kendo;e.__meta__=C,e.default=w});
//# sourceMappingURL=kendo.treelist.min.js.map