/**
 * Kendo UI v2026.1.212 (http://www.telerik.com/kendo-ui)
 * Copyright 2026 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Kendo UI commercial licenses may be obtained at
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
 * If you do not own a commercial license, this file shall be governed by the trial license terms.
 */
(function(e,t){typeof exports==`object`&&typeof module<`u`?t(exports,require(`kendo.core.min.js`),require(`kendo.data.odata.min.js`),require(`kendo.data.xml.min.js`)):typeof define==`function`&&define.amd?define([`exports`,`kendo.core.min`,`kendo.data.odata.min`,`kendo.data.xml.min`],t):(e=typeof globalThis<`u`?globalThis:e||self,t((e.kendo=e.kendo||{},e.kendo._globals=e.kendo._globals||{},e.kendo._globals.Data={}),e.kendo._globals.Core,e.kendo._globals.DataOdata,e.kendo._globals.DataXml))})(this,function(e,t,n,r){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:`Module`}});let i={or:{concat:(e,t)=>n=>e(n)||t(n),identity:()=>!1},and:{concat:(e,t)=>n=>e(n)&&t(n),identity:()=>!0}},a={isnullorempty:e=>kendo.isBlank(e)||e===``,isnotnullorempty:e=>kendo.isPresent(e)&&e!==``,contains:(e,t)=>(e+``).indexOf(t)>=0,doesnotcontain:(e,t)=>(e+``).indexOf(t)===-1,doesnotendwith:(e,t)=>(e+``).indexOf(t,(e||``).length-(t||``).length)<0,doesnotstartwith:(e,t)=>(e+``).lastIndexOf(t,0)===-1,endswith:(e,t)=>(e+``).indexOf(t,(e||``).length-(t||``).length)>=0,eq:(e,t)=>e===t,gt:(e,t)=>e>t,gte:(e,t)=>e>=t,isempty:e=>e===``,isnotempty:e=>e!==``,isnotnull:e=>kendo.isPresent(e),isnull:e=>kendo.isBlank(e),lt:(e,t)=>e<t,lte:(e,t)=>e<=t,neq:(e,t)=>e!=t,startswith:(e,t)=>(e+``).lastIndexOf(t,0)===0},o=/^\/Date\((.*?)\)\/$/,s=(e,t,n)=>{if(e!=null&&kendo.isString(e)){let r=o.exec(e);if(r)return new Date(+r[1]).getTime();if(t)return n?e.toLocaleLowerCase(n):e.toLowerCase()}else if(e!=null&&kendo.isDate(e))return e.getTime();return e},c=(e,t,n,r)=>{if(!kendo.isPresent(t))return e;let i=e;if(kendo.isString(t)){let a=o.exec(t);a?t=new Date(+a[1]):i=t=>{let i=e(t);return typeof i==`string`&&n?r?i.toLocaleLowerCase(r):i.toLowerCase():kendo.isNumeric(i)?i+``:i}}return kendo.isDate(t)?e=>{let t=i(e);return kendo.isDate(t)?t.getTime():t}:i},l=({field:e,ignoreCase:t,value:n,operator:r=`eq`,accentFoldingFiltering:i})=>{e=kendo.isPresent(e)?e:e=>e,t=kendo.isPresent(t)?t:!0;let o=c(kendo.isFunction(e)?e:kendo.getter(e,!0),n,t,i);n=s(n,t,i);let l=kendo.isFunction(r)?r:a[r];return e=>l(o(e),n,t)},u=e=>kendo.isPresent(e.filters),d=e=>{let t=e.accentFoldingFiltering,n=i[e.logic||`and`];return e.filters.filter(kendo.isPresent).map(e=>u(e)?d(f(e,t)):l(f(e,t))).reduce(n.concat,n.identity)},f=(e,t)=>kendo.isPresent(t)?Object.assign(e,{accentFoldingFiltering:t}):e,p=function(e){return d(e)},m={id:`data`,name:`Data source`,category:`framework`,description:`Powerful component for using local and remote data.Fully supports CRUD, Sorting, Paging, Filtering, Grouping, and Aggregates.`,depends:[`core`],features:[{id:`data-odata`,name:`OData`,description:`Support for accessing Open Data Protocol (OData) services.`,depends:[`data.odata`]},{id:`data-signalr`,name:`SignalR`,description:`Support for binding to SignalR hubs.`,depends:[`data.signalr`]},{id:`data-XML`,name:`XML`,description:`Support for binding to XML.`,depends:[`data.xml`]}]};(function(e,t){var n=e.extend,r=e.isPlainObject,i=e.isEmptyObject,a=Array.isArray,o=e.grep,s=e.ajax,c,l=e.each,u=e.noop,d=window.kendo,f=d.isFunction,m=d.Observable,h=d.Class,g=`string`,_=`function`,v=`asc`,y=`create`,b=`read`,x=`update`,S=`destroy`,C=`change`,ee=`sync`,w=`get`,T=`error`,E=`requestStart`,D=`progress`,O=`requestEnd`,k=`itemsLoaded`,te=`itemLoad`,ne=[y,b,x,S],A=function(e){return e},j=d.getter,M=d.stringify,N=Math,re=[].push,ie=[].join,ae=[].pop,oe=[].splice,se=[].shift,P=[].slice,ce=[].unshift,F={}.toString,le=d.support.stableSort,ue=/^\/Date\((.*?)\)\/$/,de=[],I=m.extend({init:function(e,t){var n=this;n.type=t||z,m.fn.init.call(n),n.length=e.length,n.wrapAll(e,n),n._loadPromises=[],n._loadedNodes=[]},at:function(e){return this[e]},toJSON:function(e){var t,n=this.length,r,i=Array(n);for(t=0;t<n;t++)r=this[t],r instanceof z&&(r=r.toJSON(e)),i[t]=r;return i},parent:u,wrapAll:function(e,t){var n=this,r,i,a=function(){return n};for(t||=[],r=0,i=e.length;r<i;r++)t[r]=n.wrap(e[r],a);return t},wrap:function(e,t){var n=this,r;return e!==null&&F.call(e)===`[object Object]`&&(r=e instanceof n.type||e instanceof B,r||(e=e instanceof z?e.toJSON():e,e=new n.type(e)),e.parent=t,e.bind(C,function(t){var r=e.hasOwnProperty(`hasSubgroups`);n.trigger(C,{field:t.field,node:t.node,index:t.index,items:t.items||[this],action:t.node||r?t.action||`itemloaded`:`itemchange`})}),e.bind(te,function(e){n._loadPromises.push(e.promise),n._loading=!0,e.promise.done(function(){n._loadedNodes.push(e.node);var t=n._loadPromises.indexOf(e.promise);n._loadPromises.splice(t,1),n._loadPromises.length||(n._loading=!1,n.trigger(k,{collection:n,nodes:n._loadedNodes}),n._loadedNodes=[])})})),e},loading:function(){return this._loading},push:function(){var e=this.length,t=this.wrapAll(arguments),n=re.apply(this,t);return this.omitChangeEvent||this.trigger(C,{action:`add`,index:e,items:t}),n},slice:P,sort:[].sort,join:ie,pop:function(){var e=this.length,t=ae.apply(this);return e&&this.trigger(C,{action:`remove`,index:e-1,items:[t]}),t},splice:function(e,t,n){var r=this.wrapAll(P.call(arguments,2)),i=oe.apply(this,[e,t].concat(r)),a,o;if(i.length)for(this.omitChangeEvent||(this.trigger(C,{action:`remove`,index:e,items:this.omitCache&&this.omitCache.length?i.concat(this.omitCache):i}),this.omitCache=[]),a=0,o=i.length;a<o;a++)i[a]&&i[a].children&&i[a].unbind(C);return n&&(this.omitChangeEvent||this.trigger(C,{action:`add`,index:e,items:r})),i},shift:function(){var e=this.length,t=se.apply(this);return e&&this.trigger(C,{action:`remove`,index:0,items:[t]}),t},unshift:function(){var e=this.wrapAll(arguments),t=ce.apply(this,e);return this.trigger(C,{action:`add`,index:0,items:e}),t},indexOf:function(e){var t=this,n,r;for(n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},forEach:function(e,t){for(var n=0,r=this.length,i=t||window;n<r;n++)e.call(i,this[n],n,this)},map:function(e,t){for(var n=0,r=[],i=this.length,a=t||window;n<i;n++)r[n]=e.call(a,this[n],n,this);return r},reduce:function(e){var t=0,n,r=this.length;for(arguments.length==2?n=arguments[1]:t<r&&(n=this[t++]);t<r;t++)n=e(n,this[t],t,this);return n},reduceRight:function(e){var t=this.length-1,n;for(arguments.length==2?n=arguments[1]:t>0&&(n=this[t--]);t>=0;t--)n=e(n,this[t],t,this);return n},filter:function(e,t){for(var n=0,r=[],i,a=this.length,o=t||window;n<a;n++)i=this[n],e.call(o,i,n,this)&&(r[r.length]=i);return r},find:function(e,t){for(var n=0,r,i=this.length,a=t||window;n<i;n++)if(r=this[n],e.call(a,r,n,this))return r},every:function(e,t){for(var n=0,r,i=this.length,a=t||window;n<i;n++)if(r=this[n],!e.call(a,r,n,this))return!1;return!0},some:function(e,t){for(var n=0,r,i=this.length,a=t||window;n<i;n++)if(r=this[n],e.call(a,r,n,this))return!0;return!1},remove:function(e){var t=this.indexOf(e);t!==-1&&this.splice(t,1)},empty:function(){this.splice(0,this.length)}});typeof Symbol<`u`&&Symbol.iterator&&!I.prototype[Symbol.iterator]&&(I.prototype[Symbol.iterator]=[][Symbol.iterator]);var L=I.extend({init:function(e,t,n){var r=function(){return this};m.fn.init.call(this),this.type=t||z,n&&(this._events=n);for(var i=0;i<e.length;i++)this[i]=e[i];this.length=i,this._parent=r.bind(this),this._loadPromises=[],this._loadedNodes=[]},at:function(e){var t=this[e];return t instanceof this.type?t.parent=this._parent:t=this[e]=this.wrap(t,this._parent),t}});function R(e,t,n,r){return function(i){var a={},o;for(o in i)a[o]=i[o];r?a.field=n+`.`+i.field:a.field=n,t==C&&e._notifyChange&&e._notifyChange(a),e.trigger(t,a)}}function fe(e){return typeof e==`object`&&Object.getPrototypeOf(e)===Object.getPrototypeOf({})||Object.getPrototypeOf(e)===Object.getPrototypeOf(new Date)||typeof e!=`object`}function pe(e,t){var n=[],r=[],i,a;for(e||={},fe(e)||(r=Object.getOwnPropertyNames(Object.getPrototypeOf(e)).filter(e=>e.indexOf(`__`)!==0)),i=Object.getOwnPropertyNames(e).concat(r),a=de.filter(function(e){return i.indexOf(e)<0});e;)Object.getOwnPropertyNames(e).forEach(function(e){n.indexOf(e)===-1&&(!t||a.indexOf(e)<0)&&n.push(e)}),e=Object.getPrototypeOf(e);return n}de=pe({},!1);var z=m.extend({init:function(e){var t=this,n,r=pe(e,!0),i=function(){return t};m.fn.init.call(this),this._handlers={},r.forEach(function(r){n=e[r],typeof n==`object`&&n&&!n.getTime&&r.charAt(0)!=`_`&&(n=t.wrap(n,r,i)),t[r]=n}),t.uid=d.guid()},shouldSerialize:function(e,t){return typeof t==`object`&&(t&&=t[e]),this.hasOwnProperty(e)&&e!==`_handlers`&&e!==`_events`&&(t||typeof this[e]!==_)&&e!==`uid`},forEach:function(e){for(var t in this)this.shouldSerialize(t)&&e(this[t],t)},toJSON:function(e){var t={},n,r;for(r in this)this.shouldSerialize(r,e)&&(n=this[r],(n instanceof z||n instanceof I)&&(n=n.toJSON(e)),t[r]=n);return t},get:function(e){var t=this,n;return t.trigger(w,{field:e}),n=e===`this`?t:d.getter(e,!0)(t),n},_set:function(e,t){var n=this,r=e.indexOf(`.`)>=0;if(r)for(var i=e.split(`.`),a=``;i.length>1;){a+=i.shift();var o=d.getter(a,!0)(n);if(o instanceof z)return o.set(i.join(`.`),t),r;a+=`.`}return d.setter(e)(n,t),r},set:function(e,t){var n=this,r=!1,i=e.indexOf(`.`)>=0,a=d.getter(e,!0)(n);return a!==t&&(a instanceof m&&this._handlers[e]&&(this._handlers[e].get&&a.unbind(w,this._handlers[e].get),a.unbind(C,this._handlers[e].change)),r=n.trigger(`set`,{field:e,value:t}),r||(i||(t=n.wrap(t,e,function(){return n})),(!n._set(e,t)||e.indexOf(`(`)>=0||e.indexOf(`[`)>=0)&&n.trigger(C,{field:e}))),r},parent:u,wrap:function(e,t,n){var r=this,i,a,o=F.call(e);if(e!=null&&(o===`[object Object]`||o===`[object Array]`)){var s=e instanceof I,c=e instanceof Q;o===`[object Object]`&&!c&&!s?(e instanceof z||(e=new z(e)),i=R(r,w,t,!0),e.bind(w,i),a=R(r,C,t,!0),e.bind(C,a),r._handlers[t]={get:i,change:a}):(o===`[object Array]`||s||c)&&(!s&&!c&&(e=new I(e)),a=R(r,C,t,!1),e.bind(C,a),r._handlers[t]={change:a}),e.parent=n}return e}});function me(e,t){if(e===t)return!0;var n=d.type(e),r=d.type(t),i;if(n!==r)return!1;if(n===`date`)return e.getTime()===t.getTime();if(n!==`object`&&n!==`array`)return!1;for(i in e)if(!me(e[i],t[i]))return!1;return!0}var he={number:function(e){return typeof e===g&&e.toLowerCase()===`null`?null:d.parseFloat(e)},date:function(e){return typeof e===g&&e.toLowerCase()===`null`?null:d.parseDate(e)},boolean:function(e){return typeof e===g?e.toLowerCase()===`null`?null:e.toLowerCase()===`true`:e==null?e:!!e},string:function(e){return typeof e===g&&e.toLowerCase()===`null`?null:e==null?e:e+``},default:function(e){return e}},ge={string:``,number:0,date:new Date,boolean:!1,default:``};function _e(e,t){var n,i;for(i in e)if(n=e[i],r(n)&&n.field&&n.field===t||n===t)return n;return null}var B=z.extend({init:function(n){var r=this;if((!n||e.isEmptyObject(n))&&(n=e.extend({},r.defaults,n),r._initializers))for(var i=0;i<r._initializers.length;i++){var a=r._initializers[i];n[a]=r.defaults[a]()}z.fn.init.call(r,n),r.dirty=!1,r.dirtyFields={},r.idField&&(r.id=r.get(r.idField),r.id===t&&(r.id=r._defaultId))},shouldSerialize:function(e){return z.fn.shouldSerialize.call(this,e)&&e!==`uid`&&!(this.idField!==`id`&&e===`id`)&&e!==`dirty`&&e!==`dirtyFields`&&e!==`_accessors`},_parse:function(e,t){var n=this,r=e,i=n.fields||{},a;return e=i[e],e||=_e(i,r),e&&(a=e.parse,!a&&e.type&&(a=he[e.type.toLowerCase()])),a?a(t):t},_notifyChange:function(e){var t=e.action;(t==`add`||t==`remove`)&&(this.dirty=!0,this.dirtyFields[e.field]=!0)},editable:function(e){return e=(this.fields||{})[e],e?e.editable!==!1:!0},set:function(e,t){var n=this,r=n.dirty;n.editable(e)&&(t=n._parse(e,t),me(t,n.get(e))?n.trigger(`equalSet`,{field:e,value:t}):(n.dirty=!0,n.dirtyFields[e]=!0,z.fn.set.call(n,e,t)&&!r&&(n.dirty=r,n.dirty||(n.dirtyFields[e]=!1))))},accept:function(e){var t=this,n=function(){return t},r;for(r in e){var i=e[r];r.charAt(0)!=`_`&&(i=t.wrap(e[r],r,n)),t._set(r,i)}t.idField&&(t.id=t.get(t.idField)),t.dirty=!1,t.dirtyFields={}},isNew:function(){return this.id===this._defaultId}});B.define=function(r,i){i===t&&(i=r,r=B);var a,o=n({defaults:{}},i),s,c,l,u,d,f,p={},m,h=o.id,_=[];if(h&&(o.idField=h),o.id&&delete o.id,h&&(o.defaults[h]=o._defaultId=``),F.call(o.fields)===`[object Array]`){for(d=0,f=o.fields.length;d<f;d++)c=o.fields[d],typeof c===g?p[c]={}:c.field&&(p[c.field]=c);o.fields=p}for(s in o.fields){c=o.fields[s],l=c.type||`default`,u=null,m=s;let n=typeof c.field===g?c.field:s;(!c.nullable||c.defaultValue)&&(u=o.defaults[m===n?n:m]=c.defaultValue===t?ge[l.toLowerCase()]:c.defaultValue,typeof u==`function`&&_.push(n)),i.id===n&&(o._defaultId=u),o.defaults[m===n?n:m]=u,e.isPlainObject(c)?c.parse=c.parse||he[l]:c={parse:he[l]}}return _.length>0&&(o._initializers=_),a=r.extend(o),a.define=function(e){return B.define(a,e)},o.fields&&(a.fields=o.fields,a.idField=o.idField),a};var V={selector:function(e){return f(e)?e:j(e)},compare:function(e){var t=this.selector(e);return function(e,n){return e=t(e),n=t(n),e==null&&n==null?0:e==null?-1:n==null?1:e.localeCompare?e.localeCompare(n):e>n?1:e<n?-1:0}},create:function(e){var t=e.compare||this.compare(e.field);return e.dir==`desc`?function(e,n){return t(n,e,!0)}:t},combine:function(e){return function(t,n){var r=e[0](t,n),i,a;for(i=1,a=e.length;i<a;i++)r||=e[i](t,n);return r}}},ve=n({},V,{asc:function(e){var t=this.selector(e);return function(e,n){var r=t(e),i=t(n);return r&&r.getTime&&i&&i.getTime&&(r=r.getTime(),i=i.getTime()),r===i?e.__position-n.__position:r==null?-1:i==null?1:r.localeCompare?r.localeCompare(i):r>i?1:-1}},desc:function(e){var t=this.selector(e);return function(e,n){var r=t(e),i=t(n);return r&&r.getTime&&i&&i.getTime&&(r=r.getTime(),i=i.getTime()),r===i?e.__position-n.__position:r==null?1:i==null?-1:i.localeCompare?i.localeCompare(r):r<i?1:-1}},create:function(e){return this[e.dir](e.field)}});c=function(e,t){var n,r=e.length,i=Array(r);for(n=0;n<r;n++)i[n]=t(e[n],n,e);return i};var ye=(function(){function e(e){return typeof e==`string`&&(e=e.replace(/[\r\n]+/g,``)),JSON.stringify(e)}function t(t){return function(n,r,i,a){return r+=``,i&&(n=`(`+n+` + '').toString()`+(a?`.toLocaleLowerCase('`+a+`')`:`.toLowerCase()`),r=a?r.toLocaleLowerCase(a):r.toLowerCase()),t(n,e(r),i)}}function n(t,n,r,i,a){if(r!=null){if(typeof r===g){var o=ue.exec(r);o?r=new Date(+o[1]):i?(r=e(a?r.toLocaleLowerCase(a):r.toLowerCase()),n=`((`+n+` || '')+'')`+(a?`.toLocaleLowerCase('`+a+`')`:`.toLowerCase()`)):r=e(r)}r.getTime&&(n=`(`+n+`&&`+n+`.getTime?`+n+`.getTime():`+n+`)`,r=r.getTime())}return n+` `+t+` `+r}function r(e){for(var t=`/^`,n=!1,r=0;r<e.length;++r){var i=e.charAt(r);if(n)t+=`\\`+i;else if(i==`~`){n=!0;continue}else i==`*`?t+=`.*`:i==`?`?t+=`.`:`.+^$()[]{}|\\/
\r\u2028\u2029\xA0`.indexOf(i)>=0?t+=`\\`+i:t+=i;n=!1}return t+`$/`}return{quote:function(t){return t&&t.getTime?`new Date(`+t.getTime()+`)`:e(t)},eq:function(e,t,r,i){return n(`==`,e,t,r,i)},neq:function(e,t,r,i){return n(`!=`,e,t,r,i)},gt:function(e,t,r){return n(`>`,e,t,r)},gte:function(e,t,r){return n(`>=`,e,t,r)},lt:function(e,t,r){return n(`<`,e,t,r)},lte:function(e,t,r){return n(`<=`,e,t,r)},startswith:t(function(e,t){return e+`.lastIndexOf(`+t+`, 0) == 0`}),doesnotstartwith:t(function(e,t){return e+`.lastIndexOf(`+t+`, 0) == -1`}),endswith:t(function(e,t){var n=t?t.length-2:0;return e+`.indexOf(`+t+`, `+e+`.length - `+n+`) >= 0`}),doesnotendwith:t(function(e,t){var n=t?t.length-2:0;return e+`.indexOf(`+t+`, `+e+`.length - `+n+`) < 0`}),contains:t(function(e,t){return e+`.indexOf(`+t+`) >= 0`}),doesnotcontain:t(function(e,t){return e+`.indexOf(`+t+`) == -1`}),matches:t(function(e,t){return t=t.substring(1,t.length-1),r(t)+`.test(`+e+`)`}),doesnotmatch:t(function(e,t){return t=t.substring(1,t.length-1),`!`+r(t)+`.test(`+e+`)`}),isempty:function(e){return e+` === ''`},isnotempty:function(e){return e+` !== ''`},isnull:function(e){return`(`+e+` == null)`},isnotnull:function(e){return`(`+e+` != null)`},isnullorempty:function(e){return`(`+e+` === null) || (`+e+` === '')`},isnotnullorempty:function(e){return`(`+e+` !== null) && (`+e+` !== '')`}}})();function H(e){this.data=e||[]}H.filterExpr=function(e,n={noEval:!1}){if(n.noEval)return p(e);var r=[],i={and:` && `,or:` || `},a,o,s,c,l=[],u=[],f,m,h=e.filters;for(a=0,o=h.length;a<o;a++)s=h[a],f=s.field,m=s.operator,s.filters?(c=H.filterExpr(s),s=c.expression.replace(/__o\[(\d+)\]/g,function(e,t){return t=+t,`__o[`+(u.length+t)+`]`}).replace(/__f\[(\d+)\]/g,function(e,t){return t=+t,`__f[`+(l.length+t)+`]`}),u.push.apply(u,c.operators),l.push.apply(l,c.fields)):(typeof f===_?(c=`__f[`+l.length+`](d)`,l.push(f)):c=d.expr(f),typeof m===_?(s=`__o[`+u.length+`](`+c+`, `+ye.quote(s.value)+`)`,u.push(m)):s=ye[(m||`eq`).toLowerCase()](c,s.value,s.ignoreCase===t?!0:s.ignoreCase,e.accentFoldingFiltering)),r.push(s);return{expression:`(`+r.join(i[e.logic])+`)`,fields:l,operators:u}};function U(e,n){if(e){var r=typeof e===g?{field:e,dir:n}:e;return o(a(r)?r:r===t?[]:[r],function(e){return!!e.dir})}}function be(e,n){var r={};if(e)for(var i=typeof e===g?{field:e,dir:n}:e,o=a(i)?i:i===t?[]:[i],s=0;s<o.length;s++)r[o[s].field]={dir:o[s].dir,index:s+1};return r}var xe={"==":`eq`,equals:`eq`,isequalto:`eq`,equalto:`eq`,equal:`eq`,"!=":`neq`,ne:`neq`,notequals:`neq`,isnotequalto:`neq`,notequalto:`neq`,notequal:`neq`,"<":`lt`,islessthan:`lt`,lessthan:`lt`,less:`lt`,"<=":`lte`,le:`lte`,islessthanorequalto:`lte`,lessthanequal:`lte`,">":`gt`,isgreaterthan:`gt`,greaterthan:`gt`,greater:`gt`,">=":`gte`,isgreaterthanorequalto:`gte`,greaterthanequal:`gte`,ge:`gte`,notsubstringof:`doesnotcontain`,isnull:`isnull`,isempty:`isempty`,isnotempty:`isnotempty`};function Se(e){var t,n,r,i,a=e.filters;if(a)for(t=0,n=a.length;t<n;t++)r=a[t],i=r.operator,i&&typeof i===g&&(r.operator=xe[i.toLowerCase()]||i),Se(r)}function W(e){if(e&&!i(e))return(a(e)||!e.filters)&&(e={logic:`and`,filters:a(e)?e:[e]}),Se(e),e}H.normalizeFilter=W;function Ce(e,t){return e.logic||t.logic?!1:e.field===t.field&&e.value===t.value&&e.operator===t.operator}function we(e){return e||={},i(e)?{logic:`and`,filters:[]}:W(e)}function Te(e,t){return t.logic||e.field>t.field?1:e.field<t.field?-1:0}function Ee(e,t,n){for(let r=t;r<n;r++)if(e[r].notFetched)return!0;return!1}function De(e,t){if(e=we(e),t=we(t),e.logic!==t.logic)return!1;var n,r,i=(e.filters||[]).slice(),a=(t.filters||[]).slice();if(i.length!==a.length)return!1;i=i.sort(Te),a=a.sort(Te);for(var o=0;o<i.length;o++)if(n=i[o],r=a[o],n.logic&&r.logic){if(!De(n,r))return!1}else if(!Ce(n,r))return!1;return!0}H.compareFilters=De;function Oe(e){return a(e)?e:[e]}function G(e,n,r,i){var o=typeof e===g?{field:e,dir:n,compare:r,skipItemSorting:i}:e,s=a(o)?o:o===t?[]:[o];return c(s,function(e){return{field:e.field,dir:e.dir||`asc`,aggregates:e.aggregates,compare:e.compare,skipItemSorting:e.skipItemSorting}})}function ke(e,t,n){for(var r=G(e,t,n),i=0;i<r.length;i++)delete r[i].compare;return r}function Ae(e){for(var t=a(e)?e:[e],n=0;n<t.length;n++)if(t[n]&&f(t[n].compare))return!0;return!1}H.prototype={toArray:function(){return this.data},range:function(e,t){return new H(this.data.slice(e,e+t))},skip:function(e){return new H(this.data.slice(e))},take:function(e){return new H(this.data.slice(0,e))},select:function(e){return new H(c(this.data,e))},order:function(e,t,n){var r={dir:t};return e&&(e.compare?r.compare=e.compare:r.field=e),n?new H(this.data.sort(V.create(r))):new H(this.data.slice(0).sort(V.create(r)))},orderBy:function(e,t){return this.order(e,`asc`,t)},orderByDescending:function(e,t){return this.order(e,`desc`,t)},sort:function(e,t,n,r){var i,a,o=U(e,t),s=[];if(n||=V,o.length){for(i=0,a=o.length;i<a;i++)s.push(n.create(o[i]));return this.orderBy({compare:n.combine(s)},r)}return this},filter:function(e){var t,n=this.data,r=[];return e=W(e),!e||e.filters.length===0?this:(t=H.filterExpr(e,{noEval:!0}),r=n.filter(t),new H(r))},group:function(e,t,n){e=G(e||[]),t||=this.data;var r=new H(this.data),i,a=(e,n)=>(n||=new H(t).filter([{field:e.field,operator:`eq`,value:e.value,ignoreCase:!1}]),n);return e.length>0&&(i=e[0],r=n&&n.groupPaging?new H(t).groupAllData(i,t).select(function(t){var r,o=e.length>1?new H(t.items).group(e.slice(1),a(t,r).toArray(),n).toArray():t.items;return{field:t.field,value:t.value,hasSubgroups:e.length>1,items:o,aggregates:i.aggregates&&i.aggregates.length?a(t,r).aggregate(i.aggregates):{},uid:d.guid(),itemCount:o.length,subgroupCount:o.length}}):r.groupBy(i).select(function(t){var n;return{field:t.field,value:t.value,items:e.length>1?new H(t.items).group(e.slice(1),a(t,n).toArray()).toArray():t.items,hasSubgroups:e.length>1,aggregates:i.aggregates&&i.aggregates.length?a(t,n).aggregate(i.aggregates):{}}})),r},groupBy:function(e){var t=this;if(i(e)||!this.data.length)return new H([]);var n=e.field,r=e.skipItemSorting?this.data:this._sortForGrouping(n,e.dir||`asc`),a=d.accessor(n),o,s=a.get(r[0],n),c={field:n,value:s,items:[]},l,u,f,p=[c];for(u=0,f=r.length;u<f;u++)o=r[u],l=a.get(o,n),je(s,l)||(s=l,c={field:n,value:s,items:[]},p.push(c)),c.items.push(o);return p=t._sortGroups(p,e),new H(p)},groupAllData:function(e,t){if(i(e)||this.data&&!this.data.length)return new H([]);var n=e.field,r=e.skipItemSorting?t:new H(t).sort(n,e.dir||`asc`,ve).toArray(),a=d.accessor(n),o,s=a.get(r[0],n),c={field:n,value:s,items:[]},l,u,f,p=[c];for(u=0,f=r.length;u<f;u++)o=r[u],l=a.get(o,n),je(s,l)||(s=l,c={field:n,value:s,items:[]},p.push(c)),c.items.push(o);return p=this._sortGroups(p,e),new H(p)},_sortForGrouping:function(e,t){var n,r,i=this.data;if(!le){for(n=0,r=i.length;n<r;n++)i[n].__position=n;for(i=new H(i).sort(e,t,ve).toArray(),n=0,r=i.length;n<r;n++)delete i[n].__position;return i}return this.sort(e,t).toArray()},_sortGroups:function(e,t){var n=e;return t&&f(t.compare)&&(n=new H(n).order({compare:t.compare},t.dir||v).toArray()),n},aggregate:function(e){var t,n,r={},i={};if(e&&e.length)for(t=0,n=this.data.length;t<n;t++)Me(r,e,this.data[t],t,n,i);return r}};function je(e,t){return e&&e.getTime&&t&&t.getTime?e.getTime()===t.getTime():e===t}function Me(e,t,n,r,i,a){t||=[];var o,s,c,l=t.length;for(o=0;o<l;o++){s=t[o],c=s.aggregate;var u=s.field;e[u]=e[u]||{},a[u]=a[u]||{},a[u][c]=a[u][c]||{},e[u][c]=Ne[c.toLowerCase()](e[u][c],n,d.accessor(u),r,i,a[u][c])}}var Ne={sum:function(e,t,n){var r=n.get(t);return K(e)?K(r)&&(e+=r):e=r,e},count:function(e){return(e||0)+1},average:function(e,n,r,i,a,o){var s=r.get(n);return o.count===t&&(o.count=0),K(e)?K(s)&&(e+=s):e=s,K(s)&&o.count++,i==a-1&&K(e)&&(e/=o.count),e},max:function(e,t,n){var r=n.get(t);return!K(e)&&!q(e)&&(e=r),e<r&&(K(r)||q(r))&&(e=r),e},min:function(e,t,n){var r=n.get(t);return!K(e)&&!q(e)&&(e=r),e>r&&(K(r)||q(r))&&(e=r),e}};function K(e){return typeof e==`number`&&!isNaN(e)}function q(e){return e&&e.getTime}function J(e){var t,n=e.length,r=Array(n);for(t=0;t<n;t++)r[t]=e[t].toJSON();return r}H.normalizeGroup=G,H.normalizeSort=U,H.process=function(e,r,a){r||={};var o=r.group,s=Ae(G(o||[])),l=new H(e),u=ke(o||[]),d=U(r.sort||[]),f=s?d:u.concat(d),p,m,h=r.filterCallback,g=r.filter,_=r.skip,v=r.take;return f&&a&&(l=l.sort(f,t,t,a)),g&&(l=l.filter(g),h&&(l=h(l)),m=l.toArray().length),f&&(a||(l=l.sort(f)),o&&(e=l.toArray())),s?(l=l.group(o,e,r),_!==t&&v!==t&&!r.groupPaging&&(l=new H(Ke(l.toArray())).range(_,v),p=c(u,function(e){return n({},e,{skipItemSorting:!0})}),l=l.group(p,e,r))):(_!==t&&v!==t&&(m=l.data.length,_+v>m&&r.virtual&&(_-=_+v-m,_=_<0?0:_),l=l.range(_,v)),o&&(!i(o)||o.length!==0)&&(l=l.group(o,e,r))),{total:m,data:l.toArray()}};var Pe=h.extend({init:function(e){this.data=e.data},read:function(e){e.success(this.data)},update:function(e){e.success(e.data)},create:function(e){e.success(e.data)},destroy:function(e){e.success(e.data)}}),Fe=h.extend({init:function(e){var t=this,i;e=t.options=n({},t.options,e),l(ne,function(t,n){typeof e[n]===g&&(e[n]={url:e[n]})}),t.cache=e.cache?Y.create(e.cache):{find:u,add:u},i=e.parameterMap,e.submit&&(t.submit=e.submit),f(e.push)&&(t.push=e.push),t.push||=A,t.parameterMap=f(i)?i:function(e){var t={};return l(e,function(e,n){e in i&&(e=i[e],r(e)&&(n=e.value(n),e=e.key)),t[e]=n}),t}},options:{parameterMap:A},create:function(e){return s(this.setup(e,y))},read:function(n){var r=this,i,a,o=r.cache;n=r.setup(n,b),i=n.success||u,n.error,a=o.find(n.data),a===t?(n.success=function(e){o.add(n.data,e),i(e)},e.ajax(n)):i(a)},update:function(e){return s(this.setup(e,x))},destroy:function(e){return s(this.setup(e,S))},setup:function(e,t){e||={};var r=this,i,a=r.options[t],o=f(a.data)?a.data(e.data):a.data;return e=n(!0,{},a,e),i=n(!0,{},o,e.data),e.data=r.parameterMap(i,t),f(e.url)&&(e.url=e.url(i)),e}}),Ie=h.extend({init:function(e){let t=this;e=t.options=n({},t.options,e)},read:function(t){let r=this;t=r.options=n({},r.options,t),t=r.setup(t),r.options.requestStart&&r.options.requestStart(t),e.ajax(t)},setup:function(e){let t=this,n=e?.service||t.options.service,r=t.getData(e),i={url:typeof n==`string`?n:n.url,type:`POST`,contentType:`application/json`,data:JSON.stringify(r),success:function(e){t.options.success&&t.options.success(e)},error:function(e){let n={status:e.status,statusText:e.statusText,responseText:e.responseText};t.options.error&&t.options.error(n)}};return n?.headers&&(i.headers=n.headers),i},getData:function(t={}){let n=t?.service,r={formFields:t?.formFields,content:t?.content};return n?.data&&f(n?.data)?e.extend({},r,n.data()):n?.data&&Object.keys(n.data).length?e.extend({},r,n.data):r},success:function(e){let t=this;return t.options.success&&t.options.success(e),e},error:function(e){let t=this,n={status:e.status,statusText:e.statusText,responseText:e.responseText};t.options.error&&t.options.error(n)}}),Le=h.extend({init:function(e){let t=this;e=t.options=n({},t.options,e),t.messageTypes={ai:`assistant`,system:`system`,user:`user`,tool:`tool`}},read:function(t){let n=this;return t=n.setup(t),n.options.requestStart&&n.options.requestStart(t),e.ajax(t)},success:function(e,t){let n=this,r=(t?.service||n.options.service)?.outputGetter||n._getResponseData,i=t?.isRetry,a=t?.prompt,o={id:d.guid(),output:r(e),prompt:a,isRetry:i,response:e};n.options.success&&n.options.success(o)},error:function(e,t){let n=this,r=(t?.service||n.options.service)?.outputGetter||n._getResponseData,i=t?.isRetry,a=t?.prompt,o={status:e.status,statusText:e.statusText,responseText:e.responseText},s={id:d.guid(),output:r(o),prompt:a,isRetry:i,response:e};n.options.error&&n.options.error(s)},setup:function(e={}){let t=this,n=e?.service||t.options.service,r=t.getData(e),i={url:typeof n==`string`?n:n.url,type:`POST`,contentType:`application/json`,data:JSON.stringify(r),success:function(n){t.success.call(t,n,e)},error:function(n){t.error.call(t,n,e)}};return n?.headers&&(i.headers=n.headers),i},getData:function(t){let n=this,r=t?.service,i=t?.isRetry,a=t?.history||[],o=t?.prompt,s=[...a,{role:n.messageTypes.user,contents:[{$type:`text`,text:o}]}];return r?.data&&f(r?.data)?r.data(o,i,a):r?.data&&Object.keys(r.data).length?e.extend({},r.data,{messages:s}):s},_getResponseData:function(e){return e?.messages?.[0]?.contents?.[0]?.text||`An error occurred while processing the request.`}}),Y=h.extend({init:function(){this._store={}},add:function(e,n){e!==t&&(this._store[M(e)]=n)},find:function(e){return this._store[M(e)]},clear:function(){this._store={}},remove:function(e){delete this._store[M(e)]}});Y.create=function(e){return r(e)&&f(e.find)?e:e===!0?new Y:{inmemory:function(){return new Y}}[e]()};function Re(e,t,n,r,i){var a,o,s,c,l={},u;for(c=0,u=e.length;c<u;c++)for(o in a=e[c],t)s=i[o],s&&s!==o&&(l[s]||(l[s]=d.setter(s)),l[s](a,t[o](a)),delete a[o])}function ze(e,t,n,r,i){var a,o,s,c,l;for(c=0,l=e.length;c<l;c++)for(o in a=e[c],t)a[o]=n._parse(o,t[o](a)),s=i[o],s&&s!==o&&delete a[s]}function Be(e,t,n,r,i){var a,o,s,c;for(o=0,c=e.length;o<c;o++)a=e[o],s=r[a.field],s&&s!=a.field&&(a.field=s),a.value=n._parse(a.field,a.value),a.items&&(a.hasSubgroups?Be(a.items,t,n,r,i):ze(a.items,t,n,r,i))}function Ve(e,t,n,r,i,a){return function(o){return o=e(o),He(t,n,r,i,a)(o)}}function He(e,t,n,r,a){return function(o){return o&&!i(n)&&(F.call(o)!==`[object Array]`&&!(o instanceof I)&&(o=[o]),t(o,n,new e,r,a)),o||[]}}var Ue=h.extend({init:function(e){var t=this,n,i,a,o;for(n in e||={},e)i=e[n],t[n]=typeof i===g?j(i):i;o=e.modelBase||B,r(t.model)&&(t.model=a=o.define(t.model));var s=t.data.bind(t);if(t._dataAccessFunction=s,t.model){var c=t.groups.bind(t),u=t.serialize.bind(t),d={},f={},p={},m={},h=!1,_,v;a=t.model,a.fields&&(l(a.fields,function(e,t){var n;_=e,r(t)&&t.field?_=t.field:typeof t===g&&(_=t),r(t)&&t.from&&(n=t.from),h=h||n&&n!==e||_!==e,v=n||_,f[e]=v.indexOf(`.`)===-1?j(v):j(v,!0),p[e]=j(e),d[n||_]=e,m[e]=n||_}),!e.serialize&&h&&(t.serialize=Ve(u,a,Re,p,d,m))),t._dataAccessFunction=s,t._wrapDataAccessBase=He(a,ze,f,d,m),t.data=Ve(s,a,ze,f,d,m),t.groups=Ve(c,a,Be,f,d,m)}},errors:function(e){return e?e.errors:null},parse:A,data:A,total:function(e){return e.length},groups:A,aggregates:function(){return{}},serialize:function(e){return e}});function We(e,t){var n,r;if(t.items&&t.items.length)for(var i=0;i<t.items.length;i++)n=e.items[e.items.length-1],r=t.items[i],n&&r?n.hasSubgroups&&n.value==r.value?We(n,r):n.field&&n.value==r.value?(n.items.omitChangeEvent=!0,n.items.push.apply(n.items,r.items),n.items.omitChangeEvent=!1):(e.items.omitChangeEvent=!0,e.items.push.apply(e.items,[r]),e.items.omitChangeEvent=!1):r&&(e.items.omitChangeEvent=!0,e.items.push.apply(e.items,[r]),e.items.omitChangeEvent=!1)}function Ge(e,t,n,r){for(var i,a=0,o;t.length&&r;){i=t[a],o=i.items;var s=o.length;if(e&&e.field===i.field&&e.value===i.value?(e.hasSubgroups&&e.items.length?Ge(e.items[e.items.length-1],i.items,n,r):(o=o.slice(n,n+r),e.items=e.items.concat(o)),t.splice(a--,1)):i.hasSubgroups&&o.length?(Ge(i,o,n,r),i.items.length||t.splice(a--,1)):(o=o.slice(n,n+r),i.items=o,i.items.length||t.splice(a--,1)),o.length===0?n-=s:(n=0,r-=o.length),++a>=t.length)break}a<t.length&&t.splice(a,t.length-a)}function Ke(e,t){for(var n=[],r=(e||[]).length,i,a,o=f(t)?t:function(e,t){return e[t]},s=0;s<r;s++)if(i=o(e,s),i.hasSubgroups)n=n.concat(Ke(i.items));else{a=i.items;for(var c=0;c<a.length;c++)n.push(o(a,c))}return n}function X(e){var t,n=[],r,i,a;for(t=0,r=e.length;t<r;t++){var o=e.at(t);if(o.items)if(o.hasSubgroups)n=n.concat(X(o.items));else for(i=o.items,a=0;a<i.length;a++)n.push(i.at(a))}return n}function qe(e,t){var n,r,i;if(t)for(n=0,r=e.length;n<r;n++)i=e.at(n),i.items&&(i.hasSubgroups?qe(i.items,t):i.items=new L(i.items,t,i.items._events))}function Je(e,t){for(var n=0;n<e.length;n++)if(e[n].hasSubgroups){if(Je(e[n].items,t))return!0}else if(t(e[n].items,e[n]))return!0}function Ye(e,t,n,r){for(var i=0;i<e.length&&!(e[i].data===t||Xe(e[i].data,n,r));i++);}function Xe(e,t,n){for(var r=0,i=e.length;r<i;r++){if(e[r]&&e[r].hasSubgroups)return Xe(e[r].items,t,n);if(e[r]===t||e[r]===n)return e[r]=n,!0}}function Ze(e,n,r,i,a){for(var o=0,s=e.length;o<s;o++){var c=e[o];if(!(!c||c instanceof i)){if(c.hasSubgroups!==t&&!a)Ze(c.items,n,r,i,a);else for(var l=0;l<n.length;l++)if(n[l]===c){e[o]=n.at(l),Ye(r,n,c,e[o]);break}}}}function Qe(e,t){if(e){var n=e.length,r,i;for(i=0;i<n;i++)if(r=e[i],r.uid&&r.uid==t.uid)return e.splice(i,1),r}}function $e(e,t){return t?tt(e,function(e){return e.uid&&e.uid==t.uid||e[t.idField]===t.id&&t.id!==t._defaultId}):-1}function et(e,t){return t?tt(e,function(e){return e.uid==t.uid}):-1}function tt(e,t){var n,r;if(e){for(n=0,r=e.length;n<r;n++)if(t(e[n]))return n;return-1}}function nt(e,t){if(e&&!i(e)){var n=e[t],a=r(n)?n.from||n.field||t:e[t]||t;return f(a)?t:a}return t}function rt(e,t){var n,r,i={};for(var a in e)a!==`filters`&&(i[a]=e[a]);if(e.filters)for(i.filters=[],n=0,r=e.filters.length;n<r;n++)i.filters[n]=rt(e.filters[n],t);else i.field=nt(t.fields,i.field);return i}function Z(e,t){var n,r,i=[],o,s;for(n=0,r=e.length;n<r;n++){for(var c in o={},s=e[n],s)o[c]=s[c];o.field=nt(t.fields,o.field),o.aggregates&&a(o.aggregates)&&(o.aggregates=Z(o.aggregates,t)),i.push(o)}return i}function it(e,r,i){var o=function(e,n){let r=n.cells&&Object.keys(n.cells).length>0?n.cells:!0,a={},o,s;for(o=0,s=e.length;o<s;o++){let n=e[o];if(n&&n.uid!==t){let e=String(n[i]);a[e]=r}}return a};let s={},c,l,u,d,f;if(!a(r))return s;for(c=0,l=r.length;c<l;c++)u=r[c],u&&(d=new H(e).filter(u).toArray(),f=o(d,u),f&&(s=n(!0,s,f)));return s}var Q=m.extend({init:function(e){var r=this,i;if(e&&(i=e.data),e=r.options=n({},r.options,e),r._map={},r._prefetch={},r._data=[],r._pristineData=[],r._ranges=[],r._view=[],r._pristineTotal=0,r._destroyed=[],r._pageSize=e.pageSize,r._page=e.page||(e.pageSize?1:t),r._sort=U(e.sort),r._sortFields=be(e.sort),r._filter=W(e.filter),r._group=G(e.group),r._aggregate=e.aggregate,r._total=e.total,r._groupPaging=e.groupPaging,r._groupPaging&&(r._groupsState={}),r._shouldDetachObservableParents=!0,m.fn.init.call(r),r.transport=at.create(e,i,r),f(r.transport.push)&&r.transport.push({pushCreate:r._pushCreate.bind(r),pushUpdate:r._pushUpdate.bind(r),pushDestroy:r._pushDestroy.bind(r)}),e.offlineStorage!=null)if(typeof e.offlineStorage==`string`){var a=e.offlineStorage;r._storage={getItem:function(){return JSON.parse(localStorage.getItem(a))},setItem:function(e){localStorage.setItem(a,M(r.reader.serialize(e)))}}}else r._storage=e.offlineStorage;r.reader=new d.data.readers[e.schema.type||`json`](e.schema),r.reader.model,r._detachObservableParents(),r._data=r._observe(r._data),r._online=!0,r.bind([`push`,T,C,E,ee,O,D],e)},options:{data:null,schema:{modelBase:B},offlineStorage:null,serverSorting:!1,serverPaging:!1,serverFiltering:!1,serverGrouping:!1,serverAggregates:!1,batch:!1,inPlaceSort:!1},clone:function(){return this},online:function(n){return n===t?this._online:this._online!=n&&(this._online=n,n)?this.sync():e.Deferred().resolve().promise()},offlineData:function(e){return this.options.offlineStorage==null?null:e===t?this._storage.getItem()||[]:this._storage.setItem(e)},_isGrouped:function(){return(this.group()||[]).length},_isServerGrouped:function(){var e=this.group()||[];return this.options.serverGrouping&&e.length},_isServerGroupPaged:function(){return this._isServerGrouped()&&this._groupPaging},_isGroupPaged:function(){var e=this._group||[];return this._groupPaging&&e.length},_pushCreate:function(e){this._push(e,`pushCreate`)},_pushUpdate:function(e){this._push(e,`pushUpdate`)},_pushDestroy:function(e){this._push(e,`pushDestroy`)},_push:function(e,t){var n=this._readData(e);n||=e,this[t](n)},_flatData:function(e,t){if(e){if(this._isServerGrouped())return X(e);if(!t)for(var n=0;n<e.length;n++)e.at(n)}return e},parent:u,get:function(e){var t,n,r=this._flatData(this._data,this.options.useRanges);for(t=0,n=r.length;t<n;t++)if(r[t].id==e)return r[t]},getByUid:function(e){return this._getByUid(e,this._data)},_getByUid:function(e,t){var n,r,i=this._flatData(t,this.options.useRanges);if(i){for(n=0,r=i.length;n<r;n++)if(i[n].uid==e)return i[n]}},indexOf:function(e){return et(this._data,e)},at:function(e){return this._data.at(e)},data:function(e){var n=this;if(e!==t)n._detachObservableParents(),n._data=this._observe(e),n._pristineData=e.slice(0),n._storeData(),n._ranges=[],n.trigger(`reset`),n._addRange(n._data),n._total=n._data.length,n._pristineTotal=n._total,n._process(n._data);else{if(n._data)for(var r=0;r<n._data.length;r++)n._data.at(r);return n._data}},view:function(e){if(e===t)return this._view;this._view=this._observeView(e)},_observeView:function(e){var t=this;Ze(e,t._data,t._ranges,t.reader.model||z,t._isServerGrouped());var n=new L(e,t.reader.model);return n.parent=function(){return t.parent()},n},flatView:function(){return(this.group()||[]).length?X(this._view):this._view},add:function(e){return this.insert(this._data.length,e)},_createNewModel:function(e){return this.reader.model?new this.reader.model(e):e instanceof z?e:new z(e)},insert:function(e,t){return t||(t=e,e=0),t instanceof B||(t=this._createNewModel(t)),this._isServerGrouped()?this._data.splice(e,0,this._wrapInEmptyGroup(t)):this._data.splice(e,0,t),this._insertModelInRange(e,t),t},pushInsert:function(t,n){var r=this._getCurrentRangeSpan();n||(n=t,t=0),a(n)||(n=[n]);var i=[],o=this.options.autoSync;this.options.autoSync=!1;try{for(var s=0;s<n.length;s++){var c=n[s],l=this.insert(t,c);i.push(l);var u=l.toJSON();this._isServerGrouped()&&(u=this._wrapInEmptyGroup(u)),this._pristineData.push(u),r&&r.length&&e(r).last()[0].pristineData.push(u),t++}}finally{this.options.autoSync=o}i.length&&this.trigger(`push`,{type:`create`,items:i})},pushCreate:function(e){this.pushInsert(this._data.length,e)},pushUpdate:function(e){a(e)||(e=[e]);for(var t=[],n=0;n<e.length;n++){var r=e[n],i=this._createNewModel(r),o=this.get(i.id);o?(t.push(o),o.accept(r),o.trigger(C),this._updatePristineForModel(o,r)):this.pushCreate(r)}t.length&&this.trigger(`push`,{type:`update`,items:t})},pushDestroy:function(e){var t=this._removeItems(e);t.length&&this.trigger(`push`,{type:`destroy`,items:t})},_removeItems:function(e,t){a(e)||(e=[e]);var n=t===void 0?!0:t,r=[],i=this.options.autoSync;this.options.autoSync=!1;try{for(var o=0;o<e.length;o++){var s=e[o],c=this._createNewModel(s),l=!1,u=o;this._eachItem(this._data,function(t){u===e.length-1?t.omitChangeEvent=!1:(t.omitChangeEvent=!0,t.omitCache=t.omitCache||[]);for(var n=0;n<t.length;n++){var i=t.at(n);if(i.id===c.id){t.omitChangeEvent&&t.omitCache.push(i),r.push(i),t.splice(n,1),l=!0;break}}}),l&&n&&(this._removePristineForModel(c),this._destroyed.pop())}}finally{this.options.autoSync=i}return r},pushMove:function(e,t){var n=this._moveItems(e,t);n.length&&this.trigger(`push`,{type:`update`,items:n})},_moveItems:function(e,t){a(t)||(t=[t]);var n=[],r=this.options.autoSync;this.options.autoSync=!1;try{for(var i=0;i<t.length;i++){var o=t[i];this._eachItem(this._data,function(t){for(var r=0;r<t.length;r++){var i=t.at(r);if(i.uid===o.uid){n.push(i),t.splice(e>=r?--e:e,0,t.splice(r,1)[0]),e++;break}}})}}finally{this.options.autoSync=r}return n},remove:function(e){var t,n=this,r=n._isServerGrouped();return r&&e.uid&&(!e.isNew||!e.isNew())&&n._pushInDestroyed(e),this._eachItem(n._data,function(n){if(t=Qe(n,e),t&&r)return!0}),this._removeModelFromRanges(e),e},destroyed:function(){return this._destroyed},created:function(){var e,t,n=[],r=this._flatData(this._data,this.options.useRanges);for(e=0,t=r.length;e<t;e++)r[e].isNew&&r[e].isNew()&&!r[e].notFetched&&n.push(r[e]);return n},updated:function(){var e,t,n=[],r=this._flatData(this._data,this.options.useRanges);for(e=0,t=r.length;e<t;e++)r[e].isNew&&!r[e].isNew()&&r[e].dirty&&n.push(r[e]);return n},sync:function(){var t=this,n=[],r=[],i;t._destroyed=t._destroyed.filter(e=>!e.hasOwnProperty(`_isMoved`)),i=t._destroyed;var a=e.Deferred().resolve().promise();if(t.online()){if(!t.reader.model)return a;n=t.created(),r=t.updated();var o=[];t.options.batch&&t.transport.submit?o=t._sendSubmit(n,r,i):(o.push.apply(o,t._send(`create`,n)),o.push.apply(o,t._send(`update`,r)),o.push.apply(o,t._send(`destroy`,i))),a=e.when.apply(null,o).then(function(){var e,n,r=[];for(e=0,n=arguments.length;e<n;e++)arguments[e]&&(t._accept(arguments[e]),r.push(...arguments[e].models));t._storeData(!0),t._syncEnd(),t._change({action:`sync`,changedItems:r}),t.trigger(ee),t._isServerGroupPaged()&&t.read(),t.data().map(function(e){return e.hasOwnProperty(`_isMoved`)&&delete e._isMoved,e})})}else t._storeData(!0),t._syncEnd(),t._change({action:`sync`});return a},_syncEnd:u,cancelChanges:function(e){var t=this;e instanceof d.data.Model?t._cancelModel(e):(t._destroyed=[],t._detachObservableParents(),t._data=t._observe(t._pristineData),t.options.serverPaging&&(t._total=t._pristineTotal),t._ranges=[],t._addRange(t._data,0),t._changesCanceled(),t._change(),t._markOfflineUpdatesAsDirty(),t._isServerGrouped()&&t.read())},_changesCanceled:u,_markOfflineUpdatesAsDirty:function(){var e=this;e.options.offlineStorage!=null&&e._eachItem(e._data,function(e){for(var t=0;t<e.length;t++){var n=e.at(t);(n.__state__==`update`||n.__state__==`create`)&&(n.dirty=!0)}})},hasChanges:function(){var e,t,n=this._flatData(this._data,this.options.useRanges);if(this._destroyed.length)return!0;for(e=0,t=n.length;e<t;e++)if(n[e].isNew&&n[e].isNew()||n[e].dirty)return!0;return!1},_accept:function(t){var n=this,r=t.models,o=t.response,s=0,c=n._isServerGrouped(),l=n._pristineData,u=t.type,d;if(n.trigger(O,{response:o,type:u}),o&&!i(o)){if(o=n.reader.parse(o),n._handleCustomErrors(o))return;o=n.reader.data(o),a(o)||(o=[o])}else o=e.map(r,function(e){return e.toJSON()});for(u===`destroy`&&(n._destroyed=[]),s=0,d=r.length;s<d;s++)u===`destroy`?n._removePristineForModel(r[s]):(r[s].accept(o[s]),u===`create`?l.push(c?n._wrapInEmptyGroup(r[s].toJSON()):o[s]):u===`update`&&n._updatePristineForModel(r[s],o[s]))},_updatePristineForModel:function(e,t){this._executeOnPristineForModel(e,function(e,n){d.deepExtend(n[e],t)})},_executeOnPristineForModel:function(e,t){this._eachPristineItem(function(n){var r=$e(n,e);if(r>-1)return t(r,n),!0})},_removePristineForModel:function(e){this._executeOnPristineForModel(e,function(e,t){t.splice(e,1)})},_readData:function(e){return(this._isServerGrouped()?this.reader.groups:this.reader.data).call(this.reader,e)},_eachPristineItem:function(e){var t=this,n=t.options,r=t._getCurrentRangeSpan();t._eachItem(t._pristineData,e),n.serverPaging&&n.useRanges&&l(r,function(n,r){t._eachItem(r.pristineData,e)})},_eachItem:function(e,t){e&&e.length&&(this._isServerGrouped()?Je(e,t):t(e))},_pristineForModel:function(e){var t,n;return this._eachPristineItem(function(r){if(n=$e(r,e),n>-1)return t=r[n],!0}),t},_cancelModel:function(e){var t=this,n=this._pristineForModel(e);this._eachItem(this._data,function(r){var i=et(r,e);i>=0&&(n&&(!e.isNew()||n.__state__)?(r[i].accept(n),n.__state__==`update`&&(r[i].dirty=!0)):(t._modelCanceled(e),r.splice(i,1),t._removeModelFromRanges(e)))})},_modelCanceled:u,_submit:function(t,r){var i=this;i.trigger(E,{type:`submit`}),i.trigger(D),i.transport.submit(n({success:function(n,r){var i=e.grep(t,function(e){return e.type==r})[0];i&&i.resolve({response:n,models:i.models,type:r})},error:function(e,n,r){for(var a=0;a<t.length;a++)t[a].reject(e);i.error(e,n,r)}},r))},_sendSubmit:function(t,n,r){var i=this,a=[];return i.options.batch&&(t.length&&a.push(e.Deferred(function(e){e.type=`create`,e.models=t})),n.length&&a.push(e.Deferred(function(e){e.type=`update`,e.models=n})),r.length&&a.push(e.Deferred(function(e){e.type=`destroy`,e.models=r})),i._submit(a,{data:{created:i.reader.serialize(J(t)),updated:i.reader.serialize(J(n)),destroyed:i.reader.serialize(J(r))}})),a},_promise:function(t,r,i){var a=this;return e.Deferred(function(e){a.trigger(E,{type:i}),a.trigger(D),a.transport[i].call(a.transport,n({success:function(t){e.resolve({response:t,models:r,type:i})},error:function(t,n,r){e.reject(t),a.error(t,n,r)}},t))}).promise()},_send:function(e,t){var n=this,r,i,a=[],o=n.reader.serialize(J(t));if(n.options.batch)t.length&&a.push(n._promise({data:{models:o}},t,e));else for(r=0,i=t.length;r<i;r++)a.push(n._promise({data:o[r]},[t[r]],e));return a},read:function(t){var n=this,r=n._params(t),i=e.Deferred();return n._queueRequest(r,function(){var e=n.trigger(E,{type:`read`});e?(n._dequeueRequest(),i.resolve(e)):(n.trigger(D),n._ranges=[],n.trigger(`reset`),n.online()?n.transport.read({data:r,success:function(e){n._ranges=[],n.success(e,r),i.resolve()},error:function(){var e=P.call(arguments);n.error.apply(n,e),i.reject.apply(i,e)}}):n.options.offlineStorage!=null&&(n.success(n.offlineData(),r),i.resolve()))}),i.promise()},_readAggregates:function(e){return this.reader.aggregates(e)},success:function(e){var t=this,n=t.options,r,i;if(t.trigger(O,{response:e,type:`read`}),t.online()){if(e=t.reader.parse(e),t._handleCustomErrors(e)){t._dequeueRequest();return}t._total=t.reader.total(e),t._isServerGroupPaged()&&(t._serverGroupsTotal=t._total),t._pageSize>t._total&&(t._pageSize=t._total,t.options.pageSize&&t.options.pageSize>t._pageSize&&(t._pageSize=t.options.pageSize)),t._aggregate&&n.serverAggregates&&(t._aggregateResult=t._readAggregates(e)),e=t._readData(e),t._destroyed=[]}else{e=t._readData(e),r=[];var a={},o=t.reader.model,s=o?o.idField:`id`,c;for(c=0;c<this._destroyed.length;c++){var l=this._destroyed[c][s];a[l]=l}for(c=0;c<e.length;c++){var u=e[c];u.__state__==`destroy`?a[u[s]]||this._pushInDestroyed(this._createNewModel(u)):r.push(u)}e=r,t._total=e.length}if(t._pristineTotal=t._total,i=t._skip&&t._data.length&&t._skip<t._data.length,t.options.endless){i&&t._pristineData.splice(t._skip,t._pristineData.length),r=e.slice(0);for(var f=0;f<r.length;f++)t._pristineData.push(r[f])}else d.isBlank(e)&&(e=[]),t._pristineData=e.slice(0);if(t._detachObservableParents(),t.options.endless){t._data.unbind(C,t._changeHandler),t._isServerGrouped()&&t._data[t._data.length-1].value===e[0].value&&(We(t._data[t._data.length-1],e[0]),e.shift()),e=t._observe(e),i&&t._data.splice(t._skip,t._data.length);for(var p=0;p<e.length;p++)t._data.push(e[p]);t._data.bind(C,t._changeHandler)}else t._data=t._observe(e);t._markOfflineUpdatesAsDirty(),t._storeData(),t._addRange(t._data),t._process(t._data),t._dequeueRequest()},_detachObservableParents:function(){if(this._data&&this._shouldDetachObservableParents)for(var e=0;e<this._data.length;e++)this._data[e].parent&&(this._data[e].parent=u)},_storeData:function(e){var t=this._isServerGrouped(),n=this.reader.model;function r(e){for(var i=[],a=0;a<e.length;a++){var o=e.at(a),s=o.toJSON();t&&o.items?s.items=r(o.items):(s.uid=o.uid,n&&(o.isNew()?s.__state__=`create`:o.dirty&&(s.__state__=`update`))),i.push(s)}return i}if(this.options.offlineStorage!=null){for(var i=r(this._data),a=[],o=0;o<this._destroyed.length;o++){var s=this._destroyed[o].toJSON();s.__state__=`destroy`,a.push(s)}this.offlineData(i.concat(a)),e&&(this._pristineData=this.reader.reader?this.reader.reader._wrapDataAccessBase(i):this.reader._wrapDataAccessBase(i))}},_addRange:function(e,t){var n=this,r=t===void 0?n._skip||0:t,i,a={data:e,pristineData:e.toJSON(),timestamp:n._timeStamp()};this._isGroupPaged()?(i=r+e.length,a.outerStart=r,a.outerEnd=i):i=r+n._flatData(e,!0).length,a.start=r,a.end=i,n._ranges.push(a),n._sortRanges(),n._isGroupPaged()&&(n._groupsFlat||=[],n._appendToGroupsFlat(a.data),n._updateOuterRangesLength())},_appendToGroupsFlat:function(e){for(var t=e.length,n=0;n<t;n++)this._groupsFlat.push(e[n])},_getGroupByUid:function(e){for(var t=this._groupsFlat.length,n,r=0;r<t;r++)if(n=this._groupsFlat[r],n.uid===e)return n},_sortRanges:function(){this._ranges.sort(function(e,t){return e.start-t.start})},error:function(e,t,n){this._dequeueRequest(),this.trigger(O,{}),this.trigger(T,{xhr:e,status:t,errorThrown:n})},_params:function(e){var t=this,r=n({take:t.take(),skip:t.skip(),page:t.page(),pageSize:t.pageSize(),sort:t._sort,filter:t._filter,group:t._group,aggregate:t._aggregate,groupPaging:!!t._groupPaging,isExcelExportRequest:t.options.isExcelExportRequest},e);return t.options.serverPaging||(delete r.take,delete r.skip,delete r.page,delete r.pageSize),t.options.serverGrouping?t.reader.model&&r.group&&(r.group=Z(r.group,t.reader.model)):delete r.group,t.options.serverFiltering?t.reader.model&&r.filter&&(r.filter=rt(r.filter,t.reader.model)):delete r.filter,t.options.serverSorting?t.reader.model&&r.sort&&(r.sort=Z(r.sort,t.reader.model)):delete r.sort,t.options.serverAggregates?t.reader.model&&r.aggregate&&(r.aggregate=Z(r.aggregate,t.reader.model)):delete r.aggregate,(!t.options.groupPaging||!(t.options.serverPaging&&t.options.serverGrouping))&&delete r.groupPaging,t.options.isExcelExportRequest||delete r.isExcelExportRequest,r},_queueRequest:function(e,n){var r=this;r._requestInProgress?r._pending={callback:n.bind(r),options:e}:(r._requestInProgress=!0,r._pending=t,n())},_dequeueRequest:function(){var e=this;e._requestInProgress=!1,e._pending&&e._queueRequest(e._pending.options,e._pending.callback)},_handleCustomErrors:function(e){if(this.reader.errors){var t=this.reader.errors(e);if(t)return this.trigger(T,{xhr:null,status:`customerror`,errorThrown:`custom error`,errors:t}),!0}return!1},_shouldWrap:function(e){var t=this.reader.model;return t&&e.length?!(e[0]instanceof t):!1},_observe:function(e){var t=this,n=t.reader.model;return t._shouldDetachObservableParents=!0,e instanceof I?(t._shouldDetachObservableParents=!1,t._shouldWrap(e)&&(e.type=t.reader.model,e.wrapAll(e,e))):(e=new(t.pageSize()&&!t.options.serverPaging?L:I)(e,t.reader.model),e.parent=function(){return t.parent()}),t._isServerGrouped()&&qe(e,n),t._changeHandler&&t._data&&t._data instanceof I&&!(t.options.useRanges&&t.options.serverPaging)?t._data.unbind(C,t._changeHandler):t._changeHandler=t._change.bind(t),e.bind(C,t._changeHandler)},_updateTotalForAction:function(e,t){var n=this,r=parseInt(n._total,10);K(n._total)||(r=parseInt(n._pristineTotal,10)),e===`add`?r+=t.length:e===`remove`?r-=t.length:e!==`itemchange`&&e!==`sync`&&!n.options.serverPaging?r=n._pristineTotal:e===`sync`&&(r=n._pristineTotal=parseInt(n._total,10)),n._total=r},_operationsForUpdatedFields:function(){let e=this,t=e._updatedFields||[],n={},r=!1,i;return n.sort=e._sort,n.filter=e._filter,n.group=e._group,n.aggregate=e._aggregate,i=M(n),r=t.some(e=>i.indexOf(`"field":"${e}"`)>-1),!r},_pushInDestroyed:function(e){this._destroyed.find(function(t){return t.uid===e.uid})||this._destroyed.push(e)},_change:function(e){let t=this,n,r,i,a=e?e.action:``;if(a===`remove`)for(n=0,i=e.items.length;n<i;n++)(!e.items[n].isNew||!e.items[n].isNew())&&t._pushInDestroyed(e.items[n]);if(e&&(r=e.items||[],e.partialUpdate=t._operationsForUpdatedFields()&&!t._preventPartialUpdate,e.action===`itemchange`&&r.some(e=>e.dirtyFields))){let n=e.items[0],r=Object.keys(n.dirtyFields),i=r;for(let e of r)if(n[e]instanceof Object){let t=d.stringify(n[e]);if(t){let n=JSON.parse(t),r=Object.keys(n).map(t=>e+`.`+t);i.push(...r)}}t._updatedFields=i}if(t.options.autoSync&&(a===`add`||a===`remove`||a===`itemchange`)){a===`add`&&(t._preventPartialUpdate=!0);var o=function(n){n.action===`sync`&&(t._preventPartialUpdate=!1,t.unbind(`change`,o),t._updateTotalForAction(a,e.items))};t.first(`change`,o),t.sync()}else t._updateTotalForAction(a,e?e.items:[]),t._process(t._data,e)},_calculateAggregates:function(e,t){t||={};var n=new H(e),r=t.aggregate,i=t.filter;return i&&(n=n.filter(i)),n.aggregate(r)},_process:function(e,n){var r=this,i={},a;if(r.options.serverPaging!==!0&&(i.skip=r._skip,i.take=r._take||r._pageSize,i.skip===t&&r._page!==t&&r._pageSize!==t&&(i.skip=(r._page-1)*r._pageSize),r.options.useRanges&&(i.skip=r.currentRangeStart())),r.options.serverSorting!==!0&&(i.sort=r._sort),r.options.serverFiltering!==!0&&(i.filter=r._filter),r.options.serverGrouping!==!0&&(i.group=r._group),r.options.serverAggregates!==!0&&(i.aggregate=r._aggregate),r.options.serverGrouping&&r._clearEmptyGroups(e),i.groupPaging=r._groupPaging,a=r._isGroupPaged()&&n&&(n.action===`page`||n.action===`expandGroup`||n.action===`collapseGroup`)?r._queryProcess(e,{aggregate:r._aggregate}):r._queryProcess(e,i),r._filter&&n&&n.action===`add`){var o=n.items[0],s=a.data;r._isGrouped()&&!this._isServerGrouped()&&(s=X(s)),!s.find(function(e){return e.uid===o.uid})&&(o.index||o.id===null)&&(a.data.splice(o.index,0,r._isGrouped()?r._wrapInEmptyGroup(o):o),a.total++)}r.options.serverAggregates!==!0&&(r._aggregateResult=r._calculateAggregates(a.dataToAggregate||e,i)),r._setView(a,i,n),r._setFilterTotal(a.total,!1),n||={},n.items=n.items||r._view,r.trigger(C,n)},_setView:function(e,t,n){var r=this;if(r._isGroupPaged()&&!r._isServerGrouped())if(n&&(n.action===`page`||n.action===`expandGroup`||n.action===`collapseGroup`))r.view(e.data),r._updateOuterRangesLength();else{r._ranges=[];var i=new H(e.data);r._addRange(r._observe(e.data)),t.skip+t.take>e.data.length&&(t.skip=Math.max(0,e.data.length-t.take)),r.view(i.range(t.skip,t.take).toArray())}else r.view(e.data)},_clearEmptyGroups:function(e){for(var t=e.length-1;t>=0;t--){var n=e[t];n.hasSubgroups&&this._clearEmptyGroups(n.items),n.items&&!n.items.length&&!n.itemCount&&oe.apply(n.parent(),[t,1])}},_queryProcess:function(e,t){return this.options.inPlaceSort?H.process(e,t,this.options.inPlaceSort):H.process(e,t)},_mergeState:function(n){var r=this;return n!==t&&(r._pageSize=n.pageSize,r._page=n.page,r._sort=n.sort,r._filter=n.filter,r._group=n.group,r._aggregate=n.aggregate,r._skip=r._currentRangeStart=n.skip,r._take=n.take,r._skip===t&&(r._skip=r._currentRangeStart=r.skip(),n.skip=r.skip()),r._take===t&&r._pageSize!==t&&(r._take=r._pageSize,n.take=r._take),r.options.virtual&&(n.virtual=r.options.virtual),n.sort&&(r._sort=n.sort=U(n.sort),r._sortFields=be(n.sort)),n.filter&&(r._filter=n.filter=r.options.accentFoldingFiltering&&!e.isEmptyObject(n.filter)?e.extend({},W(n.filter),{accentFoldingFiltering:r.options.accentFoldingFiltering}):W(n.filter)),n.group&&(r._group=n.group=G(n.group)),n.aggregate&&(r._aggregate=n.aggregate=Oe(n.aggregate))),n},query:function(n){var r;if(this.options.serverSorting||this.options.serverPaging||this.options.serverFiltering||this.options.serverGrouping||this.options.serverAggregates||(this._data===t||this._data.length===0)&&!this._destroyed.length){if(this.options.endless){var i=n.pageSize-this.pageSize();i>0?(i=this.pageSize(),n.page=n.pageSize/i,n.pageSize=i):(n.page=1,this.options.endless=!1)}return this.read(this._mergeState(n))}var a=this.trigger(E,{type:`read`});return a||(this.trigger(D),n&&(n.groupPaging=this._groupPaging),r=this._queryProcess(this._data,this._mergeState(n)),this._setFilterTotal(r.total,!0),this._aggregateResult=this._calculateAggregates(r.dataToAggregate||this._data,n),this._setView(r,n),this.trigger(O,{type:`read`}),this.trigger(C,{items:r.data,action:n?n.action:``})),e.Deferred().resolve(a).promise()},_hasExpandedSubGroups:function(e){var t=!1,n=e.items?e.items.length:0;if(!e.hasSubgroups)return!1;for(var r=0;r<n;r++)if(this._groupsState[e.items[r].uid]){t=!0;break}return t},_findGroupedRange:function(e,t,n,r,i){for(var a=this,o=e.length,s,c,l,u,d,f=0;f<o&&(s=e[f],!(n.taken>=n.take));f++)if(a._getGroupByUid(s.uid)||a._groupsFlat.push(s),a._groupsState[s.uid]){if(a._isServerGroupPaged()){if(a._fetchGroupItems(s,n,r,i)){a._fetchingGroupItems=!0;return}if(u=(s.subgroupCount||s.itemCount)+1,d=n.skip-n.skipped,!a._hasExpandedSubGroups(s)&&d>u){n.skipped+=u;continue}}if(n.includeParents&&n.skipped<n.skip?(n.skipped++,s.excludeHeader=!0):n.includeParents&&(n.taken++,s.excludeHeader=!1),s.hasSubgroups&&s.items&&s.items.length)s.currentItems=[],r||=[],r.push(s),a._findGroupedRange(s.items,s.currentItems,n,r,i),r.pop(),s.currentItems.length||n.taken>0?t.push(s):s.excludeHeader=!1;else{c=[],l=s.items.length;for(var p=0;p<l;p++){if(n.skipped<n.skip){n.skipped++;continue}if(n.taken>=n.take)break;c.push(s.items[p]),n.taken++}c.length||n.taken>0?(s.currentItems=c,t.push(s)):s.excludeHeader=!1}}else{if(n.skipped<n.skip){n.skipped++;continue}t.push(s),n.taken++}},_expandedSubGroupItemsCount:function(e,t,n){var r=this,i=0,a,o=typeof t==`number`,s=o?t:e.subgroupCount,c;if(!e.hasSubgroups)return i;for(var l=0;l<s&&(a=e.items[l],a);l++)if(a.hasSubgroups&&r._groupsState[e.uid]?(c=r._expandedSubGroupItemsCount(a,s,!0),i+=c,o&&(s-=c)):!a.hasSubgroups&&r._groupsState[a.uid]&&(c=a.items?a.items.length:0,i+=c,o&&(s-=c)),n&&(i+=1,o&&--s),o&&i>s)return i;return i},_fetchGroupItems:function(e,t,n,r){let i=this,a,o,s,c=e.hasSubgroups?e.subgroupCount:e.itemCount,l=t.take,u=t.skipped,d=i.take(),f;if(t.includeParents&&(u<t.skip?u+=1:--l),!e.items||e.items&&!e.items.length)return i.getGroupItems(e,t,n,r,0),!0;{if(f=this._expandedSubGroupItemsCount(e,t.skip-u),a=Math.max(t.skip-(u+f),0),a>=c)return!1;let p=Math.min(a+l,c-1);if(o=e.items[a],s=e.items[p],o.notFetched)return i.getGroupItems(e,t,n,r,a,N.round((a+d)/d)),!0;if(s.notFetched)return i.getGroupItems(e,t,n,r,N.max(N.floor((a+d)/d),0)*d,N.round((a+d)/d)),!0;if(!o.notFetched&&!s.notFetched&&Ee(e.items,a,p))return i.getGroupItems(e,t,n,r,a,p),!0}},getGroupItems:function(e,t,n,r,i,a){var o=this,s,c,l,u;e.items||=[],s=o.take(),c=this._composeItemsFilter(e,n),l={page:a||1,pageSize:s,skip:i,take:s,filter:c,aggregate:o._aggregate,sort:o._sort},u=o.findSubgroups(e),u&&u.length&&(l.group=u),l.groupPaging=!0,o._queueWithTimeout(l,function(){o.trigger(E,{type:`read`})?o._dequeueRequest():o.transport.read({data:l,success:o._groupItemsSuccessHandler(e,t.skip,o.take(),r,i),error:function(){var e=P.call(arguments);o.error.apply(o,e)}})},100)},_queueWithTimeout:function(e,t,n){let r=this;clearTimeout(r._timeout),r._timeout=setTimeout(function(){r._queueRequest(e,t)},n)},_groupItemsSuccessHandler:function(e,t,n,r,i){var a=this,o=a._timeStamp();r=f(r)?r:u;var s=a.options.schema&&a.options.schema.total?a.options.schema.total:`Total`;return function(c){var l,u=B.define(a.options.schema.model),d;a._dequeueRequest(),a.trigger(O,{response:c,type:`read`}),d=f(s)?s(c):c[s],c=a.reader.parse(c),e.hasSubgroups?(l=a.reader.groups(c),e.subgroupCount=d):(l=a.reader.data(c),l=l.map(function(e){return new u(e)})),e.items.omitChangeEvent=!0;for(var p=0;p<d;p++)p>=i&&p<i+n?e.items.splice(p,1,l[p-i]):e.items[p]||e.items.splice(p,0,{notFetched:!0});e.items.omitChangeEvent=!1,a._updateRangePristineData(e),a._fetchingGroupItems=!1,e.countAdded||=(a._serverGroupsTotal+=d,!0),a.range(t,n,r,`expandGroup`),(o>=a._currentRequestTimeStamp||!a._skipRequestsInProgress)&&a.trigger(C,{})}},findSubgroups:function(e){var t=this._group.map(function(e){return e.field}).indexOf(e.field);return this._group.slice(t+1,this._group.length)},_composeItemsFilter:function(e,t){var r={logic:`and`,filters:[]};if(this.filter()&&r.filters.push(this.filter()),r=n(!0,{},r),r.filters.push({field:e.field,operator:`eq`,value:e.value}),t)for(var i=0;i<t.length;i++)r.filters.push({field:t[i].field,operator:`eq`,value:t[i].value});return r},_updateRangePristineData:function(e){for(var t=this,n=t._ranges,r=n.length,i,a,o,s,c,l,u=0;u<r;u++){o=n[u],s=o.data.length,c=[],i=null;for(var d=0;d<s&&(a=o.data[d],c.push(d),!(a.uid===e.uid||a.hasSubgroups&&a.items.length&&t._containsSubGroup(a,e,c)));d++)c.pop();if(c.length){for(i=n[u].pristineData;c.length>1;)l=c.splice(0,1)[0],i=i[l].items;i[c[0]]=t._cloneGroup(e);break}}},_containsSubGroup:function(e,t,n){var r=this,i=e.items.length,a;if(e.hasSubgroups&&i)for(var o=0;o<i;o++){if(a=e.items[o],n.push(o),a.uid===t.uid||a.hasSubgroups&&a.items.length&&r._containsSubGroup(a,t,n))return!0;n.pop()}},_cloneGroup:function(e){var t=this;return e=typeof e.toJSON==`function`?e.toJSON():e,e.items&&e.items.length&&(e.items=e.items.map(function(e){return t._cloneGroup(e)})),e},_setFilterTotal:function(e,n){var r=this;r.options.serverFiltering||(e===t?n&&(r._total=r._data.length):r._total=e)},fetch:function(e){var t=this;return this._query().done(function(n){n!==!0&&f(e)&&e.call(t)})},_query:function(e){var t=this;return t.query(n({},{page:t.page(),pageSize:t.pageSize(),sort:t.sort(),filter:t.filter(),group:t.group(),aggregate:t.aggregate()},e))},next:function(e){var t=this,n=t.page(),r=t.total();if(e||={},!(!n||r&&n+1>t.totalPages()))return t._skip=t._currentRangeStart=n*t.take(),n+=1,e.page=n,t._query(e),n},prev:function(e){var t=this,n=t.page();if(e||={},!(!n||n===1))return t._skip=t._currentRangeStart=t._skip-t.take(),--n,e.page=n,t._query(e),n},page:function(e){var n=this,r;if(e!==t){e=N.max(N.min(N.max(e,1),n.totalPages()),1);var i=n.take();if(n._isGroupPaged()){--e,n.range(e*i,i,null,`page`);return}n._query(n._pageableQueryOptions({page:e}));return}return r=n.skip(),r===t?t:N.round((r||0)/(n.take()||1))+1},pageSize:function(e){var n=this;if(e!==t){n._query(n._pageableQueryOptions({pageSize:e,page:1}));return}return n.take()},sort:function(e){var n=this;if(e!==t){n.trigger(`sort`),n._query({sort:e});return}return n._sort},filter:function(e){var n=this;if(e===t)return n._filter;n.trigger(`reset`),n._query({filter:e,page:1})},group:function(e){var n=this,r={group:e};if(n._groupPaging&&(e!==t&&(!e||!e.length)&&(n._ranges=[]),r.page=1),e!==t){n._query(r);return}return n._group},parseHighlightDescriptors:function(e,t){let n=this._data?this._flatData(this._data):[];return!e||!e.length||!n.length?[]:it(n,e,t||`id`)},getGroupsFlat:function(e){var t,n=[],r;for(t=0,r=e.length;t<r;t++){var i=e[t];i.hasSubgroups&&(n=n.concat(this.getGroupsFlat(i.items))),n.push(i)}return n},total:function(){return parseInt(this._total||0,10)},groupsTotal:function(e){var t=this;return t._group.length?t._isServerGrouped()?(t._serverGroupsTotal||=t.total(),t._serverGroupsTotal):t._calculateGroupsTotal(t._ranges.length?t._ranges[0].data:[],e):t.total()},_calculateGroupsTotal:function(e,t,n,r){var i=this;n||=`items`;var a,o;if(i._group.length&&e){a=0,o=e.length;for(var s=0;s<o;s++)a+=i.groupCount(e[s],t,n,r);return i._groupsTotal=a,a}return i._groupsTotal=i._data.length,i._groupsTotal},groupCount:function(e,t,n,r){var i=this,a=0;return e.hasSubgroups&&i._groupsState[e.uid]?((t&&!e.excludeHeader||r)&&(a+=1),e[n].forEach(function(e){a+=i.groupCount(e,t,n,r)})):i._groupsState[e.uid]?((t&&!e.excludeHeader||r)&&a++,a+=e[n]?e[n].length:0):a++,a},countGroupRange:function(e){for(var t=0,n=e.length,r=0;r<n;r++)t+=this.groupCount(e[r],!0);return t},aggregate:function(e){var n=this;if(e!==t){n._query({aggregate:e});return}return n._aggregate},aggregates:function(){var e=this._aggregateResult;return i(e)&&(e=this._emptyAggregates(this.aggregate())),e},_emptyAggregates:function(e){var t={};if(!i(e)){var n={};a(e)||(e=[e]);for(var r=0;r<e.length;r++)n[e[r].aggregate]=0,t[e[r].field]=n}return t},_pageableQueryOptions:function(e){return e},_wrapInEmptyGroup:function(e){var t=this.group(),n,r,i,a;for(i=t.length-1,a=0;i>=a;i--)r=t[i],n={value:e.get?e.get(r.field):e[r.field],field:r.field,items:n?[n]:[e],hasSubgroups:!!n,aggregates:this._emptyAggregates(r.aggregates)};return n},totalPages:function(){var e=this,t=e.pageSize()||e.total(),n=e._isGroupPaged()?e.groupsTotal(!0):e.total();return N.ceil((n||0)/t)},inRange:function(e,t){var n=this,r=N.min(e+t,n.total());return!n.options.serverPaging&&n._data.length>0?!0:n._findRange(e,r).length>0},lastRange:function(){var e=this._ranges;return e[e.length-1]||{start:0,end:0,data:[]}},firstItemUid:function(){var e=this._ranges;return e.length&&e[0].data.length&&e[0].data[0].uid},enableRequestsInProgress:function(){this._skipRequestsInProgress=!1},_timeStamp:function(){return new Date().getTime()},range:function(e,n,r,i){this._currentRequestTimeStamp=this._timeStamp(),this._skipRequestsInProgress=!0;var a=this._isGroupPaged()?this.groupsTotal(!0):this.total();(i===`expandGroup`||i===`collapseGroup`)&&this._updateOuterRangesLength(),e=N.min(e||0,a),r=f(r)?r:u;var o=this,s=N.max(N.floor(e/n),0)*n,c=N.min(s+n,a),l=o._findRange(e,N.min(e+n,a),r);if((l.length||a===0)&&!o._fetchingGroupItems){o._processRangeData(l,e,n,o._originalPageSkip||s,o._originalSize||c,{action:i}),o._originalPageSkip=null,o._originalSize=null,r();return}o._isGroupPaged()&&(o._originalPageSkip=s,o._originalSize=c,s=N.max(N.floor(o._adjustPageSkip(e,n)/n),0)*n,c=N.min(s+n,a)),n!==t&&!o._fetchingGroupItems&&(o._isGroupPaged()&&!o._groupRangeExists(s,n)||!o._rangeExists(s,c)?o.prefetch(s,n,function(){e>s&&c<o.total()&&!o._rangeExists(c,N.min(c+n,o.total()))?o.prefetch(c,n,function(){o.range(e,n,r)}):o.range(e,n,r)}):s<e&&o.prefetch(c,n,function(){o.range(e,n,r)}))},_findRange:function(e,n,r){var i=this,a=i._ranges,o,s=[],c,l,u,d,f,p,m,h=i.options,g=h.serverSorting||h.serverPaging||h.serverFiltering||h.serverGrouping||h.serverAggregates,_,v,y,b={take:n-e,skip:e,skipped:0,taken:0,includeParents:!0},x,S=i._isGroupPaged(),C=S?`outerStart`:`start`,ee=S?`outerEnd`:`end`,w;for(c=0,y=a.length;c<y;c++){if(o=a[c],S){if(o.outerStart>=n)return[];if(e>o.outerEnd){b.skipped+=o.outerEnd-(x||0),x=o.outerEnd;continue}if(x!==void 0&&x!=o.outerStart&&(b.skipped+=o.outerStart-x),b.skipped>b.skip)return[];for(x===void 0&&e>0&&o.start>0&&(b.skipped=o.outerStart),l=c;;){if(this._findGroupedRange(o.data,s,b,null,r),w=i._calculateGroupsTotal(s,!0,`currentItems`),w>=b.take)return s;if(i._fetchingGroupItems)return[];if(l++,a[l]&&a[l].outerStart===o.outerEnd)o=a[l];else break}}else if(e>=o[C]&&e<=o[ee]){for(v=0,l=c;l<y;l++)if(o=a[l],_=i._flatData(o.data,!0),_.length&&e+v>=o.start){if(f=o.data,p=o.end,!g){if(h.inPlaceSort)m=i._queryProcess(o.data,{filter:i.filter()});else{var T=ke(i.group()||[]).concat(U(i.sort()||[]));m=i._queryProcess(o.data,{sort:T,filter:i.filter()})}_=f=m.data,m.total!==t&&(p=m.total)}if(u=0,e+v>o.start&&(u=e+v-o.start),d=_.length,p>n&&(d-=p-n),v+=d-u,s=i._mergeGroups(s,f,u,d),n<=o.end&&v==n-e)return s}break}x=o.outerEnd}return[]},_getRangesMismatch:function(e){for(var t=this._ranges,n=0,r=0;;){var i=t[r];if(!i||i.outerStart>e)break;i.outerEnd!=i.end&&(n=i.outerEnd-i.end),r++}return n},_mergeGroups:function(e,t,n,r){if(this._isServerGrouped()){var i=t.toJSON(),a;return e.length&&(a=e[e.length-1]),Ge(a,i,n,r),e.concat(i)}return e.concat(t.slice(n,r))},_processRangeData:function(e,n,r,i,a,o){var s=this;s._pending=t,s._skip=n>s.skip()&&!s._omitPrefetch?N.min(a,(s.totalPages()-1)*s.take()):i,s._currentRangeStart=n,s._take=r;var c=s.options.serverPaging,l=s.options.serverSorting,u=s.options.serverFiltering,d=s.options.serverAggregates;try{s.options.serverPaging=!0,!s._isServerGrouped()&&!(s.group()&&s.group().length)&&(s.options.serverSorting=!0),s.options.serverFiltering=!0,s.options.serverPaging=!0,s.options.serverAggregates=!0,c&&(s._detachObservableParents(),s._data=e=s._observe(e)),s._process(e,o)}finally{s.options.serverPaging=c,s.options.serverSorting=l,s.options.serverFiltering=u,s.options.serverAggregates=d}},skip:function(){var e=this;return e._skip===t?e._page===t?t:(e._page-1)*(e.take()||1):e._skip},currentRangeStart:function(){return this._currentRangeStart||0},take:function(){return this._take||this._pageSize},_prefetchSuccessHandler:function(e,t,n,r){var i=this,a=i._timeStamp();return function(o){var s=!1,c={start:e,end:t,data:[],timestamp:i._timeStamp()},l,u,d;if(i._dequeueRequest(),i.trigger(O,{response:o,type:`read`}),o=i.reader.parse(o),d=i._readData(o),d.length){for(l=0,u=i._ranges.length;l<u;l++)if(i._ranges[l].start===e){s=!0,c=i._ranges[l],i._isGroupPaged()||(c.pristineData=d,c.data=i._observe(d),c.end=c.start+i._flatData(c.data,!0).length,i._sortRanges());break}s||i._addRange(i._observe(d),e)}i._total=i.reader.total(o),(r||a>=i._currentRequestTimeStamp||!i._skipRequestsInProgress)&&(n&&d.length?n():i.trigger(C,{}))}},prefetch:function(e,t,n){var r=this,i=N.min(e+t,r.total()),a={take:t,skip:e,page:e/t+1,pageSize:t,sort:r._sort,filter:r._filter,group:r._group,aggregate:r._aggregate};if(r._isGroupPaged()&&!r._isServerGrouped()&&r._groupRangeExists(e,i)){n&&n();return}r._isServerGroupPaged()&&!r._groupRangeExists(e,i)||!r._rangeExists(e,i)?r._queueWithTimeout(a,function(){r.trigger(E,{type:`read`})?r._dequeueRequest():(r._omitPrefetch&&r.trigger(D),r.transport.read({data:r._params(a),success:r._prefetchSuccessHandler(e,i,n),error:function(){var e=P.call(arguments);r.error.apply(r,e)}}))},100):n&&n()},_multiplePrefetch:function(e,t,n){var r=this,i=N.min(e+t,r.total()),a={take:t,skip:e,page:e/t+1,pageSize:t,sort:r._sort,filter:r._filter,group:r._group,aggregate:r._aggregate};r._rangeExists(e,i)?n&&n():r.trigger(E,{type:`read`})||r.transport.read({data:r._params(a),success:r._prefetchSuccessHandler(e,i,n,!0)})},_adjustPageSkip:function(e,t){var n=this,r=n._getPrevRange(e),i,a=n.total(),o;if(r){if(o=n._getRangesMismatch(e),!o)return e;e-=o}if(i=N.max(N.floor(e/t),0)*t,i>a)for(;i-=t,!(i<a););return i},_getNextRange:function(e){var t=this._ranges,n,r;for(n=0,r=t.length;n<r;n++)if(t[n].start<=e&&t[n].end>=e)return t[n]},_getPrevRange:function(e){var t=this._ranges,n,r;for(n=t.length-1;n>=0;n--)if(t[n].outerStart<=e){r=t[n];break}return r},_rangeExists:function(e,t){var n=this._ranges,r,i;for(r=0,i=n.length;r<i;r++)if(n[r].start<=e&&n[r].end>=t)return!0;return!1},_groupRangeExists:function(e,t){var n=this,r=n._ranges,i,a,o=0,s=n.groupsTotal(!0);for(t>s&&!n._isServerGrouped()&&(t=s),i=0,a=r.length;i<a;i++){var c=r[i];c.outerStart<=e&&c.outerEnd>=e?o+=c.outerEnd-e:c.outerStart<=t&&c.outerEnd>=t&&(o+=t-c.outerStart)}return o>=t-e},_getCurrentRangeSpan:function(){var e=this,t=e._ranges,n=e.currentRangeStart(),r=n+(e.take()||0),i=[],a,o,s=t.length;for(o=0;o<s;o++)a=t[o],(a.start<=n&&a.end>=n||a.start>=n&&a.start<=r)&&i.push(a);return i},_removeModelFromRanges:function(e){for(var t=this,n,r=0,i=this._ranges.length;r<i;r++)n=this._ranges[r],t._removeModelFromRange(n,e);t._updateRangesLength()},_removeModelFromRange:function(e,t){this._eachItem(e.data,function(e){if(e)for(var n=0;n<e.length;n++){var r=e[n];if(r.uid&&r.uid==t.uid){[].splice.call(e,n,1);break}}})},_insertModelInRange:function(e,t){var n=this,r=n._ranges||[],i=r.length,a,o;for(o=0;o<i;o++)if(a=r[o],a.start<=e&&a.end>=e){n._getByUid(t.uid,a.data)||(n._isServerGrouped()?a.data.splice(e,0,n._wrapInEmptyGroup(t)):a.data.splice(e,0,t));break}n._updateRangesLength()},_updateRangesLength:function(){var e=this,t=e._ranges||[],n=t.length,r=!1,i=0,a=0,o,s,c;for(c=0;c<n;c++){if(s=t[c],o=e._isGroupPaged()?s.data.length:e._flatData(s.data,!0).length,a=o-N.abs(s.end-s.start),!r&&a!==0){r=!0,i=a,s.end+=i;continue}r&&(s.start+=i,s.end+=i)}},_updateOuterRangesLength:function(){var e=this,t=e._ranges||[],n=t.length,r=0,i,a,o,s;for(a=0;a<n;a++)i=t[a],s=e._isGroupPaged()?e._calculateGroupsTotal(i.data,!0,`items`,!0):e._flatData(i.data,!0).length,o?(o.end!=i.start&&(r=i.start-o.end),i.outerStart=o.outerEnd+r,r=0):i.outerStart=i.start,i.outerEnd=i.outerStart+s,o=i},isLocalTransport:function(){return this.transport instanceof Pe},isRemoteTransport:function(){return this.transport instanceof Fe}}),at={};at.create=function(t,i,a){var o,s=t.transport?e.extend({},t.transport):null;return s?(s.read=typeof s.read===g?{url:s.read}:s.read,t.type===`jsdo`&&(s.dataSource=a),t.type&&(d.data.transports=d.data.transports||{},d.data.schemas=d.data.schemas||{},d.data.transports[t.type]?r(d.data.transports[t.type])?s=n(!0,{},d.data.transports[t.type],s):o=new d.data.transports[t.type](n(s,{data:i})):d.logToConsole(`Unknown DataSource transport type '`+t.type+`'.
Verify that registration scripts for this type are included after Kendo UI on the page.`,`warn`),t.schema=n(!0,{},d.data.schemas[t.type],t.schema)),o||=f(s.read)?s:new Fe(s)):o=new Pe({data:t.data||[]}),o},Q.create=function(e){(a(e)||e instanceof I)&&(e={data:e});var r=e||{},o=r.data,s=r.fields,c=r.table,l=r.select,u,f,p={},m;if(!o&&s&&!r.transport&&(c?o=st(c,s):l&&(o=ot(l,s),r.group===t&&o[0]&&o[0].optgroup!==t&&(r.group=`optgroup`))),d.data.Model&&s&&(!r.schema||!r.schema.model)){for(u=0,f=s.length;u<f;u++)m=s[u],m.type&&(p[m.field]=m);i(p)||(r.schema=n(!0,r.schema,{model:{fields:p}}))}return r.data=o,l=null,r.select=null,c=null,r.table=null,r instanceof Q?r:new Q(r)};function ot(t,n){t=e(t)[0];var r=t.options,i=n[0],a=n[1],o=[],s,c,l,u,d,f;for(s=0,c=r.length;s<c;s++)d={},u=r[s],l=u.parentNode,l===t&&(l=null),!(u.disabled||l&&l.disabled)&&(l&&(d.optgroup=l.label),d[i.field]=u.text,f=u.attributes.value,f=f&&f.specified?u.value:u.text,d[a.field]=f,o.push(d));return o}function st(t,n){var r=e(t)[0].tBodies[0],i=r?r.rows:[],a,o,s,c=n.length,l=[],u,d,f,p;for(a=0,o=i.length;a<o;a++){for(d={},p=!0,u=i[a].cells,s=0;s<c;s++)f=u[s],f.nodeName.toLowerCase()!==`th`&&(p=!1,d[n[s].field]=f.innerHTML);p||l.push(d)}return l}var ct=B.define({idField:`id`,init:function(e){var t=this,r=t.hasChildren||e&&e.hasChildren,i=`items`,a={};if(d.data.Model.fn.init.call(t,e),typeof t.children===g&&(i=t.children),a={schema:{data:i,model:{hasChildren:r,id:t.idField,fields:t.fields}}},typeof t.children!==g&&n(a,t.children),a.data=e,r||=a.schema.data,typeof r===g&&(r=d.getter(r)),f(r)){var o=r.call(t,t);o&&o.length===0?t.hasChildren=!1:t.hasChildren=!!o}t._childrenOptions=a,t.hasChildren&&t._initChildren(),t._loaded=!!(e&&e._loaded)},_initChildren:function(){var e=this,t,n,r;e.children instanceof $||(t=e.children=new $(e._childrenOptions),n=t.transport,r=n.parameterMap,n.parameterMap=function(t,n){return t[e.idField||`id`]=e.id,r&&(t=r.call(e,t,n)),t},t.parent=function(){return e},t.bind(C,function(t){t.node=t.node||e,e.trigger(C,t)}),t.bind(T,function(t){var n=e.parent();n&&(t.node=t.node||e,n.trigger(T,t))}),t.bind(k,function(t){var n=e.parent();n&&n.trigger(k,t)}),e._updateChildrenField())},append:function(e){this._initChildren(),this.loaded(!0),this.children.add(e)},hasChildren:!1,level:function(){for(var e=this.parentNode(),t=0;e&&e.parentNode;)t++,e=e.parentNode?e.parentNode():null;return t},_updateChildrenField:function(){var e=this._childrenOptions.schema.data;this[e||`items`]=this.children.data()},_childrenLoaded:function(){this._loaded=!0,this._loading=!1,this._loadingPromise=null,this._updateChildrenField()},load:function(){var n={},r=`_query`,i,a;return this.loading()?this._loadingPromise||e.Deferred().resolve().promise():(this.hasChildren?(this._initChildren(),i=this.children,n[this.idField||`id`]=this.id,this._loaded||(i._data=t,r=`read`,this.loading(!0)),i.one(C,this._childrenLoaded.bind(this)),this._matchFilter&&(n.filter={field:`_matchFilter`,operator:`eq`,value:!0}),a=i[r](n),this._loaded||(this._loadingPromise=a,this.trigger(te,{promise:a,node:this}))):this.loaded(!0),a||e.Deferred().resolve().promise())},parentNode:function(){return this.parent().parent()},loaded:function(e){if(e!==t)this._loaded=e,this.loading(!1);else return this._loaded},loading:function(e){if(e!==t)this._loading=e;else return this._loading||!1},shouldSerialize:function(e){return B.fn.shouldSerialize.call(this,e)&&e!==`children`&&e!==`_loaded`&&e!==`hasChildren`&&e!==`_childrenOptions`}});function lt(e){return function(){var t=this._data,n=Q.fn[e].apply(this,P.call(arguments));return this._data!=t&&this._attachBubbleHandlers(),n}}var $=Q.extend({init:function(e){var t=ct.define({children:e});e.filter&&!e.serverFiltering&&(this._hierarchicalFilter=e.filter,e.filter=null),Q.fn.init.call(this,n(!0,{},{schema:{modelBase:t,model:t}},e)),this._attachBubbleHandlers()},_attachBubbleHandlers:function(){var e=this;e._data.bind(T,function(t){e.trigger(T,t)}),e._data.bind(k,function(t){e.trigger(k,t)})},loading:function(){return this._data?this._data.loading()||this._childrenLoading():!1},_childrenLoading:function(){var e=!1;return this._data.forEach(function(t){t.hasChildren&&t.children.loading()&&(e=!0)}),e},read:function(e){var t=Q.fn.read.call(this,e);return this._hierarchicalFilter&&(this._data&&this._data.length>0?this.filter(this._hierarchicalFilter):(this.options.filter=this._hierarchicalFilter,this._filter=W(this.options.filter),this._hierarchicalFilter=null)),t},remove:function(e){var t=e.parentNode(),n=this,r;return t&&t._initChildren&&(n=t.children),r=Q.fn.remove.call(n,e),t&&!n.data().length&&(t.hasChildren=!1),r},success:lt(`success`),data:lt(`data`),insert:function(e,t){var n=this.parent();return n&&n._initChildren&&(n.hasChildren=!0,n._initChildren()),Q.fn.insert.call(this,e,t)},filter:function(e){if(e===t)return this._filter;!this.options.serverFiltering&&this._markHierarchicalQuery(e)&&(e={logic:`or`,filters:[e,{field:`_matchFilter`,operator:`equals`,value:!0}]}),this.trigger(`reset`),this._query({filter:e,page:1})},_markHierarchicalQuery:function(t){var n,r=this.options.accentFoldingFiltering;return t=r?e.extend({},W(t),{accentFoldingFiltering:r}):W(t),!t||t.filters.length===0?(this._updateHierarchicalFilter(function(){return!0}),!1):(n=H.filterExpr(t,{noEval:!0}),this._updateHierarchicalFilter(n),!0)},_updateHierarchicalFilter:function(e){for(var t,n=this._data,r=!1,i=0;i<n.length;i++)t=n[i],t.hasChildren?(t._matchFilter=t.children._updateHierarchicalFilter(e),t._matchFilter||=e(t)):t._matchFilter=e(t),t._matchFilter&&(r=!0);return r},_find:function(e,t){var n,r,i,a,o=this._data;if(o){if(i=Q.fn[e].call(this,t),i)return i;for(o=this._flatData(this._data),n=0,r=o.length;n<r;n++)if(a=o[n].children,a instanceof $&&(i=a[e](t),i))return i}},get:function(e){return this._find(`get`,e)},getByUid:function(e){return this._find(`getByUid`,e)}});function ut(t,n){var r=e(t).children(),i,a,o=[],s,c=n[0].field,l=n[1]&&n[1].field,u=n[2]&&n[2].field,f=n[3]&&n[3].field,p,m,h,g,_;function v(e,t){return e.filter(t).add(e.find(t))}for(i=0,a=r.length;i<a;i++)s={_loaded:!0},p=r.eq(i),h=p[0].firstChild,_=p.children(),t=_.filter(`ul`),_=_.filter(`:not(ul)`),m=p.attr(`data-id`),m&&(s.id=m),h&&(s[c]=h.nodeType==3?h.nodeValue:_.text()),l&&(s[l]=v(_,`a`).attr(`href`)),f&&(s[f]=v(_,`img`).attr(`src`)),u&&(g=v(_,`.k-sprite`).prop(`className`),s[u]=g&&d.trim(g.replace(`k-sprite`,``))),t.length&&(s.items=ut(t.eq(0),n)),p.attr(`data-hasChildren`)==`true`&&(s.hasChildren=!0),o.push(s);return o}$.create=function(e){e=e&&e.push?{data:e}:e;var t=e||{},n=t.data,r=t.fields,i=t.list;return n&&n._dataSource?n._dataSource:(!n&&r&&!t.transport&&i&&(n=ut(i,r)),t.data=n,t instanceof $?t:new $(t))};var dt=d.Observable.extend({init:function(e,t,n){d.Observable.fn.init.call(this),this._prefetching=!1,this.dataSource=e,this.prefetch=!n;var r=this;e.bind(`change`,function(){r._change()}),e.bind(`reset`,function(){r._reset()}),this._syncWithDataSource(),this.setViewSize(t)},setViewSize:function(e){this.viewSize=e,this._recalculate()},at:function(e){var t=this.pageSize,n=!0;if(e>=this.total())return this.trigger(`endreached`,{index:e}),null;if(!this.useRanges)return this.dataSource.view()[e];if(this.useRanges)return(e<this.dataOffset||e>=this.skip+t)&&(n=this.range(Math.floor(e/t)*t)),e===this.prefetchThreshold&&this._prefetch(),e===this.midPageThreshold?this.range(this.nextMidRange,!0):e===this.nextPageThreshold?this.range(this.nextFullRange):e===this.pullBackThreshold&&(this.offset===this.skip?this.range(this.previousMidRange):this.range(this.previousFullRange)),n?this.dataSource.at(e-this.dataOffset):(this.trigger(`endreached`,{index:e}),null)},indexOf:function(e){return this.dataSource.data().indexOf(e)+this.dataOffset},total:function(){return parseInt(this.dataSource.total(),10)},next:function(){var e=this,t=e.pageSize,n=e.skip-e.viewSize+t,r=N.max(N.floor(n/t),0)*t;this.offset=n,this.dataSource.prefetch(r,t,function(){e._goToRange(n,!0)})},range:function(e,t){if(this.offset===e)return!0;var n=this,r=this.pageSize,i=N.max(N.floor(e/r),0)*r,a=this.dataSource;return t&&(i+=r),a.inRange(e,r)?(this.offset=e,this._recalculate(),this._goToRange(e),!0):this.prefetch?(a.prefetch(i,r,function(){n.offset=e,n._recalculate(),n._goToRange(e,!0)}),!1):!0},syncDataSource:function(){var e=this.offset;this.offset=null,this.range(e)},destroy:function(){this.unbind()},_prefetch:function(){var e=this,t=this.pageSize,n=this.skip+t,r=this.dataSource;!r.inRange(n,t)&&!this._prefetching&&this.prefetch&&(this._prefetching=!0,this.trigger(`prefetching`,{skip:n,take:t}),r.prefetch(n,t,function(){e._prefetching=!1,e.trigger(`prefetched`,{skip:n,take:t})}))},_goToRange:function(e,t){this.offset===e&&(this.dataOffset=e,this._expanding=t,this.dataSource.range(e,this.pageSize),this.dataSource.enableRequestsInProgress())},_reset:function(){this._syncPending=!0},_change:function(){var e=this.dataSource;this.length=this.useRanges?e.lastRange().end:e.view().length,this._syncPending&&(this._syncWithDataSource(),this._recalculate(),this._syncPending=!1,this.trigger(`reset`,{offset:this.offset})),this.trigger(`resize`),this._expanding&&this.trigger(`expand`),delete this._expanding},_syncWithDataSource:function(){var e=this.dataSource;this._firstItemUid=e.firstItemUid(),this.dataOffset=this.offset=e.skip()||0,this.pageSize=e.pageSize(),this.useRanges=e.options.serverPaging},_recalculate:function(){var e=this.pageSize,t=this.offset,n=this.viewSize,r=Math.ceil(t/e)*e;this.skip=r,this.midPageThreshold=r+e-1,this.nextPageThreshold=r+n-1,this.prefetchThreshold=r+Math.floor(e/3*2),this.pullBackThreshold=this.offset-1,this.nextMidRange=r+e-n,this.nextFullRange=r,this.previousMidRange=t-n,this.previousFullRange=r-e}}),ft=d.Observable.extend({init:function(e,t){var n=this;d.Observable.fn.init.call(n),this.dataSource=e,this.batchSize=t,this._total=0,this.buffer=new dt(e,t*3),this.buffer.bind({endreached:function(e){n.trigger(`endreached`,{index:e.index})},prefetching:function(e){n.trigger(`prefetching`,{skip:e.skip,take:e.take})},prefetched:function(e){n.trigger(`prefetched`,{skip:e.skip,take:e.take})},reset:function(){n._total=0,n.trigger(`reset`)},resize:function(){n._total=Math.ceil(this.length/n.batchSize),n.trigger(`resize`,{total:n.total(),offset:this.offset})}})},syncDataSource:function(){this.buffer.syncDataSource()},at:function(e){var t=this.buffer,n=e*this.batchSize,r=this.batchSize,i=[],a;t.offset>n&&t.at(t.offset-1);for(var o=0;o<r&&(a=t.at(n+o),a!==null);o++)i.push(a);return i},total:function(){return this._total},destroy:function(){this.buffer.destroy(),this.unbind()}});n(!0,d.data,{readers:{json:Ue},Query:H,DataSource:Q,HierarchicalDataSource:$,Node:ct,Comparer:V,ObservableObject:z,ObservableArray:I,LazyObservableArray:L,LocalTransport:Pe,RemoteTransport:Fe,AISmartPasteTransport:Ie,AiTransport:Le,Cache:Y,DataReader:Ue,Model:B,Buffer:dt,BatchBuffer:ft})})(window.kendo.jQuery);var h=kendo;e.__meta__=m,e.default=h});
//# sourceMappingURL=kendo.data.min.js.map