{"version":3,"file":"kendo.userevents.min.js","names":[],"sources":["../../src/kendo.userevents.js"],"sourcesContent":["import \"./kendo.core.js\";\n\nexport const __meta__ = {\n    id: \"userevents\",\n    name: \"User Events\",\n    category: \"framework\",\n    depends: [ \"core\" ],\n    hidden: true\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        support = kendo.support,\n        Class = kendo.Class,\n        Observable = kendo.Observable,\n        now = Date.now,\n        extend = $.extend,\n        OS = support.mobileOS,\n        invalidZeroEvents = OS && OS.android,\n        DEFAULT_MIN_HOLD = 800,\n        CLICK_DELAY = 300,\n        DEFAULT_THRESHOLD = support.browser.msie ? 5 : 0, // WP8 and W8 are very sensitive and always report move.\n\n        // UserEvents events\n        PRESS = \"press\",\n        HOLD = \"hold\",\n        SELECT = \"select\",\n        START = \"start\",\n        MOVE = \"move\",\n        END = \"end\",\n        CANCEL = \"cancel\",\n        TAP = \"tap\",\n        DOUBLETAP = \"doubleTap\",\n        RELEASE = \"release\",\n        GESTURESTART = \"gesturestart\",\n        GESTURECHANGE = \"gesturechange\",\n        GESTUREEND = \"gestureend\",\n        GESTURETAP = \"gesturetap\";\n\n    var THRESHOLD = {\n        \"api\": 0,\n        \"touch\": 0,\n        \"mouse\": 9,\n        \"pointer\": 9\n    };\n\n    var ENABLE_GLOBAL_SURFACE = (!support.touch || support.mouseAndTouchPresent);\n\n    function touchDelta(touch1, touch2) {\n        var x1 = touch1.x.location,\n            y1 = touch1.y.location,\n            x2 = touch2.x.location,\n            y2 = touch2.y.location,\n            dx = x1 - x2,\n            dy = y1 - y2;\n\n        return {\n            center: {\n               x: (x1 + x2) / 2,\n               y: (y1 + y2) / 2\n            },\n\n            distance: Math.sqrt(dx * dx + dy * dy)\n        };\n    }\n\n    function getTouches(e) {\n        var touches = [],\n            originalEvent = e.originalEvent,\n            currentTarget = e.currentTarget,\n            idx = 0, length,\n            changedTouches,\n            touch;\n\n        if (e.api) {\n            touches.push({\n                id: 2, // hardcoded ID for API call;\n                event: e,\n                target: e.target,\n                currentTarget: e.target,\n                location: e,\n                type: \"api\"\n            });\n        }\n        else if (e.type.match(/touch/)) {\n            changedTouches = originalEvent ? originalEvent.changedTouches : [];\n            for (length = changedTouches.length; idx < length; idx ++) {\n                touch = changedTouches[idx];\n                touches.push({\n                    location: touch,\n                    event: e,\n                    target: touch.target,\n                    currentTarget: currentTarget,\n                    id: touch.identifier,\n                    type: \"touch\"\n                });\n            }\n        }\n        else if (support.pointers || support.msPointers) {\n            touches.push({\n                location: originalEvent,\n                event: e,\n                target: e.target,\n                currentTarget: currentTarget,\n                id: originalEvent.pointerId,\n                type: \"pointer\"\n            });\n        } else {\n            touches.push({\n                id: 1, // hardcoded ID for mouse event;\n                event: e,\n                target: e.target,\n                currentTarget: currentTarget,\n                location: e,\n                type: \"mouse\"\n            });\n        }\n\n        return touches;\n    }\n\n    var TouchAxis = Class.extend({\n        init: function(axis, location) {\n            var that = this;\n\n            that.axis = axis;\n\n            that._updateLocationData(location);\n\n            that.startLocation = that.location;\n            that.velocity = that.delta = 0;\n            that.timeStamp = now();\n        },\n\n        move: function(location) {\n            var that = this,\n                offset = location[\"page\" + that.axis],\n                timeStamp = now(),\n                timeDelta = (timeStamp - that.timeStamp) || 1; // Firing manually events in tests can make this 0;\n\n            if (!offset && invalidZeroEvents) {\n                return;\n            }\n\n            that.delta = offset - that.location;\n\n            that._updateLocationData(location);\n\n            that.initialDelta = offset - that.startLocation;\n            that.velocity = that.delta / timeDelta;\n            that.timeStamp = timeStamp;\n        },\n\n        _updateLocationData: function(location) {\n            var that = this, axis = that.axis;\n\n            that.location = location[\"page\" + axis];\n            that.client = location[\"client\" + axis];\n            that.screen = location[\"screen\" + axis];\n        }\n    });\n\n    var Touch = Class.extend({\n        init: function(userEvents, target, touchInfo) {\n            extend(this, {\n                x: new TouchAxis(\"X\", touchInfo.location),\n                y: new TouchAxis(\"Y\", touchInfo.location),\n                type: touchInfo.type,\n                useClickAsTap: userEvents.useClickAsTap,\n                threshold: userEvents.threshold || THRESHOLD[touchInfo.type],\n                userEvents: userEvents,\n                target: target,\n                currentTarget: touchInfo.currentTarget,\n                initialTouch: touchInfo.target,\n                id: touchInfo.id,\n                pressEvent: touchInfo,\n                _clicks: userEvents._clicks,\n                supportDoubleTap: userEvents.supportDoubleTap,\n                _moved: false,\n                _finished: false\n            });\n        },\n\n        press: function() {\n            this._holdTimeout = setTimeout(this._hold.bind(this), this.userEvents.minHold);\n            this._trigger(PRESS, this.pressEvent);\n        },\n\n        _tap: function(touchInfo) {\n            var that = this;\n            that.userEvents._clicks++;\n            if (that.userEvents._clicks == 1) {\n                that._clickTimeout = setTimeout(function() {\n                    if (that.userEvents._clicks == 1) {\n                        that._trigger(TAP, touchInfo);\n                    }\n                    else {\n                        that._trigger(DOUBLETAP, touchInfo);\n                    }\n                    that.userEvents._clicks = 0;\n                }, CLICK_DELAY);\n            }\n        },\n\n        _hold: function() {\n            this._trigger(HOLD, this.pressEvent);\n        },\n\n        move: function(touchInfo) {\n            var that = this;\n            var preventMove = touchInfo.type !== \"api\" && that.userEvents._shouldNotMove;\n\n            if (that._finished || preventMove) { return; }\n\n            that.x.move(touchInfo.location);\n            that.y.move(touchInfo.location);\n\n            if (!that._moved) {\n                if (that._withinIgnoreThreshold()) {\n                    return;\n                }\n\n                if (!UserEvents.current || UserEvents.current === that.userEvents) {\n                    that._start(touchInfo);\n                } else {\n                    return that.dispose();\n                }\n            }\n\n            // Event handlers may cancel the drag in the START event handler, hence the double check for pressed.\n            if (!that._finished) {\n                that._trigger(MOVE, touchInfo);\n            }\n        },\n\n        end: function(touchInfo) {\n            this.endTime = now();\n\n            if (this._finished) { return; }\n\n            // Mark the object as finished if there are blocking operations in the event handlers (alert/confirm)\n            this._finished = true;\n\n            this._trigger(RELEASE, touchInfo); // Release should be fired before TAP (as click is after mouseup/touchend)\n\n            if (this._moved) {\n                this._trigger(END, touchInfo);\n            } else {\n                if (!this.useClickAsTap) {\n                    if (this.supportDoubleTap) {\n                        this._tap(touchInfo);\n                    }\n                    else {\n                        this._trigger(TAP, touchInfo);\n                    }\n                }\n            }\n\n            clearTimeout(this._holdTimeout);\n\n            this.dispose();\n        },\n\n        dispose: function() {\n            var userEvents = this.userEvents,\n                activeTouches = userEvents.touches;\n\n            this._finished = true;\n            this.pressEvent = null;\n            clearTimeout(this._holdTimeout);\n\n            activeTouches.splice($.inArray(this, activeTouches), 1);\n        },\n\n        skip: function() {\n            this.dispose();\n        },\n\n        cancel: function() {\n            this.dispose();\n        },\n\n        isMoved: function() {\n            return this._moved;\n        },\n\n        _start: function(touchInfo) {\n            clearTimeout(this._holdTimeout);\n\n            this.startTime = now();\n            this._moved = true;\n            this._trigger(START, touchInfo);\n        },\n\n        _trigger: function(name, touchInfo) {\n            var that = this,\n                jQueryEvent = touchInfo.event,\n                data = {\n                    touch: that,\n                    x: that.x,\n                    y: that.y,\n                    target: that.target,\n                    event: jQueryEvent\n                };\n\n            if (that.userEvents.notify(name, data)) {\n                jQueryEvent.preventDefault();\n            }\n        },\n\n        _withinIgnoreThreshold: function() {\n            var xDelta = this.x.initialDelta,\n                yDelta = this.y.initialDelta;\n\n            return Math.sqrt(xDelta * xDelta + yDelta * yDelta) <= this.threshold;\n        }\n    });\n\n    function withEachUpEvent(callback) {\n        var downEvents = kendo.eventMap.up.split(\" \"),\n            idx = 0,\n            length = downEvents.length;\n\n        for (; idx < length; idx ++) {\n            callback(downEvents[idx]);\n        }\n    }\n\n    var UserEvents = Observable.extend({\n        init: function(element, options) {\n            var that = this,\n                filter,\n                ns = kendo.guid();\n\n            options = options || {};\n            filter = that.filter = options.filter;\n            that.threshold = options.threshold || DEFAULT_THRESHOLD;\n            that.minHold = options.minHold || DEFAULT_MIN_HOLD;\n            that.touches = [];\n            that._maxTouches = options.multiTouch ? 2 : 1;\n            that.allowSelection = options.allowSelection;\n            that.captureUpIfMoved = options.captureUpIfMoved;\n            that.useClickAsTap = !options.fastTap && !support.delayedClick();\n            that.eventNS = ns;\n            that._clicks = 0;\n            that.supportDoubleTap = options.supportDoubleTap;\n\n            element = $(element).handler(that);\n            Observable.fn.init.call(that);\n\n            extend(that, {\n                element: element,\n                // the touch events lock to the element anyway, so no need for the global setting\n                surface: options.global && ENABLE_GLOBAL_SURFACE ? $(element[0].ownerDocument.documentElement) : $(options.surface || element),\n                stopPropagation: options.stopPropagation,\n                preventDefault: options.preventDefault,\n                pressed: false\n            });\n\n            that.surface.handler(that)\n                .on(kendo.applyEventMap(\"move\", ns), \"_move\")\n                .on(kendo.applyEventMap(\"up cancel\", ns), \"_end\");\n\n            element.on(kendo.applyEventMap(\"down\", ns), filter, \"_start\");\n\n            if (that.useClickAsTap) {\n                element.on(kendo.applyEventMap(\"click\", ns), filter, \"_click\");\n            }\n\n            if (support.pointers || support.msPointers) {\n                //touch-action:none will not work for IE10\n                if (support.browser.version < 11) {\n                    var defaultAction = \"pinch-zoom double-tap-zoom\";\n                    element.css(\"-ms-touch-action\", options.touchAction && options.touchAction != \"none\" ? defaultAction + \" \" + options.touchAction : defaultAction);\n                } else {\n                    element.css(\"touch-action\", options.touchAction || \"none\");\n                }\n            }\n\n            if (options.preventDragEvent) {\n                element.on(kendo.applyEventMap(\"dragstart\", ns), kendo.preventDefault);\n            }\n\n            element.on(kendo.applyEventMap(\"mousedown\", ns), filter, { root: element }, \"_select\");\n\n            if (that.captureUpIfMoved && support.eventCapture) {\n                var surfaceElement = that.surface[0],\n                    preventIfMovingProxy = that.preventIfMoving.bind(that);\n\n                withEachUpEvent(function(eventName) {\n                    surfaceElement.addEventListener(eventName, preventIfMovingProxy, true);\n                });\n            }\n\n            that.bind([\n            PRESS,\n            HOLD,\n            TAP,\n            DOUBLETAP,\n            START,\n            MOVE,\n            END,\n            RELEASE,\n            CANCEL,\n            GESTURESTART,\n            GESTURECHANGE,\n            GESTUREEND,\n            GESTURETAP,\n            SELECT\n            ], options);\n        },\n\n        preventIfMoving: function(e) {\n            if (this._isMoved()) {\n                e.preventDefault();\n            }\n        },\n\n        destroy: function() {\n            var that = this;\n\n            if (that._destroyed) {\n                return;\n            }\n\n            that._destroyed = true;\n\n            if (that.captureUpIfMoved && support.eventCapture) {\n                var surfaceElement = that.surface[0];\n                withEachUpEvent(function(eventName) {\n                    surfaceElement.removeEventListener(eventName, that.preventIfMoving);\n                });\n            }\n\n            that.element.kendoDestroy(that.eventNS);\n            that.surface.kendoDestroy(that.eventNS);\n            that.element.removeData(\"handler\");\n            that.surface.removeData(\"handler\");\n            that._disposeAll();\n\n            that.unbind();\n            delete that.surface;\n            delete that.element;\n            delete that.currentTarget;\n        },\n\n        capture: function() {\n            UserEvents.current = this;\n        },\n\n        cancel: function() {\n            this._disposeAll();\n            this.trigger(CANCEL);\n        },\n\n        notify: function(eventName, data) {\n            var that = this,\n                touches = that.touches;\n\n            if (this._isMultiTouch()) {\n                switch (eventName) {\n                    case MOVE:\n                        eventName = GESTURECHANGE;\n                        break;\n                    case END:\n                        eventName = GESTUREEND;\n                        break;\n                    case TAP:\n                        eventName = GESTURETAP;\n                        break;\n                }\n\n                extend(data, { touches: touches }, touchDelta(touches[0], touches[1]));\n            }\n\n            return this.trigger(eventName, extend(data, { type: eventName }));\n        },\n\n        // API\n        press: function(x, y, target) {\n            this._apiCall(\"_start\", x, y, target);\n        },\n\n        move: function(x, y) {\n            this._apiCall(\"_move\", x, y);\n        },\n\n        end: function(x, y) {\n            this._apiCall(\"_end\", x, y);\n        },\n\n        _isMultiTouch: function() {\n            return this.touches.length > 1;\n        },\n\n        _maxTouchesReached: function() {\n            return this.touches.length >= this._maxTouches;\n        },\n\n        _disposeAll: function() {\n            var touches = this.touches;\n            while (touches.length > 0) {\n                touches.pop().dispose();\n            }\n        },\n\n        _isMoved: function() {\n            return $.grep(this.touches, function(touch) {\n                return touch.isMoved();\n            }).length;\n        },\n\n        _select: function(e) {\n           if (!this.allowSelection || this.trigger(SELECT, { event: e })) {\n               e.preventDefault();\n           }\n        },\n\n        _start: function(e) {\n            var that = this,\n                idx = 0,\n                filter = that.filter,\n                target,\n                touches = getTouches(e),\n                length = touches.length,\n                touch,\n                which = e.which;\n\n            if ((which && which > 1) || (that._maxTouchesReached())) {\n                return;\n            }\n\n            UserEvents.current = null;\n\n            that.currentTarget = e.currentTarget;\n\n            if (that.preventDefault) {\n                e.preventDefault();\n            }\n\n            if (that.stopPropagation) {\n                e.stopPropagation();\n            }\n\n            for (; idx < length; idx ++) {\n                if (that._maxTouchesReached()) {\n                    break;\n                }\n\n                touch = touches[idx];\n\n                if (filter) {\n                    target = $(touch.currentTarget); // target.is(filter) ? target : target.closest(filter, that.element);\n                } else {\n                    target = that.element;\n                }\n\n                if (!target.length) {\n                    continue;\n                }\n\n                touch = new Touch(that, target, touch);\n                that.touches.push(touch);\n                touch.press();\n\n                if (that._isMultiTouch()) {\n                    that.notify(\"gesturestart\", {});\n                }\n            }\n        },\n\n        _move: function(e) {\n            this._eachTouch(\"move\", e);\n        },\n\n        _end: function(e) {\n            this._eachTouch(\"end\", e);\n        },\n\n        _click: function(e) {\n            var data = {\n                touch: {\n                    initialTouch: e.target,\n                    target: $(e.currentTarget),\n                    endTime: now(),\n                    x: {\n                        location: e.pageX,\n                        client: e.clientX\n                    },\n                    y: {\n                        location: e.pageY,\n                        client: e.clientY\n                    }\n                },\n                x: e.pageX,\n                y: e.pageY,\n                target: $(e.currentTarget),\n                event: e,\n                type: \"tap\"\n            };\n\n            if (this.trigger(\"tap\", data)) {\n                e.preventDefault();\n            }\n        },\n\n        _eachTouch: function(methodName, e) {\n            var that = this,\n                dict = {},\n                touches = getTouches(e),\n                activeTouches = that.touches,\n                idx,\n                touch,\n                touchInfo,\n                matchingTouch;\n\n            for (idx = 0; idx < activeTouches.length; idx ++) {\n                touch = activeTouches[idx];\n                dict[touch.id] = touch;\n            }\n\n            for (idx = 0; idx < touches.length; idx ++) {\n                touchInfo = touches[idx];\n                matchingTouch = dict[touchInfo.id];\n\n                if (matchingTouch) {\n                    matchingTouch[methodName](touchInfo);\n                }\n            }\n        },\n\n        _apiCall: function(type, x, y, target) {\n            this[type]({\n                api: true,\n                pageX: x,\n                pageY: y,\n                clientX: x,\n                clientY: y,\n                target: $(target || this.element)[0],\n                stopPropagation: $.noop,\n                preventDefault: $.noop\n            });\n        }\n    });\n\n    var ClickMoveClick = Observable.extend({\n        init: function(element, options) {\n            var that = this,\n                filter,\n                ns = kendo.guid();\n\n            options = options || {};\n            filter = that.filter = options.filter;\n            that.touches = [];\n            that._maxTouches = 1;\n            that.eventNS = ns;\n            that._downStarted = 0;\n\n            element = $(element).handler(that);\n            Observable.fn.init.call(that);\n\n            extend(that, {\n                element: element,\n                // the touch events lock to the element anyway, so no need for the global setting\n                surface: options.global && ENABLE_GLOBAL_SURFACE ? $(element[0].ownerDocument.documentElement) : $(options.surface || element),\n                stopPropagation: options.stopPropagation,\n                pressed: false\n            });\n\n            that.surface.handler(that)\n                .on(kendo.applyEventMap(\"move\", ns), \"_move\")\n                .on(kendo.applyEventMap(\"cancel up\", ns), \"cancel\");\n\n            element.on(kendo.applyEventMap(\"down\", ns), filter, \"_down\")\n                .on(kendo.applyEventMap(\"up\", ns), filter, \"_up\");\n\n            that.bind([\n                START,\n                MOVE,\n                END,\n                HOLD,\n                CANCEL,\n                SELECT\n            ], options);\n        },\n\n        _down: function(e) {\n            if (e.which && e.which > 1) {\n                this.cancel();\n            } else {\n                this._downStarted = new Date().getTime();\n                this._downTarget = e.target;\n            }\n        },\n\n        _up: function(e) {\n            var currentMilestone = new Date().getTime(),\n                currentTarget = e.target;\n\n            if ((!e.which || e.which === 1) &&\n                currentMilestone < this._downStarted + CLICK_DELAY &&\n                currentTarget === this._downTarget) {\n                    if (this.touches && this.touches.length > 0) {\n                        this._end(e);\n                    } else {\n                        this._start(e);\n                    }\n\n                    this._preventCancel = true;\n            } else {\n                this.cancel();\n            }\n\n            this._downStarted = 0;\n            this._downTarget = null;\n        },\n\n        destroy: function() {\n            var that = this;\n\n            if (that._destroyed) {\n                return;\n            }\n\n            that._destroyed = true;\n\n            that.element.kendoDestroy(that.eventNS);\n            that.surface.kendoDestroy(that.eventNS);\n            that.element.removeData(\"handler\");\n            that.surface.removeData(\"handler\");\n            that._disposeAll();\n\n            that.unbind();\n            delete that.surface;\n            delete that.element;\n            delete that.currentTarget;\n        },\n\n        capture: function() {\n            ClickMoveClick.current = this;\n        },\n\n        cancel: function() {\n            if (this._preventCancel) {\n                this._preventCancel = false;\n                return;\n            } else if (this.touches && this.touches.length > 0) {\n                this._disposeAll();\n                this.trigger(CANCEL);\n            }\n        },\n\n        notify: function(eventName, data) {\n            data.clickMoveClick = true;\n            return this.trigger(eventName, extend(data, { type: eventName }));\n        },\n\n        _maxTouchesReached: function() {\n            return this.touches.length >= this._maxTouches;\n        },\n\n        _disposeAll: function() {\n            var touches = this.touches;\n\n            while (touches.length > 0) {\n                touches.pop().dispose();\n            }\n        },\n\n        _start: function(e) {\n            var that = this,\n                idx = 0,\n                filter = that.filter,\n                target,\n                touches = getTouches(e),\n                length = touches.length,\n                touch,\n                which = e.which;\n\n            if ((which && which > 1) || (that._maxTouchesReached())) {\n                return;\n            }\n\n            ClickMoveClick.current = null;\n\n            that.currentTarget = e.currentTarget;\n\n            if (that.stopPropagation) {\n                e.stopPropagation();\n            }\n\n            for (; idx < length; idx ++) {\n                if (that._maxTouchesReached()) {\n                    break;\n                }\n\n                touch = touches[idx];\n\n                if (filter) {\n                    target = $(touch.currentTarget);\n                } else {\n                    target = that.element;\n                }\n\n                if (!target.length) {\n                    continue;\n                }\n\n                touch = new Touch(that, target, touch);\n                that.touches.push(touch);\n                touch.press();\n                touch._start(touch);\n            }\n        },\n\n        _move: function(e) {\n            this._eachTouch(\"move\", e);\n        },\n\n        _end: function(e) {\n            this._eachTouch(\"move\", e);\n            this._eachTouch(\"end\", e);\n        },\n\n        _eachTouch: function(methodName, e) {\n            var that = this,\n                dict = {},\n                touches = getTouches(e),\n                activeTouches = that.touches,\n                idx,\n                touch,\n                touchInfo,\n                matchingTouch;\n\n            for (idx = 0; idx < activeTouches.length; idx ++) {\n                touch = activeTouches[idx];\n                dict[touch.id] = touch;\n            }\n\n            for (idx = 0; idx < touches.length; idx ++) {\n                touchInfo = touches[idx];\n                matchingTouch = dict[touchInfo.id];\n\n                if (matchingTouch) {\n                    matchingTouch.x.move(touchInfo.location);\n                    matchingTouch.y.move(touchInfo.location);\n                    matchingTouch[methodName](touchInfo);\n                }\n            }\n        }\n    });\n\n    UserEvents.defaultThreshold = function(value) {\n        DEFAULT_THRESHOLD = value;\n    };\n\n    UserEvents.minHold = function(value) {\n        DEFAULT_MIN_HOLD = value;\n    };\n\n    kendo.getTouches = getTouches;\n    kendo.touchDelta = touchDelta;\n    kendo.UserEvents = UserEvents;\n    kendo.ClickMoveClick = ClickMoveClick;\n })(window.kendo.jQuery);\nexport default kendo;\n\n"],"mappings":"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"}