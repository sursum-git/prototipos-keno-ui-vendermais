{"version":3,"file":"kendo.groupable.min.js","names":[],"sources":["../../src/kendo.groupable.js"],"sourcesContent":["import \"./kendo.core.js\";\nimport \"./kendo.draganddrop.js\";\nimport \"./kendo.chip.js\";\nimport \"./kendo.chiplist.js\";\nimport \"./kendo.icons.js\";\n\nexport const __meta__ = {\n    id: \"groupable\",\n    name: \"Groupable\",\n    category: \"framework\",\n    depends: [ \"core\", \"draganddrop\", \"icons\", \"chip\", \"chiplist\" ],\n    advanced: true\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        Widget = kendo.ui.Widget,\n        outerWidth = kendo._outerWidth,\n        kendoAttr = kendo.attr,\n        extend = $.extend,\n        each = $.each,\n        isRtl = false,\n\n        DIR = \"dir\",\n        FIELD = \"field\",\n        TITLE = \"title\",\n        ASCENDING = \"asc\",\n        DESCENDING = \"desc\",\n        REMOVEGROUP = \"removeGroup\",\n        GROUP_SORT = \"group-sort\",\n        DROP_CONTAINER = \"k-grouping-drop-container\",\n        NS = \".kendoGroupable\",\n        CHANGE = \"change\",\n        hint = function(target) {\n            var title = target.attr(kendo.attr(\"title\"));\n            if (title) {\n                title = kendo.htmlEncode(title);\n            }\n\n            return $('<div class=\"k-group-clue k-drag-clue\" />')\n                .html(title || kendo.htmlEncode(target.attr(kendo.attr(\"field\"))))\n                .prepend(kendo.ui.icon({ icon: \"cancel\", iconClass: \"k-drag-status\" }));\n        },\n        dropCue = $('<div class=\"k-grouping-dropclue\"/>');\n\n\n    function removeText(element) {\n        element.contents().filter(function() {\n            return this.nodeType === 3;\n        }).remove();\n    }\n\n    var Groupable = Widget.extend({\n        init: function(element, options) {\n            var that = this,\n                group = kendo.guid(),\n                intializePositions = that._intializePositions.bind(that),\n                draggable,\n                horizontalCuePosition,\n                dropCuePositions = that._dropCuePositions = [];\n\n            Widget.fn.init.call(that, element, options);\n\n            isRtl = kendo.support.isRtl(element);\n            horizontalCuePosition = isRtl ? \"right\" : \"left\";\n\n            that.draggable = draggable = that.options.draggable || new kendo.ui.Draggable(that.element, {\n                filter: that.options.draggableElements,\n                hint: hint,\n                group: group\n            });\n\n            that.groupContainer = $(that.options.groupContainer, that.element)\n                .kendoDropTarget({\n                    group: draggable.options.group,\n                    dragenter: function(e) {\n                        if (that._canDrag(e.draggable.currentTarget)) {\n                            kendo.ui.icon(e.draggable.hint.find(\".k-drag-status\"), { icon: \"plus\" });\n                            dropCue.css(horizontalCuePosition, 0).appendTo(that.groupContainer);\n                        }\n                    },\n                    dragleave: function(e) {\n                        kendo.ui.icon(e.draggable.hint.find(\".k-drag-status\"), { icon: \"cancel\" });\n\n                        dropCue.remove();\n                    },\n                    drop: function(e) {\n                        var targetElement = e.draggable.currentTarget,\n                            field = targetElement.attr(kendo.attr(\"field\")),\n                            title = targetElement.attr(kendo.attr(\"title\")),\n                            colID = targetElement.attr(\"id\"),\n                            sourceIndicator = that.indicator(field),\n                            dropCuePositions = that._dropCuePositions,\n                            lastCuePosition = dropCuePositions[dropCuePositions.length - 1],\n                            position,\n                            method = \"after\",\n                            parentLeft = isRtl || !lastCuePosition ? 0 : lastCuePosition.element.parent().position().left;\n                        var sortOptions = extend({}, that.options.sort, targetElement.data(GROUP_SORT));\n                        var dir = sortOptions.dir;\n\n                        if (!targetElement.hasClass(\"k-chip\") && !that._canDrag(targetElement)) {\n                            return;\n                        }\n                        if (lastCuePosition) {\n                            position = that._dropCuePosition(kendo.getOffset(dropCue).left + parentLeft + parseInt(lastCuePosition.element.css(\"marginLeft\"), 10) * (isRtl ? -1 : 1) + parseInt(lastCuePosition.element.css(\"marginRight\"), 10));\n                            if (position && that._canDrop($(sourceIndicator), position.element, position.left)) {\n                                if (position.before) {\n                                    method = \"before\";\n                                }\n\n                                position.element[method](sourceIndicator || that.buildIndicator(field, title, dir, colID).wrapper);\n                                that._setIndicatorSortOptions(field, sortOptions);\n                                that._change();\n                            }\n                        } else {\n                            removeText(that._messageContainer);\n                            that._list.element.show();\n                            that._list.add(that.buildIndicator(field, title, dir, colID).element);\n                            that._setIndicatorSortOptions(field, sortOptions);\n                            that._change();\n                        }\n                    }\n                })\n                .kendoDraggable({\n                    filter: \"div.k-chip\",\n                    hint: hint,\n                    group: draggable.options.group,\n                    dragcancel: that._dragCancel.bind(that),\n                    dragstart: function(e) {\n                        var element = e.currentTarget,\n                            marginLeft = parseInt(element.css(\"marginLeft\"), 10),\n                            elementPosition = element.position(),\n                            left = isRtl ? elementPosition.left - marginLeft : elementPosition.left + outerWidth(element);\n\n                        intializePositions();\n                        dropCue.css(\"left\", left).appendTo(that.groupContainer);\n                        kendo.ui.icon(this.hint.find(\".k-drag-status\"), { icon: \"plus\" });\n                    },\n                    dragend: function() {\n                        that._dragEnd(this);\n                    },\n                    drag: that._drag.bind(that)\n                });\n\n            draggable.bind([ \"dragend\", \"dragcancel\", \"dragstart\", \"drag\" ],\n            {\n                dragend: function() {\n                    that._dragEnd(this);\n                },\n                dragcancel: that._dragCancel.bind(that),\n                dragstart: function(e) {\n\n                    if (!that.options.allowDrag && !that._canDrag(e.currentTarget)) {\n                        e.preventDefault();\n                        return;\n                    }\n\n                    intializePositions();\n                },\n                drag: that._drag.bind(that)\n            });\n\n            that.dataSource = that.options.dataSource;\n            that._messageContainer = that.groupContainer.find(\".\" + DROP_CONTAINER);\n\n            if (!that._messageContainer.length) {\n                that._messageContainer = $('<div/>').addClass(DROP_CONTAINER).appendTo(that.groupContainer);\n            }\n\n            that._createList();\n\n            if (that.dataSource && that._refreshHandler) {\n                that.dataSource.unbind(CHANGE, that._refreshHandler);\n            } else {\n                that._refreshHandler = that.refresh.bind(that);\n            }\n\n            if (that.dataSource) {\n                that.dataSource.bind(\"change\", that._refreshHandler);\n                that.refresh();\n            }\n        },\n\n        refresh: function() {\n            var that = this,\n                dataSource = that.dataSource;\n            var groups = dataSource.group() || [];\n            var fieldAttr = kendoAttr(FIELD);\n            var titleAttr = kendoAttr(TITLE);\n\n            const groupableFields = that.options._groupableFieldsData;\n\n            if (that.groupContainer) {\n                if (that._list) {\n                    that._list.remove(that._list.items());\n                    that._list.element.hide();\n                }\n\n                if (groups.length) {\n                    removeText(that._messageContainer);\n                }\n\n                each(groups, function(index, group) {\n                    var field = group.field;\n                    var dir = group.dir;\n                    var element = that.element\n                        .find(that.options.filter)\n                        .filter(function() {\n                            return $(this).attr(fieldAttr) === field;\n                        });\n\n                     if (!element.length && groupableFields) {\n                        const current = groupableFields.filter(function(item) {\n                            return item.field === field;\n                        })[0] || {};\n\n                        var indicator = that.buildIndicator(field, current.title, dir, current.id);\n                    } else {\n                        var indicator = that.buildIndicator(field, element.attr(titleAttr), dir, element.attr(\"id\"));\n                    }\n\n                    that._list.add(indicator.element);\n                    that._list.element.show();\n                    that._setIndicatorSortOptions(field, extend({}, that.options.sort, { dir: dir, compare: group.compare }));\n                });\n            }\n\n            that._invalidateGroupContainer();\n        },\n\n        destroy: function() {\n            var that = this;\n\n            Widget.fn.destroy.call(that);\n\n            that.groupContainer.off(NS);\n\n            if (that.groupContainer.data(\"kendoDropTarget\")) {\n                that.groupContainer.data(\"kendoDropTarget\").destroy();\n            }\n\n            if (that.groupContainer.data(\"kendoDraggable\")) {\n                that.groupContainer.data(\"kendoDraggable\").destroy();\n            }\n\n            if (!that.options.draggable) {\n                that.draggable.destroy();\n            }\n\n            if (that.dataSource && that._refreshHandler) {\n                that.dataSource.unbind(\"change\", that._refreshHandler);\n                that._refreshHandler = null;\n            }\n\n            if (that._list) {\n                that._list.destroy();\n            }\n\n            that.groupContainer = that.element = that.draggable = null;\n        },\n\n        events: [\"change\", \"removeGroup\"],\n\n        options: {\n            name: \"Groupable\",\n            filter: \"th\",\n            draggableElements: \"th\",\n            messages: {\n                empty: \"Drag a column header and drop it here to group by that column\"\n            },\n            sort: {\n                dir: ASCENDING,\n                compare: null\n            },\n            enableContextMenu: false\n        },\n\n        indicator: function(field) {\n            var indicators = $(\".k-chip\", this.groupContainer);\n            return $.grep(indicators, function(item)\n                {\n                    return $(item).attr(kendo.attr(\"field\")) === field;\n                })[0];\n        },\n\n        removeHandler: function(e) {\n            var that = this;\n\n            that._removeIndicator(e.sender.wrapper);\n        },\n\n        clickHandler: function(e) {\n            var that = this;\n            var indicator = e.sender.wrapper;\n            var dirIcon = indicator.find(\".k-chip-icon\");\n            var newDir = dirIcon.attr(kendoAttr(DIR)) === ASCENDING ? DESCENDING : ASCENDING;\n\n            if ($(e.originalEvent.target).closest('.k-groupable-context-menu').length) {\n                return;\n            }\n\n            dirIcon.attr(kendoAttr(DIR), newDir);\n            that._change();\n        },\n\n        buildIndicator: function(field, title, dir, id) {\n            var that = this;\n            var indicator;\n            var icon;\n            var wrapper;\n\n            dir = dir || (that.options.sort || {}).dir || ASCENDING;\n            indicator = $(`<div/>`)\n                            .kendoChip({\n                                icon: `sort-${(dir || \"asc\") == \"asc\" ? \"asc-small\" : \"desc-small\"}`,\n                                iconClass: 'k-chip-icon',\n                                label: `${kendo.htmlEncode(title || field)}`,\n                                removable: true,\n                                size: that.options.size,\n                                remove: that.removeHandler.bind(that),\n                                click: that.clickHandler.bind(that),\n                                actions: that.options.enableContextMenu ? [\n                                    { icon: \"more-vertical\", iconClass: \"k-groupable-context-menu\" }\n                                ] : null\n                            }).data(\"kendoChip\");\n            wrapper = indicator.wrapper;\n            icon = wrapper.find(\".k-chip-icon\").first();\n            wrapper.attr(`data-${kendo.ns}field`, field);\n            wrapper.attr(`data-${kendo.ns}title`, title || \"\");\n\n            if (id) {\n                wrapper.attr(`data-${kendo.ns}id`, id);\n            }\n\n            icon.attr(\"title\", `(sorted ${dir == \"asc\" ? \"ascending\" : \"descending\"})`);\n            icon.attr(`data-${kendo.ns}dir`, dir);\n\n            return indicator;\n        },\n\n        _setIndicatorSortOptions: function(field, options) {\n            var indicator = $(this.indicator(field));\n            indicator.data(GROUP_SORT, options);\n        },\n\n        aggregates: function() {\n            var that = this;\n            var names;\n            var idx;\n            var length;\n\n            return that.element.find(that.options.filter).map(function() {\n                var cell = $(this),\n                    aggregate = cell.attr(kendo.attr(\"aggregates\")),\n                    member = cell.attr(kendo.attr(\"field\"));\n\n                if (aggregate && aggregate !== \"\") {\n                    names = aggregate.split(\",\");\n                    aggregate = [];\n                    for (idx = 0, length = names.length; idx < length; idx++) {\n                        aggregate.push({ field: member, aggregate: names[idx] });\n                    }\n                }\n                return aggregate;\n            }).toArray();\n        },\n\n        descriptors: function() {\n            var that = this,\n                indicators = $(\".k-chip\", that.groupContainer),\n                field,\n                aggregates = that.aggregates();\n\n            return $.map(indicators, function(item) {\n                item = $(item);\n                field = item.attr(kendo.attr(\"field\"));\n                var sortOptions = that.options.sort || {};\n                var indicatorSortOptions = item.data(GROUP_SORT) || {};\n                var dirIcon = item.find(\".k-chip-icon\");\n\n                return {\n                    field: field,\n                    dir: dirIcon.attr(kendo.attr(\"dir\")),\n                    aggregates: aggregates || [],\n                    colID: item.attr(kendo.attr(\"id\")),\n                    compare: indicatorSortOptions.compare || sortOptions.compare\n                };\n            });\n        },\n\n        _removeIndicator: function(indicator) {\n            var that = this;\n\n            that.trigger(REMOVEGROUP, {\n                field: indicator.attr(kendo.attr(\"field\")),\n                colID: indicator.attr(kendo.attr(\"id\")),\n            });\n            that._list.remove(indicator);\n            indicator.off();\n            indicator.removeData();\n            that._invalidateGroupContainer();\n            that._change();\n        },\n\n        _change: function() {\n            var that = this;\n            if (that.dataSource) {\n                var descriptors = that.descriptors();\n                if (that.trigger(\"change\", { groups: descriptors })) {\n                    that.refresh();\n                    return;\n                }\n                that.dataSource.group(descriptors);\n            }\n        },\n\n        _dropCuePosition: function(position) {\n            var that = this;\n            var dropCuePositions = this._dropCuePositions;\n            if (!dropCue.is(\":visible\") || dropCuePositions.length === 0) {\n                return;\n            }\n\n            position = Math.ceil(position);\n\n            var lastCuePosition = dropCuePositions[dropCuePositions.length - 1],\n                left = lastCuePosition.left,\n                right = lastCuePosition.right,\n                marginLeft = parseInt(lastCuePosition.element.css(\"marginLeft\"), 10),\n                marginRight = parseInt(lastCuePosition.element.css(\"marginRight\"), 10),\n                parentLeft = lastCuePosition.element.parent().position().left - parseInt(that.groupContainer.css(\"paddingLeft\"), 10);\n\n            if (position >= right && !isRtl || position < left && isRtl) {\n                position = {\n                    left: lastCuePosition.element.position().left + (!isRtl ? outerWidth(lastCuePosition.element) + marginRight : parentLeft - marginLeft),\n                    element: lastCuePosition.element,\n                    before: false\n                };\n            } else {\n                position = $.grep(dropCuePositions, function(item) {\n                    return (item.left <= position && position <= item.right) || (isRtl && position > item.right);\n                })[0];\n\n                if (position) {\n                    position = {\n                        left: isRtl ? position.element.position().left + outerWidth(position.element) + marginRight + parentLeft : position.element.position().left - marginLeft,\n                        element: position.element,\n                        before: true\n                    };\n                }\n            }\n\n            return position;\n        },\n        _drag: function(event) {\n            var position = this._dropCuePosition(event.x.location);\n\n            if (position) {\n                dropCue.css({ left: position.left, right: \"auto\" });\n            }\n        },\n        _canDrag: function(element) {\n            var field = element.attr(kendo.attr(\"field\"));\n\n            return element.attr(kendo.attr(\"groupable\")) != \"false\" &&\n                field &&\n                (element.hasClass(\"k-chip\") ||\n                    !this.indicator(field))\n                && !this.dataSource?._requestInProgress;\n        },\n        _canDrop: function(source, target, position) {\n            var next = source.next(),\n                result = source[0] !== target[0] && (!next[0] || target[0] !== next[0] || (!isRtl && position > next.position().left || isRtl && position < next.position().left));\n            return result;\n        },\n        _dragEnd: function(draggable) {\n            var that = this,\n                field = draggable.currentTarget.attr(kendo.attr(\"field\")),\n                sourceIndicator = that.indicator(field);\n\n            if (draggable !== that.options.draggable && !draggable.dropped && sourceIndicator) {\n                that._removeIndicator($(sourceIndicator));\n            }\n\n            that._dragCancel();\n        },\n        _dragCancel: function() {\n            dropCue.remove();\n            this._dropCuePositions = [];\n        },\n        _intializePositions: function() {\n            var that = this,\n                indicators = $(\".k-chip\", that.groupContainer),\n                left;\n\n            that._dropCuePositions = $.map(indicators, function(item) {\n                item = $(item);\n                left = kendo.getOffset(item).left;\n                return {\n                    left: parseInt(left, 10),\n                    right: parseInt(left + outerWidth(item), 10),\n                    element: item\n                };\n            });\n        },\n        _invalidateGroupContainer: function() {\n            var that = this;\n            var groupContainer = that.groupContainer;\n            var list = that._list;\n\n            if (groupContainer && list && list.element.is(\":empty\")) {\n                this._messageContainer.text(this.options.messages.empty);\n            }\n        },\n\n        _createList: function() {\n            var that = this;\n\n            that.groupContainer.find(\".k-chip-list\").remove();\n            that._list = $(\"<div/>\").kendoChipList({ selectable: \"none\", size: that.options.size }).data(\"kendoChipList\");\n            that._list.element.insertBefore(that._messageContainer);\n        }\n    });\n\n    kendo.ui.plugin(Groupable);\n\n})(window.kendo.jQuery);\nexport default kendo;\n\n"],"mappings":"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"}