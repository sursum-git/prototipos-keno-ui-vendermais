{"version":3,"file":"kendo.filebrowser.min.js","names":[],"sources":["../../src/kendo.filebrowser.js"],"sourcesContent":["import \"./kendo.listview.js\";\nimport \"./kendo.dropdownlist.js\";\nimport \"./kendo.upload.js\";\nimport \"./kendo.breadcrumb.js\";\nimport \"./kendo.icons.js\";\n\nexport const __meta__ = {\n    id: \"filebrowser\",\n    name: \"FileBrowser\",\n    category: \"web\",\n    description: \"\",\n    hidden: true,\n    depends: [ \"selectable\", \"listview\", \"dropdownlist\", \"upload\", \"breadcrumb\", \"icons\" ]\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        Widget = kendo.ui.Widget,\n        isPlainObject = $.isPlainObject,\n        extend = $.extend,\n        encode = kendo.htmlEncode,\n        isFunction = kendo.isFunction,\n        trimSlashesRegExp = /(^\\/|\\/$)/g,\n        CHANGE = \"change\",\n        APPLY = \"apply\",\n        ERROR = \"error\",\n        CLICK = \"click\",\n        NS = \".kendoFileBrowser\",\n        SEARCHBOXNS = \".kendoSearchBox\",\n        NAMEFIELD = \"name\",\n        SIZEFIELD = \"size\",\n        TYPEFIELD = \"type\",\n        DEFAULTSORTORDER = { field: TYPEFIELD, dir: \"asc\" },\n        EMPTYTILE = kendo.template(({ text }) => `<div class=\"k-listview-item k-listview-item-empty\"><span class=\"k-file-preview\"><span class=\"k-file-icon k-icon k-svg-icon k-i-none\"></span></span><span class=\"k-file-name\">${kendo.htmlEncode(text)}</span></div>`),\n        UPLOADTEMPLATE = ({ messages }) =>\n            '<div class=\"k-upload k-upload-button-wrap\">' +\n                '<div class=\"k-button k-upload-button\">' +\n                    kendo.ui.icon({ icon: \"plus\", iconClass: \"k-button-icon\" }) +\n                    `<span class=\"k-button-text\">${kendo.htmlEncode(messages.uploadFile)}</span>` +\n                '</div>' +\n                '<input type=\"file\" name=\"file\" />' +\n            '</div>',\n        TOOLBARTMPL = ({ showCreate, showUpload, showDelete, messages }) =>\n            '<div class=\"k-widget k-filebrowser-toolbar k-toolbar k-floatwrap\">' +\n                `${showCreate ? '<button type=\"button\" class=\"k-button k-icon-button\">' + kendo.ui.icon({ icon: \"folder-add\", iconClass: \"k-button-icon\" }) + '</button>' : ''}` +\n                `${showUpload ? UPLOADTEMPLATE({ messages }) : ''}` +\n                `${showDelete ? '<button type=\"button\" class=\"k-button k-icon-button k-disabled\">' + kendo.ui.icon({ icon: \"x\", iconClass: \"k-button-icon\" }) + '</button>' : ''}` +\n                '<div class=\"k-tiles-arrange\">' +\n                    `<label>${kendo.htmlEncode(messages.orderBy)}: <select></select></label>` +\n                '</div>' +\n                '<span class=\"k-toolbar-spacer\"></span>' +\n                '<input data-role=\"searchbox\" />' +\n            '</div>';\n\n    extend(true, kendo.data, {\n        schemas: {\n            \"filebrowser\": {\n                data: function(data) {\n                    return data.items || data || [];\n                },\n                model: {\n                    id: \"name\",\n                    fields: {\n                        name: \"name\",\n                        size: \"size\",\n                        type: \"type\"\n                    }\n                }\n            }\n        }\n    });\n\n    extend(true, kendo.data, {\n        transports: {\n            \"filebrowser\": kendo.data.RemoteTransport.extend({\n                init: function(options) {\n                    kendo.data.RemoteTransport.fn.init.call(this, $.extend(true, {}, this.options, options));\n                },\n                _call: function(type, options) {\n                    options.data = $.extend({}, options.data, { path: this.options.path() });\n\n                    if (isFunction(this.options[type])) {\n                        this.options[type].call(this, options);\n                    } else {\n                        kendo.data.RemoteTransport.fn[type].call(this, options);\n                    }\n                },\n                read: function(options) {\n                    this._call(\"read\", options);\n                },\n                create: function(options) {\n                    this._call(\"create\", options);\n                },\n                destroy: function(options) {\n                    this._call(\"destroy\", options);\n                },\n                update: function() {\n                    //updates are handled by the upload\n                },\n                options: {\n                    read: {\n                        type: \"POST\"\n                    },\n                    update: {\n                        type: \"POST\"\n                    },\n                    create: {\n                        type: \"POST\"\n                    },\n                    destroy: {\n                        type: \"POST\"\n                    }\n                }\n            })\n        }\n    });\n\n    function bindDragEventWrappers(element, onDragEnter, onDragLeave) {\n        var hideInterval, lastDrag;\n\n        element\n            .on(\"dragenter\" + NS, function() {\n                onDragEnter();\n                lastDrag = new Date();\n\n                if (!hideInterval) {\n                    hideInterval = setInterval(function() {\n                        var sinceLastDrag = new Date() - lastDrag;\n                        if (sinceLastDrag > 100) {\n                            onDragLeave();\n\n                            clearInterval(hideInterval);\n                            hideInterval = null;\n                        }\n                    }, 100);\n                }\n            })\n            .on(\"dragover\" + NS, function() {\n                lastDrag = new Date();\n            });\n    }\n\n    function concatPaths(path, name) {\n        if (path === undefined || !path.match(/\\/$/)) {\n            path = (path || \"\") + \"/\";\n        }\n        return path + name;\n    }\n\n    function sizeFormatter(value) {\n        if (!value) {\n            return \"\";\n        }\n\n        var suffix = \" bytes\";\n\n        if (value >= 1073741824) {\n            suffix = \" GB\";\n            value /= 1073741824;\n        } else if (value >= 1048576) {\n            suffix = \" MB\";\n            value /= 1048576;\n        } else if (value >= 1024) {\n            suffix = \" KB\";\n            value /= 1024;\n        }\n\n        return Math.round(value * 100) / 100 + suffix;\n    }\n\n    function fieldName(fields, name) {\n        var descriptor = fields[name];\n\n        if (isPlainObject(descriptor)) {\n            return descriptor.from || descriptor.field || name;\n        }\n        return descriptor;\n    }\n\n    var FileBrowser = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            options = options || {};\n\n            Widget.fn.init.call(that, element, options);\n\n            that.element.addClass(\"k-filebrowser\");\n\n            that.element\n                .on(CLICK + NS, \".k-filebrowser-toolbar button:not(.k-disabled):has(.k-i-x,.k-svg-i-x)\", that._deleteClick.bind(that))\n                .on(CLICK + NS, \".k-filebrowser-toolbar button:not(.k-disabled):has(.k-i-folder-add,.k-svg-i-folder-add)\", that._addClick.bind(that))\n                .on(\"keydown\" + NS, \".k-listview-item.k-selected input\", that._directoryKeyDown.bind(that))\n                .on(\"blur\" + NS, \".k-listview-item.k-selected input\", that._directoryBlur.bind(that));\n\n            that._dataSource();\n\n            that.refresh();\n\n            that.path(that.options.path);\n        },\n\n        options: {\n            name: \"FileBrowser\",\n            messages: {\n                uploadFile: \"Upload\",\n                orderBy: \"Arrange by\",\n                orderByName: \"Name\",\n                orderBySize: \"Size\",\n                directoryNotFound: \"A directory with this name was not found.\",\n                emptyFolder: \"Empty Folder\",\n                deleteFile: 'Are you sure you want to delete {0}?',\n                invalidFileType: \"The selected file {0} is not valid. Supported file types are {1}.\",\n                overwriteFile: \"A file with name {0} already exists in the current directory. Do you want to overwrite it?\",\n                dropFilesHere: \"drop file here to upload\",\n                search: \"Search\"\n            },\n            transport: {},\n            path: \"/\",\n            fileTypes: \"*.*\"\n        },\n\n        events: [ERROR, CHANGE, APPLY],\n\n        destroy: function() {\n            var that = this;\n\n            Widget.fn.destroy.call(that);\n\n            that.dataSource\n                .unbind(ERROR, that._errorHandler);\n\n            that.element\n                .add(that.list)\n                .add(that.toolbar)\n                .off(NS);\n\n            kendo.destroy(that.element);\n        },\n\n        value: function() {\n            var that = this,\n                selected = that._selectedItem(),\n                path,\n                fileUrl = that.options.transport.fileUrl;\n\n            if (selected && selected.get(TYPEFIELD) === \"f\") {\n                path = concatPaths(that.path(), selected.get(NAMEFIELD)).replace(trimSlashesRegExp, \"\");\n                if (fileUrl) {\n                    path = isFunction(fileUrl) ? fileUrl(path) : kendo.format(fileUrl, encodeURIComponent(path));\n                }\n                return path;\n            }\n        },\n\n        _selectedItem: function() {\n            var listView = this.listView,\n                selected = listView.select();\n\n            if (selected.length) {\n                return this.dataSource.getByUid(selected.attr(kendo.attr(\"uid\")));\n            }\n        },\n\n        _toolbar: function() {\n            var that = this,\n                template = kendo.template(TOOLBARTMPL),\n                messages = that.options.messages,\n                arrangeBy = [\n                    { text: messages.orderByName, value: \"name\" },\n                    { text: messages.orderBySize, value: \"size\" }\n                ];\n\n            that.toolbar = $(template({\n                    messages: messages,\n                    showUpload: that.options.transport.uploadUrl,\n                    showCreate: that.options.transport.create,\n                    showDelete: that.options.transport.destroy\n                }))\n                .appendTo(that.element)\n                .find(\".k-upload input\")\n                .kendoUpload({\n                    multiple: false,\n                    localization: {\n                        dropFilesHere: messages.dropFilesHere\n                    },\n                    async: {\n                        saveUrl: that.options.transport.uploadUrl,\n                        autoUpload: true\n                    },\n                    upload: that._fileUpload.bind(that),\n                    error: function(e) {\n                        that._error({ xhr: e.XMLHttpRequest, status: \"error\" });\n                    }\n                }).end();\n\n            that.upload = that.toolbar\n                .find(\".k-upload input\")\n                .data(\"kendoUpload\");\n\n            that.arrangeBy = that.toolbar.find(\".k-tiles-arrange select\")\n                .kendoDropDownList({\n                    dataSource: arrangeBy,\n                    dataTextField: \"text\",\n                    dataValueField: \"value\",\n                    change: function() {\n                        that.orderBy(this.value());\n                    }\n                })\n                .data(\"kendoDropDownList\");\n\n            that.searchBox = that.toolbar.find(\"input[data-role='searchbox']\")\n                .kendoSearchBox({\n                    label: that.options.messages.search,\n                    change: function() {\n                        that.search(this.value());\n                    }\n                }).data(\"kendoSearchBox\");\n\n            that._attachDropzoneEvents();\n        },\n\n        _attachDropzoneEvents: function() {\n            var that = this;\n\n            if (that.options.transport.uploadUrl) {\n                bindDragEventWrappers($(document.documentElement),\n                    that._dropEnter.bind(that),\n                    that._dropLeave.bind(that)\n                );\n                that._scrollHandler = that._positionDropzone.bind(that);\n            }\n        },\n\n        _dropEnter: function() {\n            this._positionDropzone();\n            $(document).on(\"scroll\" + NS, this._scrollHandler);\n        },\n\n        _dropLeave: function() {\n            this._removeDropzone();\n            $(document).off(\"scroll\" + NS, this._scrollHandler);\n        },\n\n        _positionDropzone: function() {\n            var that = this,\n                element = that.element,\n                offset = element.offset();\n\n            that.toolbar.find(\".k-dropzone\")\n                .addClass(\"k-filebrowser-dropzone\")\n                .offset(offset)\n                .css({\n                    width: element[0].clientWidth,\n                    height: element[0].clientHeight,\n                    lineHeight: element[0].clientHeight + \"px\"\n                });\n        },\n\n        _removeDropzone: function() {\n            this.toolbar.find(\".k-dropzone\")\n                .removeClass(\"k-filebrowser-dropzone\")\n                .css({ width: \"\", height: \"\", lineHeight: \"\", top: \"\", left: \"\" });\n        },\n\n        _deleteClick: function() {\n            var that = this,\n                item = that.listView.select(),\n                message = encode(kendo.format(that.options.messages.deleteFile, item.find(\".k-file-name\").text()));\n\n            if (item.length && that._showMessage(message, \"confirm\")) {\n                that.listView.remove(item);\n            }\n        },\n\n        _addClick: function() {\n            this.createDirectory();\n        },\n\n        _getFieldName: function(name) {\n            return fieldName(this.dataSource.reader.model.fields, name);\n        },\n\n        _fileUpload: function(e) {\n            var that = this,\n                options = that.options,\n                fileTypes = options.fileTypes,\n                filterRegExp = new RegExp((\"(\" + fileTypes.split(\",\").join(\")|(\") + \")\").replace(/\\*\\./g , \".*.\"), \"i\"),\n                fileName = e.files[0].name,\n                fileSize = e.files[0].size,\n                fileNameField = NAMEFIELD,\n                sizeField = SIZEFIELD,\n                file;\n\n            if (filterRegExp.test(fileName)) {\n                e.data = { path: that.path() };\n\n                file = that._createFile(fileName, fileSize);\n\n                if (!file) {\n                    e.preventDefault();\n                } else {\n                    that.upload.one(\"success\", function(e) {\n                        var model = that._insertFileToList(file);\n\n                        if (model._override) {\n                            model.set(fileNameField, e.response[that._getFieldName(fileNameField)]);\n                            model.set(sizeField, e.response[that._getFieldName(sizeField)]);\n\n                            that.listView.dataSource.pushUpdate(model);\n                        }\n\n                        that._tiles = that.listView.items().filter(\"[\" + kendo.attr(\"type\") + \"=f]\");\n                    });\n                }\n            } else {\n                e.preventDefault();\n                that._showMessage(encode(kendo.format(options.messages.invalidFileType, fileName, fileTypes)));\n            }\n        },\n\n        _findFile: function(name) {\n            var data = this.dataSource.data(),\n                idx,\n                result,\n                typeField = TYPEFIELD,\n                nameField = NAMEFIELD,\n                length;\n\n            name = name.toLowerCase();\n\n            for (idx = 0, length = data.length; idx < length; idx++) {\n                if (data[idx].get(typeField) === \"f\" &&\n                    data[idx].get(nameField).toLowerCase() === name) {\n\n                    result = data[idx];\n                    break;\n                }\n            }\n            return result;\n        },\n\n        _createFile: function(fileName, fileSize) {\n            var that = this,\n                model = {},\n                typeField = TYPEFIELD,\n                file = that._findFile(fileName);\n\n            if (file) {\n                if (!that._showMessage(encode(kendo.format(that.options.messages.overwriteFile, fileName)), \"confirm\")) {\n                    return null;\n                } else {\n                    file._override = true;\n                    return file;\n                }\n            }\n\n            model[typeField] = \"f\";\n            model[NAMEFIELD] = fileName;\n            model[SIZEFIELD] = fileSize;\n\n            return model;\n        },\n\n        _insertFileToList: function(model) {\n            var index;\n            if (model._override) {\n                return model;\n            }\n\n            var dataSource = this.dataSource;\n            var view = dataSource.view();\n\n            for (var i = 0, length = view.length; i < length; i++) {\n                if (view[i].get(TYPEFIELD) === \"f\") {\n                    index = i;\n                    break;\n                }\n            }\n\n            return dataSource.insert(++index, model);\n        },\n\n        createDirectory: function() {\n            var that = this,\n                idx,\n                length,\n                lastDirectoryIdx = 0,\n                typeField = TYPEFIELD,\n                nameField = NAMEFIELD,\n                view = that.dataSource.data(),\n                name = that._nameDirectory(),\n                model = new that.dataSource.reader.model();\n\n            for (idx = 0, length = view.length; idx < length; idx++) {\n                if (view[idx].get(typeField) === \"d\") {\n                    lastDirectoryIdx = idx;\n                }\n            }\n\n            model.set(typeField, \"d\");\n            model.set(nameField, name);\n\n            that.listView.one(\"dataBound\", function() {\n                var selected = that.listView.items()\n                    .filter(\"[\" + kendo.attr(\"uid\") + \"=\" + model.uid + \"]\");\n\n                if (selected.length) {\n                    this.edit(selected);\n                }\n\n                this.element.scrollTop(selected.attr(\"offsetTop\") - this.element[0].offsetHeight);\n\n                setTimeout(function() {\n                    that.listView.element.find('.k-edit-item input').select();\n                });\n            })\n            .one(\"save\", function(e) {\n                var value = e.model.get(nameField);\n\n                if (!value) {\n                    e.model.set(nameField, name);\n                } else {\n                    e.model.set(nameField, that._nameExists(value, model.uid) ? that._nameDirectory() : value);\n                }\n            });\n\n            that.dataSource.insert(++lastDirectoryIdx, model);\n        },\n\n        _directoryKeyDown: function(e) {\n            if (e.keyCode == 13) {\n                e.currentTarget.blur();\n            }\n        },\n\n        _directoryBlur: function() {\n            this.listView.save();\n        },\n\n        _nameExists: function(name, uid) {\n            var data = this.dataSource.data(),\n                typeField = TYPEFIELD,\n                nameField = NAMEFIELD,\n                idx,\n                length;\n\n            for (idx = 0, length = data.length; idx < length; idx++) {\n                if (data[idx].get(typeField) === \"d\" &&\n                    data[idx].get(nameField).toLowerCase() === name.toLowerCase() &&\n                    data[idx].uid !== uid) {\n                    return true;\n                }\n            }\n            return false;\n        },\n\n        _nameDirectory: function() {\n            var name = \"New folder\",\n                data = this.dataSource.data(),\n                directoryNames = [],\n                typeField = TYPEFIELD,\n                nameField = NAMEFIELD,\n                candidate,\n                idx,\n                length;\n\n            for (idx = 0, length = data.length; idx < length; idx++) {\n                if (data[idx].get(typeField) === \"d\" && data[idx].get(nameField).toLowerCase().indexOf(name.toLowerCase()) > -1) {\n                    directoryNames.push(data[idx].get(nameField));\n                }\n            }\n\n            if ($.inArray(name, directoryNames) > -1) {\n                idx = 2;\n\n                do {\n                    candidate = name + \" (\" + idx + \")\";\n                    idx++;\n                } while ($.inArray(candidate, directoryNames) > -1);\n\n                name = candidate;\n            }\n\n            return name;\n        },\n\n        orderBy: function(field) {\n            this.dataSource.sort([\n                { field: TYPEFIELD, dir: \"asc\" },\n                { field: field, dir: \"asc\" }\n            ]);\n        },\n\n        search: function(name) {\n            this.dataSource.filter({\n                field: NAMEFIELD,\n                operator: \"contains\",\n                value: name\n            });\n        },\n\n        _content: function() {\n            var that = this;\n\n            that.list = $('<div class=\"k-filemanager-listview\" />')\n                .appendTo(that.element)\n                .on(\"dblclick\" + NS, \".k-listview-item\", that._dblClick.bind(that));\n\n            that.listView = new kendo.ui.ListView(that.list, {\n                layout: \"flex\",\n                flex: {\n                    direction: \"row\",\n                    wrap: \"wrap\"\n                },\n                dataSource: that.dataSource,\n                template: that._itemTmpl(),\n                editTemplate: that._editTmpl(),\n                selectable: true,\n                autoBind: false,\n                dataBinding: function(e) {\n                    that.toolbar.find(\".k-i-x,.k-svg-i-x\").parent().addClass(\"k-disabled\");\n\n                    if (e.action === \"remove\" || e.action === \"sync\") {\n                        e.preventDefault();\n                        kendo.ui.progress(that.listView.content, false);\n                        /* If there are no files left the loader is displayed over the wrapper instead of the content. */\n                        kendo.ui.progress(that.listView.wrapper, false);\n                    }\n                },\n                dataBound: function() {\n                    if (that.dataSource.view().length) {\n                        that._tiles = this.items().filter(\"[\" + kendo.attr(\"type\") + \"=f]\");\n                    } else {\n                        this.content.append(EMPTYTILE({ text: that.options.messages.emptyFolder }));\n                    }\n                },\n                change: that._listViewChange.bind(that)\n            });\n        },\n\n        _dblClick: function(e) {\n            var that = this,\n                li = $(e.currentTarget);\n\n            if (li.hasClass(\"k-edit-item\")) {\n                that._directoryBlur();\n            }\n\n            if (li.filter(\"[\" + kendo.attr(\"type\") + \"=d]\").length) {\n                var folder = that.dataSource.getByUid(li.attr(kendo.attr(\"uid\")));\n                if (folder) {\n                    that.path(concatPaths(that.path(), folder.get(NAMEFIELD)));\n                    that.breadcrumbs.value(\"/\" + that.path());\n                }\n            } else if (li.filter(\"[\" + kendo.attr(\"type\") + \"=f]\").length) {\n                that.trigger(APPLY);\n            }\n        },\n\n        _listViewChange: function() {\n            var selected = this._selectedItem();\n\n            if (selected) {\n                this.toolbar.find(\".k-i-x,.k-svg-i-x\").parent().removeClass(\"k-disabled\");\n                this.trigger(CHANGE, { selected: selected });\n            }\n        },\n\n        _dataSource: function() {\n            var that = this,\n                options = that.options,\n                transport = options.transport,\n                typeSortOrder = extend({}, DEFAULTSORTORDER),\n                nameSortOrder = { field: NAMEFIELD, dir: \"asc\" },\n                schema,\n                dataSource = {\n                    type: transport.type || \"filebrowser\",\n                    sort: [typeSortOrder, nameSortOrder]\n                };\n\n            if (isPlainObject(transport)) {\n                transport.path = that.path.bind(that);\n                dataSource.transport = transport;\n            }\n\n            if (isPlainObject(options.schema)) {\n                dataSource.schema = options.schema;\n            } else if (transport.type && isPlainObject(kendo.data.schemas[transport.type])) {\n                schema = kendo.data.schemas[transport.type];\n            }\n\n            if (that.dataSource && that._errorHandler) {\n                that.dataSource.unbind(ERROR, that._errorHandler);\n            } else {\n                that._errorHandler = that._error.bind(that);\n            }\n\n            that.dataSource = kendo.data.DataSource.create(dataSource)\n                .bind(ERROR, that._errorHandler);\n        },\n\n        _navigation: function() {\n            var that = this,\n                navigation = $('<div class=\"k-floatwrap\"><nav></nav></div>')\n                    .appendTo(this.element);\n\n            that.breadcrumbs = navigation.find(\"nav\").first()\n                    .kendoBreadcrumb({\n                        editable: true,\n                        gap: 50,\n                        value: that.options.path || \"/\",\n                        change: function() {\n                            that.path(this.value());\n                        }\n                    }).data(\"kendoBreadcrumb\");\n        },\n\n        _error: function(e) {\n            var that = this,\n                status;\n\n            if (!that.trigger(ERROR, e)) {\n                status = e.xhr.status;\n\n                if (e.status == 'error') {\n                    if (status == '404') {\n                        that._showMessage(kendo.htmlEncode(that.options.messages.directoryNotFound));\n                    } else if (status != '0') {\n                        that._showMessage('Error! The requested URL returned ' + status + ' - ' + e.xhr.statusText);\n                    }\n                } else if (status == 'timeout') {\n                    that._showMessage('Error! Server timeout.');\n                }\n\n                var dataSource = that.dataSource;\n                if (dataSource.hasChanges()) {\n                    dataSource.cancelChanges();\n                }\n            }\n        },\n\n        _showMessage: function(message, type) {\n            return window[type || \"alert\"](message);\n        },\n\n        refresh: function() {\n            var that = this;\n            that._navigation();\n            that._toolbar();\n            that._content();\n        },\n\n        _editTmpl: function() {\n            const result = (data) => `<div class=\"k-listview-item k-selected\" ${kendo.attr(\"uid\")}=\"${data.uid}\">` +\n                    `${data[TYPEFIELD] === 'd' ?\n                        '<div class=\"k-file-preview\">' + kendo.ui.icon({ icon: \"folder\", iconClass: \"k-file-icon\", size: \"xxxlarge\" }) + '</div>' :\n                        '<div class=\"k-file-preview\"><span class=\"k-file-icon k-icon k-i-loading\"></span></div>'}` +\n                    `${data[TYPEFIELD] === 'd' ?\n                        `<span class=\"k-file-name\">\n                            <span class=\"k-textbox k-input\">\n                                <input class=\"k-input-inner\" ${kendo.attr(\"bind\")}=\"value:${NAMEFIELD}\"/>\n                            </span>\n                        </span>` : ''}` +\n                `</div>`;\n\n            return kendo.template(result);\n        },\n\n        _itemTmpl: function() {\n            const result = (data) =>\n                `<div class=\"k-listview-item\" ${kendo.attr(\"uid\")}=\"${data.uid}\" ${kendo.attr(\"type\")}=\"${data[TYPEFIELD]}\">` +\n                    `${data[TYPEFIELD] === 'd' ?\n                        '<div class=\"k-file-preview\">' + kendo.ui.icon({ icon: \"folder\", iconClass: \"k-file-icon\", size: \"xxxlarge\" }) + '</div>' :\n                        '<div class=\"k-file-preview\">' + kendo.ui.icon({ icon: \"file\", iconClass: \"k-file-icon\", size: \"xxxlarge\" }) + '</div>'}` +\n                    `<span class=\"k-file-name\">${data[NAMEFIELD]}</span>` +\n                    `${data[TYPEFIELD] === 'f' ? `<span class=\"k-file-size\">${sizeFormatter(data[SIZEFIELD])}</span>` : '' }` +\n                `</div>`;\n\n            return kendo.template(result);\n        },\n\n        path: function(value) {\n            var that = this,\n                path = that._path || \"\";\n\n            if (value !== undefined) {\n                that._path = value.replace(trimSlashesRegExp, \"\") + \"/\";\n                that.dataSource.read({ path: that._path });\n                return;\n            }\n\n            if (path) {\n                path = path.replace(trimSlashesRegExp, \"\");\n            }\n\n            return path === \"/\" || path === \"\" ? \"\" : (path + \"/\");\n        }\n    });\n\n    var SearchBox = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            options = options || {};\n\n            Widget.fn.init.call(that, element, options);\n\n            that.element.attr(\"placeholder\", that.options.label);\n\n            that._wrapper();\n\n            that.element\n                .on(\"keydown\" + SEARCHBOXNS, that._keydown.bind(that))\n                .on(\"change\" + SEARCHBOXNS, that._updateValue.bind(that));\n\n            that.wrapper\n                .on(CLICK + SEARCHBOXNS, \"a\", that._click.bind(that));\n        },\n\n        options: {\n            name: \"SearchBox\",\n            label: \"Search\",\n            value: \"\"\n        },\n\n        events: [ CHANGE ],\n\n        destroy: function() {\n            var that = this;\n\n            that.wrapper\n                .add(that.element)\n                .add(that.label)\n                .off(SEARCHBOXNS);\n\n            Widget.fn.destroy.call(that);\n        },\n\n        _keydown: function(e) {\n            if (e.keyCode === 13) {\n                this._updateValue();\n            }\n        },\n\n        _click: function(e) {\n            e.preventDefault();\n            this._updateValue();\n        },\n\n        _updateValue: function() {\n            var that = this,\n                value = that.element.val();\n\n            if (value !== that.value()) {\n                that.value(value);\n\n                that.trigger(CHANGE);\n            }\n        },\n\n        _blur: function() {\n            this._updateValue();\n        },\n\n        _focus: function() {\n            this.label.hide();\n        },\n\n        _wrapper: function() {\n            var element = this.element,\n                wrapper = element.parents(\".k-search-wrap\");\n\n            element[0].style.width = \"\";\n            element.addClass(\"k-input-inner\");\n\n            if (!wrapper.length) {\n                wrapper = element.wrap($('<div class=\"k-widget k-search-wrap\"><span class=\"k-textbox k-input\"></span></div>')).parents(\".k-search-wrap\");\n                $('<span class=\"k-input-suffix\">' + kendo.ui.icon($('<a href=\"#\" />'), { icon: \"search\", iconClass: \"k-search\" }) + '</span>').appendTo(wrapper.find(\".k-textbox\"));\n            }\n\n            this.wrapper = wrapper;\n            this.label = wrapper.find(\">label\");\n        },\n\n        value: function(value) {\n            var that = this;\n\n            if (value !== undefined) {\n                that.options.value = value;\n                that.element.val(value);\n                return;\n            }\n            return that.options.value;\n        }\n    });\n\n    kendo.ui.plugin(FileBrowser);\n    kendo.ui.plugin(SearchBox);\n\n})(window.kendo.jQuery);\nexport default kendo;\n\n"],"mappings":"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"}