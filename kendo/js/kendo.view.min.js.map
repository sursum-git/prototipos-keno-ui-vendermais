{"version":3,"file":"kendo.view.min.js","names":[],"sources":["../../src/kendo.view.js"],"sourcesContent":["import \"./kendo.core.js\";\nimport \"./kendo.binder.js\";\nimport \"./kendo.fx.js\";\n\nexport const __meta__ = {\n    id: \"view\",\n    name: \"View\",\n    category: \"framework\",\n    description: \"The View class instantiates and handles the events of a certain screen from the application.\",\n    depends: [ \"core\", \"binder\", \"fx\" ],\n    hidden: false\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        attr = kendo.attr,\n        ui = kendo.ui,\n        attrValue = kendo.attrValue,\n        directiveSelector = kendo.directiveSelector,\n        Observable = kendo.Observable,\n        Widget = kendo.ui.Widget,\n        roleSelector = kendo.roleSelector,\n\n        SCRIPT = \"SCRIPT\",\n        INIT = \"init\",\n        TRANSITION_START = \"transitionStart\",\n        TRANSITION_END = \"transitionEnd\",\n        SHOW = \"show\",\n        HIDE = \"hide\",\n        ATTACH = \"attach\",\n        DETACH = \"detach\",\n        sizzleErrorRegExp = /unrecognized expression/;\n\n    var LOAD_START = \"loadStart\";\n    var LOAD_COMPLETE = \"loadComplete\";\n    var SHOW_START = \"showStart\";\n    var SAME_VIEW_REQUESTED = \"sameViewRequested\";\n    var VIEW_SHOW = \"viewShow\";\n    var VIEW_TYPE_DETERMINED = \"viewTypeDetermined\";\n    var AFTER = \"after\";\n    var classNames = {\n        content: \"k-content\",\n        view: \"k-view\",\n        stretchedView: \"k-stretched-view\",\n        widget: \"k-widget\",\n        header: \"k-header\",\n        footer: \"k-footer\"\n    };\n\n    var View = kendo.ui.Widget.extend({\n        init: function(content, options) {\n            var that = this;\n            options = options || {};\n            that.id = kendo.guid();\n\n            Observable.fn.init.call(that);\n            this.options = $.extend({}, this.options, options);\n\n            that.content = content;\n\n            if (that.options.renderOnInit) {\n                Widget.fn.init.call(that, that._createElement(), options);\n            }\n\n            if (that.options.wrapInSections) {\n                that._renderSections();\n            }\n\n            that.tagName = options.tagName || \"div\";\n            that.model = options.model;\n            that._wrap = options.wrap !== false;\n            this._evalTemplate = options.evalTemplate || false;\n            this._useWithBlock = options.useWithBlock;\n            that._fragments = {};\n\n            that.bind([ INIT, SHOW, HIDE, TRANSITION_START, TRANSITION_END ], options);\n        },\n\n        options: {\n            name: \"View\",\n            renderOnInit: false,\n            wrapInSections: false,\n            detachOnHide: true,\n            detachOnDestroy: true\n        },\n\n        render: function(container) {\n            var that = this,\n                notInitialized = !that.element;\n\n            // The order below matters - kendo.bind should happen when the element is in the DOM, and show should be triggered after init.\n\n            if (notInitialized) {\n                that.element = that._createElement();\n            }\n\n            if (container) {\n                $(container).append(that.element);\n            }\n\n            if (notInitialized) {\n                kendo.bind(that.element, that.model);\n                that.trigger(INIT);\n            }\n\n            if (container) {\n                that._eachFragment(ATTACH);\n                that.trigger(SHOW);\n            }\n\n            return that.element;\n        },\n\n        clone: function() {\n            return new ViewClone(this);\n        },\n\n        triggerBeforeShow: function() {\n            return true;\n        },\n\n        triggerBeforeHide: function() {\n            return true;\n        },\n\n        showStart: function() {\n            var that = this;\n            var element = that.render();\n\n            if (element) {\n                element.css(\"display\", \"\");\n            }\n\n            this.trigger(SHOW_START, { view: this });\n        },\n\n        showEnd: function() {\n        },\n\n        hideEnd: function() {\n            this.hide();\n        },\n\n        beforeTransition: function(type) {\n            this.trigger(TRANSITION_START, { type: type });\n        },\n\n        afterTransition: function(type) {\n            this.trigger(TRANSITION_END, { type: type });\n        },\n\n        hide: function() {\n            if (this.options.detachOnHide) {\n                this._eachFragment(DETACH);\n                $(this.element).detach();\n            }\n\n            this.trigger(HIDE);\n        },\n\n        destroy: function() {\n            var that = this;\n            var element = that.element;\n\n            if (element) {\n                Widget.fn.destroy.call(that);\n\n                kendo.unbind(element);\n                kendo.destroy(element);\n\n                if (that.options.detachOnDestroy) {\n                    element.remove();\n                }\n            }\n        },\n\n        // ported from mobile view\n        purge: function() {\n            var that = this;\n\n            that.destroy();\n            $(that.element).add(that.content).add(that.wrapper).off().remove();\n        },\n\n        fragments: function(fragments) {\n            $.extend(this._fragments, fragments);\n        },\n\n        _eachFragment: function(methodName) {\n            for (var placeholder in this._fragments) {\n                this._fragments[placeholder][methodName](this, placeholder);\n            }\n        },\n\n        _createElement: function() {\n            var that = this,\n                wrapper = \"<\" + that.tagName + \">\",\n                element,\n                content;\n\n            try {\n                content = $(document.getElementById(that.content) || that.content); // support passing id without #\n\n                if (content[0].tagName === SCRIPT) {\n                    content = content.html();\n                }\n            } catch (e) {\n                if (sizzleErrorRegExp.test(e.message)) {\n                    content = that.content;\n                }\n            }\n\n            if (typeof content === \"string\") {\n                content = content.replace(/^\\s+|\\s+$/g, '');\n                if (that._evalTemplate) {\n                    content = kendo.template(content, { useWithBlock: that._useWithBlock })(that.model || {});\n                }\n\n                element = $(wrapper).append(content);\n                // drop the wrapper if asked - this seems like the easiest (although not very intuitive) way to avoid messing up templates with questionable content, like this one for instance:\n                // <script id=\"my-template\">\n                // foo\n                // <span> Span </span>\n                // </script>\n                if (!that._wrap) {\n                   element = element.contents();\n                }\n            } else {\n                element = content;\n                if (that._evalTemplate) {\n                    var result = $(kendo.template($(\"<div />\").append(element.clone(true)).html(), { useWithBlock: that._useWithBlock })(that.model || {}));\n\n                    // template uses DOM\n                    if ($.contains(document, element[0])) {\n                        element.replaceWith(result);\n                    }\n\n                    element = result;\n                }\n                if (that._wrap) {\n                    element = element.wrapAll(wrapper).parent();\n                }\n            }\n\n            return element;\n        },\n\n        _renderSections: function() {\n            var that = this;\n\n            if (that.options.wrapInSections) {\n                that._wrapper();\n                that._createContent();\n                that._createHeader();\n                that._createFooter();\n            }\n        },\n\n        _wrapper: function() {\n            var that = this;\n            var content = that.content;\n\n            if (content.is(roleSelector(\"view\"))) {\n                that.wrapper = that.content;\n            } else {\n                that.wrapper = content\n                    .wrap('<div data-' + kendo.ns + 'stretch=\"true\" data-' + kendo.ns + 'role=\"view\" data-' + kendo.ns + 'init-widgets=\"false\"></div>')\n                    .parent();\n            }\n\n            var wrapper = that.wrapper;\n\n            wrapper.attr(\"id\", that.id);\n\n            wrapper.addClass(classNames.view);\n            wrapper.addClass(classNames.widget);\n            wrapper.attr(\"role\", \"view\");\n        },\n\n        _createContent: function() {\n            var that = this;\n            var wrapper = $(that.wrapper);\n            var contentSelector = roleSelector(\"content\");\n\n            if (!wrapper.children(contentSelector)[0]) {\n                var ccontentElements = wrapper.children().filter(function() {\n                    var child = $(this);\n                    if (!child.is(roleSelector(\"header\")) && !child.is(roleSelector(\"footer\"))) {\n                        return child;\n                    }\n                });\n\n                ccontentElements.wrap(\"<div \" + attr(\"role\") + '=\"content\"></div>');\n            }\n\n            // use contentElement instead of content as view.content can be a string\n            this.contentElement = wrapper.children(roleSelector(\"content\"));\n\n            this.contentElement\n                .addClass(classNames.stretchedView)\n                .addClass(classNames.content);\n        },\n\n        _createHeader: function() {\n            var that = this;\n            var wrapper = that.wrapper;\n            this.header = wrapper.children(roleSelector(\"header\"));\n        },\n\n        _createFooter: function() {\n            var that = this;\n            var wrapper = that.wrapper;\n\n            this.footer = wrapper.children(roleSelector(\"footer\")).addClass(classNames.footer);\n        }\n    });\n\n    var ViewClone = kendo.Class.extend({\n        init: function(view) {\n            $.extend(this, {\n                element: view.element.clone(true),\n                transition: view.transition,\n                id: view.id\n            });\n\n            view.element.parent().append(this.element);\n        },\n\n        hideEnd: function() {\n            this.element.remove();\n        },\n\n        beforeTransition: $.noop,\n        afterTransition: $.noop\n    });\n\n    var Layout = View.extend({\n        init: function(content, options) {\n            View.fn.init.call(this, content, options);\n            this.containers = {};\n        },\n\n        container: function(selector) {\n            var container = this.containers[selector];\n\n            if (!container) {\n                container = this._createContainer(selector);\n                this.containers[selector] = container;\n            }\n\n            return container;\n        },\n\n        showIn: function(selector, view, transition) {\n            this.container(selector).show(view, transition);\n        },\n\n        _createContainer: function(selector) {\n            var root = this.render(),\n                element = root.find(selector),\n                container;\n\n            if (!element.length && root.is(selector)) {\n                if (root.is(selector)) {\n                    element = root;\n                } else {\n\n                    throw new Error(\"can't find a container with the specified \" + selector + \" selector\");\n                }\n            }\n\n            container = new ViewContainer(element);\n\n            container.bind(\"accepted\", function(e) {\n                e.view.render(element);\n            });\n\n            return container;\n        }\n    });\n\n    var Fragment = View.extend({\n        attach: function(view, placeholder) {\n            view.element.find(placeholder).replaceWith(this.render());\n        },\n\n        detach: function() {\n        }\n    });\n\n    var transitionRegExp = /^(\\w+)(:(\\w+))?( (\\w+))?$/;\n\n    function parseTransition(transition) {\n        if (!transition) {\n            return {};\n        }\n\n        var matches = transition.match(transitionRegExp) || [];\n\n        return {\n            type: matches[1],\n            direction: matches[3],\n            reverse: matches[5] === \"reverse\"\n        };\n    }\n\n    var ViewContainer = Observable.extend({\n        init: function(container) {\n            Observable.fn.init.call(this);\n            this.container = container;\n            this.history = [];\n            this.view = null;\n            this.running = false;\n        },\n\n        after: function() {\n            this.running = false;\n            this.trigger(\"complete\", { view: this.view });\n            this.trigger(\"after\");\n        },\n\n        end: function() {\n            this.view.showEnd();\n            this.previous.hideEnd();\n            this.after();\n        },\n\n        show: function(view, transition, locationID) {\n            if (!view.triggerBeforeShow() || (this.view && !this.view.triggerBeforeHide())) {\n                this.trigger(\"after\");\n                return false;\n            }\n\n            locationID = locationID || view.id;\n\n            var that = this,\n                current = (view === that.view) ? view.clone() : that.view,\n                history = that.history,\n                previousEntry = history[history.length - 2] || {},\n                back = previousEntry.id === locationID,\n                // If explicit transition is set, it will be with highest priority\n                // Next we will try using the history record transition or the view transition configuration\n                theTransition = transition || ( back ? history[history.length - 1].transition : view.transition ),\n                transitionData = parseTransition(theTransition);\n\n            if (that.running) {\n                that.effect.stop();\n            }\n\n            if (theTransition === \"none\") {\n                theTransition = null;\n            }\n\n            that.trigger(\"accepted\", { view: view });\n            that.view = view;\n            that.previous = current;\n            that.running = true;\n\n            if (!back) {\n                history.push({ id: locationID, transition: theTransition });\n            } else {\n                history.pop();\n            }\n\n            if (!current) {\n                view.showStart();\n                view.showEnd();\n                that.after();\n                return true;\n            }\n\n            if (!theTransition || !kendo.effects.enabled) {\n                view.showStart();\n                that.end();\n            } else {\n                // hide the view element before init/show - prevents blinks on iPad\n                // the replace effect will remove this class\n                view.element.addClass(\"k-fx-hidden\");\n                view.showStart();\n                // do not reverse the explicit transition\n                if (back && !transition) {\n                    transitionData.reverse = !transitionData.reverse;\n                }\n\n                that.effect = kendo.fx(view.element).replace(current.element, transitionData.type)\n                    .beforeTransition(function() {\n                        view.beforeTransition(\"show\");\n                        current.beforeTransition(\"hide\");\n                    })\n                    .afterTransition(function() {\n                        view.afterTransition(\"show\");\n                        current.afterTransition(\"hide\");\n                    })\n                    .direction(transitionData.direction)\n                    .setReverse(transitionData.reverse);\n\n                that.effect.run().then(function() { that.end(); });\n            }\n\n            return true;\n        },\n\n        destroy: function() {\n            var that = this;\n            var view = that.view;\n\n            if (view && view.destroy) {\n                view.destroy();\n            }\n        }\n    });\n\n    var ViewEngine = Observable.extend({\n        init: function(options) {\n            var that = this,\n                views,\n                container;\n\n            Observable.fn.init.call(that);\n            that.options = options;\n\n            $.extend(that, options);\n            that.sandbox = $(\"<div />\");\n            container = that.container;\n\n            views = that._hideViews(container);\n            that.rootView = views.first();\n            that.layouts = {};\n\n            that.viewContainer = new kendo.ViewContainer(that.container);\n\n            that.viewContainer.bind(\"accepted\", function(e) {\n                e.view.params = that.params;\n            });\n\n            that.viewContainer.bind(\"complete\", function(e) {\n                that.trigger(VIEW_SHOW, { view: e.view });\n            });\n\n            that.viewContainer.bind(AFTER, function() {\n                that.trigger(AFTER);\n            });\n\n            this.bind(this.events, options);\n        },\n\n        events: [\n            SHOW_START,\n            AFTER,\n            VIEW_SHOW,\n            LOAD_START,\n            LOAD_COMPLETE,\n            SAME_VIEW_REQUESTED,\n            VIEW_TYPE_DETERMINED\n        ],\n\n        destroy: function() {\n            var that = this;\n            var viewContainer = that.viewContainer;\n\n            kendo.destroy(that.container);\n\n            for (var id in that.layouts) {\n                this.layouts[id].destroy();\n            }\n\n            if (viewContainer) {\n                viewContainer.destroy();\n            }\n        },\n\n        view: function() {\n            return this.viewContainer.view;\n        },\n\n        showView: function(url, transition, params) {\n            url = url.replace(new RegExp(\"^\" + this.remoteViewURLPrefix), \"\");\n            if (url === \"\" && this.remoteViewURLPrefix) {\n                url = \"/\";\n            }\n\n            if (url.replace(/^#/, \"\") === this.url) {\n                this.trigger(SAME_VIEW_REQUESTED);\n                return false;\n            }\n\n            this.trigger(SHOW_START);\n\n            var that = this,\n                element = that._findViewElement(url),\n                view = kendo.widgetInstance(element);\n\n            that.url = url.replace(/^#/, \"\");\n\n            that.params = params;\n\n            if (view && view.reload) {\n                view.purge();\n                element = [];\n            }\n\n            this.trigger(VIEW_TYPE_DETERMINED, { remote: element.length === 0, url: url });\n\n            if (element[0]) {\n                if (!view) {\n                    view = that._createView(element);\n                }\n\n                return that.viewContainer.show(view, transition, url);\n            } else {\n                return true;\n            }\n        },\n\n        append: function(html, url) {\n            var sandbox = this.sandbox,\n                urlPath = (url || \"\").split(\"?\")[0],\n                container = this.container,\n                views,\n                view;\n\n            if (html.indexOf(\"<body\") > -1) {\n                html = $(\"<div>\").append(html).html();\n            }\n\n            sandbox[0].innerHTML = html;\n\n            container.append(sandbox.children(\"script, style\"));\n\n            views = this._hideViews(sandbox);\n            view = views.first();\n\n            // Generic HTML content found as remote view - no remote view markers\n            if (!view.length) {\n                views = view = sandbox.wrapInner(\"<div data-role=view />\").children(); // one element\n            }\n\n            if (urlPath) {\n                view.hide().attr(attr(\"url\"), urlPath);\n            }\n\n            container.append(views);\n\n            html = null; // Garbage collection.\n            return this._createView(view);\n        },\n\n        _locate: function(selectors) {\n            return roleSelector(selectors);\n        },\n\n        _findViewElement: function(url) {\n            var element,\n                urlPath = url.split(\"?\")[0];\n\n            if (!urlPath) {\n                return this.rootView;\n            }\n\n            element = this.container.children(\"[\" + attr(\"url\") + \"='\" + urlPath + \"']\");\n\n            // do not try to search for \"#/foo/bar\" id, jQuery throws error\n            if (!element[0] && urlPath.indexOf(\"/\") === -1) {\n                element = this.container.children(urlPath.charAt(0) === \"#\" ? urlPath : \"#\" + urlPath);\n            }\n\n            if (!element[0]) {\n                element = this._findViewElementById(url);\n            }\n\n            return element;\n        },\n\n        _findViewElementById: function(id) {\n            var element = this.container.children(\"[id='\" + id + \"']\");\n            return element;\n        },\n\n        _createView: function(element) {\n            //return this._createMobileView(element);\n            return this._createSpaView(element);\n        },\n\n        _createMobileView: function(element) {\n            return kendo.initWidget(element, {\n                defaultTransition: this.transition,\n                loader: this.loader,\n                container: this.container,\n                getLayout: this.getLayoutProxy,\n                modelScope: this.modelScope,\n                reload: attrValue(element, \"reload\")\n            }, ui.roles);\n        },\n\n        _createSpaView: function(element) {\n            var viewOptions = (this.options || {}).viewOptions || {};\n            return new kendo.View(element, {\n                renderOnInit: viewOptions.renderOnInit,\n                wrap: viewOptions.wrap || false,\n                wrapInSections: viewOptions.wrapInSections,\n                detachOnHide: viewOptions.detachOnHide,\n                detachOnDestroy: viewOptions.detachOnDestroy\n            });\n        },\n\n        _hideViews: function(container) {\n            return container.children(this._locate(\"view\")).hide();\n        }\n    });\n\n    kendo.ViewEngine = ViewEngine;\n\n    kendo.ViewContainer = ViewContainer;\n    kendo.Fragment = Fragment;\n    kendo.Layout = Layout;\n    kendo.View = View;\n    kendo.ViewClone = ViewClone;\n\n})(window.kendo.jQuery);\nexport default kendo;\n\n"],"mappings":"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"}