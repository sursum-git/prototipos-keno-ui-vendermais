{"version":3,"file":"kendo.dom.min.js","names":[],"sources":["../../src/kendo.dom.js"],"sourcesContent":["import \"./kendo.core.js\";\n\nexport const __meta__ = {\n    id: \"dom\",\n    name: \"Virtual DOM\",\n    category: \"framework\",\n    depends: [ \"core\" ],\n    advanced: true\n};\n\n(function(kendo) {\n    function Node() {\n        this.node = null;\n    }\n\n    Node.prototype = {\n        remove: function() {\n            if (this.node.parentNode) {\n                this.node.parentNode.removeChild(this.node);\n            }\n            this.attr = {};\n        },\n        attr: {},\n        text: function() {\n            return \"\";\n        }\n    };\n\n    function NullNode() {\n    }\n\n    NullNode.prototype = {\n        nodeName: \"#null\",\n        attr: { style: {} },\n        children: [],\n        remove: function() {\n        }\n    };\n\n    var NULL_NODE = new NullNode();\n\n    function Element(nodeName, attr, children) {\n        this.nodeName = nodeName;\n\n        this.attr = attr || {};\n\n        this.children = children || [];\n    }\n\n    Element.prototype = new Node();\n\n    Element.prototype.appendTo = function(parent) {\n        var node = typeof(this.nodeName) === \"string\" ? document.createElement(this.nodeName) : this.nodeName;\n\n        var children = this.children;\n\n        for (var index = 0; index < children.length; index++) {\n            children[index].render(node, NULL_NODE);\n        }\n\n        parent.appendChild(node);\n\n        return node;\n    };\n\n    Element.prototype.render = function(parent, cached) {\n        var node;\n\n        if (cached.nodeName !== this.nodeName) {\n            cached.remove();\n\n            node = this.appendTo(parent);\n        } else {\n            node = cached.node;\n\n            var index;\n\n            var children = this.children;\n\n            var length = children.length;\n\n            var cachedChildren = cached.children;\n\n            var cachedLength = cachedChildren.length;\n\n            if (Math.abs(cachedLength - length) > 2) {\n                this.render({\n                    appendChild: function(node) {\n                        parent.replaceChild(node, cached.node);\n                    }\n                }, NULL_NODE);\n\n                return;\n            }\n\n            for (index = 0; index < length; index++) {\n                children[index].render(node, cachedChildren[index] || NULL_NODE);\n            }\n\n            for (index = length; index < cachedLength; index++) {\n                cachedChildren[index].remove();\n            }\n        }\n\n        this.node = node;\n\n        this.syncAttributes(cached.attr);\n\n        this.removeAttributes(cached.attr);\n    };\n\n    Element.prototype.syncAttributes = function(cachedAttr) {\n        var attr = this.attr;\n\n        for (var name in attr) {\n            var value = attr[name];\n\n            var cachedValue = cachedAttr[name];\n\n            if (name === \"style\") {\n                this.setStyle(value, cachedValue);\n            } else if (value !== cachedValue) {\n                this.setAttribute(name, value, cachedValue);\n            }\n        }\n    };\n\n    Element.prototype.setStyle = function(style, cachedValue) {\n        var node = this.node;\n        var key;\n\n        if (cachedValue) {\n            for (key in style) {\n                if (style[key] !== cachedValue[key]) {\n                    node.style[key] = style[key];\n                }\n            }\n        } else {\n            for (key in style) {\n                node.style[key] = style[key];\n            }\n        }\n    };\n\n    Element.prototype.removeStyle = function(cachedStyle) {\n        var style = this.attr.style || {};\n        var node = this.node;\n\n        for (var key in cachedStyle) {\n            if (style[key] === undefined) {\n                node.style[key] = \"\";\n            }\n        }\n    };\n\n    Element.prototype.removeAttributes = function(cachedAttr) {\n        var attr = this.attr;\n\n        for (var name in cachedAttr) {\n            if (name === \"style\") {\n                this.removeStyle(cachedAttr.style);\n            } else if (attr[name] === undefined) {\n                this.removeAttribute(name);\n            }\n        }\n    };\n\n    Element.prototype.removeAttribute = function(name) {\n        var node = this.node;\n\n        if (name === \"style\") {\n            node.style.cssText = \"\";\n        } else if (name === \"className\") {\n            node.className = \"\";\n        } else {\n            node.removeAttribute(name);\n        }\n    };\n\n    Element.prototype.setAttribute = function(name, value) {\n        var node = this.node;\n\n        if (node[name] !== undefined) {\n            node[name] = value;\n        } else {\n            node.setAttribute(name, value);\n        }\n    };\n\n    Element.prototype.text = function() {\n        var str = \"\";\n        for (var i = 0; i < this.children.length; ++i) {\n            str += this.children[i].text();\n        }\n        return str;\n    };\n\n    function TextNode(nodeValue, force) {\n        this.nodeValue = String(nodeValue);\n        this.force = force;\n    }\n\n    TextNode.prototype = new Node();\n\n    TextNode.prototype.nodeName = \"#text\";\n\n    TextNode.prototype.render = function(parent, cached) {\n        var node;\n\n        if (cached.nodeName !== this.nodeName || this.force) {\n            cached.remove();\n\n            node = document.createTextNode(this.nodeValue);\n\n            parent.appendChild(node);\n        } else {\n            node = cached.node;\n\n            if (this.nodeValue !== cached.nodeValue) {\n                if (node.parentNode) {\n                    // sometimes in IE parentNode is null (reason unknown),\n                    // and IE throws an error when you try to set a\n                    // parentless' nodeValue, because why not.\n                    node.nodeValue = this.nodeValue;\n                }\n            }\n        }\n\n        this.node = node;\n    };\n\n    TextNode.prototype.text = function() {\n        return this.nodeValue;\n    };\n\n    function HtmlNode(html, replace) {\n        this.html = html;\n        this.replace = replace;\n    }\n\n    HtmlNode.prototype = {\n       nodeName: \"#html\",\n       attr: {},\n       remove: function() {\n           for (var index = 0; index < this.nodes.length; index++) {\n               var el = this.nodes[index];\n               if (el.parentNode) {\n                   el.parentNode.removeChild(el);\n               }\n           }\n       },\n       render: function(parent, cached) {\n        var lastChild, replacedNode;\n           if (cached.nodeName !== this.nodeName || cached.html !== this.html || this.replace) {\n               if (this.replace && cached.replace && cached.nodes && cached.nodes.length && cached.nodes[0].outerHTML) {\n                // This could be changed to a for loop that replaces several nodes instead of the first one. Presently, there is no use-case scenario for that.\n                replacedNode = replaceNode(parent, cached.nodes[0], this.html);\n                lastChild = parent.lastChild;\n               } else {\n                cached.remove();\n                lastChild = parent.lastChild;\n                insertHtml(parent, this.html);\n               }\n               this.nodes = [];\n\n               if (replacedNode) {\n                this.nodes.push(replacedNode);\n               }\n\n               for (var child = lastChild ? lastChild.nextSibling : parent.firstChild; child; child = child.nextSibling) {\n                   this.nodes.push(child);\n               }\n           } else {\n               this.nodes = cached.nodes.slice(0);\n           }\n       }\n    };\n\n    var HTML_CONTAINER = document.createElement(\"div\");\n\n    function insertHtml(node, html) {\n        HTML_CONTAINER.innerHTML = html;\n\n        while (HTML_CONTAINER.firstChild) {\n            node.appendChild(HTML_CONTAINER.firstChild);\n        }\n    }\n\n    function replaceNode(parent, node, html) {\n        var firstChild;\n\n        HTML_CONTAINER.innerHTML = html;\n        firstChild = HTML_CONTAINER.firstChild;\n\n        parent.replaceChild(firstChild, node);\n\n        return firstChild;\n    }\n\n    function html(value, force) {\n        return new HtmlNode(value, force);\n    }\n\n    function element(nodeName, attrs, children) {\n        return new Element(nodeName, attrs, children);\n    }\n\n    function text(value, force) {\n        return new TextNode(value, force);\n    }\n\n    function Tree(root) {\n       this.root = root;\n       this.children = [];\n    }\n\n    Tree.prototype = {\n        html: html,\n        element: element,\n        text: text,\n        render: function(children) {\n            var cachedChildren = this.children;\n\n            var index;\n\n            var length;\n\n            for (index = 0, length = children.length; index < length; index++) {\n                var cached = cachedChildren[index];\n                if (!cached) {\n                    cached = NULL_NODE;\n                } else if (!cached.node || !cached.node.parentNode) {\n                    cached.remove();\n                    cached = NULL_NODE;\n                }\n                children[index].render(this.root, cached);\n            }\n\n            for (index = length; index < cachedChildren.length; index++) {\n                cachedChildren[index].remove();\n            }\n\n            this.children = children;\n        }\n    };\n\n    kendo.dom = {\n        html: html,\n        text: text,\n        element: element,\n        Tree: Tree,\n        Node: Node\n    };\n})(window.kendo);\n\n"],"mappings":"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"}