/**
 * Kendo UI v2026.1.212 (http://www.telerik.com/kendo-ui)
 * Copyright 2026 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Kendo UI commercial licenses may be obtained at
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
 * If you do not own a commercial license, this file shall be governed by the trial license terms.
 */
(function(e,t){typeof exports==`object`&&typeof module<`u`?t(exports,require(`kendo.data.min.js`),require(`kendo.columnsorter.min.js`),require(`kendo.editable.min.js`),require(`kendo.window.min.js`),require(`kendo.aiprompt.min.js`),require(`kendo.badge.min.js`),require(`kendo.filtermenu.min.js`),require(`kendo.filtercell.min.js`),require(`kendo.columnmenu.min.js`),require(`kendo.groupable.min.js`),require(`kendo.pager.min.js`),require(`kendo.selectable.min.js`),require(`kendo.sortable.min.js`),require(`kendo.reorderable.min.js`),require(`kendo.resizable.min.js`),require(`kendo.ooxml.min.js`),require(`kendo.excel.min.js`),require(`kendo.pane.min.js`),require(`kendo.pdf.min.js`),require(`kendo.dialog.min.js`),require(`kendo.switch.min.js`),require(`kendo.html.button.min.js`),require(`kendo.textbox.min.js`),require(`kendo.form.min.js`),require(`kendo.toolbar.min.js`),require(`kendo.icons.min.js`),require(`kendo.smartbox.min.js`),require(`kendo.menu.min.js`),require(`kendo.loader.min.js`),require(`kendo.html.loadercontainer.min.js`),require(`kendo.core.min.js`)):typeof define==`function`&&define.amd?define(`exports,./kendo.data.min,./kendo.columnsorter.min,./kendo.editable.min,./kendo.window.min,./kendo.aiprompt.min,./kendo.badge.min,./kendo.filtermenu.min,./kendo.filtercell.min,./kendo.columnmenu.min,./kendo.groupable.min,./kendo.pager.min,./kendo.selectable.min,./kendo.sortable.min,./kendo.reorderable.min,./kendo.resizable.min,./kendo.ooxml.min,./kendo.excel.min,./kendo.pane.min,./kendo.pdf.min,./kendo.dialog.min,./kendo.switch.min,./kendo.html.button.min,./kendo.textbox.min,./kendo.form.min,./kendo.toolbar.min,./kendo.icons.min,./kendo.smartbox.min,./kendo.menu.min,./kendo.loader.min,./kendo.html.loadercontainer.min,./kendo.core.min`.split(`,`),t):(e=typeof globalThis<`u`?globalThis:e||self,t((e.kendo=e.kendo||{},e.kendo._globals=e.kendo._globals||{},e.kendo._globals.Grid={}),e.kendo._globals.Data,e.kendo._globals.Columnsorter,e.kendo._globals.Editable,e.kendo._globals.Window,e.kendo._globals.Aiprompt,e.kendo._globals.Badge,e.kendo._globals.Filtermenu,e.kendo._globals.Filtercell,e.kendo._globals.Columnmenu,e.kendo._globals.Groupable,e.kendo._globals.Pager,e.kendo._globals.Selectable,e.kendo._globals.Sortable,e.kendo._globals.Reorderable,e.kendo._globals.Resizable,e.kendo._globals.Ooxml,e.kendo._globals.Excel,e.kendo._globals.Pane,e.kendo._globals.Pdf,e.kendo._globals.Dialog,e.kendo._globals.Switch,e.kendo._globals.HtmlButton,e.kendo._globals.Textbox,e.kendo._globals.Form,e.kendo._globals.Toolbar,e.kendo._globals.Icons,e.kendo._globals.Smartbox,e.kendo._globals.Menu,e.kendo._globals.Loader,e.kendo._globals.HtmlLoadercontainer,e.kendo._globals.Core))})(this,function(e,t,n,r,i,a,o,s,c,l,u,d,f,p,m,h,g,_,v,y,b,x,S,C,w,T,E,D,O,k,A,j){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:`Module`}}),(function(e,t){var n=window.kendo,r=n.ui.ContextMenu,i=e.extend,a=n.htmlEncode,o=`action`,s=r.extend({init:function(e,t){var n=this;r.fn.init.call(n,e,t),n._overrideTemplates(),n._extendItems(),n.bind(`select`,n._onSelect.bind(n)),n.bind(`open`,n._onOpen.bind(n))},_overrideTemplates:function(){this.templates.sprite=({icon:e,spriteCssClass:t})=>`${e||t?n.ui.icon({icon:a(e||``),iconClass:a(t||``)}):``}`},defaultItems:{separator:{name:`separator`,separator:!0},create:{name:`create`,text:`Add`,icon:`plus`,command:`AddCommand`,rules:`isEditable`},edit:{name:`edit`,text:`Edit`,icon:`pencil`,command:`EditCommand`,rules:`isEditable`},destroy:{name:`destroy`,text:`Delete`,icon:`trash`,command:`DeleteCommand`,rules:`isEditable`},select:{name:`select`,text:`Select`,icon:`table-body`,rules:`isSelectable`,items:[{name:`selectRow`,text:`Row`,icon:`table-row-groups`,command:`SelectRowCommand`},{name:`selectAllRows`,text:`All rows`,icon:`grid`,command:`SelectAllRowsCommand`},{name:`clearSelection`,text:`Clear selection`,icon:`table-unmerge`,softRules:`hasSelection`,command:`ClearSelectionCommand`}]},copySelection:{name:`copySelection`,text:`Copy selection`,icon:`page-header-section`,rules:`isSelectable`,softRules:`hasSelection`,command:`CopySelectionCommand`,options:`withHeaders`},copySelectionNoHeaders:{name:`copySelectionNoHeaders`,text:`Copy selection (No Headers)`,icon:`file-txt`,rules:`isSelectable`,softRules:`hasSelection`,command:`CopySelectionCommand`},paste:{name:`paste`,text:`Paste (use CTRL/⌘ + V)`,rules:`allowPaste`,softRules:`alwaysDisabled`,icon:`clipboard`},reorderRow:{name:`reorderRow`,text:`Reorder row`,icon:`caret-alt-expand`,rules:`isRowReorderable`,softRules:`isSorted`,items:[{name:`reorderRowUp`,text:`Up`,icon:`caret-alt-up`,command:`ReorderRowCommand`,options:`dir:up`},{name:`reorderRowDown`,text:`Down`,icon:`caret-alt-down`,command:`ReorderRowCommand`,options:`dir:down`},{name:`reorderRowTop`,text:`Top`,icon:`caret-alt-to-top`,command:`ReorderRowCommand`,options:`dir:top`},{name:`reorderRowBottom`,text:`Bottom`,icon:`caret-alt-to-bottom`,command:`ReorderRowCommand`,options:`dir:bottom`}]},exportPDF:{name:`exportPDF`,text:`Export to PDF`,icon:`file-pdf`,command:`ExportPDFCommand`},exportExcel:{name:`exportExcel`,text:`Export to Excel`,icon:`file-excel`,items:[{name:`exportToExcelAll`,text:`All`,command:`ExportExcelCommand`},{name:`exportToExcelSelection`,text:`Selection`,command:`ExportExcelCommand`,softRules:`hasSelection`,options:`selection,withHeaders`},{name:`exportToExcelSelectionNoHeaders`,text:`Selection (No Headers)`,softRules:`hasSelection`,command:`ExportExcelCommand`,options:`selection`}]},sortAsc:{name:`sortAsc`,text:`Sort Ascending`,icon:`sort-asc-small`,rules:`isSortable`,command:`SortCommand`,options:`dir:asc`},sortDesc:{name:`sortDesc`,text:`Sort Descending`,icon:`sort-desc-small`,rules:`isSortable`,command:`SortCommand`,options:`dir:desc`},moveGroupPrevious:{name:`moveGroupPrevious`,text:`Move previous`,icon:`arrow-left`,rules:`isGroupable`,softRules:`canMoveGroupPrev`,command:`MoveGroupCommand`,options:`dir:prev`},moveGroupNext:{name:`moveGroupNext`,text:`Move next`,icon:`arrow-right`,rules:`isGroupable`,softRules:`canMoveGroupNext`,command:`MoveGroupCommand`,options:`dir:next`}},events:r.fn.events.concat([o]),_onSelect:function(t){var n=e(t.item).data(`command`),r=e(t.item).data(`options`);r=r?r.split(`,`).map(e=>{if(e.indexOf(`:`)>-1){var[t,e]=e.split(`:`);return{[t||`_`]:e}}return{[e]:!0}}).reduce((e,t)=>Object.assign(e,t),{}):{};var i=e(t.target);n&&this.action({command:n,options:Object.assign(r,{target:i})})},_onOpen:function(t){var r=t.sender,i=r.options.items,a=e(t.event?t.event.target:null);if(!i&&e.isEmptyObject(this.defaultItems)||a.closest(`.k-grid-column-menu`).length){t.preventDefault();return}this._toggleSeparatorVisibility(),r.element.find(`[${n.attr(`soft-rules`)}]`).each((t,i)=>{var o=e(i).attr(n.attr(`soft-rules`)).split(`;`);r.enable(i,this._validateSoftRules(o,a))})},_toggleSeparatorVisibility:function(){this.element.find(`.k-item.k-separator`).filter((t,n)=>{var r=e(n).prev(`.k-item:not(.k-separator)`),i=e(n).next(`.k-item:not(.k-separator)`);return!(r.length&&i.length)}).hide()},_extendItems:function(){var t=this,n=t.options.items,r,i;if(n&&n.length)for(var a=0;a<n.length;a++)r=n[a],i=e.isPlainObject(r)&&Object.keys(r).length===1&&r.name,i&&(r=r.name),e.isPlainObject(r)?t._append(r):t.defaultItems[r]?(r=t.defaultItems[r],t._append(r)):typeof r==`string`&&(r={name:r,text:r,spriteCssClass:r,command:r+`Command`},t._append(r));else for(var o in t.defaultItems)r=t.defaultItems[o],t._append(r)},_extendItem:function(e){var t=this,r=t.options.messages,a=e.attr||{};if(e.command&&(a[n.attr(`command`)]=e.command),e.options&&(a[n.attr(`options`)]=e.options),e.softRules&&(a[n.attr(`soft-rules`)]=e.softRules),e.items)for(var o=0;o<e.items.length;o++)e.items.forEach(e=>{t._extendItem(e)});i(e,{text:r.commands[e.name],icon:e.icon||``,spriteCssClass:e.spriteCssClass||``,attr:a,uid:n.guid()})},_validateSoftRules:function(e,t){if(!e||!(e&&e.length))return!0;for(var n=0;n<e.length;n++)if(!this._readState(e[n],t))return!1;return!0},_validateRules:function(e){var t=e.rules?e.rules.split(`;`):[];if(!t.length)return!0;for(var n=0;n<t.length;n++)if(!this._readState(t[n]))return!1;return!0},_readState:function(e,t){var r=this.options.states;return n.isFunction(r[e])?r[e](t):r[e]},_append:function(e){var t=this;t._extendItem(e),t._validateRules(e)&&t.append(e)},action:function(e){this.trigger(o,e)}});n.ui.grid=n.ui.grid||{},i(n.ui.grid,{ContextMenu:s})})(window.kendo.jQuery),(function(e,t){var n=window.kendo,r=e.extend,i=n.Class.extend({init:function(e){this.options=e,this.grid=e.grid}}),a=i.extend({exec:function(){var e=this,t=e.grid.groupable,n=e.options,r=n.target.closest(`.k-chip`),i=n.dir===`next`?`after`:`before`;(n.dir===`next`?r.next():r.prev())[i](r),t._change()}}),o=i.extend({exec:function(){var e=this,t=e.grid,n=t.dataSource,r=n.sort()||[],i=e.options,a=i.dir,o=t._getCellField(i.target),s=t.options.sortable.mode&&t.options.sortable.mode===`multiple`,c=t.options.compare,l,u;if(s){for(u=0,l=r.length;u<l;u++)if(r[u].field===o){r.splice(u,1);break}r.push({field:o,dir:a,compare:c})}else r=[{field:o,dir:a,compare:c}];n.sort(r)}}),s=i.extend({exec:function(){this.grid.addRow()}}),c=i.extend({exec:function(){var e=this,t=e.grid,n=t._editMode()===`incell`,r=n?e.options.target:e.options.target.closest(`tr`);n?t.editCell(r):t.editRow(r)}}),l=i.extend({exec:function(){var e=this,t=e.grid,n=e.options.target.closest(`tr`);t.removeRow(n)}}),u=i.extend({exec:function(){var e=this,t=e.grid,n=e.options.withHeaders;t.copySelectionToClipboard(n)}}),d=i.extend({exec:function(){var e=this,t=e.grid,r=n.ui.Selectable.parseOptions(t.options.selectable),i=e.options.target.closest(`tr`);t.select(r.cell?i.find(`td`):i)}}),f=i.extend({exec:function(){var e=this.grid,t=n.ui.Selectable.parseOptions(e.options.selectable),r=e.items();e.select(t.cell?r.find(`td`):r)}}),p=i.extend({exec:function(){this.grid.clearSelection()}}),m=i.extend({exec:function(){var e=this,t=e.grid,n=e.options.dir,r=e.options.target.closest(`tr`),i=r.index(),a;switch(n){case`up`:a=i-1;break;case`down`:a=i+2;break;case`top`:a=0;break;case`bottom`:a=t.items().length;break}t.reorderRowTo(r,a)}}),h=i.extend({exec:function(){this.grid.saveAsPDF()}}),g=i.extend({exec:function(){var e=this,t=e.options.selection,n=e.options.withHeaders,r=e.grid;t?r.exportSelectedToExcel(n):r.saveAsExcel()}});n.ui.grid=n.ui.grid||{},r(n.ui.grid,{GridCommand:i,commands:{SortCommand:o,AddCommand:s,EditCommand:c,DeleteCommand:l,CopySelectionCommand:u,SelectRowCommand:d,SelectAllRowsCommand:f,ClearSelectionCommand:p,ReorderRowCommand:m,ExportPDFCommand:h,ExportExcelCommand:g,MoveGroupCommand:a}})})(window.kendo.jQuery);let M=kendo.jQuery;function ee(e,t){var n=this,r=n.wrapper;if(e&&n.loader){if(!n.wrapper.find(`.k-loader-container`).length){var i={message:`Loading...`,overlayColor:`dark`,themeColor:`primary`};i=M.extend({},i,t);let e=kendo.html.renderLoaderContainer(M(`<div></div>`),i),a=n.wrapper.width(),o=M(`<div class='k-loading-pdf-mask'></div>`),s=n.wrapper.clone().removeAttr(`id`).addClass(`k-loading-pdf-progress`).width(a);o.append(s),o.append(e),n.mask=o,r.append(o),n.wrapperClone=o.find(`.k-pivotgrid`),n.loaderOverlay=o.find(`.k-loader-container`),n.loader.element.insertBefore(o.find(`.k-loader-container-label`))}}else n.loaderOverlay.length&&(kendo.destroy(n.loaderOverlay),n.mask.remove())}let te={id:`grid`,name:`Grid`,category:`web`,description:`The Grid widget displays tabular data and offers rich support for interacting with data,including paging, sorting, grouping, and selection.`,depends:[`data`,`columnsorter`,`sortable`,`toolbar`,`html.button`,`icons`,`menu`,`loader`,`html.loadercontainer`,`badge`,`aiprompt`,`smartbox`],features:[{id:`grid-editing`,name:`Editing`,description:`Support for record editing`,depends:[`editable`,`window`,`textbox`,`form`]},{id:`grid-filtering`,name:`Filtering`,description:`Support for record filtering`,depends:[`filtermenu`]},{id:`grid-columnmenu`,name:`Column menu`,description:`Support for header column menu`,depends:[`columnmenu`]},{id:`grid-grouping`,name:`Grouping`,description:`Support for grid grouping`,depends:[`groupable`]},{id:`grid-filtercell`,name:`Row filter`,description:`Support for grid header filtering`,depends:[`filtercell`]},{id:`grid-paging`,name:`Paging`,description:`Support for grid paging`,depends:[`pager`]},{id:`grid-selection`,name:`Selection`,description:`Support for row selection`,depends:[`selectable`]},{id:`grid-column-reorder`,name:`Column reordering`,description:`Support for column reordering`,depends:[`reorderable`]},{id:`grid-column-resize`,name:`Column resizing`,description:`Support for column resizing`,depends:[`resizable`]},{id:`grid-mobile`,name:`Grid adaptive rendering`,description:`Support for adaptive rendering`,depends:[`dialog`,`pane`,`switch`]},{id:`grid-excel-export`,name:`Excel export`,description:`Export grid data as Excel spreadsheet`,depends:[`excel`]},{id:`grid-pdf-export`,name:`PDF export`,description:`Export grid data as PDF`,depends:[`pdf`,`drawing`]}]};(function(e,t){let n=window.kendo,r=n.ui,i=n.data.DataSource,a=n.data.ObservableObject,o=n.support.tbodyInnerHtml,s=n._activeElement,c=r.Widget,l=n._outerWidth,u=n._outerHeight,d=n.keys,f=n.type,p=e.isPlainObject,m=e.extend,h=e.map,g=e.grep,_=Array.isArray,v=e.inArray,y=Array.prototype.push,b=n.isFunction,x=n.htmlEncode,S=e.isEmptyObject,C=e.contains,w=Math,T=`progress`,E=`error`,D=`:not(.k-group-cell):not([`+n.attr(`virtual`)+`]):not(.k-hierarchy-cell:not(:has(.k-icon.k-i-caret-alt-down,.k-icon.k-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-down,.k-svg-icon.k-svg-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-left,.k-icon.k-i-caret-alt-left))):visible`,O=`:not([`+n.attr(`virtual`)+`]):not(.k-hierarchy-cell:not(:has(.k-icon.k-i-caret-alt-down,.k-icon.k-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-down,.k-svg-icon.k-svg-i-caret-alt-right,.k-svg-icon.k-svg-i-caret-alt-left,.k-icon.k-i-caret-alt-left)))`,k=`tr:not(.k-footer-template):visible`,A=`:not(.k-group-cell):not(.k-detail-cell):not(.k-hierarchy-cell):visible`,j=`tr:not(.k-grouping-row):not(.k-detail-row):not(.k-footer-template):not(.k-group-footer):visible`,M=`col:not(.k-group-col, .k-hierarchy-col)`,te=`th.k-header:not(.k-group-cell):not(.k-hierarchy-cell)`,ne=`a[class*='-i-caret-alt-down']`,re=`a[class*='-i-caret-alt-right']`,ie=re,ae=`k-grid-stack`,N=`.kendoGrid`,oe=`edit`,se=`beforeEdit`,ce=`save`,le=`remove`,ue=`detailInit`,de=`filterMenuInit`,fe=`columnMenuInit`,pe=`filterMenuOpen`,me=`columnMenuOpen`,he=`cellClose`,ge=`changing`,P=`change`,_e=`columnHide`,ve=`columnShow`,ye=`saveChanges`,be=`dataBound`,xe=`detailExpand`,Se=`detailCollapse`,Ce=`itemchange`,we=`page`,Te=`paging`,Ee=`paste`,De=`scroll`,Oe=`sync`,ke=`loadStart`,Ae=`loadEnd`,je=`requestEnd`,Me=`k-focus`,Ne=`k-highlighted`,Pe=`k-hover`,Fe=`k-active`,F=`:kendoFocusable`,Ie=`.k-command-cell,.k-select-checkbox,.k-grid-stack-cell[tabindex]`,I=`k-selected`,Le=`k-checkbox`,Re=`input[data-role='checkbox'].k-select-checkbox.`+Le,ze=`k-grid-norecords`,Be=`k-link`,Ve=`k-icon`,He=`k-sort-order`,Ue=`k-sorted`,We=`k-header`,Ge=`k-grid-column-menu`,Ke=`k-grid-filter-menu`,qe=`k-grid-content-sticky`,Je=`k-grid-header-sticky`,Ye=`k-grid-footer-sticky`,Xe=`k-grid-no-left-border`,Ze=`k-grid-column-template`,L=`k-grouping-row`,Qe=`resize`,$e=`rowResize`,et=`columnResize`,tt=`columnReorder`,nt=`columnLock`,rt=`columnUnlock`,it=`columnStick`,at=`columnUnstick`,ot=`rowReorder`,st=`navigate`,R=`click`,ct=`mousedown`,lt=`mouseup`,ut=`mouseenter`,dt=`mouseleave`,ft=`mousemove`,pt=`dblclick`,mt=`height`,ht=`width`,gt=`auto`,_t=`tabIndex`,z=`function`,B=`string`,vt=`bottom`,yt=`container-for`,bt=`field`,xt=`input`,St=`incell`,Ct=`inline`,wt=`overflow`,Tt=`sort`,Et=`group-sort`,Dt=`Collapse`,Ot=`Expand`,V=`aria-label`,kt=`aria-owns`,At=`aria-rowcount`,jt=`aria-colcount`,Mt=`aria-colindex`,Nt=`aria-rowindex`,Pt=`aria-expanded`,Ft=`aria-checked`,It=`aria-activedescendant`,H=`role`,U=`none`,Lt=`rowgroup`,Rt=`columnheader`,zt=`gridcell`,Bt=/(\}|\#)/gi,Vt=`[\\x20\\t\\r\\n\\f]`,Ht=RegExp(`(^|`+Vt+`)(k-group-cell|k-hierarchy-cell)([\\x20\\t\\r\\n\\f]|$)`),Ut=RegExp(`(^|`+Vt+`)(k-filter-row)([\\x20\\t\\r\\n\\f]|$)`),Wt=({className:e,attr:t,text:r})=>`<button type="button" class="${e}" ${t}>${n.htmlEncode(r)}</button>`,Gt=(e,t,n)=>`<span class="k-checkbox-wrap"><input tabindex="-1" class="k-select-checkbox ${Le} ${e}" data-role="checkbox" aria-label="${t}" aria-checked="false" type="checkbox"></span>${n?`<label class="k-checkbox-label">${n}</label>`:``}`,Kt=({size:e})=>Gt(e,`Select row`),qt=({size:e,label:t})=>Gt(e,`Select all rows`,t),Jt=()=>n.ui.icon(`reorder`),Yt=({text:e})=>`<span class="k-cell-inner"><span class="k-link"><span class="k-column-title">${e}</span></span></span>`,W=!1,G=n.support.browser;var Xt=G.msie&&G.version===11,Zt=/Mac OS/.test(navigator.userAgent),Qt={content:`k-content`,scrollContainer:`k-scroll-container`,headerCellInner:`k-cell-inner`},$t,en=[`copySelection`,`copySelectionNoHeaders`,`paste`,`separator`,`create`,`edit`,`destroy`,`select`,`separator`,`reorderRow`,`exportPDF`,`exportExcel`,`separator`],tn=[`sortAsc`,`sortDesc`,`separator`],nn=[`moveGroupPrevious`,`moveGroupNext`,`separator`];let rn=[`.k-grid-edit-command`,`.k-grid-remove-command`,`.k-grid-save-changes`,`.k-grid-cancel-changes`,`.k-grid-cancel-command`,`.k-grid-save-command`].join(`, `),an=function(e){return{sort:[{command:`clear-sort`,text:e.clearButtons?e.clearButtons.clearSorting:`Clear Sorting`,size:`large`,icon:`x`},{command:`done`,text:e.applyButtons?e.applyButtons.applySorting:`Done`,size:`large`,themeColor:`primary`,icon:`check`}],group:[{command:`clear-group`,text:e.clearButtons?e.clearButtons.clearGrouping:`Clear Grouping`,size:`large`,icon:`x`},{command:`done`,text:e.applyButtons?e.applyButtons.applyGrouping:`Done`,size:`large`,themeColor:`primary`,icon:`check`}],filter:[{command:`clear-filter`,text:e.clearButtons?e.clearButtons.clearFiltering:`Clear All Filters`,size:`large`,icon:`filter-clear`}],"column-chooser":[{text:e.clearButtons?e.clearButtons.columnChooserReset:`Reset`,icon:`arrow-rotate-ccw`},{text:e.applyButtons?e.applyButtons.columnChooserApply:`Apply`,themeColor:`primary`,icon:`check`}]}};r.Pager&&($t=r.Pager.extend({init:function(e,t){r.Pager.fn.init.call(this,e,m(!0,{},{messages:r.Pager.prototype.options.messages},t)),this.dataSource.options.useRanges=!0,this.dataSource._omitPrefetch=!0},options:{name:`GroupsPager`},totalPages:function(){var e=this;return Math.ceil((e._collapsedTotal()||0)/(e.pageSize()||1))},_collapsedTotal:function(){var e=this.dataSource;return e&&e.groupsTotal(!0)||0}}));var on=c.extend({init:function(e,t){var n=this;c.fn.init.call(n,e,t),n._refreshHandler=n.refresh.bind(n),n.setDataSource(t.dataSource),n.wrap()},setDataSource:function(e){var t=this;t.dataSource&&t.dataSource.unbind(P,t._refreshHandler),t.dataSource=e,t.dataSource.bind(P,t._refreshHandler),t.dataSource.options.useRanges=!0,t.dataSource.options.virtual=!0},options:{name:`VirtualScrollable`,itemHeight:e.noop,prefetch:!0,maxScrollHeight:25e4},events:[Te,we,De,ke,Ae],destroy:function(){var e=this;c.fn.destroy.call(e),e.dataSource.unbind(P,e._refreshHandler),e.wrapper.add(e.verticalScrollbar).off(N),clearTimeout(e._timeout),e._scrollingTimeout&&clearTimeout(e._scrollingTimeout),e.drag&&=(e.drag.destroy(),null),e.wrapper=e.element=e.verticalScrollbar=null,e._refreshHandler=null},wrap:function(){var t=this,r=n.support.scrollbar()+1,i=t.element,a;i.css({width:gt,overflow:`hidden`}).css(W?`padding-left`:`padding-right`,r),t.content=i.children().first(),a=t.wrapper=t.content.wrap(`<div class="k-virtual-scrollable-wrap"/>`).parent().on(`DOMMouseScroll`+N+` mousewheel.kendoGrid`,t._wheelScroll.bind(t)),t._wrapper(),(n.support.kineticScrollNeeded||n.support.touch)&&(t.wrapper.css(`touch-action`,U),t.drag=new n.UserEvents(t.wrapper,{global:!0,allowSelection:!0,start:function(e){e.sender.capture()},move:function(e){t.verticalScrollbar.scrollTop(t.verticalScrollbar.scrollTop()-e.y.delta),n.scrollLeft(a,n.scrollLeft(a)-e.x.delta),e.preventDefault()}})),t.verticalScrollbar=e(`<div class="k-scrollbar k-scrollbar-vertical" tabindex="-1"/>`).css({width:r}).appendTo(i).on(`scroll`+N,t._scroll.bind(t))},_wrapper:function(){var e=this;Xt&&(e.wrapper.css({"overflow-y":De}),e.element.css(W?`padding-left`:`padding-right`,0))},_wheelScroll:function(e){if(!e.ctrlKey){var t=this.verticalScrollbar,r=t.scrollTop(),i=n.wheelDeltaY(e);i&&!(i>0&&r===0)&&!(i<0&&r+t[0].clientHeight==t[0].scrollHeight)&&(e.preventDefault(),this.verticalScrollbar.scrollTop(r+-i))}},_scroll:function(e){var t=this,n=!t.options.prefetch,r=e.currentTarget.scrollTop,i=t.dataSource,a=t.itemHeight,o=i.skip()||0,s=t._rangeStart||o,c=t.element.innerHeight(),l=!!(t._scrollbarTop&&t._scrollbarTop>r),u=w.max(w.floor(r/a),0),d=l?w.ceil(c/a):w.floor(c/a),f=w.max(u+d,0);if(t._preventScroll){t._preventScroll=!1;return}t._prevScrollTop=t._scrollTop,t._scrollTop=r-s*a,t._scrollbarTop=r,t._scrolling=n,t._fetch(u,f,l)||(t.wrapper[0].scrollTop=t._scrollTop),t.trigger(De),n&&(t._scrollingTimeout&&clearTimeout(t._scrollingTimeout),t._scrollingTimeout=setTimeout(function(){t._scrolling=!1,t._page(t._rangeStart,t.dataSource.take())},100))},scrollToTop:function(){this._scrollTo(0)},scrollToBottom:function(){var e=this.verticalScrollbar;this._scrollTo(e[0].scrollHeight-e.height())},_scrollWrapperToTop:function(){this.wrapper.scrollTop(0)},_scrollWrapperToBottom:function(){this.wrapper.scrollTop(this.wrapper[0].scrollHeight)},_scrollWrapperOnColumnResize:function(){var e=this,t=this.wrapper,r=t.scrollTop();t[0].scrollWidth>t[0].clientWidth?(!e._wrapperScrolled&&r||e._isScrolledToBottom())&&(t.scrollTop(r+n.support.scrollbar()),e._scrollTop=t.scrollTop(),e._wrapperScrolled=!0):e._wrapperScrolled&&=(e._isWrapperScrolledToBottom()||(t.scrollTop(r-n.support.scrollbar()),e._scrollTop=t.scrollTop()),!1)},_scrollTo:function(e,t){var n=this,r=n.verticalScrollbar;r.scrollTop()!==e&&(n._preventScroll=!0),n.wrapper.scrollTop(e),n._scrollTop=n.wrapper.scrollTop(),r.scrollTop(t??e),n._scrollbarTop=r.scrollTop()},_isScrolledToTop:function(){return this.verticalScrollbar.scrollTop()===0},_isScrolledToBottom:function(){var e=this.verticalScrollbar,t=e.scrollTop();return t>0&&t>=parseInt(e[0].scrollHeight-e.height(),10)},_isWrapperScrolledToBottom:function(){var e=this.wrapper;return e.scrollTop()>=parseInt(e[0].scrollHeight-e.height(),10)},itemIndex:function(e){return(this._rangeStart||this.dataSource.skip()||0)+e},position:function(e){var t=this._rangeStart||this.dataSource.skip()||0,n=this.dataSource.pageSize(),r=e>t?e-t:t-e-1;return r>n?n:r},scrollIntoView:function(e){var t=this.wrapper[0],n=t.clientHeight,r=this._isScrolledToBottom()?t.scrollTop:this._scrollTop||t.scrollTop,i=e[0].offsetTop,a=e[0].offsetHeight;r>i?this.verticalScrollbar[0].scrollTop-=n/2:i+a>=r+n&&(this.verticalScrollbar[0].scrollTop+=n/2)},_fetch:function(t,n,r){var i=this,a=i.dataSource,o=i.itemHeight,s=a.take(),c=i._rangeStart||a.skip()||0,l=w.floor(t/s)*s,u=!1,d=.33,f=i.verticalScrollbar,p=G.webkit?1:0,m=a._isGroupPaged()?a.groupsTotal(!0):a.total();return t<c?(u=!0,i._alwaysScrollTop?(c=w.min(t,m-s),i._scrollTop=0):(c=w.max(0,n-s),i._scrollTop=f.scrollTop()-c*o),i._page(c,s)):n>=c+s&&!r?(u=!0,c=w.min(t,m-s),f.scrollTop()>=f[0].scrollHeight-f[0].offsetHeight-p?i._scrollTop=i.wrapper[0].scrollHeight-i.wrapper[0].offsetHeight:i.dataSource._isGroupPaged()&&t>=m-s?i._scrollTop=i.wrapper[0].scrollHeight-i.wrapper[0].offsetHeight-(i._scrollTop-i._prevScrollTop):i._alwaysScrollTop?i._scrollTop=0:i._scrollTop=o,i._page(c,s)):!i._fetching&&i.options.prefetch&&(t<l+s-s*d&&t>s&&a.prefetch(l-s,s,e.noop),n>l+s*d&&a.prefetch(l+s,s,e.noop)),u},fetching:function(){return this._fetching},_page:function(t,n,r){var i=this,a=!i.options.prefetch,o=i.dataSource,s=o._isGroupPaged();r=b(r)?r:e.noop,!i.trigger(Te,{skip:t,take:n})&&(clearTimeout(i._timeout),i._fetching=!0,i._rangeStart=t,s&&o._groupRangeExists(t,t+n)||!s&&o.inRange(t,n)?(i.trigger(ke),o.range(t,n,function(){i.trigger(Ae),r(),i.trigger(we)},`page`)):(a||i.trigger(ke),i._timeout=setTimeout(function(){i._scrolling||(a&&i.trigger(ke),o.range(t,n,function(){i.trigger(Ae),r(),i.trigger(we)}))},100)))},repaintScrollbar:function(t){var r=this,i=r.options.maxScrollHeight,a=r.dataSource,o=n.support.kineticScrollNeeded?0:n.support.scrollbar(),s=r.wrapper[0],c,l,u=r._isScrolledToBottom();l=r.itemHeight=r.options.itemHeight()||0;var d=s.scrollWidth>s.offsetWidth?o:0;c=(a._isGroupPaged()?a.groupsTotal(!0):a.total())*l+d;var f=e(Array(w.floor(c/i)+1).join(`<div></div>`)).css({width:`1px`,height:`${i}px`});c%i&&(f=f.add(e(`<div></div>`).css({width:`1px`,height:`${c%i}px`}))),r.verticalScrollbar.empty().append(f),u&&!r._isScrolledToBottom()&&!r.dataSource._isGroupPaged()&&r.scrollToBottom(),r._scrollTop!==void 0&&t&&(s.scrollTop=r._scrollTop,r._scrollWrapperOnColumnResize())},refresh:function(e){var t=this,n=t.dataSource,r=t._rangeStart,i=(e||{}).action,a=t._isScrolledToBottom()||!i||i!==Ce&&i!==le&&i!==Oe;t.trigger(Ae),clearTimeout(t._timeout),t.repaintScrollbar(a),t.drag&&t.drag.cancel(),r!==void 0&&!t._fetching&&((!i||i!==Oe&&i!==Ce&&i!==`expandGroup`)&&(t._rangeStart=n.skip()),n.page()===1&&(!i||i!==Oe&&i!==Ce&&i!==`expandGroup`&&i!==`collapseGroup`)&&(t.verticalScrollbar[0].scrollTop=0)),t._programmaticallyScrolling&&t._programmaticallyScrolling.state()!==`resolved`&&t._programmaticallyScrolling.resolve(),t._alwaysScrollTop&&delete t._alwaysScrollTop,t._fetching=!1}});function sn(e){if(!e||!Array.isArray(e.filters))return[];let t=[];function n(e){e.logic&&e.filters?e.filters.forEach(n):e.field&&e.operator&&t.push({...e})}return e.filters.forEach(n),t}function cn(e){if(!e||!Array.isArray(e))return[];let t=[];function n(e){t.push({...e}),e.items&&Array.isArray(e.items)&&e.items.forEach(e=>{e.items&&n(e)})}return e.forEach(n),t}function ln(e){return!e||!Array.isArray(e)?[]:e}function un(e,t){let n={sort:ln,filter:sn,group:cn}[t];return n?n(e).some(e=>!e.field):!1}function dn(e,t){return`[`+n.attr(e)+`=`+t+`]`}function fn(e){return Array(e+1).join(`<td class="k-group-cell k-table-group-td k-table-td">&nbsp;</td>`)}function pn(n){return n.filter((n,r)=>{let i=e(r),a=i.children(`.k-select-checkbox`).length>0,o=i.find(`> .k-checkbox-wrap > .k-select-checkbox`).length>0;return i.attr(`[ref-grid-drag-cell]`)===t&&!i.hasClass(`k-command-cell`)&&!a&&!o})}function mn(e){var t,n=` `;if(e){if(typeof e===B)return e;for(t in e)e[t]!==``&&(n+=t+`="`+e[t]+`"`)}return n}function hn(e,t){return t?e.map(e=>({...e,logic:(e?.logic||e?.logicalOperator||`and`).toLowerCase(),filters:e?.filters?.map(e=>{let n=e.field;return t&&t[n]&&t[n].type.toLowerCase()===`date`?{...e,value:new Date(e.value)}:e})}))||[]:e}var K={aiassistant:{text:``,icon:`sparkles`,rounded:`full`,className:`k-grid-ai-assistant-tool`,themeColor:`primary`},create:{text:`Add`,className:`k-grid-add`,iconClass:`k-i-plus`},cancel:{text:`Cancel changes`,className:`k-grid-cancel-changes`,iconClass:`k-i-cancel`},save:{text:`Save changes`,className:`k-grid-save-changes`,iconClass:`k-i-check`},selectall:{text:`Select all`},destroy:{text:`Delete`,className:`k-grid-remove-command`,iconClass:`k-i-trash`},edit:{text:`Edit`,className:`k-grid-edit-command`,iconClass:`k-i-pencil`},update:{text:`Save`,className:`k-grid-save-command`,iconClass:`k-i-save`},canceledit:{text:`Cancel`,className:`k-grid-cancel-command`,iconClass:`k-i-cancel`},excel:{text:`Export to Excel`,className:`k-grid-excel`,iconClass:`k-i-file-excel`},pdf:{text:`Export to PDF`,className:`k-grid-pdf`,iconClass:`k-i-file-pdf`},search:{text:`Search...`,className:`k-grid-search`},columns:{text:`Columns`,type:`button`,icon:`columns`,fillMode:`flat`,overflow:`never`,className:`k-grid-column-menu`,attr:{"aria-haspopup":`menu`}},columnchooser:{text:`Columns`,type:`button`,icon:`columns`,overflow:`never`,className:`k-grid-column-chooser`,attr:{"aria-haspopup":`menu`}},sort:{text:`Sort`,type:`button`,icon:`arrows-swap`,overflow:`never`,className:`k-grid-sort-tool`,attr:{"aria-haspopup":`menu`},clearButton:!0},filter:{text:`Filter`,type:`button`,icon:`filter`,overflow:`never`,className:`k-grid-filter-tool`,attr:{"aria-haspopup":`menu`},clearButton:!0},group:{text:`Group`,type:`button`,icon:`group`,overflow:`never`,className:`k-grid-group-tool`,attr:{"aria-haspopup":`menu`},clearButton:!0},smartbox:{overflow:`never`,template:()=>`<input ref-grid-smartbox-input data-role="smartbox" />`}};let gn={GridSort:`sort`,GridClearSort:`sort`,GridFilter:`filter`,GridClearFilter:`filter`,GridGroup:`group`,GridClearGroup:`group`,GridPage:`page`,GridPageSize:`pageSize`},_n={GridHighlight:`highlight`,GridClearHighlight:`highlight`,GridSelect:`select`,GridClearSelect:`select`,GridColumnResize:`resizeColumn`,GridColumnHide:`hideColumn`,GridColumnShow:`showColumn`,GridColumnLock:`lockColumn`,GridColumnUnlock:`unlockColumn`,GridColumnReorder:`reorderColumn`,GridExportPDF:`_exportPdf`,GridExportExcel:`_exportExcel`},vn=n.guid();function yn(e){return{id:vn,prompt:``,output:e.outputPlaceholder,skipHeader:!0,skipActions:!0}}function bn(t,n){e(`th, th .k-grid-filter-menu, th .k-link`,t).add(document.body).css(`cursor`,n)}function xn(t,n,r,i,a){var o=n;n=e(),a||=1;for(var s=0;s<a;s++)n=n.add(t.eq(o+s));typeof r==`number`?n[i?`insertBefore`:`insertAfter`](t.eq(r)):n.appendTo(r)}function Sn(t,n,r){return e(t).add(n).find(r)}function Cn(e,t,n){var r,i,a,o;for(n=_(n)?n:[n],r=0,i=n.length;r<i;r++)a=n[r],p(a)&&a.click&&(o=a.name||a.text,t.on(R+N,`.k-grid-`+(o||``).replace(/\s/g,``),{commandName:o},a.click.bind(e)))}function wn(e,r,i,a,o){return h(e,function(e){e=typeof e===B?{field:e}:e;var s;e.parentIds=o,e.attributes instanceof Function&&(e._attributesFunction=e.attributes),!In(e)||i?(e.attributes=Or(e.attributes),e.footerAttributes=Or(e.footerAttributes),e.headerAttributes=Or(e.headerAttributes),s=!0):(In(e)||!i)&&(e.attributes=Ar(e.attributes),e.footerAttributes=Ar(e.footerAttributes),e.headerAttributes=Ar(e.headerAttributes),s=t);var c=n.guid();return a&&!e.locked&&(e.locked=a),e.headerAttributes=m({headers:o},e.headerAttributes),e.headerAttributes.id?e.uid=c=e.headerAttributes.id:(e.headerAttributes=m({id:c},e.headerAttributes),e.uid=c),e.columns&&=wn(e.columns,r,s,e.locked,o?o+` `+c:c),m({encoded:r,hidden:s,locked:a},e)})}function Tn(e,t){var n=[];return En(e,t,n),n[n.length-1]}function En(e,t,n){n||=[];for(var r=0;r<t.length;r++){if(e===t[r])return!0;if(t[r].columns){var i=n.length;if(n.push(t[r]),!En(e,t[r].columns,n))n.splice(i,n.length-i);else return!0}}return!1}function Dn(e,t){An(e,t,t)}function On(e){e.attr(_t,1)}function kn(e){e.removeAttr(_t)}function An(e,t,n){var r=n?Ar:Or;e.hidden=!t,e.attributes=r(e.attributes),e.footerAttributes=r(e.footerAttributes),e.headerAttributes=r(e.headerAttributes)}function jn(e,t){Mn(e);var n=e._hideByMedia;An(e,t,n?e.matchesMedia:t)}function Mn(e){e.matchesMedia=Nn(e)}function Nn(e){return e&&(Rn(e.media)||!Rn(e.media)&&n.matchesMedia(e.media))}function Pn(){return this.style.display!==U&&!this.classList.contains(`k-hidden`)}function Fn(t){return e(t)[0].style.display!==U&&!e(t)[0].classList.contains(`k-hidden`)}function In(e){return q([e]).length>0}function q(e){return g(e,function(e){var t=!e.hidden&&e.matchesMedia!==!1;return t&&e.columns&&(t=q(e.columns).length>0),t})}function Ln(e){for(var t=[],n,r=0;r<e.length;r++){if(n=e[r],!Rn(n.media)){if(!Rn(n.minScreenWidth))throw Error(`Using 'media' and 'minScreenWidth' options at the same time is not supported.`);t.push(n)}n.columns&&(t=t.concat(Ln(n.columns)))}return t}function Rn(e){return e===void 0}function zn(t){return e(t).map(function(){return this.toArray()})}function Bn(e,t,n){var r=qn(J(t)),i=qn(Y(t)),a=e.rowSpan;n?r>i?e.rowSpan=a-(r-i)||1:e.rowSpan=a+(i-r):r>i?e.rowSpan=a+(r-i):e.rowSpan=a-(i-r)||1}function Vn(e,t){for(var n=0;n<e.length;n++)if(e[n].field==t)return e[n]}function Hn(e,t,n){let r;return t.forEach(t=>{r=!1;let i,a=e.find((e,n)=>{if(e.field===t.field)return i=n,!0});if(a&&n===`group`){r=!0;return}a&&e.splice(i,1),e.push(t)}),{descriptors:e,shouldContinue:r}}function Un(e,t,n){let r=e.sortable||e?.columnMenu?.sortable,i=e.filterable||e?.columnMenu?.filterable,a=e.selectable||n,o=e?.groupable?.enabled||e.groupable||t._groupPaging;return{GridSort:r,GridClearSort:r,GridFilter:i,GridClearFilter:i,GridGroup:o,GridClearGroup:o,GridSelect:a,GridClearSelect:a,GridColumnResize:e.resizable||e?.resizable?.columns,GridColumnReorder:e.reorderable||e?.reorderable?.columns,GridPage:e?.scrollable?.virtual&&e?.scrollable?.virtual===`columns`&&e.pageable||!e.scrollable?.endless&&e.pageable||e.pageable,GridPageSize:!0,GridColumnHide:!0,GridColumnShow:!0,GridColumnLock:!0,GridColumnUnlock:!0}}function Wn({mode:e,hasSelected:t,hasChanges:n,editContainerVisible:r,differentSelectionThanEditing:i,_editableIsClosing:a,_isEditableEnabled:o,options:s}){let c=/\b(k-grid-edit-command|k-grid-remove-command|k-grid-save-changes|k-grid-cancel-changes|k-grid-cancel-command|k-grid-save-command)\b/,l=[];if(!o||!s.editable)return c;t||(l.push(`k-grid-edit-command`),l.push(`k-grid-remove-command`)),t&&(e===`incell`||e===`inline`&&!i)&&l.push(`k-grid-edit-command`),n||(l.push(`k-grid-save-changes`),l.push(`k-grid-cancel-changes`)),(e!==`inline`||!r||r&&a)&&(l.push(`k-grid-save-command`),l.push(`k-grid-cancel-command`));let u=``;return l.length?(u=l.join(`|`),u=`\\b(${u})\\b`,new RegExp(u)):u}function Gn(t,n,r,i,a,o,s,c){var l=qn(t),u=qn([n]);if(l>u){var d=Array(s+1).join(`<th class="k-group-cell k-header k-table-th" scope="col">&nbsp;</th>`),f=o.children(`:not(.k-filter-row)`);e(Array(l-u+1).join(`<tr class='k-table-row'>`+d+`</tr>`)).insertAfter(f.last())}sr(o,l-u),Jn(r,i,a,o,c)}function Kn(t,r,i){i||=0;var a,o,s=r;r=Z(r);for(var c={},l=t.find(`>tr:not(.k-filter-row)`),u=function(){var t=e(this);return!t.hasClass(`k-group-cell`)&&!t.hasClass(`k-hierarchy-cell`)},d=0,f=r.length;d<f;d++)a=Yn(r[d],s),c[a.row]||(c[a.row]=l.eq(a.row).find(`.`+We).filter(u)),o=c[a.row].eq(a.cell),o.attr(n.attr(`index`),i+d);return r.length}function qn(e){for(var t=1,n=0,r=0;r<e.length;r++)if(e[r].columns){var i=qn(e[r].columns);i>n&&(n=i)}return t+n}function Jn(t,n,r,i,a){var o=$n(t[0],n),s=r.find(`>tr:not(.k-filter-row)`).eq(o.row).children(`th.k-header:not(.k-group-cell)`),c=e(),l=o.cell,u;for(u=0;u<t.length;u++)c=c.add(s.eq(l+u));i.find(`>tr:not(.k-filter-row)`).eq(o.row)[a](c);var d=[];for(u=0;u<t.length;u++)t[u].columns&&(d=d.concat(t[u].columns));d.length&&Jn(d,n,r,i,a)}function Yn(e,t,n,r){var i,a;for(n||=0,r||={},r[n]=r[n]||0,a=0;a<t.length;a++){if(t[a]==e){i={cell:r[n],row:n};break}else if(t[a].columns&&(i=Yn(e,t[a].columns,n+1,r),i))break;r[n]++}return i}function Xn(e,t,n,r){var i,a=!!n.locked,o;do i=e[t],t+=r?1:-1,o=!!i.locked;while(i&&t>-1&&t<e.length&&i!=n&&!i.columns&&o===a);return i}function Zn(e,t){let n=e,r=n.match(/class=["][^"]+/g);if(r){let e=r[0].split(`"`).pop();n=n.replace(e,e+(t?``:` k-table-td `))}else n=n.replace(`<td`,`<td class='k-table-td'`);return n}function Qn(e,t,n,r,i){if(t.columns)return t=t.columns,t[r?0:t.length-1];var a=Tn(t,e),o=a?a.columns:e,s=v(t,o);s===0&&r?s++:s==o.length-1&&!r||!n.locked&&!t.columns&&!r?s--:(s>0||s===0&&!r)&&s++;var c=v(n,o);t=Xn(o,s,n,c>s);var l=v(t,i);return t.columns&&(!l||l===o.length-1)?null:t&&t!=n&&t.columns?Qn(e,t,n,r,i):null}function $n(e,t,n,r){var i,a;for(n||=0,r||={},r[n]=r[n]||0,a=0;a<t.length;a++){if(t[a]==e){i={cell:r[n],row:n};break}else if(t[a].columns&&(i=$n(e,t[a].columns,n+1,r),i))break;t[a].hidden||r[n]++}return i}function er(e){return nr(J(e)).concat(nr(Y(e)))}function tr(e,t,n,r){var i=e[n],a=e[r],o=Tn(i,t);return t=o?o.columns:t,v(a,t)}function nr(e){for(var t=[],n=[],r=0;r<e.length;r++)t.push(e[r]),e[r].columns&&(n=n.concat(e[r].columns));return n.length&&(t=t.concat(nr(n))),t}function rr(e){for(var t=0,n,r=0;r<e.length;r++)n=e[r],n.columns?t+=rr(n.columns):n.hidden&&t++;return t}function ir(e){for(var t=0,n=0,r=e.length;n<r;n++)e[n].hidden||(t+=parseInt(e[n].width,10));return t}function ar(e){for(var t,n=0,r=0,i=e.length;r<i;r++)t=e[r].style.width,t&&t.indexOf(`%`)==-1&&(n+=parseInt(t,10));return n}function or(e,t){for(var n=e.find(`tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)`),r,i=0;i<n.length;i++)r=n[i].rowSpan,r>1&&(n[i].rowSpan=r-t||1)}function sr(e,t){for(var n=e.find(`tr:not(.k-filter-row) th:not(.k-group-cell,.k-hierarchy-cell)`),r=0;r<n.length;r++)n[r].rowSpan+=t}function cr(t){for(var n=t.find(`tr:not(.k-filter-row)`),r=n.filter(function(){return!e(this).children().length}).remove().length,i=n.find(`th:not(.k-group-cell,.k-hierarchy-cell)`),a=0;a<i.length;a++)i[a].rowSpan>1&&(i[a].rowSpan-=r);return n.length-r}function lr(e,t,n,r,i){var a,o,s,c=[];for(a=0,s=e.length;a<s;a++)o=n[r]||[],o.push(t.eq(i+a)),n[r]=o,e[a].columns&&(c=c.concat(e[a].columns));c.length&&lr(c,t,n,r+1,i+e.length)}function ur(e,t,n){e.css({left:t,right:n})}function dr(e,t,n){e[t]=e[t]||{},e[t][n]=e[t][n]||``}function fr(e,t,n,r){dr(e,t,n),e[t][n]===``?e[t][n]=r:e[t][n]+=` `+r}function pr(e,t,n,r,i){dr(e,t,n),i?delete e[t][n]:e[t][n]=e[t][n].replace(r,``)}function J(e){return g(e,function(e){return e.locked})}function Y(e){return g(e,function(e){return!e.locked})}function mr(e){return g(e,function(e){return e.sticky&&!e.locked})}function hr(e){return g(e,function(e){return e.sticky&&!e.locked&&In(e)})}function gr(e){return g(e,function(e){return!e.locked&&In(e)})}function _r(e){return g(e,function(e){return e.locked&&In(e)})}function X(e){for(var t=[],n=0;n<e.length;n++)e[n].hidden||(e[n].columns?t=t.concat(X(e[n].columns)):t.push(e[n]));return t}function vr(e){for(var t=[],n=0;n<e.length;n++)e[n].hidden||(e[n].columns?t=t.concat(X(e[n].columns)):t.push({field:e[n].field,width:e[n].width,values:e[n].values,title:e[n].title}));return t}function yr(e){for(var t=[],n=0;n<e.length;n++)e[n].columns&&(t=t.concat(e[n].columns));return t}function br(e){var t=yr(e);return t=t.filter(function(e){return!e.hidden}),t}function Z(e){for(var t=[],n=0;n<e.length;n++){if(!e[n].columns){t.push(e[n]);continue}t=t.concat(Z(e[n].columns))}return t}function xr(e){var t=[];e=Z(e);for(var n=0;n<e.length;n++)typeof e[n]==`string`?t.push(e[n]):e[n].field&&t.push(e[n].field);return t}function Sr(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]),e[n].columns&&(t=t.concat(Sr(e[n].columns)));return t}function Cr(e,t){let n=t.multiHeaderSeparator||` / `,r=Sr(e.columns),i=t.parentIds.split(` `).map(e=>{let t=r.find(t=>t.uid===e);return t&&(t.title||t.field)||``});return i.push(t.title||t.field),i.join(n)}function wr(e,t){return{field:e.field,title:e.title,format:e.format,editor:e.editor,values:e.values,editorOptions:m(!0,{format:e.format,adaptiveMode:t},e.editorOptions),label:e.title||e.field||``}}function Q(r){var i=r.find(`>tr:not(.k-filter-row)`),a=function(){var t=e(this);return!t.hasClass(`k-group-cell`)&&!t.hasClass(`k-hierarchy-cell`)},o=e();i.length>1&&(o=i.find(`th`).filter(a).filter(function(){return this.rowSpan>1})),o=o.add(i.last().find(`th`).filter(a));var s=n.attr(`index`);return[].sort.call(o,function(n,r){n=e(n),r=e(r);var i=n.attr(s),a=r.attr(s);return i===t&&(i=e(n).index()),a===t&&(a=e(r).index()),i=parseInt(i,10),a=parseInt(a,10),i>a?1:i<a?-1:0})}function Tr(t){var n=t.closest(`table`),r=e().add(t),i=t.closest(`tr`),a=n.find(`tr:not(.k-filter-row)`),o=a.index(i);if(o>0){for(var s=a.eq(o-1).find(`th:not(.k-group-cell,.k-hierarchy-cell)`).filter(function(){return!e(this).attr(`rowspan`)}),c=0,l=i.find(`th:not(.k-group-cell,.k-hierarchy-cell)`).index(t),u=t.prevAll(`:not(.k-group-cell,.k-hierarchy-cell)`).filter(function(){return this.colSpan>1}),d=0;d<u.length;d++)c+=u[d].colSpan||1;for(l+=Math.max(c-1,0),c=0,d=0;d<s.length;d++){var f=s.eq(d);if(f.attr(`data-colspan`)?c+=f[0].getAttribute(`data-colspan`):c+=1,l>=d&&l<c){r=Tr(f).add(r);break}}}return r}function Er(t){var r=t.closest(`thead`),i=e().add(t),a=t.closest(`tr`),o=r.find(`tr:not(.k-filter-row)`),s=o.index(a)+t[0].rowSpan,c=n.attr(`colspan`);if(s<=o.length-1){var l=a.next(),u=t.prevAll(`:not(.k-group-cell,.k-hierarchy-cell)`),d;u=u.filter(function(){return!this.rowSpan||this.rowSpan===1});var f=0;for(d=0;d<u.length;d++)f+=parseInt(u.eq(d).attr(c),10)||1;var p=l.find(`th:not(.k-group-cell,.k-hierarchy-cell)`),m=parseInt(t.attr(c),10)||1;for(d=0;d<m;){l=p.eq(d+f),i=i.add(Er(l));var h=parseInt(l.attr(c),10);h>1&&(m-=h-1),d++}}return i}function Dr(t,r,i,a){var s,c=t;if(o){let r=e(i);n.applyStylesFromKendoAttributes(r,[`display`,`left`,`right`]),t.empty(),r.each((e,n)=>t[0].appendChild(n))}else s=document.createElement(`div`),s.innerHTML=`<table class='k-grid-table k-table'><tbody class='k-table-tbody'>`+i+`</tbody></table>`,e(s).find(`table`).addClass(n.getValidCssClass(`k-table-`,`size`,a)),t=s.firstChild.firstChild,r[0].replaceChild(t,c[0]),t=e(t);return t}function Or(e){e||={};let t={};return t[n.attr(`style-display`)]=`none`,m({},e,t)}function kr(e){return e||={},!!e[n.attr(`style-display`)]}function Ar(e){return e||={},delete e[n.attr(`style-display`)],e}function jr(t,r,i,a,o){var s=t.find(`>colgroup`),c,l=o?[`<col>`]:h(r,function(e){return c=e.width,c&&parseInt(c,10)!==0?n.format(`<col ${n.attr(`style-width`)}="{0}" ${e.draggable?`class=k-drag-col`:``} />`,typeof c===B?c:c+`px`):e.draggable?`<col class='k-drag-col' />`:`<col />`});!o&&(i||s.find(`.k-hierarchy-col`).length)&&l.splice(0,0,`<col class="k-hierarchy-col" />`),s.length&&s.remove(),s=e(Array(a+1).join(`<col class="k-group-col">`)+l.join(``)),n.applyStylesFromKendoAttributes(s,[`width`]),s.is(`colgroup`)||(s=e(`<colgroup/>`).append(s)),t.prepend(s)}function Mr(e,t){var n=0,r,i,a=e.find(`th:not(.k-group-cell)`);for(r=0,i=t.length;r<i;r++)t[r].locked&&(a.eq(r).insertBefore(a.eq(n)),a=e.find(`th:not(.k-group-cell)`),n++)}function Nr(e){var t={},n,r,i;for(r=0,i=e.length;r<i;r++)n=e[r],t[n.value]=n.text;return t}function Pr(e,t,r,i){let a=r&&r.length&&p(r[0])&&`value`in r[0]?Nr(r)[e]:e;a??=``;let o=i===!1?a:n.htmlEncode(a);return t?n.format(t,o):o}function Fr(e,t,n){for(var r=0,i,a=e[r];a;){if(i=n?!0:a.style.display!==U,n&&a.classList.contains(`k-hidden`)&&a.classList.remove(`k-hidden`),i&&!Ht.test(a.className)&&--t<0){a.style.display=n?``:U;break}a=e[++r]}}function Ir(t,n){for(var r=0,i=t.length,a,o;r<i;r+=1)o=t.eq(r),o.is(`.k-grouping-row,.k-detail-row`)?(a=o.children(`:not(.k-group-cell):first,.k-detail-cell`).last(),a.attr(`colspan`,parseInt(a.attr(`colspan`),10)-1)):(o.hasClass(`k-grid-edit-row`)&&(a=o.children(`.k-edit-container`)[0])&&(a=e(a),a.attr(`colspan`,parseInt(a.attr(`colspan`),10)-1),a.find(`col`).eq(n).remove(),o=a.find(`tr`).first()),Fr(o[0].cells,n,!1))}function Lr(e){for(var t=[],n,r=0;r<e.length&&(n=e[r],`field`in n&&`value`in n&&`items`in n);r++)t.push(n),n.hasSubgroups&&(t=t.concat(Lr(n.items)));return t}function Rr(e){for(var t=[],n,r=0;r<e.length&&(n=e[r],`field`in n&&`value`in n&&`items`in n);r++)n.hasSubgroups&&(t=t.concat(Rr(n.items))),t.push(n.aggregates);return t}function zr(t,n){for(var r=0,i=t.length,a,o,s;r<i;r+=1)o=t.eq(r),o.is(`.k-grouping-row,.k-detail-row`)?(a=o.children(`:not(.k-group-cell):first,.k-detail-cell`).last(),a.attr(`colspan`,parseInt(a.attr(`colspan`),10)+1)):(o.hasClass(`k-grid-edit-row`)&&(a=o.children(`.k-edit-container`)[0])&&(a=e(a),a.attr(`colspan`,parseInt(a.attr(`colspan`),10)+1),jr(a.find(`>form>table`),q(s),!1,0),o=a.find(`tr`).first()),Fr(o[0].cells,n,!0))}function Br(e,t,n){n||=1;var r,i,a;for(i=0,a=e.length;i<a;i++)r=e.eq(i).children(`:not([hidden])`).last(),r.attr(`colspan`,parseInt(r.attr(`colspan`),10)+n),r=t.eq(i).children(`:not([hidden])`).last(),r.attr(`colspan`,parseInt(r.attr(`colspan`),10)-n)}function Vr(e){var t,n,r=0,i=e.find(`>colgroup>col`);for(t=0,n=i.length;t<n;t+=1)r+=parseInt(i[t].style.width,10);return r}function Hr(e,t){return{role:`user`,contents:[{$type:`text`,text:e}],columns:t.map(e=>{let t;e.selectable?t=`checkbox`:e.command?t=`command`:e.draggable&&(t=`draggable`);let n={...e,id:`${e.uid}`};return t&&(n.type=t),n})}}function Ur(e,t,n){let r=e?.commands||[],i=`• `,a=e?.status,o=r.map((e,r)=>{let a=i+t.invalidSelection;if(e?.type===`GridSelect`){let t=Object.keys(e?.select.cells).length;if(t&&n&&e?.select?.filters.length||!t&&!n&&e?.select?.filters.length)return e.skipCommand=!0,a}return e?.message?i+e?.message:``}),s=[];return a?s.push(t.error+` ${e.status} ${e.statusText}`):e.message?s.push(e.message):(s.push(t.success),o&&s.push(...o)),s.join(`/n`)}function Wr(e,n){let r=[],i;if(e){for(let a=0;a<e.length;a++){let o=e[a];if(!o||!o.type)continue;let s=gn[o.type];if(s===`filter`||s===`sort`&&!n){r.push(o);continue}s?(i&&i.type!==o.type&&(r.push(i),i=null),i?o[s]!==t&&(Array.isArray(i[s])||(i[s]=[i[s]]),i[s].push(o[s]),i={...i,[s]:i[s]}):i=o):(i&&=(r.push(i),null),r.push(o))}return i&&r.push(i),r}}function Gr(e,t,n){if(!t._requestInProgress||!t.options.service)return;let r=t.outputObjects;t.updatePromptOutputContent(e.output,n),t.element.find(`[data-id='`+n+`']`).attr(`data-id`,e.outputId);let i=r.get(n);r.delete(n),i&&(i.id=e?.outputId,i.data.id=e?.outputId,r.set(e?.outputId,i)),t.promptOutputs=t.promptOutputs.map(t=>(t.id===n&&(t.id=e?.outputId),t)),t.stopStreaming(),t._requestInProgress=!1}function Kr(e){let t=e.indexOf(`Column '`),n=t+8,r=e.indexOf(`'`,n);return{uid:e.substring(n,r),originalText:e.substring(t,r+1)}}let qr=(e,t,r)=>{let i=Kr(e),a=r.find(e=>e.uid===i?.uid);if(a){let t=i?.originalText,n=`Column '${a.title||a.field}'`;e=e.replace(t,n)}return e.includes(t.error)?`<p class="k-text-error">${n.htmlEncode(e)}</p>`:`<div class="k-card-text">${n.htmlEncode(e)}</div>`};var Jr=n.ui.DataBoundWidget.extend({init:function(t,r,i){var a=this;r=_(r)?{dataSource:r}:r,c.fn.init.call(a,t,r),i&&(a._events=i),W=n.support.isRtl(t),re=W?`a[class*='-i-caret-alt-left']`:ie,a._element(),a._ariaId(),a._columns(e.extend(!0,[],a.options.columns)),a._bindMediaQueries(),a._foreignKeyPromises?e.when.apply(null,a._foreignKeyPromises).then(function(){a._foreignKeyPromises=null,a._continueInit()}):a._continueInit()},_continueInit:function(){var t=this;t._dataSource(),t._stickyColumns(),t._tbody(),t._thead(),t._rowResizing(),t._groupable(),t._toolbar(),t._initToolbarItemsPopups(),t._ai(),t._pageable(),t._setContentHeight(),t._templates(),t._navigatable(),t._initSelectableAggregates(),t._selectable(),t._statusBar(),t._clipboard(),t._paste(),t._details(),t._editable(),t._attachCustomCommandsEvent(),t._adaptiveColumns(),t._minScreenSupport(),t.options.autoBind?t.dataSource.fetch():(t._group=t._groups()>0,t._footer()),t._setInitialRtlScrollPosition(),t.options.contextMenu&&t._initContextMenu(),t.lockedContent&&(t.wrapper.addClass(`k-grid-lockedcolumns`),t._resizeHandler=function(){t.resize()},e(window).on(`resize`+N,t._resizeHandler)),t._initLoader(),n.notify(t),t._showWatermarkOverlay&&t._showWatermarkOverlay(t.wrapper[0])},events:[P,ge,`dataBinding`,`cancel`,be,xe,Se,ue,de,pe,fe,me,oe,se,ce,le,ye,he,$e,et,tt,ve,_e,nt,rt,it,at,ot,st,Ee,`page`,`sort`,`filter`,`group`,`groupExpand`,`groupCollapse`,`kendoKeydown`],setDataSource:function(e){var t=this,r=t.options.scrollable,i;t.options.dataSource=e,t._dataSource(),t._pageable(),t._thead(),t._rowResizing(),r&&(r.virtual?(i=t.content.find(`>.k-virtual-scrollable-wrap`),n.scrollLeft(i,ii(i,W))):(i=t.tbody,n.scrollLeft(t.content,ii(i,W)))),t.options.groupable&&t._groupable(),t.virtualScrollable&&t.virtualScrollable.setDataSource(t.options.dataSource),t.options.navigatable&&t._navigatable(),t.options.selectable&&t._selectable(),t.options.autoBind?t.dataSource.fetch():t._footer()},options:{name:`Grid`,adaptiveMode:`none`,ai:null,columns:[],toolbar:null,autoBind:!0,filterable:!1,scrollable:!0,sortable:!1,selectable:!1,allowCopy:!1,allowPaste:!1,navigatable:!1,pageable:!1,persistSelection:!1,editable:!1,encodeTitles:!1,groupable:!1,rowTemplate:``,altRowTemplate:``,statusBarTemplate:null,search:!1,noRecords:!1,dataSource:{},height:null,resizable:!1,reorderable:!1,columnMenu:!1,detailTemplate:null,contextMenu:!1,columnResizeHandleWidth:3,size:t,mobile:``,loaderType:`loadingPanel`,dataLayoutMode:`columns`,stackedLayoutSettings:{},messages:{loader:{loading:`Loading...`,exporting:`Exporting...`},editable:{cancelDelete:`Cancel`,confirmation:`Are you sure you want to delete this record?`,confirmDelete:`Delete`},commands:{create:K.create.text,cancel:K.cancel.text,save:K.save.text,destroy:K.destroy.text,edit:K.edit.text,update:K.update.text,canceledit:K.canceledit.text,excel:K.excel.text,pdf:K.pdf.text,search:K.search.text,columns:K.columns.text,select:`Select`,selectall:K.selectall.text,sort:K.sort.text,filter:K.filter.text,group:K.group.text,columnchooser:K.columnchooser.text,selectRow:`Select Row`,selectAllRows:`All rows`,clearSelection:`Clear selection`,copySelection:`Copy selection`,copySelectionNoHeaders:`Copy selection (No Headers)`,paste:`Paste (use CTRL/⌘ + V)`,reorderRow:`Reorder row`,reorderRowUp:`Up`,reorderRowDown:`Down`,reorderRowTop:`Top`,reorderRowBottom:`Bottom`,exportPdf:`Export to PDF`,exportExcel:`Export to Excel`,exportToExcelAll:`All`,exportToExcelSelection:`Selection`,exportToExcelSelectionNoHeaders:`Selection (No Headers)`,sortAsc:`Sort Ascending`,sortDesc:`Sort Descending`,moveGroupPrevious:`Move previous`,moveGroupNext:`Move next`},details:{expand:`Expand Details`,collapse:`Collapse Details`},ai:{outputPlaceholder:`No AI output available`,success:`Data is:`,error:`Operation is not successful. Error:`,invalidSelection:`This selection mode is not currently enabled. Please enable the appropriate selection option in the grid configuration.`,promptPlaceholder:`Enter your AI prompt here...`},noRecords:`No records available.`,expandCollapseColumnHeader:``,groupHeader:`Press ctrl + space to group`,ungroupHeader:`Press ctrl + space to ungroup`,itemsSelected:`items selected`,dragHandleLabel:`Drag row`,toolbarLabel:`grid toolbar`,groupingHeaderLabel:`grid grouping header`,filterCellTitle:`filter cell`,clearButtons:{clearFiltering:`Clear All Filters`,clearSorting:`Clear Sorting`,clearGrouping:`Clear Grouping`,columnChooserReset:`Reset`},applyButtons:{applySorting:`Done`,applyGrouping:`Done`,columnChooserApply:`Apply`}},width:null},destroy:function(){var t=this,r,i;t._destroyColumnAttachments(),t._unbindToolbarTools(),c.fn.destroy.call(t),this._navigatableTables&&(this._navigatableTables.off(N),this._navigatableTables=null,this._headertables=null),t._resizeHandler&&e(window).off(`resize`+N,t._resizeHandler),t._aiAssistant&&=(t._aiAssistant?.destroy(),null),t._aiAssistantWindow&&=(t._aiAssistantWindow?.destroy(),null),t.pager&&t.pager.element&&t.pager.destroy(),t.timer&&clearTimeout(t.timer),t._progressTimeOut&&clearTimeout(t._progressTimeOut),t._collapseGroupsTimeOut&&clearTimeout(t._collapseGroupsTimeOut),t._endlessFetchTimeOut&&clearTimeout(t._endlessFetchTimeOut),t.pager=null,t._destroyGroupable(),i=t.wrapper.data(`kendoReorderable`),i&&i.destroy(),i=t.tbody?t.tbody.data(`kendoReorderable`):null,i&&i.destroy(),t.allowPaste&&((t.content||t.table).off(Ee+N,t.pasteHandler),t.unbind(t.pasteHandler)),t.pasteActionsDropDownList&&=(t.pasteActionsDropDownList.destroy(),null),t.selectable&&t.selectable.element&&(t.selectable.destroy(),t.clearArea(),t._selectedIds=null,t.copyHandler&&(t.wrapper.off(`keydown`,t.copyHandler),t.unbind(t.copyHandler)),t.updateClipBoardState&&=(t.unbind(t.updateClipBoardState),null),t.clearAreaHandler&&t.wrapper.off(`keyup`,t.clearAreaHandler)),t.selectable=null,t._selectableAggregatesOptions=null,t.resizable&&=(t.resizable.destroy(),t._resizeUserEvents&&=(t._resizeHandleDocumentClickHandler&&e(document).off(`click`,t._resizeHandleDocumentClickHandler),t._resizeUserEvents.destroy(),null),null),t._destroyRowResizing(),t._destroyVirtualScrollable(),t.editableUserEvents&&=(t.editableUserEvents.destroy(),null),t._lockedContentUserEvents&&=(t._lockedContentUserEvents.destroy(),null),t._destroyEditable(),t.dataSource&&(t.dataSource.unbind(P,t._refreshHandler).unbind(T,t._progressHandler).unbind(E,t._errorHandler).unbind(Tt,t._clearSortClasses),t._refreshHandler=t._progressHandler=t._errorHandler=t._sortHandler=null),r=t.element.add(t.wrapper).add(t.table).add(t.thead).add(t.wrapper.find(`>.k-grid-toolbar`)),t.content&&(r=r.add(t.content).add(t.content.find(`>.k-virtual-scrollable-wrap`))),t.scrollables&&t.scrollables.first()&&(r=r.add(t.scrollables.first())),t.lockedHeader&&t._removeLockedContainers(),t.pane&&t.pane.destroy(),t._isMobile&&(t.wrapper.off(`transitionend`+N),t.wrapper.off(`contextmenu`+N)),t.minScreenResizeHandler&&e(window).off(`resize`,t.minScreenResizeHandler),t._detachColumnMediaResizeHandler(),t._draggableInstance&&t._draggableInstance.element&&t._draggableInstance.destroy(),t._draggableInstance=null,t._draggableRowsInstance&&t._draggableRowsInstance.element&&t._draggableRowsInstance.destroy(),t.tbodyContextMenu&&t.tbodyContextMenu.destroy(),t.theadContextMenu&&t.theadContextMenu.destroy(),t.loader&&t.loader.destroy(),t._draggableRowsInstance=null,r.off(N),r[0].kendoBindingTarget=null,n.destroy(t.wrapper),t.rowTemplate=t.altRowTemplate=t.lockedRowTemplate=t.lockedAltRowTemplate=t.detailTemplate=t.footerTemplate=t.groupFooterTemplate=t.lockedGroupFooterTemplate=t.noRecordsTemplate=null,t.scrollables=t.thead=t.tbody=t.element=t.table=t.content=t.statusBar=t.footer=t.wrapper=t.lockedTable=t.lockedContent=t.lockedHeader=t.lockedFooter=t._groupableClickHandler=t._groupRows=t._setContentWidthHandler=t.loaderOverlay=t.wrapperClone=null},getOptions:function(){var t=this.options;t.dataSource=null;var r=m(!0,{},this.options);r.columns=n.deepExtend([],this.columns);var i=this.dataSource,a=i.options.data&&i._data;return i.options.data=null,r.dataSource=e.extend(!0,{},i.options),i.options.data=a,r.dataSource.data=a,r.dataSource.page=i.page(),r.dataSource.filter=e.extend(!0,{},i.filter()),r.dataSource.pageSize=i.pageSize(),r.dataSource.sort=i.sort(),r.dataSource.group=i.group(),r.dataSource.aggregate=i.aggregate(),r.dataSource.transport&&(r.dataSource.transport.dataSource=null),r.pageable&&r.pageable.pageSize&&(r.pageable.pageSize=i.pageSize()),r},setOptions:function(e){var t=this.getOptions(),r=this.element;if(t.size){let e=n.getValidCssClass(`k-grid-`,`size`,t.size);r.removeClass(e)}n.deepExtend(t,e),e.dataSource?e.dataSource.filter&&(t.dataSource.filter=e.dataSource.filter):t.dataSource=this.dataSource;var i=this.wrapper,a=this._events;if(this.destroy(),this.options=null,this._isMobile){var o=i.closest(n.roleSelector(`pane`)).parent();o.after(i),o.remove(),i.removeClass(`k-grid-mobile`)}i[0]!==r[0]&&(i.before(r),i.remove()),r.empty(),this.init(r,t,a),this._setEvents(t)},items:function(){return this.lockedContent?this._items(this.tbody).add(this._items(this.lockedTable.children(`tbody`))):this._items(this.tbody)},_items:function(t,n){return t.children().filter(function(){var t=e(this);return(n?!t.hasClass(`k-detail-row`):!t.hasClass(L))&&!t.hasClass(`k-detail-row`)&&!t.hasClass(`k-group-footer`)})},dataItems:function(){var e=n.ui.DataBoundWidget.fn.dataItems.call(this);if(this.lockedContent){for(var t=e.length,r=Array(2*t),i=t;--i>=0;)r[i]=r[i+t]=e[i];e=r}return e},_destroyColumnAttachments:function(){var t=this;t.resizeHandle=null,t.thead&&t.thead.add(t.lockedHeader).find(`th`).each(function(){var t=e(this),n=t.data(`kendoFilterMenu`),r=t.data(`kendoColumnSorter`),i=t.data(`kendoColumnMenu`);n&&n.destroy(),r&&r.destroy(),i&&i.destroy()})},_setInitialRtlScrollPosition:function(){let e=this;W&&e.scrollables&&n.scrollLeft(e.scrollables,0)},_attachCustomCommandsEvent:function(){var e=this,t=Z(e.columns||[]),n,r,i;for(r=0,i=t.length;r<i;r++)n=t[r].command,n&&Cn(e,e.wrapper,n)},_bindMediaQueries:function(){let e=this;if(e.options.adaptiveMode===`auto`){e.largeMQL=n.mediaQuery(`large`),e.mediumMQL=n.mediaQuery(`medium`),e.smallMQL=n.mediaQuery(`small`);let t=(t,n)=>{if(e._editMode()!==`popup`)return;let r=t===!0||t===!1,i;if(e._editContainer&&(i=e._editContainer&&e._editContainer.data(n)),!i){let t=n===`kendoActionSheet`?`kendoWindow`:`kendoActionSheet`;i=e._editContainer&&e._editContainer.data(t)}r?i&&i.fullscreen&&i.visible()?(e._showAdaptiveView=!0,i.fullscreen(t)):i&&(e._showAdaptiveView=!1,e._destroyEditable(!0)):i&&i.fullscreen&&i.close()};e.smallMQL.onEnter(()=>{t(!0,`kendoActionSheet`)}),e.mediumMQL.onEnter(()=>{t(!1,`kendoActionSheet`)}),e.largeMQL.onEnter(()=>{t(null,`kendoWindow`)})}else e.smallMQL&&e.smallMQL.destroy(),e.mediumMQL&&e.mediumMQL.destroy(),e.largeMQL&&e.largeMQL.destroy(),e._showAdaptiveView=!1},_aria:function(){var e=this.wrapper,t=this._hasDetails()?`treegrid`:this.options.navigatable?`grid`:null,r=this.table,i=e.find(`.k-grid-toolbar`),a=e.find(`.k-grouping-header`),o=this._ariaGridId(),s=r.attr(_t),c,l,u,d,f=this._isStackedMode(),p=!f&&this.thead.find(`tr`).length+this.wrapper.find(`.k-grid-footer-wrap table tr`).length,m=this._trailingColumns(),h=this.virtualScroll,g=this.options.pageable,_;r.attr(_t,s>=0?s:0),t&&r.attr(H,t);let v=r.find(`tbody`),y=r.find(`thead`),b=r.find(`tfoot`),x=r.find(`tr`);v.find(`tr`).length>0&&v.attr(H,Lt),y.find(`tr th`).length>0&&y.attr(H,Lt),b.find(`tr`).length>0&&b.attr(H,Lt),x.children().length>0&&x.attr(H,`row`),r.find(`th`).attr(H,Rt),r.find(`td`).attr(H,zt),g&&this.dataSource.totalPages()>1||h&&h.rows?(_=this._groups()>0?-1:this._hasDetails()?p+this.dataSource.total()*2:p+this.dataSource.total(),r.attr(At,_)):this._hasDetails()&&(_=this._groups()>0?-1:p+this.dataSource.total()*2,r.attr(At,_)),_&&_>0&&this._ariaRowIndex(),(!f&&h&&h.columns||!r.attr(jt)&&(r.find(`td:not([group-header-spanned-hidden]):hidden`).length>0||e.find(`.k-grid-content-locked td:not([group-header-spanned-hidden]):hidden`).length>0))&&(r.attr(jt,m+Z(this.columns).length),this._ariaColumnIndex()),this.pager&&this.pager.element.attr(`aria-controls`,o),i.attr({role:`toolbar`,"aria-label":this.options.messages.toolbarLabel,"aria-controls":o}),a.attr({role:`toolbar`,"aria-label":this.options.messages.groupingHeaderLabel,"aria-controls":o}),l=f?``:this._ariaHeaderFooter(`header`,`thead`,`th, td`,Rt),u=this._ariaHeaderFooter(`footer`,`tfoot`,`td`,zt),!f&&e.find(`.k-grid-content-locked`).length>0&&this._ariaLockedContent(),(l||u)&&(c=this.tbody.attr(`id`)||n.guid(),d=[l,c,u].join(` `),this.tbody.attr(`id`,c),r.attr(kt,d)),this.options.groupable&&this._ariaGroupTitles()},_ariaColumnIndex:function(){var t=this._trailingColumns(),n=this.tbody.find(`>tr`).last().find(`> td[data-virtual]`),r=this.thead.find(`>tr`).not(`.k-filter-row`),i=this.wrapper.find(`.k-grid-header-locked thead > tr`).not(`.k-filter-row`),a=Number.MAX_VALUE,o=0,s=0,c=0,l=0,u,d,f,p,m,h=function(t,n){var r=n.getAttribute(`data-index`),i=Number(r),c=e(n).closest(`.k-grid-header-locked`);c.length===0&&i<a&&(a=i),c.length>0&&s<i&&(s=i),c.length===0&&o<i&&(o=i),r===null?(n.setAttribute(Mt,u+1),u+=n.getAttribute(`colspan`)):(n.setAttribute(Mt,Number(i)+1),u=Number(i)+1+n.getAttribute(`colspan`))};for(n.length===2?(c=Number(n[0].getAttribute(`colspan`)),l=Number(n[1].getAttribute(`colspan`))):n.length===1&&n.prev().length===0?c=Number(n[0].getAttribute(`colspan`)):n.length===1&&n.prev().length===1&&(l=Number(n[0].getAttribute(`colspan`))),d=0;d<i.length;d++)u=0,i.eq(d).find(`th`).each(h);for(d=0;d<r.length;d++)u=0,r.eq(d).find(`th`).each(h);for(d=0;d<=s;d++)p=d+t,f=this.wrapper.find(`.k-grid-content-locked tbody > tr > td:nth-child(`+(d+1)+`)`),f.attr(Mt,p+1);for(d=c;d<=o-a-l;d++)m=c===0?d+1:d-c+2,p=a+d+t,f=this.tbody.find(`> tr > td:nth-child(`+m+`)`),f.attr(Mt,p+1)},_ariaGroupTitles:function(){var e=this,t=e.dataSource.group(),r=e.wrapper.find(`.k-grid-header th`);r.each(function(t,n){n.getAttribute(`title`)===e.options.messages.ungroupHeader&&n.setAttribute(`title`,e.options.messages.groupHeader)}),t&&t.length>0&&t.forEach(function(t){var i=t.field,a=r.filter(`[`+n.attr(`field`)+`='`+i+`']`);a.attr(`title`)===e.options.messages.groupHeader&&a.attr(`title`,e.options.messages.ungroupHeader)})},_ariaHeaderFooter:function(e,t,r,i){var a=this,o=a.wrapper,s=o.find(`.k-grid-`+e+` .k-grid-`+e+`-wrap table`),c=o.find(`.k-grid-`+e+` .k-grid-`+e+`-locked table`),l=``,u;if(s.length>0){u=s.find(t+`, tbody`),l=u.attr(`id`)||n.guid(),s.attr(H,U);let e=s.find(`tr`);e.children().length>0&&(e.attr(H,`row`),u.attr(H,Lt)),s.find(r).attr(H,i),u.attr({id:l})}return c.length>0&&a._ariaLocked(e,t,r,i),c.find(`td`).attr(H,zt),s.find(`td`).attr(H,zt),l},_ariaId:function(){var e=this.element.attr(`id`)||`aria`;e&&(this._cellId=e+`_active_cell`)},_ariaGridId:function(){var e=this.table,t=e.attr(`id`);return t||(t=n.guid(),e.attr(`id`,t)),t},_ariaLocked:function(t,n,r,i){var a=this,o=a.wrapper,s=o.find(`.k-grid-`+t+` .k-grid-`+t+`-wrap table`),c=o.find(`.k-grid-`+t+` .k-grid-`+t+`-locked table`),l=s.find(`tr`),u=c.find(`tr`);c.attr(H,U),c.find(n+`, tbody`).attr(H,U),u.attr(H,U),c.find(r).attr(H,i),l.each(function(n,i){var o=[];o=a._cellsIds(u.eq(n).find(r),`locked_`+t,n),o=o.concat(a._cellsIds(e(i).find(r),t,n)),i.setAttribute(kt,o.join(` `))})},_ariaLockedContent:function(){var t=this,n=t.table.find(`tr`),r=t.wrapper.find(`.k-grid-content-locked table`),i=r.find(`tr`);r.attr(H,U),r.find(`tbody`).attr(H,U),i.attr(H,U),r.find(`td`).attr(H,zt),n.each(function(n,r){var a=[];a=t._cellsIds(i.eq(n).find(`td`),`locked_datacell`,n),a=a.concat(t._cellsIds(e(r).find(`td`),`datacell`,n)),r.setAttribute(kt,a.join(` `))})},_ariaAddHiddenColIndex:function(){var e=this.virtualScroll||{},t=this.columns,n=this.table,r=Z(t).length;!e.columns&&!n.attr(jt)&&(this._ariaColumnIndex(),n.attr(jt,r))},_ariaRemoveHiddenColIndex:function(){var e=this.virtualScroll||{},t=this.columns,n=Z(t).length;!e.columns&&n===X(this.columns).length&&(this.wrapper.find(`td, th`).removeAttr(Mt),this.table.removeAttr(jt))},_ariaRowIndex:function(){var e=!this._isStackedMode()&&this.thead.find(`>tr`),t=e?e.length:0,n=this.tbody.find(`>tr`),r=this.wrapper.find(`.k-grid-footer-wrap tfoot > tr`),i=this.dataSource.total(),a=this.dataSource.skip()||0,o=1,s=!1,c,l;for(this._hasDetails()&&(i*=2,a*=2),c=0;c<t;c++)e.eq(c).attr(Nt,o+c);for(o=t+a,c=0;c<n.length;c++)l=n.eq(c),this._hasDetails()&&l.hasClass(`k-master-row`)?(s?o+=2:o+=1,s=!0):(o+=1,s=!1),l.attr(Nt,o);for(o=t+i+1,c=0;c<r.length;c++)r.eq(c).attr(Nt,o+c)},_cellsIds:function(e,t,n){var r=[],i=this._ariaGridId();return e.each(function(e,a){var o=a.getAttribute(`id`)||i+`_`+t+`_`+n+`_`+e;a.setAttribute(`id`,o),r.push(o)}),r},_trailingColumns:function(){return this._groups()+(this._hasDetails()?1:0)},_element:function(){let t=this,r=t.element;r.is(`table`)||(r=t.options.scrollable?t.element.find(`> .k-grid-content > table`):t.element.children(`table`),r.length||(r=e(`<table />`).appendTo(t.element))),r.addClass(`k-grid-table k-table`),r.addClass(n.getValidCssClass(`k-table-`,`size`,t.options.size)),t.table=r,t._wrapper()},_createResizeHandle:function(t,r){var i=this,a=i.options.columnResizeHandleWidth,o=i.options.scrollable,s=i.resizeHandle,c=a*3/2,l=0,d,f,p,m,h,g,_,v,y;s&&i.lockedContent&&s.data(`th`)[0]!==r[0]&&(s.off(N).remove(),s=null),s||(s=i.resizeHandle=e(`<div class="k-resize-handle"><div class="k-resize-handle-inner"></div></div>`),t.append(s)),_=n.scrollLeft(t),W&&(G.mozilla||G.webkit&&G.version>=85)&&(_*=-1),g=parseFloat(t.css(`borderLeftWidth`)),v=r.offset().left+_-parseFloat(r.css(`marginLeft`))-(t.offset().left+g),W?o&&(l=v<=_?c:0,d=r.closest(`.k-grid-header-wrap, .k-grid-header-locked`),d[0].scrollWidth-d[0].offsetWidth,h=parseFloat(d.css(`marginLeft`)),f=G.msie?2*n.scrollLeft(d)+g-h-l:0,p=-l,m=G.mozilla?g-h-l:0,v-=p+m+f):v+=r[0].offsetWidth,y=r.offset().top-parseFloat(r.css(`marginTop`))-(t.offset().top+parseFloat(t.css(`borderTopWidth`))),s.css({top:y,left:v-c,height:u(r),width:a*3-l}).data(`th`,r).show(),s.off(pt+N).on(pt+N,function(){i._autoFitLeafColumn(parseInt(r.attr(n.attr(`index`)),10))})},_positionColumnResizeHandle:function(){var t=this,r=t.lockedHeader?t.lockedHeader.find(`thead`).first():e();t.thead&&t.thead.add(r).on(ft+N,`tr:not(.k-filter-row) > th:not([data-resizable=false])`,function(r){var i=r.buttons===void 0?r.which||r.button:r.buttons,a=e(this);a.hasClass(`k-group-cell`)||a.hasClass(`k-hierarchy-cell`)||i!==void 0&&i!==0||a[0].hasAttribute(n.attr(`colSpan`))||t._createResizeHandle(a.closest(`div`),a)})},_resizeHandleDocumentClick:function(t){e(t.target).closest(`.k-column-active`).length||(e(document).off(t),this._resetResizeHandleHeader(),this._hideResizeHandle())},_resetResizeHandleHeader:function(){var t;this.resizeHandle&&(t=e(this.resizeHandle).data(`th`),t&&(t.find(`.`+Be).find(`.`+Ve+`,.k-svg-icon`).show(),t.find(`.`+He).show(),t.find(`.`+Ge).show(),t.find(`.`+Ke).show()))},_hideResizeHandle:function(){this.resizeHandle&&(this.resizeHandle.data(`th`).removeClass(`k-column-active`),this.lockedContent&&!(this._isMobile||n.support.mobileOS)?(this.resizeHandle.off(N).remove(),this.resizeHandle=null):this.resizeHandle.hide())},_positionColumnResizeHandleTouch:function(){var t=this,r=t.lockedHeader?t.lockedHeader.find(`thead`).first():e();t._resizeUserEvents=new n.UserEvents(r.add(t.thead),{filter:`th:not(.k-group-cell):not(.k-hierarchy-cell)`,threshold:10,minHold:500,hold:function(n){var r=e(n.target);n.preventDefault(),t.resizeHandle&&(t.resizeHandle.data(`th`).removeClass(`k-column-active`),t._resetResizeHandleHeader()),r.addClass(`k-column-active`),r.find(`.`+Be).find(`.`+Ve+`,.k-svg-icon`).hide(),r.find(`.`+He).hide(),r.find(`.`+Ge).hide(),r.find(`.`+Ke).hide(),t._createResizeHandle(r.closest(`div`),r),t._resizeHandleDocumentClickHandler||=t._resizeHandleDocumentClick.bind(t),e(document).on(`click`,t._resizeHandleDocumentClickHandler)}})},resizeColumn:function(t,r){var i=this,a=!!t.locked,o=!!t.hidden,s=this.options,c=n.support.mobileOS?0:n.support.scrollbar(),u=a?v(t,_r(X(i.columns))):v(t,gr(X(i.columns))),d=a?i.lockedTable:i.table,f=i.footer||e(),p=t.minResizableWidth||10,m=l(a?d.find(`tbody`):i.tbody),h;if(!this._isStackedMode()){var g=a?i.lockedHeader.find(`table`):i.thead.closest(`table`);if(o){t.width=r>p?r:p;return}if(i.footer&&i.lockedContent&&(f=a?i.footer.children(`.k-grid-footer-locked`):i.footer.children(`.k-grid-footer-wrap`)),h=s.scrollable?g.find(`col:not(.k-group-col,.k-hierarchy-col)`).eq(u).add(d.children(`colgroup`).find(`col:not(.k-group-col):not(.k-hierarchy-col)`).eq(u)).add(f.find(`colgroup`).find(`col:not(.k-group-col):not(.k-hierarchy-col)`).eq(u)):d.find(`colgroup`).find(`col:not(.k-group-col):not(.k-hierarchy-col)`).eq(u),s.scrollable){var _=!1,y=i.wrapper.width()-c,b=r=r>p?r:p;a&&m-r+b>y&&(b=r+(y-m-c*2),b<0&&(b=r),_=!0),b>10&&b>=p&&(h.css(`width`,b),m&&(b=_?y-c*2:m+(r-t.width),d.add(g).add(f).css(`width`,b),a||(i._footerWidth=b))),i._scrollVirtualWrapperOnColumnResize()}else r>10&&r>=p&&h.css(`width`,r);t.width=r,i._applyLockedContainersWidth(),i._syncLockedContentHeight(),i._syncLockedHeaderHeight(),i._updateStickyColumns()}},_adjustColWidths:function(t,n,r,i){let a={};t.add(n).add(r).css(`width`,i),t.add(n).add(r).find(`col`).each((t,n)=>{a[t]=e(n).css(`width`)}),t.add(n).add(r).find(`col`).each((t,n)=>{e(n).css(`width`,a[t])})},_resizable:function(){var t=this,i=t.options,a,o,s,c,d,f=t._isMobile||n.support.mobileOS,p=n.support.mobileOS?0:n.support.scrollbar(),m,h,g;!t._isStackedMode()&&(i.resizable===!0||i.resizable&&i.resizable.columns===!0)&&(a=i.scrollable?t.wrapper.find(`.k-grid-header-wrap`).first():t.wrapper,f?t._positionColumnResizeHandleTouch(a):t._positionColumnResizeHandle(a),t.resizable&&t.resizable.destroy(),t.resizable=new r.Resizable(a.add(t.lockedHeader),{handle:(i.scrollable?``:`>`)+`.k-resize-handle`,hint:function(n){return e(`<div class="k-grid-resize-indicator" />`).css({height:u(n.data(`th`))+t.tbody.attr(`clientHeight`)})},start:function(n){g=e(n.currentTarget).data(`th`),f&&t._hideResizeHandle();let r=g.closest(`table`),a=e.inArray(g[0],Q(g.closest(`thead`)).filter(`:visible`));m=r.parent().hasClass(`k-grid-header-locked`);let u=m?t.lockedTable:t.table,p=t.footer||e();t.footer&&t.lockedContent&&(p=m?t.footer.children(`.k-grid-footer-locked`):t.footer.children(`.k-grid-footer-wrap`));let _=p.find(`table`);bn(t.wrapper,`col-resize`),h=i.scrollable?r.find(`col:not(.k-group-col):not(.k-hierarchy-col)`).eq(a).add(u.children(`colgroup`).find(`col:not(.k-group-col):not(.k-hierarchy-col)`).eq(a)).add(p.find(`colgroup`).find(`col:not(.k-group-col):not(.k-hierarchy-col)`).eq(a)):u.children(`colgroup`).find(`col:not(.k-group-col):not(.k-hierarchy-col)`).eq(a);let v=e.map(t.columns,function(e){return!e.hidden&&(m&&e.locked||!m&&!e.locked)?e:null});o=n.x.location,s=l(g),c=Z(v)[a].minResizableWidth||10,d=l(m?u.children(`tbody`):t.tbody),G.webkit&&t.wrapper.addClass(`k-grid-column-resizing`),t._adjustColWidths(u,r,_,d)},resize:function(n){var r=W?-1:1,a=s+n.x.location*r-o*r;if(i.scrollable){var l;m&&t.lockedFooter?l=t.lockedFooter.children(`table`):t.footer&&(l=t.footer.find(`>.k-grid-footer-wrap>table`)),(!l||!l[0])&&(l=e());var u=g.closest(`table`),f=m?t.lockedTable:t.table,_=!1,v=t.wrapper.width()-p,y=a;m&&d-s+y>v&&(y=s+(v-d-p*2),y<0&&(y=a),_=!0),y>10&&y>=c&&(h.css(`width`,y),d&&(y=_?v-p*2:d+n.x.location*r-o*r,f.add(u).add(l).css(`width`,y),m||(t._footerWidth=y))),t._scrollVirtualWrapperOnColumnResize()}else a>10&&a>=c&&h.css(`width`,a)},resizeend:function(){var e=l(g),r,i;if(bn(t.wrapper,``),G.webkit&&t.wrapper.removeClass(`k-grid-column-resizing`),g&&s!=e){i=t.lockedHeader?t.lockedHeader.find(`thead`).first().find(`tr`).first().add(t.thead.find(`tr`).first()):g.parent();var a=g.attr(n.attr(`index`));a||=i.find(`th:not(.k-group-cell):not(.k-hierarchy-cell)`).index(g),r=Z(t.columns)[a],r.width=e,t.trigger(et,{column:r,oldWidth:s,newWidth:e}),t._applyLockedContainersWidth(!0),t._syncLockedContentHeight(),t._syncLockedHeaderHeight(),t._updateStickyColumns()}t._resetResizeHandleHeader(),t._hideResizeHandle(),g=null}}))},_addLockedRowResizing:function(e){var t=e.index();return this.lockedTable.find(`tr`).eq(t).add(this.tbody.find(`tr`).eq(t))},_getMinRowHeight:function(e){var t=0;return e.each((e,n)=>{var r;n.style.height=``,r=u(n),r>t&&(t=r)}),t},_cacheRowHeight:function(e,t){var n=this;n._cachedRowsHeight||={},e.each((e,r)=>{var i=r.getAttribute(`data-uid`);n._cachedRowsHeight[i]=t})},_clearCachedRowsHeight:function(e){var t=this;e&&t._cachedRowsHeight?e.each((e,n)=>{var r=n.getAttribute(`data-uid`);delete t._cachedRowsHeight[r]}):t._cachedRowsHeight=null},_mapCachedRowsHeight:function(e,t){var n=this._cachedRowsHeight,r=this.dataSource,i={};Object.keys(n).forEach(a=>{var o=r[e](a);o&&(i[o[t]]=n[a])}),this._cachedRowsHeight=i},_rowResizerDblClick:function(){var t=this,n=t.rowResizer,r=n.data(`tr`),i=u(r),a,o=r.hasClass(I)?t.select():r;t.lockedTable?(r=t._addLockedRowResizing(r),o=r.hasClass(I)?t.lockedTable.find(`.`+I):t.lockedTable.find(`tr`).eq(r.index()),o.each((n,r)=>{var i=r.rowIndex,a=e(r).add(t.tbody.find(`tr`).eq(i)),o=t._getMinRowHeight(a);a.css(mt,o)})):o.css(mt,gt),t._clearCachedRowsHeight(o),n.removeClass(Pe),n.removeClass(Fe),a=u(r),i!=a&&t.trigger($e,{row:r,rows:o,oldHeight:i,newHeight:a})},_setupRowResizer(e,t,n){e.data(`tr`,t).css({top:n})},_attachRowResizerEvents:function(){var e=this.rowResizer,t=200,n=!1;e.on(ct+N,t=>{t.button===0&&(e.removeClass(Pe),e.addClass(Fe))}).on(lt+N,t=>{t.button===0&&(e.removeClass(Fe),e.addClass(Pe))}).on(ut+N,()=>{n=!0,setTimeout(()=>{n&&e.addClass(Pe)},t)}).on(dt+N,()=>{n=!1,e.removeClass(Pe)})},_getResizerTop:function(e,t){var n=this.rowResizer,r=n.find(`.k-row-resizer`)[0],i=parseInt(getComputedStyle(n[0]).paddingTop);return e.offset().top-parseFloat(e.css(`marginTop`))-(t.offset().top+parseFloat(t.css(`borderTopWidth`)))-r.clientHeight-i+t.scrollTop()},_getResizerContainer:function(){var e=this.tbody.closest(`div`);return this.lockedTable&&(e=e.closest(`.k-grid-container`)),e},_createRowResizer:function(t){var n=this,r=e(t.currentTarget),i=t.currentTarget.clientHeight,a=t.offsetY,o=n.rowResizer,s=r.prev(`tr:visible`),c=n._getResizerContainer(),l;o||(o=n.rowResizer=e(`<div class="k-resizer-wrap"><div class="k-row-resizer"></div></div>`),c.append(o),n._attachRowResizerEvents(),o.off(pt+N).on(pt+N,n._rowResizerDblClick.bind(n))),l=n._getResizerTop(r,c),s.length!==0&&i/2>a?s.hasClass(L)||n._setupRowResizer(o,s,l):r.hasClass(L)||n._setupRowResizer(o,r,l+i)},_detachRowResizerEvents:function(){this.rowResizer.off(ct+N).off(lt+N).off(ut+N).off(dt+N)},_mapResizedRows:function(t,n,r){var i=this;t.each((t,a)=>{var o;if(n){var s=a.rowIndex,c=r,l=0,d=e(a).add(i.tbody.find(`tr`).eq(s));d.each((e,t)=>{var n;t.style.height=``,n=u(t),n>l&&(l=n)}),c<l?(c=l,i._clearCachedRowsHeight(d.eq(0))):i._cacheRowHeight(d.eq(0),c),d.css(mt,c)}else a.style.height=``,o=u(a),r>o?(a.style.height=r+`px`,i._cacheRowHeight(e(a),r)):i._clearCachedRowsHeight(e(a))})},_rowResizing:function(){var t=this,n=t.options,i,a,o,s;n.resizable&&n.resizable.rows===!0&&(t.tbody.parent().add(t.lockedTable).on(ft+N,`.k-grid-footer tr, .k-table-tbody tr`,t._createRowResizer.bind(t)),t.rowResizing&&t.rowResizing.destroy(),i=t._getResizerContainer(),t.rowResizing=new r.Resizable(i,{handle:`.k-resizer-wrap`,start:function(n){s=e(n.currentTarget).data(`tr`),t.lockedTable&&(s=t._addLockedRowResizing(s)),s.addClass(Pe),t._detachRowResizerEvents(),a=n.y.location,o=u(s)},resize:function(e){var n=o+e.y.location-a,r=0;s.length>1&&(r=t._getMinRowHeight(s)),n<r&&(n=r),s.css(`height`,n),t._setupRowResizer(t.rowResizer,s,t._getResizerTop(s,i)+n)},resizeend:function(){var e=u(s),n=!1,r;s.hasClass(I)?(r=t.select(),s.length>1&&r.length>s.length&&(r=t.lockedTable.find(`.`+I).not(s),n=!0)):r=s,t._mapResizedRows(r,n,e),s.removeClass(Pe),t.rowResizer.removeClass(Fe),t.rowResizer.addClass(Pe),t._attachRowResizerEvents(),n&&(r=t.select()),o!=e&&t.trigger($e,{row:s,rows:r,oldHeight:o,newHeight:e}),s=null}}))},_draggable:function(){var t=this,r=t.options.reorderable;if(r===!0||r&&r.columns){t._draggableInstance&&t._draggableInstance.destroy();var i=t.wrapper.children(`.k-grid-header`);i.addClass(`k-grid-draggable-header`),t._draggableInstance=t.wrapper.kendoDraggable({group:n.guid(),autoScroll:!0,filter:t.content?`.k-grid-header:first `+te:`table:first>.k-grid-header `+te,dragstart:function(){i.children(`.k-grid-header-wrap`).off(`scroll`+N+`scrolling`).on(`scroll`+N+`scrolling`,function(e){t.virtualScrollable?n.scrollLeft(t.content.find(`>.k-virtual-scrollable-wrap`),this.scrollLeft):n.scrollLeft(t.scrollables.not(e.currentTarget),this.scrollLeft)})},dragend:function(){t._resetResizeHandleHeader(),i.children(`.k-grid-header-wrap`).off(`scroll`+N+`scrolling`)},drag:function(){t._hideResizeHandle()},hint:function(t){var r=t.attr(n.attr(`title`));return r&&=n.htmlEncode(r),e(`<div class="k-reorder-clue k-drag-clue" />`).html(r||t.attr(n.attr(`field`))||t.text()).prepend(n.ui.icon({icon:`cancel`,iconClass:`k-drag-status`}))}}).data(`kendoDraggable`)}},_reorderable:function(){let t=this,n=t.options.reorderable;(n===!0||n&&n.columns)&&(t.wrapper.data(`kendoReorderable`)&&t.wrapper.data(`kendoReorderable`).destroy(),t.wrapper.kendoReorderable({draggable:t._draggableInstance,dropFilter:te,allowDropAfterLastItem:!0,dragOverContainers:function(e,n){let r=er(t.columns);return r[e].lockable!==!1&&tr(r,t.columns,e,n)>-1},inSameContainer:function(n){let r=e(n.source).parent()[0],i=e(n.target).parent()[0],a=n.sourceIndex,o=n.targetIndex,s=er(t.columns),c=s&&s[a]&&!!s[a].lockable;return t._isLocked()&&c&&(r=e(n.source.closest(`.k-grid-header`))[0],i=e(n.target.closest(`.k-grid-header`))[0]),r===i&&tr(s,t.columns,a,o)>-1},change:function(e){let n=er(t.columns),r=n[e.oldIndex],i=tr(n,t.columns,e.oldIndex,e.newIndex);t.trigger(tt,{newIndex:i,oldIndex:v(r,n),column:r}),t.reorderColumn(i,r,e.position===`before`)}}))},_reorderHeader:function(e,t,n,r){for(var i=this,a=Yn(e[0],i.columns),o=Yn(t,i.columns),s,c,l=[],u=0;u<e.length;u++)e[u].columns&&(l=l.concat(e[u].columns));c=r?Sn(r,r,`tr:eq(`+a.row+`)>th.k-header:not(.k-group-cell,.k-hierarchy-cell)`):Sn(i.lockedHeader,i.thead,`tr:eq(`+a.row+`)>th.k-header:not(.k-group-cell,.k-hierarchy-cell)`);var d=J(e).length,f=J([t]).length;l.length?(d>0&&f===0?(s=`prepend`,Gn(e,t,l,i.columns,i.lockedHeader.find(`thead`),i.thead,this._groups(),s)):d===0&&f>0&&(s=o.cell===0&&e[0].columns&&!t.columns&&!i._group?`prepend`:`append`,Gn(e,t,l,Y(i.columns),i.thead,i.lockedHeader.find(`thead`),this._groups(),s)),(t.columns||a.cell-o.cell>1||o.cell-a.cell>1)&&(t=Qn(i.columns,t,e[0],n,i.columns),t&&(d>0&&f===0?i._reorderHeader(l,t,n,i.thead):d===0&&f>0?i._reorderHeader(l,t,n,i.lockedHead):i._reorderHeader(l,t,n)))):d!==f&&Bn(c[a.cell],i.columns,d),xn(c,a.cell,o.cell,n,e.length)},_reorderContent:function(t,n,r){var i=this,a=e(),o=t[0],s=q(t),c=v(o,Z(i.columns)),l=v(n,Z(i.columns)),u=v(s[0],X(i.columns)),d=v(n,X(i.columns)),f=J(i.columns).length,p=!!n.locked,m=i.footer||i.wrapper.find(`.k-grid-footer`),h=g=d,g,_;if(n.hidden){var y=p?J(i.columns):Y(i.columns);q(y).length>0?(h=g=d=this._findClosestVisibleColumnIndex(y,l),_=q(y.slice(l)).length>0):p?(d=i.lockedTable.find(`colgroup`),h=i.lockedHeader.find(`colgroup`),g=e(i.lockedFooter).find(`>table>colgroup`)):(d=i.tbody.prev(),h=i.thead.prev(),g=m.find(`.k-grid-footer-wrap`).find(`>table>colgroup`))}i._hasFilterRow()&&xn(i.wrapper.find(`.k-filter-row td:not(.k-group-cell,.k-hierarchy-cell)`),c,l,r,t.length),u>=0&&xn(Sn(i.lockedHeader,i.thead.prev(),M),u,h,_||r,s.length),i.options.scrollable&&u>=0&&!i._hasVirtualColumns()&&xn(Sn(i.lockedTable,i.tbody.prev(),M),u,d,_||r,s.length),m&&m.length&&(u>=0&&xn(Sn(i.lockedFooter,m.find(`.k-grid-footer-wrap`),`>table>colgroup>col:not(.k-group-col,.k-hierarchy-col)`),u,g,_||r,s.length),xn(m.find(`.k-footer-template>td:not(.k-group-cell,.k-hierarchy-cell)`),c,l,r,t.length));var b=i.tbody.children(`:not(.k-grouping-row,.k-detail-row)`);i.lockedTable&&(f>l?f<=c&&Br(i.lockedTable.find(`>tbody>tr.k-grouping-row:not([hidden])`),i.table.find(`>tbody>tr.k-grouping-row:not([hidden])`),t.length):f>c&&Br(i.table.find(`>tbody>tr.k-grouping-row:not([hidden])`),i.lockedTable.find(`>tbody>tr.k-grouping-row:not([hidden])`),t.length),a=i.lockedTable.find(`>tbody>tr:not(.k-grouping-row,.k-detail-row)`));for(var x=0,S=b.length;x<S;x+=1)xn(Sn(a[x],b[x],`>td:not(.k-group-cell,.k-hierarchy-cell)`),c,l,r,t.length)},_findClosestVisibleColumnIndex:function(e,t){var n=q(q(e.slice(t)).length>0?e.slice(t):e.slice(0,t+1).reverse())[0];return v(n,q(this.columns))},_autoFitLeafColumn:function(e){this.autoFitColumn(Z(this.columns)[e])},_hasReorderableRows:function(){return this.options.reorderable&&this.options.reorderable.rows},_draggableRows:function(){var t=this,r=t._checkBoxSelection||t.options.selectable&&!n.ui.Selectable.parseOptions(t.options.selectable).cell,i=!1,a=!!(t._isMobile||n.support.mobileOS);t._draggableRowsInstance&&t._draggableRowsInstance.destroy(),this.options.reorderable.rows.clickMoveClick!==!1&&this._hasDragHandleColumn&&(i=!0),t._draggableRowsInstance=t.tbody.kendoDraggable({holdToDrag:a,showHintOnHold:a,preventOsHoldFeatures:a,group:`row-draggable`,autoScroll:!0,filter:(r?` > .k-selected`:` > `+j)+(t._hasDragHandleColumn?` > [ref-grid-drag-cell]`:`:not(:has([data-container-for]))`),hint:function(i){var a=e(`<div class="k-reorder-clue k-drag-clue">`+n.ui.icon({icon:`cancel`,iconClass:`k-drag-status`})+`</div>`);if(r&&t.select().length>1&&t.lockedContent)a.append(`<span>`+t.select().length/2+` `+x(t.options.messages.itemsSelected)+`</span>`);else if(r&&t.select().length>1&&!t.lockedContent)a.append(`<span>`+t.select().length+` `+x(t.options.messages.itemsSelected)+`</span>`);else{var o=i.closest(j).clone();o.find(`td.k-command-cell`).remove(),o.find(`td`).each(function(e,t){a.append(`<span>`+t.innerText.replace(/<(\/?)script([^>]*)>/gi,``)+`&nbsp;</span>`)})}return a},clickMoveClick:i,cursorOffset:{top:0,left:0}}).data(`kendoDraggable`)},_reorderableRows:function(){var t=this,r=t._checkBoxSelection||t.options.selectable&&!n.ui.Selectable.parseOptions(t.options.selectable).cell;t.tbody.data(`kendoReorderable`)&&t.tbody.data(`kendoReorderable`).destroy(),t.tbody.kendoReorderable({smartPosition:!1,draggable:t._draggableRowsInstance,dragOverContainers:function(n,i){var a=!0,o=e(j,t.content).eq(i);return r&&(a=!o.is(`.k-selected`)),a},inSameContainer:function(t){return r?!e(t.target).is(`.k-selected`):!0},dropFilter:`> `+j,allowIcon:`insert-middle`,orientation:`vertical`,reorderDropCue:e(`<div class="k-drop-hint k-drop-hint-h"><div class="k-drop-hint-start"></div><div class="k-drop-hint-line"></div></div>`),positionDropCue:function(e,t){var r=n.getOffset(t.children(D).eq(0)).left;e.css({transform:`translate(0,-50%)`,left:r})},externalDraggable:function(e){var t=e.draggable;if(t)return t},change:function(e){t._triggerRowRorder(e)}})},_triggerRowRorder:function(e){var t=this,r={newIndex:e.position===`after`?e.newIndex+1:e.newIndex,oldIndex:e.oldIndex},i=e.element,a=t._checkBoxSelection||t.options.selectable&&!n.ui.Selectable.parseOptions(t.options.selectable).cell;r=a&&t.select().length>1?m(r,{rows:t.select()}):m(r,{row:i}),t.trigger(ot,r)||t.reorderRows(a?t.select():i,r.newIndex)},reorderRowTo:function(e,t){var n=this,r=n.dataItem(e),i=e.index();t<0||t===i||n.trigger(ot,{row:e,oldIndex:e.index(),newIndex:t})||n.dataSource.pushMove(t,[r])},reorderRows:function(e,t){var n=this,r=n.dataSource,i=n.tbody.children(j).length,a=n.dataItem(n.tbody.children(j).eq(t)),o=e.toArray().map(function(e){let t=n.dataItem(e);return t._isMoved=!0,t});a?t=r.indexOf(a):(a=n.dataItem(n.tbody.children(j).eq(i-1)),t=r.indexOf(a)+1),t>=0&&(n._rowDropping=!0,r.pushMove(t,o),n._rowDropping=!1)},autoFitColumns:function(e){var t=this;e||=t.columns;for(var n=0;n<e.length;n++){var r=e[n];r.columns?t.autoFitColumns(r.columns):t.autoFitColumn(r)}},autoFitColumn:function(t){var r=this,i=r.options,a=r.columns,o,s,c,u,d,f=r.lockedHeader?Q(r.lockedHeader.find(`>table>thead`)).filter(Pn).length:0,m,h,_,y,b=`col:not(.k-group-col):not(.k-hierarchy-col)`,x=`td:visible:not(.k-group-cell):not(.k-hierarchy-cell)`,S;if(t=typeof t==`number`?a[t]:p(t)?g(nr(a),function(e){return e===t})[0]:g(nr(a),function(e){return e.field===t})[0],!(!t||!In(t))){u=Z(a),h=t.minResizableWidth,o=v(t,u),d=t.locked,c=d?r.lockedHeader.children(`table`):r.thead.parent(),s=c.find(`[data-index='`+o+`']`),s.find(`a.k-grid-column-menu, a.k-grid-filter-menu`);var C=d?r.lockedTable:r.table,w=r.footer||e();r.footer&&r.lockedContent&&(w=d?r.footer.children(`.k-grid-footer-locked`):r.footer.children(`.k-grid-footer-wrap`));var T=w.find(`table`).first();r.lockedHeader&&!d&&(o-=f);for(var E=0;E<u.length&&u[E]!==t;E++)u[E].hidden&&o--;i.scrollable?(m=c.find(b).eq(o).add(C.children(`colgroup`).find(b).eq(o)).add(T.find(`colgroup`).find(b).eq(o)),d||(_=C.parent(),y=n.scrollLeft(_)),r._hasVirtualColumns()&&(o=v(t,r.virtualCols))):m=C.children(`colgroup`).find(b).eq(o);var D=c.add(C).add(T);G.safari&&s.css(`white-space`,`initial`);var O=l(s);m.width(``),D.css(`table-layout`,`fixed`),m.width(gt),D.addClass(`k-autofitting`),D.css(`table-layout`,``),S=l(s);var k=Math.ceil(Math.max(S,l(C.find(`tr:not(.k-grouping-row)`).eq(0).children(x).eq(o)),l(T.find(`tr`).eq(0).children(x).eq(o))))+1;if(h&&h>k&&(k=h),m.width(k),t.width=k,G.safari&&s.css(`white-space`,``),i.scrollable){for(var A=c.find(`col`),j,M=0,ee=0,te=A.length;ee<te;ee+=1)if(j=A[ee].style.width,j&&j.indexOf(`%`)==-1)M+=parseInt(j,10);else if(A.eq(ee).hasClass(`k-group-col`))M+=parseInt(A.eq(ee).width(),10);else{M=0;break}M&&D.each(function(){this.style.width=M+`px`})}D.removeClass(`k-autofitting`),y&&n.scrollLeft(_,y),r.trigger(et,{column:t,oldWidth:O,newWidth:k}),r._applyLockedContainersWidth(),r._syncLockedContentHeight(),r._syncLockedHeaderHeight(),r._updateStickyColumns()}},reorderColumn:function(e,n,r){var i=this,a=Tn(n,i.columns),o=a?a.columns:i.columns,s=v(n,o),c=o[e],l=i.virtualScroll||{},u,d=!!c.locked,f=J(i.columns).length,p=g(Z(i.columns),function(e){return e.groupHeaderColumnTemplate});if(!i._isStackedMode()&&s!==e&&!(!n.locked&&d&&Y(i.columns).length==1)&&!(n.locked&&!d&&f==1)){i._hideResizeHandle(),r===t&&(r=e<s);var m=[n];i._reorderHeader(m,c,r),i.lockedHeader&&(cr(i.thead),cr(i.lockedHeader)),c.columns&&(c=Z(c.columns),c=c[r?0:c.length-1]),n.columns&&(m=Z(n.columns)),i._reorderContent(m,c,r),u=!!n.locked,u=u!=d,n.locked=d,o.splice(r?e:e+1,0,n),o.splice(s<e?s:s+1,1),i._updateLockedCols(),i._updateCols(),i._templates(),i._updateColumnCellIndex(),i._updateColumnSorters(),p.length>0&&i._renderGroupRows(),i._updateTablesWidth(),i._applyLockedContainersWidth(),i._syncLockedHeaderHeight(),i._syncLockedContentHeight(),i._updateFirstColumnClass(),i._updateStickyColumns(),l.columns&&i.refresh(),u&&(d?i.trigger(nt,{column:n}):i.trigger(rt,{column:n}))}},_updateColumnCellIndex:function(){var e,t=0;this.lockedHeader&&(e=this.lockedHeader.find(`thead`),t=Kn(e,J(this.columns))),Kn(this.thead,Y(this.columns),t)},lockColumn:function(e){var t=this.columns;if(e=typeof e==`number`?t[e]:g(t,function(t){return t.field===e})[0],!(!e||e.locked||e.hidden)){e.sticky&&this.unstickColumn(t.indexOf(e));var n=J(t).length-1;this.reorderColumn(n,e,!1)}},unlockColumn:function(e){var t=this.columns;if(e=typeof e==`number`?t[e]:g(t,function(t){return t.field===e})[0],!(!e||!e.locked||e.hidden)){var n=J(t).length;this.reorderColumn(n,e,!0)}},stickColumn:function(e){var t=this.columns;e=typeof e==`number`?t[e]:g(t,function(t){return t.field===e})[0],!(!e||e.sticky||e.hidden)&&(e.locked&&(this.unlockColumn(t.indexOf(e)),e.locked)||(e.sticky=!0,this._updateStickyColumns()))},unstickColumn:function(e){var t=this.columns;e=typeof e==`number`?t[e]:g(t,function(t){return t.field===e})[0],!(!e||!e.sticky||e.locked||e.hidden)&&(this._removeStickyAttributes([e]),this._removeStickyStyles(mr(t)),e.sticky=!1,this._updateStickyColumns(),this._anyStickyColumns()===0&&(this._templates(),this._hasFilterRow()&&this._updateStickyFilterCells()))},cellIndex:function(t){let n=this;var r=0;let i=n._isStackedMode()?`div.k-grid-stack-cell`:`td`;return this.lockedTable&&!e.contains(this.lockedTable[0],t[0])&&(r=Z(J(this.columns)).length),e(t).parent().children(i+`:not(.k-group-cell,.k-hierarchy-cell)`).index(t)+r},_modelForContainer:function(t){t=e(t),!t.is(`tr`)&&this._editMode()!==`popup`&&(t=t.closest(`tr`));var r=t.attr(n.attr(`uid`))||t.find(`[ref='popup-edit-form']`).attr(n.attr(`uid`));return this.dataSource.getByUid(r)},_calculateColumnIndex:function(t){if(this._hasVirtualColumns()){let n=parseInt(e(t).closest(`tr`).find(`td`).first().attr(`colspan`),10);n=n>1?n-1:0;let r=t.data(`field`);return(this.thead?.find(`th[data-field='`+r+`']`)).data(`index`)??this.cellIndex(t)+n}return this.cellIndex(t)},_editable:function(){let r=this,i=r.options.editable,a=function(){let t=s(),n=r._editContainer;n&&n[0]&&!e.contains(n[0],t)&&n[0]!==t&&!e(t).closest(`.k-animation-container`).length&&(r.editable.end()?(r.closeCell(),r._toggleToolbarEditingItemsVisibility()):r._scrollVirtualWrapper())},o=n.support.mobileOS,c=!!(r._isMobile||o),l=o&&o.ios&&(o.browser===`chrome`||o.browser===`edge`);r._isEditableEnabled=r._isEditableEnabled===t?!i.readonly:r._isEditableEnabled;let u=r._isStackedMode();r._isEditableEnabled||r._removeEditableClickHandlers(),i&&r._isEditableEnabled&&(r._editMode()===`incell`?(r.table.add(r.lockedTable).on(ct+N,k+`>:not(.k-group-cell):not(.k-detail-cell):not(.k-hierarchy-cell):visible`,function(t){let i=e(t.target);r._editMode()===`incell`&&i.hasClass(`k-checkbox`)&&i.prev().attr(n.attr(`bind`))&&t.preventDefault()}),i.update!==!1&&(Zt&&r.wrapper.on(R+N,`.k-edit-cell > input[type='checkbox']`,function(t){e(t.target).trigger(`focus`)}).on(R+N,`.k-edit-cell`,function(t){e(t.target).is(`input`)||e(t.currentTarget).find(`input[type='checkbox']`).trigger(`focus`)}).on(ct+N,`tr:not(.k-grouping-row) > td`,function(t){var n=r._editContainer;n&&n[0]&&(e.contains(n[0],t.target)||n[0]===t.target)?r._mousedownOnEditCell=!0:r._mousedownOnEditCell=!1}),r.editableUserEvents=new n.UserEvents(r.wrapper,{filter:u?`.k-grid-stack-row:not(.k-grouping-row) div.k-grid-stack-cell`:`tr:not(.k-grouping-row) > td`,allowSelection:!0,preventDefault:l,supportDoubleTap:c,fastTap:c,[c?`doubleTap`:`tap`]:function(t){var n=e(t.target),i=r.lockedTable&&n.closest(`table`)[0]===r.lockedTable[0];if(r._mousedownOnEditCell=!1,n.hasClass(`k-hierarchy-cell`)||n.hasClass(`k-detail-cell`)||n.hasClass(`k-group-cell`)||n.hasClass(`k-edit-cell`)||n.hasClass(`k-drag-cell`)||n.hasClass(`k-grid-stack-edit-cell`)||n.has(`.k-grid-remove-command`).length||n.closest(`tbody`)[0]!==r.tbody[0]&&!i||e(t.target).is(`:input`))return;let a;u&&(a=n.parent().children().index(n)),r.editable?r.editable.end()?(e(s()).trigger(`blur`),r.closeCell(),r._requestInProgress||r.editCell(n,a)):r._scrollVirtualWrapper():r.editCell(n,a)}}),r.wrapper.on(`focusin`+N,function(){e.contains(this,s())||(clearTimeout(r.timer),r.timer=null)}).on(`focusout`+N,function(e){var t=!0;(Zt&&r._mousedownOnEditCell||r._virtualColScroll)&&(t=!1),r._mousedownOnEditCell=!1,t&&(r.timer=setTimeout(function(){a()},1))}))):i.update!==!1&&(r._editCommandClickHandler=r._editCommandClick.bind(r),r.wrapper.on(R+N,`tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-edit-command`,r._editCommandClickHandler),r._isVirtualInlineEditable()&&r.wrapper.on(`focusout`+N,`tr:not(.k-grouping-row) > td`,function(){r.editable&&!r.editable.end()&&r._scrollVirtualWrapper()})),r._removeCommandClickHandler=r._removeCommandClick.bind(r),r.wrapper.on(R+N,`tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-remove-command`,r._removeCommandClickHandler))},_getLastSelectedItemModel:function(){let e=this;if(!e.options.selectable)return;let t=e.getSelectedData();if(!t||!t.length)return;let n=t[t.length-1];return e.dataSource.getByUid(n.uid)},_removeToolbarClick:function(e){e.event?(e.event.preventDefault(),e.event.stopPropagation()):e.preventDefault();let t=this,r=this._getLastSelectedItemModel();if(!r)return;let i=t.tbody.children(`[`+n.attr(`uid`)+`=`+r.uid+`]`);t.removeRow(i)},_editToolbarClick:function(e){e.event?(e.event.preventDefault(),e.event.stopPropagation()):e.preventDefault();let t=this;if(t._editMode()===`incell`)return;let n=this._getLastSelectedItemModel();n&&t.editRow(n)},_editCommandClick:function(t){let n=this,r=e(t.currentTarget);n._belongsToGrid(r)&&(t.preventDefault(),n.editRow(r.closest(`tr`)))},_removeCommandClick:function(t){let n=this,r=n.options.editable,i=e(t.currentTarget);n._belongsToGrid(i)&&(r.destroy===!1?(t.stopPropagation(),n._confirmation()||t.preventDefault()):(t.preventDefault(),t.stopPropagation(),n.removeRow(i.closest(`tr`))),n._toggleToolbarEditingItemsVisibility())},editCell:function(t,n){t=e(t);let r=this,i=n===0||n?n:r._calculateColumnIndex(t),a=Z(r.columns)[i],o=r._modelForContainer(t),s=r._isStackedMode(),c=s?`k-grid-stack-edit-cell`:`k-edit-cell`;r.closeCell();let l=s?t.find(`.k-grid-stack-content`):t;if(o&&ti(a,o)&&!a.command){if(r.trigger(se,{model:o}))return;r._attachModelChange(o),r._editContainer=l,r._shouldClearEditableState&&r._clearEditableState(),t.addClass(c);let e=(r._isVirtualIncellEditable()||r._hasVirtualColumns())&&r._editableState;r.editable=l.kendoEditable({fields:wr(a,r._isAdaptive()?`auto`:`none`),model:o,size:r.options.size,target:r,change:function(e){r.trigger(ce,{values:e.values,container:t,model:o})&&e.preventDefault()},skipFocus:e}).data(`kendoEditable`);let n=t.closest(`tr`);s||n.addClass(`k-grid-edit-row`),o.new===!0&&!s&&(n.addClass(`k-grid-add-row`),delete o.new),r.lockedContent&&(Xr(n[0],r._relatedRow(n).addClass(`k-grid-edit-row`)[0]),n.hasClass(`k-grid-add-row`)&&r._relatedRow(n).addClass(`k-grid-add-row`),r._syncLockedScroll()),r.trigger(oe,{container:t,model:o}),r._toggleToolbarEditingItemsVisibility()}},enableEditing:function(){let e=this,t=e.wrapper.find(`.k-grid-toolbar`);if(!e._isEditableEnabled){e._isEditableEnabled=!0,e._editable();let n=t.find(`.k-grid-add`).getKendoButton(),r=t.find(`.k-grid-edit-command`).getKendoButton(),i=t.find(`.k-grid-remove-command`).getKendoButton(),a=t.find(`.k-grid-cancel-changes`).getKendoButton(),o=t.find(`.k-grid-save-changes`).getKendoButton(),s=t.find(`.k-grid-cancel-command`).getKendoButton(),c=t.find(`.k-grid-save-command`).getKendoButton();n&&n.bind(`click`,e._createClickHandler),r&&r.bind(`click`,e._editClickHandler),i&&i.bind(`click`,e._destroyClickHandler),a&&a.bind(`click`,e._cancelClickHandler),o&&o.bind(`click`,e._saveClickHandler),s&&s.bind(`click`,e._editCancelClickHandler),c&&c.bind(`click`,e._updateClickHandler)}e._toggleToolbarEditingItemsVisibility()},disableEditing:function(){let e=this;e._isEditableEnabled&&(e._editMode()===`incell`?e.closeCell():e.cancelRow(),e._clearEditableState(),e._destroyEditable(),e.editableUserEvents&&=(e.editableUserEvents.destroy(),null),e._removeEditableClickHandlers(),e._isEditableEnabled=!1,e._toggleToolbarEditingItemsVisibility())},_removeEditableClickHandlers:function(){let e=this,t=e.wrapper.find(`.k-grid-toolbar`);e.wrapper.off(R+N,`tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-edit-command`,e._editCommandClickHandler),e.wrapper.off(R+N,`tbody>tr:not(.k-detail-row,.k-grouping-row):visible .k-grid-remove-command`,e._removeCommandClickHandler),t.off(R+N,`.k-grid-add`,e._createClickHandler),t.off(R+N,`.k-grid-edit-command`,e._editClickHandler),t.off(R+N,`.k-grid-remove-command`,e._destroyClickHandler);let n=t.find(`.k-grid-add`).getKendoButton(),r=t.find(`.k-grid-edit-command`).getKendoButton(),i=t.find(`.k-grid-remove-command`).getKendoButton(),a=t.find(`.k-grid-cancel-changes`).getKendoButton(),o=t.find(`.k-grid-save-changes`).getKendoButton(),s=t.find(`.k-grid-cancel-command`).getKendoButton(),c=t.find(`.k-grid-save-command`).getKendoButton();n&&n.unbind(`click`),r&&r.unbind(`click`),i&&i.unbind(`click`),a&&a.unbind(`click`),o&&o.unbind(`click`),s&&s.unbind(`click`),c&&c.unbind(`click`),e._editCommandClickHandler=null,e._removeCommandClickHandler=null},_adjustLockedHorizontalScrollBar:function(){var e=this.table,t=e.parent(),r=e[0].offsetWidth>t[0].clientWidth?n.support.scrollbar():0;this.lockedContent.height(t[0].offsetHeight-r)},_syncLockedScroll:function(){this.lockedContent[0].scrollTop=this.content[0].scrollTop,this.virtualScrollable&&(this.lockedContent[0].scrollTop=this.wrapper.find(`.k-virtual-scrollable-wrap`)[0].scrollTop)},_syncLockedContentHeight:function(){this.lockedTable&&(this.touchScroller||this._adjustLockedHorizontalScrollBar(),this._adjustRowsHeight(this.table,this.lockedTable))},_syncLockedHeaderHeight:function(){if(this.lockedHeader){var e=this.lockedHeader.children(`table`),t=this.thead.parent();this._adjustRowsHeight(e,t),Yr(e,t)}},_syncLockedFooterHeight:function(){this.lockedFooter&&this.footer&&this.footer.length&&this._adjustRowsHeight(this.lockedFooter.children(`table`),this.footer.find(`.k-grid-footer-wrap > table`))},_destroyEditable:function(){let e=this,t=e._editContainer&&e._editContainer.length&&e._editContainer.closest(`.k-window`).length?`kendoWindow`:`kendoActionSheet`,n=function(){if(e.editable){let n=e.editView?e.editView.element:e._editContainer,r=e._editContainer.data(t);n&&(r&&(n=r.wrapper),n.off(R+N,`.k-grid-cancel-command, button[ref-cancel-button], [ref-actionsheet-action-button]:not(.k-button-primary)`,e._editCancelClickHandler),n.off(R+N,`.k-grid-save-command, button[ref-update-button], [ref-actionsheet-action-button].k-button-primary`,e._editUpdateClickHandler)),e._detachModelChange(),e.editable.destroy(),e.editable=null,r&&r.destroy(),e._editContainer=null,e._destroyEditView(),e._editableIsClosing=null}};e.editable&&(e._editMode()===`popup`&&!e._isMobile?e._editableIsClosing?e._editContainer.data(t).bind(`deactivate`,n):(e._editableIsClosing=!0,e._editContainer.data(t).bind(`deactivate`,n).close()):n()),e._confirmDialog&&=(e._confirmDialog.close(),e._confirmDialog.destroy(),null)},_destroyEditView:function(){this.editView&&(this.editView.purge(),this.editView=null,this.pane.navigate(``))},_attachModelChange:function(e){var t=this;t._modelChangeHandler=function(e){t._modelChange({field:e.field,model:this})},e.bind(`change`,t._modelChangeHandler)},_detachModelChange:function(){var e=this,t=e._editContainer,n=e._modelForContainer(t);n&&n.unbind(P,e._modelChangeHandler)},closeCell:function(e){let t=this,n=t._editContainer,i,a,o,s;if(!n||(o=t._modelForContainer(n),e&&t.trigger(`cancel`,{container:n,model:o})))return;let c=t._isStackedMode(),l=c?`k-grid-stack-edit-cell`:`k-edit-cell`,u=n.closest(`.`+l);t.trigger(he,{type:e?`cancel`:`save`,model:o,container:n});let d=c?u.parent().children().index(u):t._calculateColumnIndex(n);if(c?u.removeClass(l):n.removeClass(l),i=Z(t.columns)[d],s=t.editable&&t.editable.validatable&&t.editable.validatable.errors(),e&&o.dirtyFields&&o.dirtyFields[i.field]&&s.length&&delete o.dirtyFields[i.field],a=n.closest(`tr`).removeClass(`k-grid-edit-row`),a.hasClass(`k-grid-add-row`)&&a.removeClass(`k-grid-add-row`),t.lockedContent){let e=t._relatedRow(a);e.removeClass(`k-grid-edit-row`),e.hasClass(`k-grid-add-row`)&&e.removeClass(`k-grid-add-row`)}if(t._destroyEditable(),t._displayCell(n,i,o),t._shouldClearEditableState&&t._clearEditableState(),t.trigger(`itemChange`,{item:a,data:o,ns:r}),t._activeStackedCell&&t._setCurrentStackedCell(n),t.lockedContent){let e=a&&a.data(`uid`),n=(t._cachedRowsHeight&&t._cachedRowsHeight[e])??``;Xr(a.css(mt,n)[0],t._relatedRow(a).css(mt,n)[0])}},_displayCell:function(e,t,r){var i=this,a={storage:{},count:0},o=m({},n.Template,i.options.templateSettings),s=n.template(i._cellTmpl(t,a),o);a.count>0&&(s=s.bind(a.storage)),e.empty().html(s(r))},removeRow:function(e){this._confirmation(e)&&this._removeRow(e)},_removeRow:function(n){var r=this,i,a,o,s,c=r._editMode();c!==`incell`&&r.cancelRow(),n=e(n),r.lockedContent&&(n=n.add(r._relatedRow(n))),n=n.hide(),r.dataSource._isGroupPaged()&&r._removeGroupIfEmpty(n),i=r._modelForContainer(n),i!=t&&i.hasOwnProperty(`_isMoved`)&&delete i._isMoved,i&&!r.trigger(le,{row:n,model:i})?(s=r.dataSource.options.schema,r._selectedIds&&s&&s.model&&(a=r._getSchemaIdField(),o=i[a],delete r._selectedIds[o]),r.dataSource.remove(i),(c===`inline`||c===`popup`)&&r.dataSource.sync()):c===`incell`&&r._destroyEditable()},_editMode:function(){let e=`incell`,t=this.options.editable;return t!==!0&&(e=typeof t==`string`?t:t.mode||e),e},editRow:function(t){let r,i=this;t instanceof a?r=t:(t=e(t),r=i._modelForContainer(t));let o=i._editMode(),s;if(i.cancelRow(),r){if(t=i.tbody.children(`[`+n.attr(`uid`)+`=`+r.uid+`]`),i._attachModelChange(r),o===`popup`)i._createPopupEditor(r);else if(o===`inline`)i._createInlineEditor(t,r);else if(o===`incell`){let n=i._isStackedMode();(n?t.find(`.k-grid-stack-cell:not(.k-command-cell):not(.k-drag-cell)`):t.children(D)).each(function(){let t=e(this),a=n?t.parent().children().index(t):i._calculateColumnIndex(t),o=Z(i.columns)[a];if(r=i._modelForContainer(t),r&&(!r.editable||r.editable(o.field))&&o.field&&!o.selectable&&!o.draggable)return i.editCell(t,a),!1})}s=i.editView?i.editView.element:o===`popup`?i._editContainer?.parent():i._editContainer,s&&(this._editCancelClickHandler||=this._editCancelClick.bind(this),s.on(R+N,`.k-grid-cancel-command, button[ref-cancel-button], [ref-actionsheet-action-button]:not(.k-button-primary)`,this._editCancelClickHandler),this._editUpdateClickHandler||=this._editUpdateClick.bind(this),s.on(R+N,`.k-grid-save-command, button[ref-update-button], [ref-actionsheet-action-button].k-button-primary`,this._editUpdateClickHandler)),i._toggleToolbarEditingItemsVisibility()}},_editUpdateClick:function(e){e.preventDefault(),e.stopPropagation?e.stopPropagation():e.event&&e.event.stopPropagation&&e.event.stopPropagation(),this.saveRow(),this._preventOnCloseEditableChanges=this._editMode()===`popup`,this.one(be,()=>{this._toggleToolbarEditingItemsVisibility()})},_editCancelClick:function(t){var n=this,r=n.options.navigatable,i=n.editable.options.model,a=n.editView?n.editView.element:n._editContainer;if(t.preventDefault(),t.stopPropagation?t.stopPropagation():t.event&&t.event.stopPropagation&&t.event.stopPropagation(),!n.trigger(`cancel`,{container:a,model:i})){var o=n.items().index(e(n.current()).parent());n.cancelRow(),r&&(n._setCurrent(n.items().eq(o).children().filter(A).first()),$(n.table,!0)),this._toggleToolbarEditingItemsVisibility()}},_editFields:function(e,t){for(var n=[],r,i=0;i<e.length;i++)r=e[i],!(r.selectable||r.command)&&ti(r,t)&&n.push(wr(r,this._isAdaptive()?`auto`:`none`));return n},_createPopupEditor:function(t){var i=this,a=`<div `+n.attr(`uid`)+`="`+t.uid+`" ref="popup-edit-form"><`+(i._isMobile?`ul class="k-edit-form-container k-listgroup k-listgroup-flush">`:`div class="k-edit-form-container">`),o,s,c,l,u,d,f,h,g,_,v=Z(i.columns),y,b=n.guid(),S=i.options.editable,C=S.template,w=p(S)?S.window:{},T=m({},n.Template,i.options.templateSettings),E,D,O;let k=i._isAdaptive();if(!i.trigger(se,{model:t})){if(w||={},C)for(typeof C===B&&(C=n.unescape(C)),a+=n.template(C,T)(t),c=0,l=v.length;c<l;c++)o=v[c],o.command&&(_=Zr(o.command,`edit`),_&&(s=_));else for(c=0,l=v.length;c<l;c++)o=v[c],!o.selectable&&(o.command?o.command&&(_=Zr(o.command,`edit`),_&&(s=_)):i._isMobile&&(a+=`<li class="k-item k-listgroup-item">`,ti(o,t)?(a+=`<label class="k-label k-listgroup-form-row">`,a+=`<span class="k-item-title k-listgroup-form-field-label">`+(o.title&&(i.options.encodeTitles?mi(o.title,!0):o.title)||o.field||``)+`</span>`,a+=`<div class="k-listgroup-form-field-wrapper" id="`+o.field+`_`+b+`" `+n.attr(`container-for`)+`="`+o.field+`"></div>`,a+=`</label>`):(E={storage:{},count:0},u=n.template(i._cellTmpl(o,E),T),E.count>0&&(u=u.bind(E.storage)),a+=`<label class="k-label k-listgroup-form-row k-no-click">`,a+=`<span class="k-item-title k-listgroup-form-field-label">`+(o.title&&(i.options.encodeTitles?mi(o.title,!0):o.title)||o.field||``)+`</span>`,a+=`<span class="k-no-editor k-listgroup-form-field-wrapper">`+u(t)+`</span>`,a+=`</label>`),a+=`</li>`));if(s&&p(s)&&(p(s.text)&&(d=s.text.update,f=s.text.cancel),p(s.iconClass)&&(h=s.iconClass.update,g=s.iconClass.cancel),s.attr&&(y=s.attr)),i._isMobile){a+=`</ul></div>`;let e=x(i.options.messages.commands.cancel),t=x(i.options.messages.commands.update);i.editView=i.pane.append(`<div data-`+n.ns+`role="view" class="k-grid-edit-form"><div data-`+n.ns+` class="k-appbar k-appbar-primary">`+n.html.renderButton(`<button class="k-header-cancel k-grid-cancel-command" title="${e}" aria-label="${e}"></button>`,{fillMode:`flat`,icon:`chevron-left`})+`<span class="k-spacer"></span><span>${x(i.options.messages.commands.edit||`Edit`)}</span><span class="k-spacer"></span>`+n.html.renderButton(`<button class="k-header-done k-grid-save-command" title="${t}" aria-label="${t}"></button>`,{fillMode:`flat`,icon:`check`})+`</div><div data-`+n.ns+`role="content" class="`+Qt.content+`">`+a+`</div></div>`),D=i._editContainer=i.editView.element.find(`[ref='popup-edit-form']`)}else{let n=e(i._createButton({name:`update`,text:d,attr:y,iconClass:h,skipCommandClass:!0,skipTabIndex:!0})).attr(`ref-update-button`,``),r=e(i._createButton({name:`canceledit`,text:f,attr:y,iconClass:g,skipCommandClass:!0,skipTabIndex:!0})).attr(`ref-cancel-button`,``);a+=`</div>`,D=k?i._editContainer=e(a).appendTo(`body`).eq(0).kendoActionSheet({modal:!0,adaptive:!0,title:t.id?`Edit record`:`Add new record`,fullscreen:i.smallMQL.mediaQueryList.matches,closeButton:!0,actionButtons:[{text:`Cancel`,icon:`cancel`},{text:`Save`,icon:`save`,themeColor:`primary`}],open:function(e){e.sender.element.removeClass(`k-popup`),i.editable.element.focus()},close:function(n){if(n.sender.element.trigger(`focus`),!i._preventOnCloseEditableChanges&&i.trigger(`cancel`,{container:D,model:t})){n.preventDefault();return}var r=i.items().index(e(i.current()).parent());i._preventOnCloseEditableChanges||(i._editableIsClosing=!0,i.cancelRow(!1,!0)),i.options.navigatable&&(i._isStackedMode()?i._setCurrentStackedCell():(i._setCurrent(i.items().eq(r).children().filter(A).first()),$(i.table,!0))),i._toggleToolbarEditingItemsVisibility()}}):i._editContainer=e(a).appendTo(i.wrapper).eq(0).kendoWindow(m({modal:!0,resizable:!1,draggable:!0,title:i.options.messages.commands.edit||`Edit`,_footerTemplate:()=>`<div class="k-actions k-actions-start k-actions-horizontal k-window-actions">`+n[0].outerHTML+r[0].outerHTML+`</div>`,visible:!1,close:function(n){if(n.userTriggered){if(n.sender.element.trigger(`focus`),i.trigger(`cancel`,{container:D,model:t})){n.preventDefault();return}var r=i.items().index(e(i.current()).parent());i._editableIsClosing=!0,i.cancelRow(),i._toggleToolbarEditingItemsVisibility(),i._isStackedMode()?i._setCurrentStackedCell():(i._setCurrent(i.items().eq(r).children().filter(A).first()),$(i.table,!0))}}},w))}!C&&!i._isMobile?(i.editable=new r.Form(i._editContainer.find(`.k-edit-form-container`),{items:i._editFields(v,t),buttonsTemplate:()=>``,formData:t,size:i._isAdaptive()?`large`:`medium`}).editable,i._editContainer.append(O),k&&i.editable.element.removeClass(`k-edit-form-container`)):(i.editable=i._editContainer.kendoEditable({fields:i._isMobile&&!C?i._editFields(v,t):null,model:t,clearContainer:!1,target:i,skipFocus:!0}).data(`kendoEditable`),k&&i.editable.element.find(`.k-edit-form-container`).removeClass(`k-edit-form-container`)),i._openPopUpEditor(k),i.trigger(oe,{container:D,model:t})}},_openPopUpEditor:function(e){var t=this;let n=e?`kendoActionSheet`:`kendoWindow`;var r=t._editContainer?t._editContainer.data(n):null,i=(t.options.editable||{}).window||{};this._isMobile?this.pane.navigate(this.editView,this._editAnimation):r&&(!e&&!i.position?r.center():e&&r.fullscreen(t.smallMQL.mediaQueryList.matches),r.open())},_createInlineEditor:function(t,r){var i=this,a,o,s,c=[];let l=i._isStackedMode();if(i.trigger(se,{model:r}))return;i.lockedContent&&(t=t.add(i._relatedRow(t)));let u=l?t.children(`:not(.k-group-cell,.k-hierarchy-cell)`).find(`.k-grid-stack-cell:not(.k-drag-cell)`):t.children(`:not(.k-group-cell,.k-hierarchy-cell,.k-drag-cell)`),d=Z(l?q(i.columns):i.columns);i.options.navigatable&&l&&kn(u),u.each(function(){if(o=e(this),a=d[i._calculateColumnIndex(o)],a){if(!a.command&&ti(a,r)){c.push(wr(a,i._isAdaptive()?`auto`:`none`));let e=l?o.children(`.k-grid-stack-content`):o;e.attr(n.attr(`container-for`),a.field),e.empty()}else if(a.command&&(s=Zr(a.command,`edit`),s)){o.empty();var t,u,f,m,h;p(s)&&(p(s.text)&&(t=s.text.update,u=s.text.cancel),p(s.iconClass)&&(f=s.iconClass.update,m=s.iconClass.cancel),s.attr&&(h=s.attr)),e(i._createButton({name:`update`,text:t,attr:h,iconClass:f,skipTabIndex:!0})+i._createButton({name:`canceledit`,text:u,attr:h,iconClass:m,skipTabIndex:!0})).appendTo(o)}}}),i._editContainer=t,i._editContainer.addClass(`k-grid-edit-row`),r.new===!0&&(i._editContainer.addClass(`k-grid-add-row`),delete r.new),i._shouldClearEditableState&&i._clearEditableState(),i.editable=new n.ui.Editable(i._editContainer,{target:i,fields:c,size:i.options.size,model:r,skipFocus:i._isVirtualInlineEditable()&&i._editableState&&!!i._editableState.field||i._hasVirtualColumns(),clearContainer:!1}),t.length>1&&(Xr(t[0],t[1]),i._applyLockedContainersWidth(!0)),l&&u.addClass(`k-grid-stack-edit-cell`),i.trigger(oe,{container:t,model:r})},cancelRow:function(e){var t=this,r=t._editContainer,i;if(r){if(i=t._modelForContainer(r),!i||e&&t.trigger(`cancel`,{container:r,model:i}))return;t._destroyEditable(),t.dataSource.cancelChanges(i),t._clearEditableState(),t._editMode()===`popup`?t._displayRow(t.tbody.find(`[`+n.attr(`uid`)+`=`+i.uid+`]`)):t._displayRow(r),t._aria()}},saveRow:function(){var t=this,n=this._editContainer,r=this._modelForContainer(n),i=e.Deferred(),a;if(!n||!this.editable)return i.resolve().promise();if(a=t.editable&&t.editable.end(),!a||this.trigger(ce,{container:n,model:r}))return a||t._scrollVirtualWrapper(),i.reject().promise();if(this._editMode()===`popup`){let e=`[ref-update-button]`,t=n.find(e);t?.length||(t=n.parent().find(e)),t?.length&&t?.addClass(`k-disabled`).attr(`aria-disabled`,!0)}return t._clearEditableState(),this.dataSource.sync()},_displayRow:function(t){var i=this,a=i._modelForContainer(t),o,s,c,l=t.hasClass(I),u=t.hasClass(`k-table-alt-row`);a&&(i.lockedContent&&(o=e((u?i.lockedAltRowTemplate:i.lockedRowTemplate)(a)),n.applyStylesFromKendoAttributes(o,[`display`]),i._relatedRow(t.last()).replaceWith(o)),s=e((u?i.altRowTemplate:i.rowTemplate)(a)),t.is(`:visible`)||s.hide(),n.applyStylesFromKendoAttributes(s,[`display`]),i._anyStickyColumns()&&n.applyStylesFromKendoAttributes(s,[`left`,`right`]),t.replaceWith(s),i.trigger(`itemChange`,{item:s,data:a,ns:r}),o&&o.length&&i.trigger(`itemChange`,{item:o,data:a,ns:r}),l&&(i.options.selectable||i._checkBoxSelection)&&i.select(s.add(o)),o&&Xr(s[0],o[0]),c=s.next(),c.hasClass(`k-detail-row`)&&c.is(`:visible`)&&n.ui.icon(s.find(`.k-hierarchy-cell .k-icon,.k-hierarchy-cell .k-svg-icon`),{icon:`caret-alt-down`}))},_showMessage:function(t,r){var i=this;return i._isMobile?((i._confirmDialog=new n.ui.Confirm(e(`<div />`).appendTo(document.body),{modal:{preventScroll:!0},closable:!1,title:!1,content:t.title,messages:{okText:t.confirmDelete,cancel:t.cancelDelete},open:function(){i.content&&(i.content.data(wt,i.content.css(wt)),i.content.css(wt,`hidden`))},close:function(){i.content&&i.content.css(wt,i.content.data(wt))}})).result.done(function(){i._removeRow(r)}).fail(function(){var e=i._confirmDialog;e&&(e.close(),e.destroy())}),!1):window.confirm(t.title)},_confirmation:function(e){var t=this,n=t.options.editable,r=n===!0||typeof n===B?t.options.messages.editable.confirmation:n.confirmation;return p(n)&&typeof n.mode===B&&typeof r!==z&&typeof r!==B&&r!==!1&&(r=t.options.messages.editable.confirmation),r!==!1&&r!=null?(typeof r===z&&(r=r(t._modelForContainer(e))),t._showMessage({confirmDelete:n.confirmDelete||t.options.messages.editable.confirmDelete,cancelDelete:n.cancelDelete||t.options.messages.editable.cancelDelete,title:r===!0?t.options.messages.editable.confirmation:r},e)):!0},cancelChanges:function(){var e=this;e._cachedRowsHeight&&(e._mapCachedRowsHeight(`getByUid`,`id`),e._shouldMapHights=!0),e.dataSource.cancelChanges(),e._isVirtualEditable()&&e._virtualPageToTop(function(){e.virtualScrollable.scrollToTop()})},saveChanges:function(){var e=this,t=e.editable&&e.editable.end();(t||!e.editable)&&!e.trigger(ye)?e.dataSource.sync():t||e._scrollVirtualWrapper()},addRow:function(){var e=this,t,n=e.dataSource,r=e._editMode(),i=e.options.editable.createAt||``,a=n.pageSize(),o=n.view()||[],s=i.toLowerCase()===vt,c,l=e._isVirtualEditable();e.editable&&e.editable.end()||!e.editable?(r!=`incell`&&e.cancelRow(),t=n.indexOf(o[0]),s&&(t+=o.length,a&&!n.options.serverPaging&&a<=o.length&&--t),t<0&&(t=n.page()>n.totalPages()?(n.page()-1)*a:0),e.options.navigatable&&r==`incell`&&e._removeCurrent(),l?e._virtualAddRow():(c=n.insert(t,{}),c.new=!0,e._editModel(c))):e._scrollVirtualWrapper()},_editModel:function(e){var t=this,r=t.options.editable.createAt||``,i=t._editMode();if(e){var a=e.uid,o=(t.lockedContent?t.lockedTable:t.table).find(`tr[`+n.attr(`uid`)+`=`+a+`]`);let s=t._isStackedMode(),c=s?o.find(`td:not(.k-group-cell,.k-hierarchy-cell) .k-grid-stack-cell:not(.k-command-cell)`):o.children(`td:not(.k-group-cell,.k-hierarchy-cell)`),l=t._firstEditableColumnIndex(o),u=c.eq(l);i===`inline`&&o.length?t.editRow(o):i===`popup`?t.editRow(e):u.length&&t.editCell(u,s&&l),r.toLowerCase()==`bottom`&&t.lockedContent&&(t.lockedContent[0].scrollTop=t.content[0].scrollTop=t.table[0].offsetHeight)}},_virtualAddRow:function(){var e=this,t=(e.options.editable.createAt||``).toLowerCase()===vt;e._clearEditableState(),t?e._virtualAddRowAtBottom():e._virtualAddRowAtTop()},_virtualAddRowAtTop:function(){var e=this,t=e.dataSource,n=e.virtualScrollable,r;t.page()===1?(r=t.insert(0,{}),r.new=!0,e._editModel(r),n.scrollToTop()):e._virtualPageToTop(function(){r=t.insert(0,{}),r.new=!0,e._editModel(r),n.scrollToTop()})},_virtualAddRowAtBottom:function(){var e=this,t=e.dataSource,n=e.virtualScrollable,r=t.total(),i;t.at(r-1)instanceof a?(i=t.insert(r,{}),i.new=!0,e._virtualPageToBottom(function(){e._editModel(i),n.scrollToBottom()})):e._virtualPageToBottom(function(){i=t.insert(r,{}),i.new=!0,e._editModel(i),n.scrollToBottom()})},_virtualPageToTop:function(e){var t=this;t._virtualPage(0,t.dataSource.take(),function(){e()})},_virtualPageToBottom:function(e){var t=this,n=t.dataSource,r=n.take(),i=n.total(),a=i>r?i-r:0;t._virtualPage(a,r,function(){e()})},_virtualPage:function(e,t,n){var r=this;r._isVirtualEditable()&&(r.virtualScrollable._preventScroll=!0,r.virtualScrollable._page(e,t,n))},_firstEditableColumnIndex:function(e){var t=this,n,r=Z(t.columns),i,a,o=t._modelForContainer(e);for(i=0,a=r.length;i<a;i++)if(n=r[i],o&&(!o.editable||o.editable(n.field))&&!n.command&&n.field&&n.hidden!==!0)return i;return-1},_clickAdd:function(e){e.preventDefault&&e.preventDefault(),this.addRow(),this._toggleToolbarEditingItemsVisibility()},_clickCancel:function(e){e.preventDefault&&e.preventDefault(),this.cancelChanges(),this._toggleToolbarEditingItemsVisibility()},_clickExcel:function(e){let t=this;e.preventDefault&&e.preventDefault(),t._exportExcel()},_exportExcel:function(t){let n=this,r=e.Deferred();n._isExport=!0,n._progress(!0),setTimeout(()=>{n.saveAsExcel(r),r.always(()=>{n._progress(!1),n._isExport=!1,t&&typeof t===z&&t()})},1)},_clickPdf:function(e){var t=this;e.preventDefault&&e.preventDefault(),t._exportPdf()},_exportPdf:function(e){let t=this;t._isExport=!0,t._pdfInitialized=!0,t._progress(!0);var n=t.saveAsPDF();n?n.done(function(){t._progress(!1),t._isExport=!1,t._pdfInitialized=!1,e&&typeof e===z&&e()}):(t._progress(!1),t._isExport=!1,t._pdfInitialized=!1)},_clickSave:function(e){e.preventDefault&&e.preventDefault(),this.saveChanges()},_searchInput:function(e){var t=this,n=e.currentTarget;clearTimeout(t._searchTimeOut),t._searchTimeOut=setTimeout(function(){t._search(n.value)},300)},_pasteToolbarDropDown:function(){var e=this;e.wrapper.find(`.k-grid-paste-action`).length&&(e.pasteActionsDropDownList=e.wrapper.find(`.k-grid-paste-action`).kendoDropDownList({dataSource:[{value:`insert`,text:`Paste (Insert)`},{value:`replace`,text:`Paste (Replace)`}],dataTextField:`text`,dataValueField:`value`,_allowFilterPaste:!1}).data(`kendoDropDownList`))},_pushExpression:function(e,t,r){var i=this,a=i.dataSource.options.serverFiltering,o={string:`contains`,number:`gte`,date:`gte`,enums:`eq`,boolean:`eq`},s=t.name||t,c=t.operator,l=i.dataSource.reader.model&&i.dataSource.reader.model.fields,u=l&&l[s],d=u&&u.parse,f={field:s,operator:c||o.string,value:r};(c||a)&&u&&n.isFunction(d)&&d(r)!==null&&m(f,{operator:c||o[u.type],value:d(r)}),!(a&&u&&n.isFunction(d)&&d(r)===null)&&e.push(f)},_hasTool:function(e){let t=this.wrapper.find(`.k-grid-toolbar ${e}`);return{present:t.length>0,tool:t}},_initToolbarItemsPopups:function(){let e=this,t=e._hasTool(`.k-toolbar-button.k-grid-column-menu[ref-toolbar-tool]`),n=e._hasTool(`.k-toolbar-button.k-grid-sort-tool[ref-toolbar-tool]`),r=e._hasTool(`.k-toolbar-button.k-grid-filter-tool[ref-toolbar-tool]`),i=e._hasTool(`.k-toolbar-button.k-grid-column-chooser[ref-toolbar-tool]`),a=e._hasTool(`.k-toolbar-button.k-grid-group-tool[ref-toolbar-tool]`),o=e._hasTool(`[ref-grid-smartbox-input]`);if(t.present&&e._globalColumnsMenu(t.tool),i.present&&e._columnChooserTool(i.tool),n.present&&(e._toggleBadge(n.tool,e.dataSource.sort()),e._sortToolbarTool(n.tool)),r.present&&(e._toggleBadge(r.tool,e.dataSource.filter()),e._filterToolbarTool(r.tool)),a.present){let t=e.dataSource.group();e._toggleBadge(a.tool,t&&t.length),e._groupToolbarTool(a.tool)}o.present&&e._smartBoxTool(o.tool)},_unbindToolbarTools:function(){this.wrapper.find(`
                .k-toolbar-button.k-grid-column-menu[ref-toolbar-tool],
                .k-toolbar-button.k-grid-sort-tool[ref-toolbar-tool],
                .k-toolbar-button.k-grid-filter-tool[ref-toolbar-tool],
                .k-toolbar-button.k-grid-column-chooser[ref-toolbar-tool],
                .k-toolbar-button.k-grid-group-tool[ref-toolbar-tool],
                .k-toolbar-button.k-grid-ai-assistant-tool[ref-toolbar-tool]
            `).each(function(){e(this).off(`click`+N)})},_ai:function(){let e=this,t=e._hasTool(`.k-toolbar-button.k-grid-ai-assistant-tool[ref-toolbar-tool]`);t.present&&e._initAiAssistantWindow(t.tool)},_defaultSearch:function(e){let t=this,n=t.options.smartBox||{},r=null;n&&n.searchSettings&&n.searchSettings.enabled!==!1&&(r=n.searchSettings.searchFields||null),t._search(e,r)},_smartBoxTool:function(e){let t=this,n=t.options.smartBox||{};if(!e.length)return;if(n.size=t.options.size,n.rounded=`full`,n.aiAssistantSettings){let e=n.aiAssistantSettings?.service||t.options?.ai?.service||null;if(n.aiAssistantSettings.service=e,e){e=m(!0,{data:e=>Hr(e,er(t.columns))},e),n.aiAssistantSettings.service=e;let r=n.aiAssistantResponseSuccess;n.aiAssistantResponseSuccess=function(e){typeof r==`function`&&r.call(this,e),e.isDefaultPrevented()||t.handleAIResponse(e.response)}}}let r=n.search;n.search=function(e){typeof r==`function`&&r.call(this,e),e.isDefaultPrevented()||t._defaultSearch(e.searchValue)},e.kendoSmartBox(n);let i=e.data(`kendoSmartBox`);i&&(t._smartBox=i)},_search:function(e,t){let n=this;n._searchTimeOut&&=null;let r=n.options,i=t||(r.search?r.search.fields:null),a={filters:[],logic:`or`},o=i;if(o||=xr(r.columns),n.dataSource.options.endless&&(n.dataSource.options.endless=null,n._endlessPageSize=n.dataSource.options.pageSize),e)for(let t=0;t<o.length;t++)n._pushExpression(a.filters,o[t],e);else a={};n.dataSource.filter(a)},_toolbar:function(){var t=this,r=t.wrapper,i=t.options.toolbar,a,o;if(i){if(t._createClickHandler=t._addClickHandler=t._clickAdd.bind(t),t._editClickHandler=t._editToolbarClick.bind(t),t._destroyClickHandler=t._removeToolbarClick.bind(t),t._editCancelClickHandler=t._editCancelClick.bind(t),t._updateClickHandler=t._editUpdateClick.bind(t),t._cancelClickHandler=t._clickCancel.bind(t),t._saveClickHandler=t._clickSave.bind(t),t._excelClickHandler=t._clickExcel.bind(t),t._pdfClickHandler=t._clickPdf.bind(t),t._serachHandler=t._searchInput.bind(t),a=t.wrapper.find(`.k-grid-toolbar`),a.length?t._attachToolbarClicks():(a=e(`<div class="k-grid-toolbar k-toolbar" />`).prependTo(r),typeof i===B||b(i)?(typeof i===B&&(i=n.template(i).bind(t)),a.html(i({grid:t})),t._attachToolbarClicks()):_(i)?(o=t._processItems(i),a.kendoToolBar({navigateOnTab:!t.options.navigatable,size:t.options.size,items:o})):p(i)&&a.kendoToolBar({navigateOnTab:!t.options.navigatable,size:t.options.size,items:t._processItems(i.items||[]),overflow:i.overflow})),t._checkBoxSelection&&a.on(R+N,`.k-select-checkbox`,t._headerCheckboxClick.bind(t)),a.on(xt+N,`.k-grid-search input`,this._serachHandler),i.overflow&&i.overflow.mode===`section`){let e=a.data(`kendoToolBar`);e.bind(`overflowOpen`,function(){let n=e.overflowSection.element.find(`.k-toolbar-items-list`);t._toggleToolbarEditingItemsVisibility(n?.children(rn))})}t._toggleToolbarEditingItemsVisibility()}},_toggleToolbarEditingItemsVisibility:function(t){let r=this,i=r.dataSource.hasChanges()||r.element.find(`.k-dirty`).length>0,a=r.wrapper.find(`.k-grid-toolbar`);if(!a.length)return;let o;o=r.options.toolbar&&r.options.toolbar.overflow&&r.options.toolbar.overflow.mode===`scroll`?a.find(`.k-toolbar-items`).children(rn):t||a.children(rn);let s=r.options.toolbar&&r.options.toolbar.showInactiveTools||!1,c=r._editMode(),l=r._editContainer&&r._editContainer.length>0&&r._editContainer.is(`:visible`),u=s?e=>{e.attr(`aria-disabled`,!0),e.addClass(`k-disabled`)}:e=>e.hide(),d=r.select(),f=d.length>0,p=f&&r._editContainer&&r._editContainer.length>0&&r._editContainer.is(`:visible`)&&r._editContainer[0].getAttribute(n.attr(`uid`))!==d[d.length-1].getAttribute(n.attr(`uid`)),m=Wn({mode:c,hasSelected:f,hasChanges:i,editContainerVisible:l,differentSelectionThanEditing:!p&&p!==!1?!0:p,_editableIsClosing:r._editableIsClosing||!1,_isEditableEnabled:r._isEditableEnabled||!1,options:r.options});o.show().removeClass(`k-disabled`).attr(`aria-disabled`,`false`),o.each(function(){let t=e(this),n=t.attr(`class`);t.hasClass(Me)&&(t.removeClass(Me),$(r.table,!0)),n&&m&&m.test(n)&&u(t)})},_attachToolbarClicks:function(){var e=this.options.editable,t=this.wrapper.find(`.k-grid-toolbar`);e&&e.create!==!1&&t.on(R+N,`.k-grid-add`,this._createClickHandler).on(R+N,`.k-grid-cancel-changes`,this._cancelClickHandler).on(R+N,`.k-grid-save-changes`,this._saveClickHandler),e&&e.update!==!1&&t.on(R+N,`.k-grid-edit-command`,this._editClickHandler).on(R+N,`.k-grid-save-command`,this._updateClickHandler).on(R+N,`.k-grid-cancel-command`,this._editCancelClickHandler),e.destroy!==!1&&t.on(R+N,`.k-grid-remove-command`,this._destroyClickHandler),t.on(R+N,`.k-grid-excel`,this._excelClickHandler),t.on(R+N,`.k-grid-pdf`,this._pdfClickHandler)},_processItems:function(e){var r=this,i=r.options,a=[],o=this.options.messages.commands,s=!1;return e.map(e=>{var c,l,u,d,f,h=``;if(typeof e==`string`?(c=e.toLowerCase(),e={},c!==`aiassistant`&&(e.text=o[c]||c)):(c=e.name||e.text||``,K[c.toLowerCase()]&&(c=c.toLowerCase()),c!==`aiassistant`&&(e.text=e.text===``?``:e.text||o[c]||c)),!s&&(c===`search`||c===`columns`)&&(s=!0,a.push({type:`spacer`})),c.toLowerCase()===`selectall`){let t=e.text;e.template=e.template||n.template(qt)({size:n.getValidCssClass(`k-checkbox-`,`size`,r.options.size),label:t})}if(c===`search`)l=mi(e.text||o.search,!0),u=e.icon||e.iconClass||`search`,f=n.getValidCssClass(`k-input-`,`size`,r.options.size),h+=`<span class='k-searchbox k-input ${f} k-grid-search'>`,h+=n.ui.icon({icon:u,iconClass:`k-input-icon`}),h+=`<input autocomplete='off' placeholder='`+l+`' title='`+l+`' aria-label='`+l+`' class='k-input-inner' />`,h+=`</span>`,a.push({name:`search`,overflow:`never`,template:h});else if(c===`smartbox`)a.push(m({},K.smartbox,e,{}));else if(c===`paste`&&i.allowPaste)a.push({template:`<input class='k-grid-paste-action' />`});else{if(!c&&!(p(e)&&e.template))throw Error(`Custom commands should have name specified`);e=m({type:`button`},K[c],e),d=e.className||`k-grid-`+(c||``).replace(/\s/g,``),e.attributes=r._processAttr(e.attr),delete e.attr,d&&(e.attributes.class===t&&(e.attributes.class=``),e.attributes.class+=` `+d),e.template&&delete e.type,r[`_`+c+`ClickHandler`]&&(e.click=r[`_`+c+`ClickHandler`]),c===`canceledit`&&(e.click=r._editCancelClickHandler),a.push(e)}}),a},_processAttr:function(e){var t={},n;return typeof e===B&&e.length>0?(n=e.split(` `),n.map(e=>{var n=e.split(`=`);n.length===2&&(t[n[0]]=n[1].replaceAll(`"`,``).replaceAll(`'`,``))})):p(e)&&(t=e),t},_createButton:function(r){var i,a=r.template||Wt,o=typeof r===B?r:r.name||r.text,s=K[o]?K[o].className:`k-grid-`+(o||``).replace(/\s/g,``),c={className:r.skipCommandClass?``:s,text:o,attr:r.skipTabIndex?``:`tabindex=-1`,iconClass:``,size:r.size||this.options.size},l=this.options.messages.commands,u;if(!o&&!(p(r)&&r.template))throw Error(`Custom commands should have name specified`);if(p(r)){if(r=m(!0,{},r),r.className&&v(c.className,r.className.split(` `))<0?r.className+=` `+c.className:r.className===t&&(r.className=c.className),r.className.indexOf(`k-primary`)>-1&&(r.className=r.className.replace(`k-primary`,``),r.themeColor=`primary`),o===`edit`&&(r=m(!0,{},r),r.text=p(r.text)?r.text.edit:r.text,r.iconClass=p(r.iconClass)?r.iconClass.edit:r.iconClass),r.attr){if(p(r.attr)&&(r.attr=mn(r.attr)),r.attr instanceof Function){let e=r.attr(r);r.attr=mn(e)}typeof r.attr===B&&(u=r.attr.match(/class="(.+?)"/),u&&v(u[1],r.className.split(` `))<0&&(r.className+=` `+u[1]))}let e={text:l[o]};(o===`edit`||o===`update`)&&(e.themeColor=`primary`),o===`destroy`&&(e.iconClass=`k-i-x`),c=m(!0,c,K[o],e,r)}else{let e={text:l[o]};(o===`edit`||o===`update`)&&(e.themeColor=`primary`),o===`destroy`&&(e.iconClass=`k-i-x`),c=m(!0,c,K[o],e)}return i=n.template(a)(c),r.template?i:n.html.renderButton(e(i),c)},_hasFooters:function(){return!!this.footerTemplate||!!this.groupFooterTemplate||this.footer&&this.footer.length>0||this.wrapper.find(`.k-grid-footer`).length>0},_groupable:function(){var t=this;t._groupableClickHandler?t.table.add(t.lockedTable).off(R+N,t._groupableClickHandler):t._groupableClickHandler=function(n){var r=e(this),i=r.closest(`tr`),a=t._groupRows?t._groupRows[t.wrapper.find(`.`+L).index(i)]:{};r.is(ne)?t.trigger(`groupCollapse`,{group:a,element:i})||t.collapseGroup(i):t.trigger(`groupExpand`,{group:a,element:i})||t.expandGroup(i),n.preventDefault(),n.stopPropagation()},t._isLocked()?t.lockedTable.on(R+N,`.k-grouping-row `+re+`, .k-grouping-row a[class*='-i-caret-alt-down']`,t._groupableClickHandler):t.table.on(R+N,`.k-grouping-row `+re+`, .k-grouping-row a[class*='-i-caret-alt-down']`,t._groupableClickHandler),t._attachGroupable()},_toggleGroupableHeader:function(e){let t=this,n=t.options.groupable,r=t.wrapper.find(`div.k-grouping-header`);!(n&&n.enabled!==!1)||!r.length||(e?r.removeClass(`k-hidden`):r.addClass(`k-hidden`))},_attachGroupable:function(){var t=this,i=t.wrapper,a=t.options.groupable,o=te+`[`+n.attr(`field`)+`]`,s=t.content?`.k-grid-header:first `+o:`table:first>.k-grid-header `+o;let c=t._isStackedMode();c&&(s=`.k-grid-stack-cell[data-field]`),a&&a.enabled!==!1&&(i.has(`div.k-grouping-header`)[0]||e(`<div/>`).addClass(`k-grouping-header`).prependTo(i),t.groupable&&t._destroyGroupable(),G.chrome&&(i.find(`div.k-grouping-header`).css(`touch-action`,U),i.find(s).css(`touch-action`,U)),t.wrapper.children(`.k-grid-header`).addClass(`k-grid-draggable-header`),t.groupable=new r.Groupable(i,m({},a,{draggable:c?!1:t._draggableInstance,groupContainer:`>div.k-grouping-header`,dataSource:t.dataSource,draggableElements:c?!1:s,filter:s,size:t.options.size,allowDrag:t.options.reorderable,enableContextMenu:!!t.options.contextMenu,removeGroup:function(e){t._showUngroupedColumn(e)},change:function(e){t.trigger(`group`,{groups:e.groups})?e.preventDefault():(t._clearEditableState(),t._hideGroupedColumns(e.groups),t.dataSource.options.endless&&t._resetEndless())},_groupableFieldsData:c&&t.columns})),c&&t._toggleGroupableHeader(t.dataSource.group().length>0),t._addGroupableOptionsToHeader())},_showUngroupedColumn:function(e){var t=Z(this.columns),n;for(n=0;n<t.length;n++)t[n].uid==e.colID&&t[n].hideOnGroup&&this.showColumn(t[n])},_hideGroupedColumns:function(e){if(e){var t=Z(this.columns),n=[],r;for(r=0;r<e.length;r++)e[r].colID&&n.push(e[r].colID);for(r=0;r<t.length;r++)n.indexOf(t[r].uid)>=0&&t[r].hideOnGroup&&this.hideColumn(t[r])}},_resetEndless:function(){var e=this;e.dataSource.options.endless=null,e._endlessPageSize=e.dataSource.options.pageSize,e.dataSource._skip=0,e.dataSource._pageSize=e.dataSource._take=e._endlessPageSize,e.dataSource._page=1},_addGroupableOptionsToHeader:function(){var e=this,t=nr(e.columns),r={},i=e._headerCells(),a=``,o,s,c;for(c=0;c<t.length;c++)t[c].field,r[t[c].field]=t[c];for(c=0;c<i.length;c++)o=i.eq(c),a=o.attr(n.attr(bt)),s=r[a],s&&s.groupable&&s.groupable.sort&&o.data(Et,s.groupable.sort)},_destroyGroupable:function(){var e=this;e.groupable&&e.groupable.element&&e.groupable.element.kendoGroupable(`destroy`),e.groupable=null,e._removeGroupableOptionsFromHeader()},_removeGroupableOptionsFromHeader:function(){for(var e=this._headerCells(),t=0;t<e.length;t++)e.eq(t).removeData(Et)},_continuousItems:function(t,n){if(this.lockedContent){for(var r=this,i=r.table.add(r.lockedTable),a=e(t,i[0]),o=e(t,i[1]),s=n?J(Z(r.columns)).length:1,c=n?Z(r.columns).length-s:1,l=[],u=0;u<a.length;u+=s)y.apply(l,a.slice(u,u+s)),y.apply(l,[].splice.call(o,0,c));return l}},_selectable:function(){var t=this,r,i,a=[],o=t._isLocked(),s=t.options.selectable,c=t.options.loaderType===`skeleton`;if(s&&!s.checkboxSelection){t.selectable&&t.selectable.destroy(),t._selectedIds={},s=n.ui.Selectable.parseOptions(s),r=s.multiple,i=s.cell,t._hasDetails()&&(a[a.length]=`.k-detail-row`),(t.options.groupable||t._hasFooters()||t._groups())&&(a[a.length]=`.k-grouping-row,.k-group-footer`),c&&(a[a.length]=`[data-skeleton-row]`),a=a.join(`,`),a!==``&&(a=`:not(`+a+`)`);var l=t.table;o&&(l=l.add(t.lockedTable));let f=t._isStackedMode()?`tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer):not([data-skeleton-row]) > td:not(.k-group-cell):not(.k-hierarchy-cell) div.k-grid-stack-cell`:`tbody>tr:not(.k-grouping-row):not(.k-detail-row):not(.k-group-footer):not([data-skeleton-row]) > td:not(.k-group-cell):not(.k-hierarchy-cell)`;var u=`>`+(i?f:`tbody>tr`+a);t.selectable=new n.ui.Selectable(l,{allowPaste:t.options.allowPaste,filter:u,aria:!0,multiple:r,holdToDrag:!!(t._isMobile||n.support.mobileOS),toggleable:!!(t._isMobile||n.support.mobileOS),dragToSelect:t.options.selectable&&t.options.selectable.dragToSelect,changing:function(e){t.trigger(ge,{target:e.target,originalEvent:e.originalEvent})&&e.preventDefault()},change:function(e){var n;i||t._persistSelectedRows(),t._checkBoxSelection&&(n=t.selectable.value(),t._uncheckCheckBoxes(),t._checkRows(n),n.length&&n.length===t.items().length?t._toggleHeaderCheckState(!0):t._toggleHeaderCheckState(!1)),t._calculateAggregatesForSelected(),t._editMode()!==`incell`&&t._toggleToolbarEditingItemsVisibility(),e.event&&t.trigger(P,{cellAggregates:t._cellAggregates})},useAllItems:o&&r&&i,relatedTarget:function(n){if(!(i||!o)){for(var r,a=e(),s=0,c=n.length;s<c;s++)r=t._relatedRow(n[s]),v(r[0],n)<0&&(a=a.add(r));return a}},continuousItems:function(){return t._continuousItems(u,i)},ignoreOverlapped:t.options.selectable&&t.options.selectable.ignoreOverlapped,addIdToRanges:!0}),t.options.navigatable&&l.on(`keydown`+N,function(n){var a=t.current(),s=n.target,c={event:n},u,f,p;if(a){if(n.keyCode===d.SPACEBAR&&!n.shiftKey&&e.inArray(s,l)>-1&&!a.is(`.k-grid-stack-edit-cell,.k-edit-cell,.k-header`)&&a.parent().is(`:not(.k-grouping-row,.k-detail-row,.k-group-footer)`)){if(n.preventDefault(),n.stopPropagation(),a=i?a:a.parent(),u=!a.hasClass(I)||t.selectable.value().length>1,f=u||r&&a.hasClass(I)&&n.ctrlKey,f&&t.trigger(ge,{target:a,originalEvent:n}))return;if(o&&!i&&(a=a.add(t._relatedRow(a))),r){if(!n.ctrlKey)t.selectable.clear();else if(a.hasClass(I)){t._deselectCheckRows(a),t._calculateAggregatesForSelected(),t.trigger(P,{cellAggregates:t._cellAggregates});return}}else t.selectable.clear();i||(t.selectable._lastActive=a),t.selectable.value(a),u&&(t._calculateAggregatesForSelected(),t.trigger(P,{cellAggregates:t._cellAggregates}))}else if(!i&&(e(s).is(`td`)||e(s).is(`table`)&&v(s,this._navigatableTables))&&(n.shiftKey&&n.keyCode==d.LEFT||n.shiftKey&&n.keyCode==d.RIGHT||n.shiftKey&&n.keyCode==d.UP||n.shiftKey&&n.keyCode==d.DOWN||n.keyCode===d.SPACEBAR&&n.shiftKey)){if(n.preventDefault(),n.stopPropagation(),a=a.parent(),t.trigger(ge,{target:a,originalEvent:n}))return;p=t.selectable.value(),o&&(a=a.add(t._relatedRow(a))),r?(t.selectable._lastActive||(t.selectable._lastActive=a),t.selectable.selectRange(t.selectable._firstSelectee(),a),Qr(p,t.selectable.value())||t.trigger(P,c)):a.hasClass(I)||(t.selectable.clear(),t.selectable.value(a),t._calculateAggregatesForSelected(),t.trigger(P,{cellAggregates:t._cellAggregates}))}}})}},_pasteReplaceHandler:function(t){var n=this,r,i,a,o,s,c=[];i=n.select().first(),!(n._isStackedMode()||!i.length)&&(i.is(`tr`)&&(i=i.children(`td`).first()),r=t.split(`
`).filter(e=>e),a=i.closest(`tr`),s=n.thead.find(`th:eq(`+i.index()+`)`).data(`field`),o=a.data(`uid`),c.push(o),a.nextAll(j).slice(0,r.length-1).each((t,n)=>{c.push(e(n).data(`uid`))}),n._executePaste(r,c,null,s))},_pasteInsertHandler:function(e){var t=this,n=t.dataSource,r,i=t.select().first(),a,o,s;i.length&&(i.is(`tr`)&&(i=i.children(`td`).first()),r=e.split(`
`).filter(e=>e),a=i.closest(`tr`),s=t.dataItem(a),o=n.indexOf(s)+1,t._executePaste(r,null,o,null))},_executePaste:function(e,t,n,r){var i=this,a=i.dataSource,o=t||!1,s,c,l,u,d,f,p=i._getSelectedRowUids(),m=i._getSelectedColumnFields(),h=[],g=X(i.columns).filter(e=>!e.selectable&&!e.draggable&!e.command),_=r&&g.map(e=>e.field).indexOf(r);if(e.length===1&&e[0].split(`	`).length===1&&o)for(let t=0;t<p.length;t++){let n=p[t];s=a.getByUid(n),u=e[0].split(`	`)[0];for(let e=0;e<m.length;e++)f=m[e],s&&u&&s.set(f,u);s&&s.dirty&&h.push(s)}else for(let r=0;r<e.length;r++){c=e[r],l=c.split(`	`),s=o?a.getByUid(t[r]):a.insert(n+r,{});for(let e=0;e<l.length;e++)u=l[e].replace(/\r/,``),d=g[e+_||0],d&&s&&u&&(f=d.field,s.set(f,u));s&&s.dirty&&h.push(s)}i.trigger(Ee,{items:h,type:o?`replace`:`insert`})},_pasteKeyboardHandler:function(t){var n=this,r=n.current(),i=t.originalEvent.clipboardData,a=n.pasteActionsDropDownList&&n.pasteActionsDropDownList.value()||`insert`,o,s,c;e(t.target).is(`.k-grid-stack-edit-cell input:visible,.k-edit-cell input:visible`)||i&&(t.preventDefault(),c=i.getData(`text`).trimEnd(),hi(c)&&(c=` `),r&&r.length&&(s=r.index(),o=r.closest(`tr`).data(`uid`)),a===`replace`&&n._pasteReplaceHandler(c),a===`insert`&&n._pasteInsertHandler(c),s&&o&&(n._currentRowIndex=n.wrapper.find(`tr[data-uid='`+o+`']`).index(),n._restoreCurrent(s)))},_paste:function(){var e=this,t=e.options,n=t.selectable;t.allowPaste&&n&&(e.pasteHandler=e._pasteKeyboardHandler.bind(e),(e.content||e.table).on(Ee+N,e.pasteHandler),e.options.toolbar&&e._pasteToolbarDropDown())},_clipboard:function(){var e=this.options;if(e.selectable&&e.allowCopy){var t=this;e.navigatable||(t.table.attr(_t,0),t.table.add(t.lockedTable).on(ct+N+` keydown.kendoGrid`,`.k-detail-cell`,function(e){e.target!==e.currentTarget&&e.stopImmediatePropagation()}).on(ct+N,k+`>:not(.k-group-cell):not(.k-detail-cell):not(.k-hierarchy-cell):visible`,ri.bind(t))),t.copyHandler=t.copySelection.bind(t),t.updateClipBoardState=function(){t.areaClipBoard&&t.areaClipBoard.val(t.getTSV()).trigger(`focus`).select()};let n=t.content||t.table;t.bind(`change`,t.updateClipBoardState),n.on(`keydown`,t.copyHandler),t.clearAreaHandler=t.clearArea.bind(t),n.on(`keyup`,t.clearAreaHandler)}},copySelectionToClipboard:function(e){this._createAreaClipBoard(),this.areaClipBoard.val(this.getTSV(e)).trigger(`focus`).select(),document.execCommand(`copy`)},copySelection:function(t){t instanceof jQuery.Event&&!(t.ctrlKey||t.metaKey)||!(t.keyCode===67&&(t.ctrlKey||t.metaKey))||e(t.target).is(`input:visible,textarea:visible`)||window.getSelection&&window.getSelection().toString()||document.selection&&document.selection.createRange().text||(this._createAreaClipBoard(),this.areaClipBoard.val(this.getTSV()).trigger(`focus`).select())},_createAreaClipBoard:function(){this.areaClipBoard||=e(`<textarea />`).css({position:`fixed`,top:`50%`,left:`50%`,opacity:0,width:0,height:0}).appendTo(this.wrapper)},getTSV:function(n){var r=this,i=r.select(),a=`	`,o=r.options.allowCopy,s=!0,c=r._isLocked()&&J(r.columns).length;e.isPlainObject(o)&&o.delimeter&&(a=o.delimeter);var l=``;if(i.length){i.eq(0).is(`tr`)&&(i=i.find(`td:not(.k-group-cell)`)),s&&i.filter(`:visible`);var u=[],d=this.columns.length,f=r._isLocked()&&J(r.columns).length,p=!0,m=[],h,g=X(this.columns);e.each(i,function(t,n){if(n=e(n),h=r._getCellField(n,c),g.findIndex(e=>e.field===h)!==-1){var i=n.closest(`tr`).index(),a=n.index();s&&(a-=n.prevAll(`:hidden`).length),f&&p&&(p=e.contains(r.lockedTable[0],n[0])),r._groups()&&p&&(a-=r._groups()),a=p?a:a+f,h&&(m[a]=h),d>a&&(d=a);var o=n.text();u[i]||(u[i]=[]),u[i][a]=o}});var _=u.length;if(u=e.each(u,function(e,t){t&&(u[e]=t.slice(d),_>e&&(_=e))}),n&&m.length){u.splice(_,0,m.map(function(e){return gi(e,g)}));var v=u.findIndex(function(e){return e!==t});u[v]=u[v].slice(d)}e.each(u.slice(_),function(e,t){t?l+=t.join(a)+`\r
`:l+=`\r
`})}return l},clearArea:function(e){this.areaClipBoard&&e&&e.target===this.areaClipBoard[0]&&$(this.table,!0),this.areaClipBoard&&=(this.areaClipBoard.remove(),null)},_adaptiveColumns:function(){var e=this;e._anyColumnHasMediaQuery()&&(e._setColumnsMediaVisibility(e.columns),e._attachColumnMediaResizeHandler())},_anyColumnHasMediaQuery:function(){return this._columnsWithMediaQuery().length},_columnsWithMediaQuery:function(){return Ln(this.columns)},_attachColumnMediaResizeHandler:function(){var t=this;t._detachColumnMediaResizeHandler(),t._columnMediaResizeHandler=t._onColumnMediaResize.bind(t),e(window).on(Qe+N,t._columnMediaResizeHandler)},_detachColumnMediaResizeHandler:function(){var t=this;t._columnMediaResizeHandler&&e(window).off(Qe+N,t._columnMediaResizeHandler)},_onColumnMediaResize:function(){var e=this;e._setColumnsMediaVisibility(e.columns),e._setContentMediaWidth()},_setColumnsMediaVisibility:function(e){for(var t=e||[],n=0;n<t.length;n++)this._setColumnMediaVisibility(t[n])},_setColumnMediaVisibility:function(e){var t=this;Rn(e.media)?t._setColumnsMediaVisibility(e.columns):Nn(e)?(t._showColumnByMedia(e),e.hidden||t._setColumnsMediaVisibility(e.columns)):t._hideColumnByMedia(e)},_showColumnByMedia:function(e){e.hidden||this.showColumn(e),Mn(e)},_hideColumnByMedia:function(e){var t=e.hidden;t||(e._hideByMedia=!0,this.hideColumn(e),e._hideByMedia=!1,e.hidden=t),Mn(e)},_setContentMediaWidth:function(){var t=this,n=t.options,r=t._isLocked(),i;if(n.scrollable&&(n.resizable===!0||n.resizable&&n.resizable.columns===!0)){r&&t.lockedFooter?i=t.lockedFooter.children(`table`):t.footer&&(i=t.footer.find(`>.k-grid-footer-wrap>table`)),(!i||!i[0])&&(i=e());var a=r?t.wrapper.find(`.k-grid-header-locked`).find(`table`):t.wrapper.find(`.k-grid-header`).find(`table`),o=r?t.lockedTable:t.table,s=a.find(`th`),c=a.find(`colgroup`),u=s.length,d=s.filter(Pn).length,f=s.length-d,p=0;if(a[0].style.width!==``&&parseFloat(a[0].style.width)!==p){for(var m=a.css(ht),h=0;h<u;h++)if(Fn(s[h])){var g,_=Math.max(h,h-f),v=c.children()[_],y=v?v.style.width:``;y===``?(a.css(ht,gt),g=l(s.eq(h)),a.css(ht,m)):g=parseFloat(y),p+=g}o.css(`width`,p-1),a.css(`width`,p),i.css(`width`,p),t._updateStickyColumns()}}},_minScreenSupport:function(){this.hideMinScreenCols()&&(this.minScreenResizeHandler=this.hideMinScreenCols.bind(this),e(window).on(`resize`,this.minScreenResizeHandler))},hideMinScreenCols:function(){var e=this.columns,t=window.innerWidth>0?window.innerWidth:screen.width;return this._iterateMinScreenCols(e,t)},_iterateMinScreenCols:function(e,n){for(var r=!1,i=0;i<e.length;i++){var a=e[i],o=a.minScreenWidth;o!==t&&o!==null&&(r=!0,o>n?this.hideColumn(a):this.showColumn(a)),!a.hidden&&a.columns&&(r=this._iterateMinScreenCols(a.columns,n)||r)}return r},_stickyColumns:function(){var e=this;e._anyStickyColumns()&&e._setStickyColumns(!1)},_updateStickyColumns:function(){var e=this,t=g(Z(e.columns),function(e){return e.groupHeaderColumnTemplate});e._anyStickyColumns()&&(e._setStickyColumns(!0),e._templates(),t.length>0&&e._renderGroupRows(),e._hasFilterRow()&&e._updateStickyFilterCells())},_updateStickyFilterCells:function(){var t=this.thead.find(`.k-filter-row`).find(`td:not(.k-group-cell,.k-hierarchy-cell)`);t.length&&t.each(function(){var t=e(this),n=t.data(`column`);n.sticky?(p(n.stickyStyle)&&t.css({left:n.stickyStyle.left||``,right:n.stickyStyle.right||``}),t.addClass(Je)):(t.css({left:``,right:``}),t.removeClass(Je))})},_anyStickyColumns:function(){var e=this;return e.tbody?!e._isStackedMode()&&mr(e.columns).length:!1},_setStickyColumns:function(e){var t=this,n=mr(t.columns),r=hr(t.columns),i=t._calculateStickyWidths(r);t._removeStickyAttributes(n),t._setStickyClassAttributes(n),t._setStickyStyleAttributes(r,i,e),e&&t._setStickyStyles(r,i)},_calculateStickyWidths:function(e,t,n){var r=this,i,a,o,s,c,l=W?`right`:`left`,u=W?`left`:`right`,d={left:Array(e.length).fill(t||0),right:Array(e.length).fill(n||0)};for(i=0;i<e.length-1;i++)a=e[i],o=r._sumColumnWidth(a),s=o+d[l][i],d[l][i+1]=s;for(i=e.length-1;i>0;i--)a=e[i],o=r._sumColumnWidth(a),c=o+d[u][i],d[u][i-1]=c;return d},_setStickyClassAttributes:function(e,t){var n=this,r,i;for(r=0;r<e.length;r++)i=e[r],i.columns&&(!t&&r&&(t=r),n._setStickyClassAttributes(yr([i]),t)),t&&fr(i,`headerAttributes`,`class`,Xe),fr(i,`attributes`,`class`,qe),fr(i,`headerAttributes`,`class`,Je),fr(i,`footerAttributes`,`class`,Ye)},_setStickyStyleAttributes:function(e,t,r){var i=this,a,o,s,c,l,u,d;for(a=0;a<e.length;a++)o=e[a],s=t.left[a],c=t.right[a],l={left:s+`px`,right:c+`px`},o.columns&&(u=br([o]),d=i._calculateStickyWidths(u,s,c),i._setStickyStyleAttributes(u,d,r),r&&i._setStickyStyles(u,d)),fr(o,`attributes`,n.attr(`style-left`),l.left),fr(o,`attributes`,n.attr(`style-right`),l.right),fr(o,`headerAttributes`,n.attr(`style-left`),l.left),fr(o,`headerAttributes`,n.attr(`style-right`),l.right),fr(o,`footerAttributes`,n.attr(`style-left`),l.left),fr(o,`footerAttributes`,n.attr(`style-right`),l.right),o.stickyStyle=l},_removeStickyAttributes:function(e){var t=this,r,i=RegExp(`(\\s*`+qe+`)*`,`ig`),a=RegExp(`(\\s*`+Je+`)*`,`ig`),o=RegExp(`(\\s*`+Ye+`)*`,`ig`),s=RegExp(`(\\s*`+Xe+`)*`,`ig`),c;for(r=0;r<e.length;r++)c=e[r],c.columns&&t._removeStickyAttributes(yr([c])),pr(c,`attributes`,`class`,i),pr(c,`attributes`,n.attr(`style-left`),``,!0),pr(c,`attributes`,n.attr(`style-right`),``,!0),pr(c,`headerAttributes`,`class`,a),pr(c,`headerAttributes`,`class`,s),pr(c,`headerAttributes`,n.attr(`style-left`),``,!0),pr(c,`headerAttributes`,n.attr(`style-right`),``,!0),pr(c,`footerAttributes`,`class`,o),pr(c,`footerAttributes`,n.attr(`style-left`),``,!0),pr(c,`footerAttributes`,n.attr(`style-right`),``,!0)},_setStickyStyles:function(t,n){var r=this,i,a,o=Z(Y(r.columns)),s=r.tbody.children(`:not(.k-detail-row)`),c,l,u,d,f,p,m,h,g;for(i=0;i<t.length;i++)if(l=t[i],d=n.left[i],f=n.right[i],u=o.indexOf(l),p=r._getColumnHeader(l),p.addClass(Je),l.headerAttributes.class&&l.headerAttributes.class.indexOf(Xe)!==-1&&p.addClass(Xe),ur(p,d,f),!l.columns)for(r.footer&&(m=r.footer.find(`.k-grid-footer-wrap tr.k-footer-template`).children().filter(`:not(.k-group-cell,.k-hierarchy-cell)`).eq(u),m.addClass(Ye),ur(m,d,f)),a=0;a<s.length;a++)c=e(s[a]),c.hasClass(L)?(h=c.find(`.`+l.groupHeaderColumnTemplateClass),h.addClass(qe),ur(h,d,f)):(g=c.children().filter(`:not(.k-group-cell,.k-hierarchy-cell)`).eq(u),g.addClass(qe),ur(g,d,f))},_removeStickyStyles:function(t){var n=this,r,i,a=Z(Y(n.columns)),o=n.tbody.children(`:not(.k-detail-row)`),s,c,l,u,d,f,p;for(r=0;r<t.length;r++){if(c=t[r],l=a.indexOf(c),u=n._getColumnHeader(c),u.removeClass(Je),u.removeClass(Xe),ur(u,``,``),c.columns){n._removeStickyStyles(c.columns);continue}for(c.footerTemplate&&n.footer&&(d=n.footer.find(`.k-grid-footer-wrap tr.k-footer-template`).children().filter(`:not(.k-group-cell,.k-hierarchy-cell)`).eq(l),d.removeClass(Ye),ur(d,``,``)),i=0;i<o.length;i++)s=e(o[i]),s.hasClass(L)?(f=s.find(`.`+c.groupHeaderColumnTemplateClass),f.removeClass(qe),ur(f,``,``)):(p=s.children().filter(`:not(.k-group-cell,.k-hierarchy-cell)`).eq(l),p.removeClass(qe),ur(p,``,``))}},_getColumnHeader:function(t){var n=this;return e(`#`+t.headerAttributes.id).length?e(`#`+t.headerAttributes.id):e(`#`+n._cellId)},_sumColumnWidth:function(e){var t=this,n=0;return n=e.columns?t._sumCurrentWidths(Z([e])):t._sumCurrentWidths([e]),n},_sumCurrentWidths:function(e){var t=this,n=0,r=0,i,a,o,s=e.length;for(o=0;o<s;o++)i=e[o],a=t._getColumnHeader(i),!i.hidden&&Nn(i)&&(r=a.is(`:visible`)?a.outerWidth():i.width,n+=r?parseInt(r,10):0);return n},_belongsToGrid:function(e){return this.wrapper[0]===e.closest(`.k-grid`)[0]},getSelectedData:function(){let t=this,n=t.selectable,r=t._checkBoxSelection,i=X(t.columns),a=[];if(n){let e=t.selectable?.selectedRanges(),n=Object.keys(e),r=t.selectable?.selectedSingleItems();for(var o=0;o<n.length;o++)a=a.concat(t._mapSelectionToData(e[n[o]],i,null,!0));return r.length&&(a=a.concat(t._mapSelectionToData(r,i,null,!0))),a}if(r){let n=t.tbody.find(`tr.k-selected`).toArray().map(function(t){return e(t)});n.length&&(a=t._mapSelectionToData(n,i,null,!0))}return a},getSelectedDataByKeys:function(){var t=this,n=t.dataSource,r=t.selectedKeyNames(),i=X(t.columns),a,o,s={},c=function(e){var t={};if(e.field)return t[e.field]=o[e.field],t};for(let t=0;t<r.length;t++)a=r[t],o=n.get(a),o&&(s[o.uid]=e.extend.apply({},i.map(c)));return Object.keys(s).map(function(e){return s[e]})},exportSelectedToExcel:function(e){if(!n.excel||!n.ooxml)throw Error(`The excel export functionality depends on both kendo.excel.js and kendo.ooxml.js scripts, please make sure they are included.`);var t=this,r=this.options.excel||{},i=X(t.columns),a=new n.excel.ExcelExporter({}),o={sheets:[{columns:Array.apply(0,Array(i.length)).map(function(){return{autoWidth:!0}}),rows:[],freezePane:{},filter:!1}]},s=t.selectable.selectedRanges(),c=Object.keys(s),l=t.selectable.selectedSingleItems(),u,d=[],f=t._isLocked()&&J(t.columns).length,p=_i.bind(t);for(u=0;u<c.length;u++)d=d.concat(t._mapSelectionToData(s[c[u]],i,vi));if(d.length&&t._addRangeSelectionRows(o,a,d,e),d=l.length?t._mapSelectionToData(l,i,vi):[],d.length&&(f&&(d=d.sort(p)),t._addSingleSelectionRows(o,a,d,e)),o.sheets[0].rows.length){var m=new n.ooxml.Workbook(o);m.options||={},m.options.skipCustomHeight=!0,m.toDataURLAsync().then(function(e){n.saveAs({dataURI:e,fileName:o.fileName||r.fileName,proxyURL:r.proxyURL,forceProxy:r.forceProxy})})}},_addSingleSelectionRows:function(e,t,n,r){var i=0,a=vr(this.columns),o;let s=t._instance??t;for(i=0;i<n.length;i++)o=n[i],t.data=[o],this._setExporterColumns(s,a,o),this._createExportRows(e,s,r)},_addRangeSelectionRows:function(e,t,n,r){var i=vr(this.columns);let a=t._instance??t;t.data=n,this._setExporterColumns(a,i,n[0]),this._createExportRows(e,a,r)},_createExportRows:function(e,t,n){let r=t._instance??t;e.sheets[0].rows=e.sheets[0].rows.concat(n?r._rows():r._dataRows(r.data,0))},_setExporterColumns:function(t,n,r){let i=t._instance??t;i.columns=i.options.columns=e.map(n.filter(function(e){return Object.keys(r).indexOf(e.field)>=0}),i._prepareColumn)},_mapSelectionToData:function(t,n,r,i){for(var a=this,o=t[0][0].nodeName===`TR`,s,c={},l,u,d,f=function(e){var t={};if(!(!e.field||r&&!r(e)))return t[e.field]=s[e.field],t},p=a._isLocked()&&J(a.columns).length,m,h=0;h<t.length;h++)if(l=t[h],s=a.dataItem(o?l:l.closest(`tr`)),o)c[s.uid]=e.extend.apply({},n.map(f));else{if(d=a._getCellField(l,p,i),!d||(u=c[s.uid],u||=c[s.uid]={},m=Vn(n,d),!m||r&&!r(m)))continue;u[d]=s[d]}return Object.keys(c).map(function(e){return c[e].uid=e,c[e]})},_getCellField:function(t,r,i){let a=this,o=r&&e.contains(a.lockedTable[0],t[0]),s=n.attr(`field`),c=n.attr(`index`),l=o?0:r,u=0;return i&&(u=a._trailingColumns()),a._isStackedMode()?a.table.find(`div.k-grid-stack-cell[`+c+`='`+(t.index()-u)+`']`).attr(s):r?a.element.find(`.k-grid-header-`+(o?`locked`:`wrap`)+` th[`+c+`='`+(t.index()+l)+`']`).attr(s):a.thead&&a.thead.find(`th[`+c+`='`+(t.index()-u)+`']`).attr(s)},_relatedRow:function(t){var n=this.lockedTable;if(t=e(t),!n)return t;var r=t.closest(this.table.add(this.lockedTable)),i=r.find(`>tbody>tr`).index(t);return r=r[0]===this.table[0]?n:this.table,r.find(`>tbody>tr`).eq(i)},_relatedCell:function(t){var n=this.lockedTable;if(t=e(t),!n)return t;var r=t.closest(this.table.add(this.lockedTable)),i=r.find(`>tbody>tr>td`).index(t);return r=r[0]===this.table[0]?n:this.table,r.find(`>tbody>tr>td`).index(i)},clearSelection:function(){var e=this;if(e.selectable&&!e._checkBoxSelection&&e.selectable.clear(),e._hasAISelection&&delete e._hasAISelection,e._checkBoxSelection){e._deselectCheckRows(e.select());return}e.options.persistSelection?e._persistSelectedRows():e._selectedIds={}},clearHighlight:function(){let e=this;e._highlightDescriptors&&delete e._highlightDescriptors,e._highlightedItems&&e._highlightedItems.length&&(e._highlightedItems.removeClass(Ne),delete e._highlightedItems),e._hasAIHighlight&&delete e._hasAIHighlight},_getElementsToProcess:function(e){let t=this,n=t.columns,r=[],i=[],a=[],o=e=>`tr[data-uid='${e}']`,s=(e,t)=>e.length&&e.findIndex(e=>e.field===t);return g(n,e=>{e.locked?r.push(e):i.push(e)}),Object.entries(e).forEach(([e,n])=>{if(!e)return;let c=t.dataSource.get(e);if(!c)return;let l=t.tbody.find(o(c.uid));n===!0?a.push(l):typeof n==`object`&&Object.keys(n).forEach(e=>{if(!e&&!n[e])return;let u=!1,d=s(i,e);d===-1&&(d=s(r,e),u=!0),u&&(l=t._relatedRow(l));let f=l.find(`td:eq(${d})`);f.length&&(a.push(f),l=t.tbody.find(o(c.uid)))})}),a},_getElementsToHighlight:function(e){return this._getElementsToProcess(e)},_getElementsToSelect:function(e){return this._getElementsToProcess(e)},_restoreHighlight:function(){let e=this,t=e._highlightDescriptors;!t||!Object.keys(t).length||e.highlight(t)},_persistHighlight:function(e){let t=this,n={},r=e.is(`tr`),i=t.options.dataSource?.schema?.model?.id||`id`,a=(r?e:e.closest(`tr`)).data(`uid`),o=t.dataSource.getByUid(a);if(!o)return;let s=o[i];if(r)n[s]=!0;else{let r=t._getCellField(e,t._isLocked(),!0);if(!r)return;n[s]=r}t._highlightDescriptors?t._highlightDescriptors=t._mergeHighlightDescriptor(t._highlightDescriptors,n):t._highlightDescriptors=n},_mergeHighlightDescriptor:function(e,n){let r={},i,a,o;for(i in e)r[i]=e[i];for(i in n)a=r[i],o=n[i],a===t?r[i]=o:o===!0?r[i]=!0:typeof o==`object`&&o&&typeof a==`object`&&a?r[i]=m({},a,o):r[i]=a;return r},highlight:function(t){let n=this,r=n.lockedTable,i=Array.isArray(t)&&!t.length;if(!t&&!i)return n._highlightedItems||e();if(i){n.clearHighlight();return}let a=typeof t==`object`&&!Array.isArray(t)?Object.keys(t):[],o=a.length&&n.dataSource.get(a[0]),s;o?(n._highlightDescriptors=n._mergeHighlightDescriptor(n._highlightDescriptors||{},t),s=n._getElementsToHighlight(t)):s=Array.isArray(t)?t:[t];let c=e=>{let t=e.is(`tr`),i;if(e)return t&&r?.length&&(i=n._relatedRow(e),e=e.add(i)),e};s.forEach(function(t){let r=c(e(t));if(r&&!o&&n._persistHighlight(r),r?.length){if(n._highlightedItems&&n._highlightedItems.index(r)!==-1)return;r.addClass(Ne),n._highlightedItems?n._highlightedItems=n._highlightedItems.add(r):n._highlightedItems=r}})},select:function(e){var t=this,r=t.selectable,i=n.ui.Selectable.parseOptions(this.options.selectable).cell;if(e=t.table.add(t.lockedTable).find(e),e.length){r&&!r.options.multiple&&(r.clear(),e=e.first()),t._isLocked()&&(e=e.add(e.map(function(){return i?t._relatedCell(this):t._relatedRow(this)}))),r&&!t._checkBoxSelection?r.value(e):(t._checkRows(e),t.select().length===t.items().length&&t._toggleHeaderCheckState(!0)),i||t._persistSelectedRows();return}return r?r.value():t.items().filter(`.`+I)},_initSelectableAggregates:function(){var e=this;e.options.selectable&&(e._selectableAggregatesOptions||=e._parseSelectableAggregatesOptions(),e._selectableAggregatesOptions.count&&(e._cellAggregates={count:0}))},_calculateAggregatesForSelected:function(){var e=this,t=e.options,r=e.getSelectedDataByKeys(),i=e.options.selectable,a=i.cellAggregates,o=X(e.columns).filter(e=>!e.selectable&&!e.draggable&!e.command).length,s=xr(t.columns),c=n.ui.Selectable.parseOptions(i).cell,l,u,d,p=[],m=[],h=[],g,_,v,y,b,x,S,C,w;if(a){c&&(r=e.getSelectedData()),a=e._selectableAggregatesOptions;for(let e=0;e<r.length;e++){l=r[e];for(let e=0;e<s.length;e++)switch(d=l[s[e]],u=f(d),u){case`number`:p.push(d);break;case`date`:m.push(d);break;case`boolean`:h.push(d);break;default:break}}a.count&&(g=c?pn(e.select()).length:r.length*o),p.length&&(v=a.max?p.reduce((e,t)=>Math.max(e,t)):null,_=a.min?p.reduce((e,t)=>Math.min(e,t)):null,y=a.sum?p.reduce((e,t)=>e+t):null,b=a.average?p.reduce((e,t)=>e+t)/p.length:null),m.length&&(x=a.earliest?m.reduce((e,t)=>new Date(Math.min(e,t))):null,S=a.latest?m.reduce((e,t)=>new Date(Math.max(e,t))):null),h.length&&(C=a.isTrue?h.filter(e=>e===!0).length:null,w=a.isFalse?h.filter(e=>e===!1).length:null),e._cellAggregates={count:g,max:v,min:_,sum:y,average:b,earliest:x,latest:S,isTrue:C,isFalse:w},e.statusBar&&e._statusBar()}},_parseSelectableAggregatesOptions:function(){var e=this.options.selectable.cellAggregates,t={};if(_(e)){for(let n=0;n<e.length;n++)t[e[n]]=!0;return t}return{count:!0,min:!0,max:!0,sum:!0,average:!0,earliest:!0,latest:!0,isTrue:!0,isFalse:!0}},_toggleHeaderCheckState:function(e){let t=this,n=t._isStackedMode(),r=t.wrapper.find(`.k-toolbar`),i=r.find(Re),a=n?r:t.thead.add(t.lockedHeader),o=n?Re:`tr `+Re,s=(e,t)=>{if(e.length){let n=t?`Deselect all rows`:`Select all rows`;e.prop(`checked`,t).attr(Ft,t).attr(V,n)}};n||s(a.find(o),e),s(i,e)},_uncheckCheckBoxes:function(){var e=this;e.table.add(e.lockedTable).find(`tbody `+Re).attr(Ft,!1).prop(`checked`,!1).attr(V,`Select row`)},_deselectCheckRows:function(t){var r=this,i=n.attr(`range-selected`);t=r.table.add(r.lockedTable).find(t),r._isLocked()&&(t=t.add(t.map(function(){return r._relatedRow(this)}))),t.each(function(){e(this).removeClass(I).removeAttr(i).find(Re).attr(Ft,!1).prop(`checked`,!1).attr(V,`Select row`)}),r._toggleHeaderCheckState(!1),r._persistSelectedRows()},_checkRows:function(t){t.each(function(){e(this).addClass(I).find(Re).prop(`checked`,!0).attr(V,`Deselect row`).attr(Ft,!0)})},_persistSelectedRows:function(){var e=this,t,r,i=e.items(),a=e.dataSource.options.schema,o,s={};if(!(!a||!a.model||!e._data)&&(o=e._getSchemaIdField(),o)){!n.ui.Selectable.parseOptions(e.options.selectable).multiple&&!e._checkBoxSelection&&(e._selectedIds={}),e.select().each(function(){r=e.dataItem(this),s[r[o]]=!0});for(var c=0;c<i.length;c++)r=e.dataItem(i[c]),t=r[o],s[t]?e._selectedIds[t]=!0:delete e._selectedIds[t]}},selectedKeyNames:function(){var e=this,t=[];for(var n in e._selectedIds)t.push(n);return t.sort(),t},_updateCurrentAttr:function(t,n,r){var i=e(t).data(`headerId`),a,o;e(t).removeClass(Me),this.table.removeAttr(It),i?(i=i.replace(this._cellId,``),e(t).attr(`id`,i)):e(t).removeAttr(`id`),a=n.attr(`id`),a!=this._cellId&&n.data(`headerId`,a),a?o=a:n.attr(`id`,this._cellId),r||n.addClass(Me),this.table.attr(It,o||this._cellId),this._current=n},_scrollCurrent:function(){let t=this._current,n=this.options.scrollable;if(!(!t||!n)){var r=t.parent(),i=r.closest(`table`).parent(),a=i.is(`.k-grid-content-locked,.k-grid-header-locked`),o=i.is(`.k-grid-content-locked,.k-grid-content,.k-virtual-scrollable-wrap`),s=e(this.content).find(`>.k-virtual-scrollable-wrap`).addBack().last()[0];if(o)if(this.virtualScroll){var c=Math.max(v(r[0],this._items(r.parent())),0);this.virtualScroll.rows?(this._rowVirtualIndex=this.virtualScrollable.itemIndex(c),this.virtualScrollable.scrollIntoView(r)):(this._rowVirtualIndex=c,this._scrollTo(this._relatedRow(r)[0],s))}else this._scrollTo(this._relatedRow(r)[0],s);this.lockedContent&&(this.lockedContent[0].scrollTop=s.scrollTop),a||this._scrollTo(t[0],s)}},_findGroupedItem:function(e,t,n){let r=this,i;for(let a=0;a<e.length;a++){let o=e[a];if(o.field===n?o.value===t&&(i=o.items[0].uid&&o.items[0][n]?o.items[0]:r._findGroupedItem(o.items,t,n)):i=o.items[0].uid&&o.items[0][n]?o.items.find(e=>e[n]===t):r._findGroupedItem(o.items,t,n),i)return i}},_findClosestGroupingRow:function(t,n,r){let i=this,a=i.options.groupable&&i.dataSource.group().length>0,o=n||0,s=r||0;if(!a||!t)return{targetRow:t,rowsToTarget:o,hiddenGroupingRows:s};let c=e(t.previousSibling);if(c&&c.hasClass(L)){let e={targetRow:c,rowsToTarget:o,hiddenGroupingRows:s};return c.css(`display`)===`none`&&(e=i._findClosestGroupingRow(c[0],o,s+1)),e}else{let e=i._findClosestGroupingRow(c[0],o+1,s);if(e)return{targetRow:e.targetRow,rowsToTarget:e.rowsToTarget,hiddenGroupingRows:s}}},_checkItemAlreadyLoaded:function(e,t){let n=this.dataSource._ranges,r;for(let i=0;i<n.length;i++)if(r=n[i].data.find(n=>n[t]===e),r)return{loadedItem:r,page:i}},scrollToItem:function(t,r){let i=this,a=i.options,o=i.dataSource,s=o.group(),c=o.pageSize(),l=i._getSchemaIdField(),u=a.scrollable,d=i.wrapper.find(`.k-grid-content.k-auto-scrollable`),f=n._outerHeight(i.tbody.find(`tr:not(.${L})`)),p=u&&u.virtual&&(u.virtual===`rows`||u.virtual===!0),m=a.groupable&&i.wrapper.find(`.${L}:first-child`),h={},g=!1,_=0;if(i._scrolledItems&&(h=i._scrolledItems),p&&s.length===0&&(i.virtualScrollable._alwaysScrollTop=!0),!t||!l)return;let v=o.view(),y=v.find(e=>e[l]==t);if(s.length>0&&(y=i._findGroupedItem(v,t,l),_=n._outerHeight(m[0])),!y&&p){(!i.virtualScrollable._programmaticallyScrolling||i.virtualScrollable._programmaticallyScrolling.state()===`resolved`)&&(i.virtualScrollable._programmaticallyScrolling=e.Deferred()),r&&typeof r==`function`&&r({success:e=>{let n=e;if(n=typeof n==`number`?n:Number(n),isNaN(n))return;let r=o.options.serverPaging,a=w.floor(n/c);if(r){let e=i._checkItemAlreadyLoaded(t,l);e&&(a=e.page)}let s=d.find(`tr`),u=s[s.length-1].offsetTop,p=c/s.length*u,m=n-a*c-1,h=a*p+m*f;return i._scrollingUp=i.virtualScrollable.verticalScrollbar.scrollTop()>h,i._scrollOffset=h,i.virtualScrollable._scrollTo(h),i.virtualScrollable.verticalScrollbar.trigger(De),i.virtualScrollable._programmaticallyScrolling.done(()=>{i.scrollToItem(t)})}});return}let b=y&&y.uid;if(!b)return;let x=e(`[data-uid=${b}]`),{targetRow:S,rowsToTarget:C,hiddenGroupingRows:T}=i._findClosestGroupingRow(x[0]);if(!x||!S)return;s.length>0&&x.css(`display`)===`none`&&(x=S,g=!0);let E=g?T*_+f:0,D=x[0].offsetTop-((C+s.length)*_-E),O=D;if(p){if(h&&h[t]){let e=Math.floor(i.virtualScrollable.verticalScrollbar.scrollTop()),n=Math.floor(h[t].scrollingDownOffset),r=Math.floor(h[t].scrollingUpOffset);if(e===r||e===n)return;i._scrollingUp=e>O,O=i._scrollingUp?r??O:n??O}i._scrollOffset&&(i._scrollingUp?(i._scrollOffset===D&&(i._scrollOffset+=f),O=D-i.virtualScrollable._scrollTop+i._scrollOffset):O+=i._scrollOffset),i.virtualScrollable._scrollTo(D,O),h[t]||(h[t]={}),i._scrollingUp?h[t]&&!h[t].scrollingUpOffset&&(h[t].scrollingUpOffset=O):h[t]&&!h[t].scrollingDownOffset&&(h[t].scrollingDownOffset=O)}else d.scrollTop(O);i.virtualScrollable&&(i._scrollOffset&&delete i._scrollOffset,i._scrollingUp&&delete i._scrollingUp),i._scrolledItems=h},current:function(e){return this._setCurrent(e,!0)},_setCurrent:function(t,n,r,i){var a=this._current;if(t=e(t),a&&t&&a.length&&t.length&&a.closest(`.k-filter-row`).length>0&&t.closest(`.k-filter-row`).length===0&&this._filterFocusable().attr(_t,-1),t.length&&(!a||a[0]!==t[0])){var o=t.parent(),s=o.children(D),c=parseInt(o.children().first().attr(`colspan`),10);this._hasVirtualColumns()&&(this._virtualCellIndex=(c>1?c:0)+s.index(t)),this._updateCurrentAttr(a,t,i),r||this._scrollCurrent(),n||this.trigger(st,{element:t})}return t&&t.length&&(this._lastCellIndex=t.parent().children(`.k-group-cell, .k-grid-stack-content,`+O).index(t)),this._updateSelctCheckbox(a,t),this._current},_removeCurrent:function(){this._current&&=(this._current.removeClass(Me),null)},_updateSelctCheckbox:function(e,t){var n;t&&t.length&&(n=t.find(`.k-select-checkbox`),n.length>0?n.trigger(`focus`):e&&e.find(`.k-select-checkbox`).length>0&&$(this.table,!0))},_scrollTo:function(t,r){var i=t.tagName.toLowerCase(),a=i===`td`||i===`th`,o=e(t).closest(`table`)[0],s=t[a?`offsetWidth`:`offsetHeight`],c=r[a?`scrollLeft`:`scrollTop`],l=r[a?`clientWidth`:`clientHeight`],u=e(t).css(`position`)===`relative`&&W&&a?Math.abs(o.offsetLeft-t.offsetLeft):t[a?`offsetLeft`:`offsetTop`],d=u+s,f=0,p=0,m=0;W&&a&&(G.msie||G.edge?p=o.offsetLeft:(G.mozilla||G.webkit&&G.version>85)&&(m=o.offsetLeft-n.support.scrollbar())),c=Math.abs(c+p-m),f=c>u?u:d>c+l?s<=l?d-l:u:c,f=Math.abs(f+p)+m,r[a?`scrollLeft`:`scrollTop`]=f},_navigatable:function(){var t=this;if(!t.options.navigatable)return;let r=t._isStackedMode();var i=t.table.add(t.lockedTable),a=!r&&t.thead.parent().add(e(`>table`,t.lockedHeader)),o=i;t.options.scrollable&&(o=o.add(a)),this._navigatableTables=o,a&&(this._headertables=a),o.off(ct+N+` focus.kendoGrid focusout.kendoGrid keydown.kendoGrid`),a&&a.find(`a.k-link`).attr(`tabIndex`,-1),i.on(`keydown`+N,`.k-detail-cell`,function(e){e.target!==e.currentTarget&&e.stopImmediatePropagation()}),o.on(n.support.touch?`touchstart`+N:ct+N,k+`>:not(.k-group-cell):not(.k-detail-cell):not(.k-hierarchy-cell):visible`,ri.bind(t)).on(`focus`+N,t._tableFocus.bind(t)).on(`focusout`+N,t._tableBlur.bind(t)).on(`keydown`+N,t,t._tableKeyDown.bind(t)),t._filterFocusable().on(`focus`,t._filterFocus.bind(t))},_filterFocus:function(t){var n=t.target.closest(`th`);this._filterFocusable().attr(_t,0),this._setCurrent(n),e(n).removeClass(Me)},_tableFocus:function(){var e=this.current(),t=this.lockedTable?this.lockedTable:this.table;e&&e.is(`:visible`)?e.addClass(Me):this._virtualColScroll?this._setCurrent(t.find(k).first().children(A).first(),!0,!0):this._setCurrent(t.find(k).first().children(A).first()),this.table.attr(_t,0)},_tableBlur:function(){var e=this.current();e&&e.removeClass(Me)},_findCellIndex:function(e,t,n){var r,i;if(n)for(i=t;i>=0&&(r=i,e[i].hidden);i--);else for(i=t;i<e.length&&(r=i,e[i].hidden);i++);return r},_scrollToColumn:function(e,r){if(this._virtualCellIndex===t)return!1;var i=this,a=i._virtualCellIndex,o=Z(Y(i.columns)),s=0;e==(W?d.LEFT:d.RIGHT)&&a!==o.length-1?a=i._findCellIndex(o,a+1):e==(W?d.RIGHT:d.LEFT)&&a?a=i._findCellIndex(o,a-1,!0):e==d.HOME?a=i._findCellIndex(o,0):e==d.END&&(a=i._findCellIndex(o,o.length-1,!0));for(var c=0;c<a;c++)s+=o[c].width;i._virtualCellIndex=a,r&&(r.preventDefault(),r.stopPropagation());let l=i.content;return i._hasVirtualRows()&&i._hasVirtualColumns()&&(l=i.virtualScrollable.wrapper),n.scrollLeft(l,s),!0},_tableKeyDown:function(t){let n=this.current(),r=n&&n.closest(`.k-grid-table`)[0],i=this.virtualScroll||{},a=this.virtualScrollable&&this.virtualScrollable.fetching(),o=e(t.target),s=!t.isDefaultPrevented()&&(!o.is(`:button,a,:input:not(.k-select-checkbox),a>.k-icon,a>.k-svg-icon`)||this._isFocusableGridElement(n));if(t.altKey&&t.keyCode==d.DOWN){this.current().find(`.k-grid-filter-menu, .k-grid-column-menu`).click(),t.stopImmediatePropagation();return}if(a){t.preventDefault();return}if(!(i.columns&&(!n||!document.body.contains(n[0]))&&this._scrollToColumn(t.keyCode,t))&&(n||=e(this.lockedTable).add(this.options.scrollable?this.table:this.tbody).find(k).first().children(A).first(),n.length)){var c=!1;!t.isDefaultPrevented()&&t.keyCode===d.F10&&(c=this._focusToolbar()),s&&t.keyCode==d.UP&&(c=this._moveUp(n,t.shiftKey,t.ctrlKey)),s&&t.keyCode==d.DOWN&&(c=this._moveDown(n,t.shiftKey,t.ctrlKey)),s&&t.keyCode==(W?d.LEFT:d.RIGHT)&&(c=this._moveRight(n,t.altKey,t.shiftKey,t.ctrlKey,r)),s&&t.keyCode==(W?d.RIGHT:d.LEFT)&&(c=this._moveLeft(n,t.altKey,t.shiftKey,t.ctrlKey,r)),s&&t.keyCode==d.PAGEDOWN&&(c=this._handlePageDown()),s&&t.keyCode==d.PAGEUP&&(c=this._handlePageUp()),s&&t.keyCode==d.HOME&&(c=this._handleHome(n,t.ctrlKey)),s&&t.keyCode==d.END&&(c=this._handleEnd(n,t.ctrlKey)),s&&t.keyCode==d.SPACEBAR&&(c=this._handleSpaceKey(n,t.ctrlKey)),(t.keyCode==d.ENTER||t.keyCode==d.F2)&&(c=this._handleEnterKey(n,r,o,t.keyCode==d.F2)),t.keyCode==d.ESC&&(c=this._handleEscKey(n)),t.keyCode==d.TAB&&(c=this._handleTabKey(n,r,t.shiftKey,o)),(t.keyCode===d.DELETE||t.keyCode===d.BACKSPACE)&&(c=this._handleDeletion(t)),c&&(t.preventDefault(),t.stopPropagation())}},_focusToolbar:function(){var e=this.wrapper.find(`.k-grid-toolbar [tabindex=0]`);return e.length>0?(e.first().addClass(`.k-focus`).trigger(`focus`),!0):!1},_focusFocusable:function(e,t,n,r,i){let a=this._isFocusableGridElement(t)&&t.find(F);(!a||!a.length)&&t.is(F)&&(a=t),!(this._containerHasActiveElement(e)&&e.find(F).length!==1||!t.length)&&($(this.table,!0),this._setCurrent(t,n,r),a.length===1&&!a.is(`table`)&&(a.trigger(`focus`),i?.preventDefault()))},_containerHasActiveElement:function(e){return e.find(s()).length},_isFocusableGridElement:function(e){return e?e.is(Ie)||e.has(Ie).length:!1},_moveLeft:function(t,n,r,i,a){var o,s,c=t.parent(),l=c.parent();return n?c.hasClass(L)?this.collapseGroup(c):this.collapseRow(c):i&&t.is(`.`+We)&&this.options.reorderable?this._moveColumn(t,!0):(s=l.find(k).index(c),o=this._prevHorizontalCell(l,t,s),!o[0]&&!this._containerHasActiveElement(t)&&(r?this.lockedTable?(o=this._relatedRow(c),e.contains(this.lockedTable[0],c[0])&&(o=o.prevAll(j).first()),o=o.children(D).last()):o=this._tabNext(t,a,!0):(l=this._horizontalContainer(l),o=this._prevHorizontalCell(l,t,s),o[0]!==t[0]&&$(this.table,!0))),this._focusFocusable(t,o)),!0},_moveRight:function(t,n,r,i,a){var o,s,c=t.parent(),l=c.parent();return n?c.hasClass(L)?this.expandGroup(c):this.expandRow(c):i&&t.is(`.`+We)&&this.options.reorderable?this._moveColumn(t,!1):(s=l.find(k).index(c),o=this._nextHorizontalCell(l,t,s),!o[0]&&!this._containerHasActiveElement(t)&&(r?this.lockedTable?(o=this._relatedRow(c),e.contains(this.table[0],c[0])&&(o=o.nextAll(j).first()),o=o.children(D).first()):o=this._tabNext(t,a,!1):(l=this._horizontalContainer(l,!0),o=this._nextHorizontalCell(l,t,s),o[0]!==t[0]&&$(this.table,!0))),this._focusFocusable(t,o)),!0},_moveUp:function(e,t,n){var r=e.parent().parent(),i,a,o,s;t?(i=e.parent(),i=i.prevAll(j).first(),i=e.parent().is(j)?i.children().eq(e.index()):i.children(D).last()):n&&e.parent().is(j)&&this._hasReorderableRows()?(a=e.index(),i=e.parent(),i=i.prevAll(j).first(),o=this.tbody.children(j).index(i),s=this.tbody.children(j).index(e.parent()),o>=0&&!this.trigger(ot,{oldIndex:s,newIndex:o,row:e.parent()})&&(this.reorderRows(e.parent(),o),i=this.tbody.children(j).eq(o).children().eq(a))):(i=this._prevVerticalCell(r,e),i[0]||(this._lastCellIndex=0,r=this._verticalContainer(r,!0),i=this._prevVerticalCell(r,e),i.is(`:hidden`)&&(i=i.nextAll().not(`:hidden`).first()),i[0]&&$(this.table,!0)));var c=this._lastCellIndex||0;return this._isStackedMode()?($(this.table,!0),this._setCurrent(i)):this._focusFocusable(e,i),this._lastCellIndex=c,!0},_moveDown:function(e,t,n){var r=e.parent().parent(),i,a,o,s;t?(i=e.parent(),i=i.nextAll(j).first(),i=e.parent().is(j)?i.children().eq(e.index()):i.children(D).first()):n&&e.parent().is(j)&&this._hasReorderableRows()?(a=e.index(),i=e.parent(),i=i.nextAll(j).first(),o=this.tbody.children(j).index(i),s=this.tbody.children(j).index(e.parent()),o>=0&&!this.trigger(ot,{oldIndex:s,newIndex:o,row:e.parent()})&&(this.reorderRows(e.parent(),o+1),i=this.tbody.children(j).eq(o).children().eq(a))):(i=this._nextVerticalCell(r,e),i[0]||(this._lastCellIndex=0,r=this._verticalContainer(r),i=this._nextVerticalCell(r,e),i[0]&&$(this.table,!0)));var c=this._lastCellIndex||0;return this._isStackedMode()?($(this.table,!0),this._setCurrent(this._findVisibleCell(i))):this._focusFocusable(e,this._findVisibleCell(i)),this._lastCellIndex=c,!0},_moveColumn:function(t,n){var r=this.wrapper.data().kendoReorderable.element.find(this._draggableInstance.options.filter+`:visible`),i=q(er(this.columns)),a=r.index(e(t)),o=n?-1:1,s=i[a],c=tr(i,this.columns,a,a+o);c>=0&&(this.reorderColumn(c,s,n),this.trigger(tt,{newIndex:c,oldIndex:a,column:s}))},_handleHome:function(e,t){let n=this,r=e.parent(),i=r.parent(),a=n.lockedTable&&n.lockedTable.children(`tbody`)[0]===i[0],o=i[0]===n.tbody[0],s,c=n._hasVirtualColumns(),l=n._hasVirtualRows(),u=(l?n.virtualScrollable.wrapper:n.content).scrollLeft()===0;if(c&&l&&t)return n._focusVirtualCell(!0,c&&!u),!0;if(c)return u?n._setCurrent(n.table.find(j).first().children(A).first()):n._forceScrollVirtualColumn(d.HOME,t),!0;if(l&&t)return n._focusVirtualCell(!0),!0;if(t?s=n.lockedTable?n.lockedTable.find(j).first().children(A).first():n.table.find(j).first().children(A).first():(o||a)&&(o&&this.lockedTable&&(r=n._relatedRow(r)),s=r.children(D).first()),s&&s.length)return n._setCurrent(s),!0},_setCurrentVirtualCell:function(e){let t=this;e?this._setCurrent(t.table.find(j).first().children(A).first()):this._setCurrent(t.table.find(j).last().children(A).last())},_forceScrollVirtualColumn:function(e,t,n){let r=this;n?(r._shouldFocusInLastRow=!t,r._shouldFocusInFirstRow=t):e===d.HOME?r._shouldFocusInFirstRow=t:r._shouldFocusInLastRow=t,r.one(be,function(){n&&r.one(be,function(){r._setCurrentVirtualCell(t)}),r._shouldFocusInLastRow&&(r.content.scrollTop(r.content[0].scrollHeight),delete r._shouldFocusInLastRow),r._shouldFocusInFirstRow&&(r.content.scrollTop(0),delete r._shouldFocusInFirstRow)}),r._scrollToColumn(e)},_focusVirtualCell:function(e,t){let n=this,r=this.virtualScrollable.verticalScrollbar,i=Math.ceil(r.scrollTop()+r.innerHeight())>=r[0].scrollHeight,a=this.virtualScrollable.verticalScrollbar.scrollTop()===0,o=e?a:i,s=e?d.HOME:d.END;if(o)t?n._forceScrollVirtualColumn(s,e,!0):n._setCurrentVirtualCell(e);else{n.dataSource.group().length===0&&(n.virtualScrollable._alwaysScrollTop=!0);let i=e?0:r[0].scrollHeight;n.one(be,function(){t?n._forceScrollVirtualColumn(s,e,!0):(n._setCurrentVirtualCell(e),n._shouldFocusInLastRow&&delete n._shouldFocusInLastRow,n._shouldFocusInFirstRow&&delete n._shouldFocusInFirstRow)}),r.scrollTop(i),r.trigger(De)}},_handleEnd:function(e,t){let n=this,r=e.parent(),i=r.parent(),a=n.lockedTable&&n.lockedTable.children(`tbody`)[0]===i[0],o=i[0]===n.tbody[0],s,c=n._hasVirtualColumns(),l=n._hasVirtualRows(),u=l?n.virtualScrollable.wrapper:n.content,f=u.scrollLeft()+u.innerWidth()>=u[0].scrollWidth;if(c&&l&&t)return n._focusVirtualCell(!1,c&&!f),!0;if(c)return f?n._setCurrent(n.table.find(j).last().children(A).last()):n._forceScrollVirtualColumn(d.END,t),!0;if(l&&t)return n._focusVirtualCell(!1),!0;if(t?s=n.table.find(j).last().children(A).last():(o||a)&&(!o&&this.lockedTable&&(r=n._relatedRow(r)),s=r.children(D).last()),s&&s.length)return n._setCurrent(s),!0},_handlePageDown:function(){return this.options.pageable?(this.dataSource.page(this.dataSource.page()+1),!0):!1},_handlePageUp:function(){return this.options.pageable?(this.dataSource.page(this.dataSource.page()-1),!0):!1},_handleTabKey:function(t,n,r,i){let a=this.options.editable&&this._editMode()==`incell`,o=e(s()).closest(`.k-grid-stack-edit-cell,.k-edit-cell`),c,l=this._isStackedMode(),u=i.is(F),d=!i.is(`table`),f=l&&i.is(`.k-grid-stack-cell`),p=!f&&i.closest(`.k-grid-stack-cell`),m=this._isFocusableGridElement(t),h=!si(t),g=i,_;if(l?f?_=i.parent().find(`.k-grid-stack-cell`).length>1:p&&p.length&&(_=p.find(F).length>1):_=t.find(F).length>1,!o[0]&&u&&d&&_&&m&&h){if(!l&&(i.is(`:last-child`)&&!r||i.is(`:first-child`)&&r))return $(this.table,!0),!0;if(i=r?i.prev(F):i.next(F),f&&!i.length){let e=g.parent().find(`.k-grid-stack-cell`);r&&g.is(`:first-child`)&&(i=e.last()),!r&&g.is(`:last-child`)&&(i=e.first())}else if(!i.length&&!f){let e=g.closest(`.k-grid-stack-cell`);r&&g.is(`:first-child`)&&(i=e),!r&&g.is(`:last-child`)&&(i=e.find(F).first())}return l&&i.is(`.k-grid-stack-cell`)?this._currentStackedCell(i,!0):i.trigger(`focus`),!0}if(l&&!f&&!o[0]||!a||t.is(`th`)||(this.options.scrollable?this._headertables&&this._headertables.filter(n).length:this.thead&&this.thead.filter(i).length)){if(t.parent().hasClass(`k-filter-row`)){if(c=this._filterFocusable(),!r&&c[c.length-1]===document.activeElement)return c.first().trigger(`focus`),!0;if(r&&c[0]===document.activeElement)return c.last().trigger(`focus`),!0}return!1}return o[0]&&o[0]!==t[0]&&(t=o),o=this._tabNext(t,n,r),o[0]===t[0]?!1:o.length&&this._isEditableEnabled?(this._handleEditing(t,o,o.closest(`table`)),!0):!1},_handleDeletion:function(n){let r=this,i=r.current(),a=e(s()),o=r._isStackedMode()?!r._currentStackedCell():!a.is(`table`);return!((r._isEditableEnabled===t||r._isEditableEnabled)&&r.options.editable)||si(i)||o||!i.closest(`tbody`).length||!i.closest(`.k-master-row`).length?!1:(r._removeCommandClick({currentTarget:i,preventDefault:n.preventDefault,stopPropagation:n.stopPropagation}),!0)},_handleEscKey:function(t){let n=s(),r=this._editMode()==`incell`,i=this._isStackedMode(),a=e(n),o=a.is(`.k-grid-stack-cell`)?e():a.closest(`.k-grid-stack-cell`),c=i?a:t,l=o&&o.length>0,u=i&&c.is(`.k-grid-stack-cell`);if(!si(o.length?o:c))return u||!l&&t.has(n).length&&!(this._isFocusableGridElement(t)&&t.find(F).length===1)?($(this.table,!0),delete this._activeStackedCell,!0):l?(o.trigger(`focus`),!0):t.parent().hasClass(`k-filter-row`)?(this._filterFocusable().attr(_t,-1),$(this.table,!0),!0):!1;if(r)this.closeCell(!0),i&&l&&(On(o.parent().children(`.k-grid-stack-cell`)),this._currentStackedCell(o,!0));else{var d=e(t).closest(`tr`).index();if(n&&n.blur(),this.cancelRow(!0),d>=0){let e=this._currentStackedCell();if(i&&e){let t=this.tbody.find(`tr`).eq(d).find(`.k-grid-stack-cell`).eq(e.index);this._setCurrentStackedCell(t)}else{let e=this.items().eq(d).children(A).first();this._setCurrent(e)}}}return i||$(this.table,!0),!i},_toggleCurrent:function(e,t,n){let r=this,i=e.parent();if(e.is(`.k-command-cell`)||i.is(`.k-filter-row`))return!1;if(i.is(`.`+L))return i.find(`.k-icon,.k-svg-icon`).first().click(),!0;if(!t&&n){let e=r._isStackedMode()?`[ref="expand-detail-button"], [ref="collapse-detail-button"]`:`.k-icon,.k-svg-icon`;return i.find(e).first().click(),!0}return!1},_handleSpaceKey:function(t,r){var i=this;if(!(!r||!i.groupable||!t.hasClass(We))){var a=i.groupable.descriptors(),o=t.attr(n.attr(`field`)),s=i.groupable.aggregates();if(i.groupable._canDrag(t)?a.push({field:o,dir:`asc`,aggregates:s||[]}):a=e.grep(a,function(e){return e.field!==o}),!i.trigger(`group`,{groups:a}))return i.dataSource.group(a),!0}},_hasStackedModeDetailsButton:function(e){return e.find(`[ref="expand-detail-button"], [ref="collapse-detail-button"]`).length>0},_currentStackedCell:function(e,t){let n=this;if(!e||!e.length)return n._activeStackedCell;n._activeStackedCell={cell:e,index:e.index()},t&&e.length&&e.trigger(`focus`)},_handleEnterKey:function(t,n,r,i){let a=this;var o=this.options.editable&&this.options.editable.update!==!1,c=r.closest(`td`),l=this._hasDetails(),u,d;let f=a._isStackedMode(),p=f&&i&&a._editMode()!==`incell`,m=f?`k-grid-stack-edit-cell`:`k-edit-cell`,h=f&&(r.is(`.k-grid-stack-cell`)||r.parent().is(`.k-grid-stack-cell`)||r.closest(`.k-grid-stack-cell`).length>0);if(!r.is(`table`)&&!e.contains(t[0],r[0])&&(t=c),t.is(`th`))return u=t.find(`.k-link`),t.has(e(s())).length>0?!1:(u.length?u.click():t.parent().hasClass(`k-filter-row`)?(d=this._filterFocusable(),d.attr(_t,0),t.find(`:kendoFocusable`).first().trigger(`focus`)):t.find(Re).trigger(`focus`),!0);if(!p){if(!h&&this._toggleCurrent(t,o,l))return!0;if(h&&a._hasStackedModeDetailsButton(r))return this._toggleCurrent(t,!1,!0),!0;f&&!h&&On(t.find(`.k-grid-stack-cell`));var g=(h?r:t).find(`:kendoFocusable`).first();if(g[0]&&(h||!t.hasClass(m)&&t.hasClass(`k-focus`)))return h?g.trigger(`focus`):a._currentStackedCell(g,!0),!0}return o&&!r.is(`:button,.k-button,textarea`)?(c[0]||(c=t),f&&r.is(`.k-grid-stack-cell`)&&a._currentStackedCell(r),h&&(c=r.is(`.k-grid-stack-cell`)?r:r.closest(`.k-grid-stack-cell`)),this._isEditableEnabled&&this._handleEditing(c,!1,n),!0):!1},_nextHorizontalCell:function(e,t,n){if(!t.nextAll(D).length){var r=e.find(k);if(r.index(t.parent())==-1){if(t.hasClass(We)){var i=[];return lr([J(this.columns)[0]],Er(r.eq(0).children(`:visible`).first()),i,0,0),i[n]?i[n][0]:t}return t.parent().hasClass(`k-filter-row`)?r.last().children(D).first():this._findVisibleCell(r.eq(n).children(D+`,[hidden]`).first())}}return this._findVisibleCell(t.nextAll(D+`,[hidden]`).eq(0))},_prevHorizontalCell:function(e,t,n){var r=t.prevAll(D);if(!r.length){var i=e.find(k);if(i.index(t.parent())==-1){if(t.hasClass(We)){var a=[],o=J(this.columns);return lr([o[o.length-1]],Er(i.eq(0).children().last()),a,0,0),a[n]?a[n][0]:t}return t.parent().hasClass(`k-filter-row`)?i.last().children(D).last():i.eq(n).children(D).last()}}r=t.prevAll(D+`,[hidden]`);let s=this._findVisibleCell(r.first());return s.is(`.k-group-cell`)?s.next(D):s},_currentDataIndex:function(e,n){var r=n.attr(`data-index`);if(!r)return t;var i=J(this.columns).length;return i&&!e.closest(`div`).hasClass(`k-grid-content-locked`)[0]?r-i:r},_findVisibleCell:function(e){var t=e.index(),n=e.closest(`tr`).index(),r;if(e.is(`[hidden]`)){r=e.prevAll(`:not([hidden])`).first();var i=e.prevUntil(`:not([hidden])`,`[hidden]`).length;if(!r.attr(`colspan`)||r.attr(`colspan`)>1&&r.attr(`colspan`)<=i+1){if(r=e.prevAll(`[hidden]`).last(),r.length===0)return e.closest(`tr`).prevAll().find(`td:nth-of-type(${t+1}):visible`).last();for(;!r.attr(`rowspan`)&&!(r.attr(`rowspan`)>1&&r.attr(`rowspan`)!=n-r.closest(`tr`).index())&&Math.abs(r.index()-t)!=r.attr(`colspan`);)if(r=r.closest(`tr`).prevAll().find(`td, th`).eq(t).first(),r.length===0){r=e;break}}}else r=e;return r},_prevVerticalCell:function(t,n){var r,i=n.parent(),a=t.children(k),o=a.index(i),s=this._currentDataIndex(t,n);if(s||n.hasClass(We))return r=Tr(n),r.eq(r.length-2);if(s=Math.max(i.children(O).index(n),this._lastCellIndex||0),i.hasClass(`k-filter-row`)){let e=a.last().children(`.k-group-cell`).length;return Q(t).filter(Pn).eq(Math.max(0,s-e))}if(o==-1)if(this._hasVirtualColumns()&&(s=this._virtualCellIndex),i=t.find(`tr.k-filter-row:visible`),i[0])this._hasDetails()&&s--;else{(this._hasDetails()||n.parent().find(`.k-hierarchy-cell`).length)&&s&&s--;let e=0;return n.parent().is(`.k-table-group-row`)&&(e=a.last().children(`.k-group-cell`).length),Q(t).eq(Math.max(0,s-e))}else i=o===0?e():a.eq(o-1);if(r=i.children(O),r.length>s){let e=r.eq(s);return e.is(`.k-group-cell`)&&(e=e.nextAll(`td`).not(`.k-group-cell`).not(`:hidden`).first()),this._findVisibleCell(e)}return r.eq(0)},_nextVerticalCell:function(e,n){var r,i,a=i=n.closest(`tr`),o=e.children(k),s=o.index(a),c=this._currentDataIndex(e,n),l=this.virtualScroll||{},u;if(s!=-1&&c===t&&n.hasClass(We))return Er(n).eq(1);c=c?parseInt(c,10):a.children(O).index(n),c=Math.max(c,this._lastCellIndex||0),s==-1?(a=o.eq(0),l.columns&&(u=parseInt(a.children().first().attr(`colspan`),10),c=this._virtualCellIndex-(u>1?u:0)),(this._hasDetails()||a.find(`.k-hierarchy-cell`).length)&&c++,a.hasClass(`k-table-group-row`)&&(c+=i.children(`.k-group-cell`).length)):a=o.eq(s+n[0].rowSpan),r=a.children(`.k-group-cell,`+O);let d=r.eq(0);return r.length>c&&(d=r.eq(c)),d.is(`.k-group-cell`)&&(d=d.nextAll(`td`).not(`.k-group-cell`).not(`:hidden`).first()),d},_verticalContainer:function(e,t){var n=e.parent(),r=this._navigatableTables.length,i=Math.floor(r/2),a=v(n[0],this._navigatableTables);return t&&(i*=-1),a+=i,(a>=0||a<r)&&(n=this._navigatableTables.eq(a)),n.find(t?`>thead`:`>tbody`)},_filterFocusable:function(){return this.wrapper.find(`.k-filter-row`).find(`.k-dropdownlist, .k-input .k-input-inner:visible, input[type='radio']:visible, input[type='checkbox']:visible`)},_horizontalContainer:function(e,t){var n=this._navigatableTables.length;if(n<=2)return e;var r=v(e.parent()[0],this._navigatableTables);return r+=t?1:-1,t&&(r==2||r==n)||!t&&(r==1||r<0)?e:this._navigatableTables.eq(r).find(`thead, tbody`)},_tabNext:function(e,t,n){var r=!0,i=n?e.prevAll(D).first():e.nextAll(`:visible`).first();if(!i.length){if(i=e.parent(),this.lockedTable&&(r=n&&t==this.lockedTable[0]||!n&&t==this.table[0],i=this._relatedRow(i)),r){if(this._hasVirtualColumns())return e;i=i[n?`prevAll`:`nextAll`](`tr:not(.k-grouping-row):not(.k-detail-row):visible`).first()}i=n?i.children(D).last():i.children(D).first()}return i},_handleEditing:function(t,n,r){var i=this,a=e(s()),o=i._editMode(),c=G.msie,l=i._editContainer,u,d=i.options.editable&&i.options.editable.update!==!1,f;let p=i._isStackedMode(),m=t.is(`.k-grid-stack-cell`);if(r=e(r),o==`incell`){let e=p?`k-grid-stack-edit-cell`:`k-edit-cell`;f=t.hasClass(e)}else f=m?t.hasClass(`k-grid-stack-edit-cell`):t.parent().hasClass(`k-grid-edit-row`);if(i.editable){if(e.contains(l[0],a[0])&&(a.trigger(`blur`),c&&a.trigger(`blur`)),!i.editable&&!m){$(i.table);return}if(i.editable.end())o==`incell`?i.closeCell():(i.saveRow(),f=!0);else{if(p&&m)return i._setCurrentStackedCell(t);o==`incell`?i._setCurrent(l):i._setCurrent(l.children().filter(D).first()),u=l.find(`:kendoFocusable`).first()[0],u&&u.focus();return}}if(n&&i._setCurrent(n),m||$(i.table,!0),d){if(!f&&!n||n)if(o===St){if(!(p?t.find(`[ref='expand-detail-button'], [ref='collapse-detail-button']`).length:e(i.current()).hasClass(`k-hierarchy-cell`))){let e=i._isStackedMode(),n=e?t:i.current();if(e&&n.is(`.k-command-cell`))return;i.editCell(n,e&&n.parent().children().index(n))}}else i.editRow(i.current().parent());i._toggleToolbarEditingItemsVisibility()}},_wrapper:function(){var e=this,t=e.table,r=e.options.height,i=e.options.width,a=e.element;a.is(`div`)||(a=a.wrap(`<div/>`).parent()),e.wrapper=a.addClass(`k-grid `+n.getValidCssClass(`k-grid-`,`size`,e.options.size)),e._isStackedMode()?e.wrapper.addClass(ae):e.wrapper.removeClass(ae),r&&(e.wrapper.css(mt,r),t.css(mt,gt)),i&&e.wrapper.css(ht,i),e._initMobile()},_initContextMenu:function(){var e=this,t=e.options,n=p(t.contextMenu)&&_(t.contextMenu.groups)?{items:t.contextMenu.groups}:{items:nn},i=p(t.contextMenu)&&_(t.contextMenu.body)?{items:t.contextMenu.body}:{items:en},a=p(t.contextMenu)&&_(t.contextMenu.head)?{items:t.contextMenu.head}:{items:tn},o=p(t.contextMenu)?t.contextMenu:{};i=m({},{messages:t.messages,target:e.tbody,filter:`.k-table-td`,action:e._action.bind(e),states:e._buildStates()},o,i),a=m({},{messages:t.messages,target:e.thead,filter:`.k-table-th`,action:e._action.bind(e),states:e._buildStates()},o,a),e.groupable&&(n=m({},{showOn:`click`,target:e.groupable.groupContainer,filter:`.k-groupable-context-menu`,messages:t.messages,action:e._action.bind(e),states:e._buildStates()},o,n)),e.tbodyContextMenu=new r.grid.ContextMenu(`<ul></ul>`,i),e.theadContextMenu=new r.grid.ContextMenu(`<ul></ul>`,a),e.groupsContextMenu=!!e.groupable&&new r.grid.ContextMenu(`<ul></ul>`,n)},_buildStates:function(){var t=this;return{isEditable:t.options.editable,isSelectable:t.options.selectable,isSortable:t.options.sortable,isRowReorderable:p(t.options.reorderable)?t.options.reorderable.rows:t.options.reorderable,isGroupable:t.options.groupable,allowPaste:t.options.allowPaste,alwaysDisabled:!1,hasSelection:()=>this.select()?this.select().length>0:!1,isSorted:()=>!(this.dataSource.sort()&&this.dataSource.sort().length>0),canMoveGroupPrev:t=>e(t).closest(`.k-chip`).index()>0,canMoveGroupNext:t=>{var n=e(t).closest(`.k-chip-list`).children().length-1;return e(t).closest(`.k-chip`).index()<n}}},_action:function(e){var t=e.command,n=m({grid:this},e.options);return new r.grid.commands[t](n).exec()},_initMobile:function(){var e=this.options,t=this;if(this._isMobile=t.options.adaptiveMode!==`auto`&&e.mobile===!0&&n.support.mobileOS||e.mobile===`phone`||e.mobile===`tablet`,n.support.mobileOS&&this.wrapper.addClass(`k-grid-mobile`),this._isMobile){var r=this.wrapper.wrap(`<div data-`+n.ns+`stretch="true" data-`+n.ns+`role="view" data-`+n.ns+`init-widgets="false"></div>`).parent();this.pane=this._createPane(r),this.view=this.pane.view(),e.height?this.pane.element.parent().css(mt,e.height):this.pane.element.parent().css(mt,this.wrapper[0].style.height),this._editAnimation=`slide`,t.wrapper.on(`transitionend`+N,function(e){e.stopPropagation()}),t.wrapper.on(`contextmenu`+N,`th a`,function(e){return e.preventDefault(),!1}),this.view.bind(`showStart`,function(){t._isLocked()&&(t._updateTablesWidth(),t._applyLockedContainersWidth(),t._syncLockedContentHeight(),t._syncLockedHeaderHeight(),t._syncLockedFooterHeight())})}},_createPane:function(e){return n.Pane.wrap(e,{viewEngine:{viewOptions:{renderOnInit:!0,wrap:!1,wrapInSections:!0,detachOnHide:!1,detachOnDestroy:!1}}})},_initLoader:function(t){var n=this,r={size:`medium`,messages:{exporting:`Exporting...`}};r=e.extend({},r,t),n.loader=e(`<div></div>`).kendoLoader(r).data(`kendoLoader`),n._loaderContainer=ee.bind(n)},_tbody:function(){var t=this,n=t.table,r=n.find(`>tbody`);r.length||(r=e(`<tbody/>`).appendTo(n)),r.addClass(`k-table-tbody`),t.tbody=r},_scrollable:function(){var t=this,r,i,a=t.options,o=a.scrollable,s=o!==!0&&o.virtual?ai(o.virtual):null,c=!n.support.kineticScrollNeeded||s&&s.rows?n.support.scrollbar():0,l;let u=t._isStackedMode();if(o){u||(r=t.wrapper.children(`.k-grid-header`),r[0]||(r=e(`<div class="k-grid-header" />`).insertBefore(t.table)),r.css(W?`padding-left`:`padding-right`,o.virtual?c+1:c),i=e(`<table role="none" class="k-grid-header-table k-table"/>`),i.addClass(n.getValidCssClass(`k-table-`,`size`,a.size)),i.width(t.table[0].style.width)),u||(i.append(t.thead),r.empty().append(e(`<div class="k-grid-header-wrap k-auto-scrollable" />`).append(i))),t.content=t.table.parent(),t.virtualScroll=s,t.content.is(`.k-virtual-scrollable-wrap, .`+Qt.scrollContainer)&&(t.content=t.content.parent()),t.content.is(`.k-grid-content, .k-virtual-scrollable-wrap`)||(t.content=t.table.wrap(`<div class="k-grid-content k-auto-scrollable" />`).parent()),t.content.parent().hasClass(`k-grid-container`)||t.content.wrap(`<div class='k-grid-container' />`).parent(),s&&s.rows&&!t.virtualScrollable&&t._createVirtualScrollable(),s&&s.columns&&t.table.add(t.thead.parent()).css({width:ir(X(gr(t.columns)))}),u?t.scrollables=t.content:(l=r.children(`.k-grid-header-wrap`),t.scrollables=l.add(t.content));var d=t.wrapper.find(`.k-grid-footer`);if(d.length&&(t.scrollables=t.scrollables.add(d.children(`.k-grid-footer-wrap`))),u||l.off(`scroll`+N).on(`scroll`+N,function(e){t._scrollLeft!==this.scrollLeft&&n.scrollLeft(t.scrollables.not(e.currentTarget),this.scrollLeft)}),s&&s.rows)t.content.find(`>.k-virtual-scrollable-wrap`).off(`scroll`+N).on(`scroll`+N,function(){var e=this.scrollLeft!=t._scrollLeft;t._scrollLeft=this.scrollLeft,n.scrollLeft(t.scrollables,this.scrollLeft),t.lockedContent&&(t.lockedContent[0].scrollTop=this.scrollTop),s.columns&&e&&t.refresh()});else{var f=o.endless,p=t.dataSource.options.pageSize;f&&(t._endlessPageSize=p),t.content.off(`scroll`+N).on(`scroll`+N,function(e){var r=this.scrollLeft!=t._scrollLeft;t._scrollLeft=this.scrollLeft,n.scrollLeft(t.scrollables.not(e.currentTarget),t._scrollLeft),t.lockedContent&&e.currentTarget==t.content[0]&&(t.lockedContent[0].scrollTop=this.scrollTop),f&&this.scrollTop+this.clientHeight-this.scrollHeight>=-10&&!t._endlessFetchInProgress&&t._endlessPageSize<t.dataSource.total()&&(t._skipRerenderItemsCount=t._endlessPageSize,t._endlessPageSize+=p,t.dataSource.options.endless=!0,t._endlessFetchInProgress=!0,t.dataSource.pageSize(t._endlessPageSize)),s&&s.columns&&r&&(t._virtualColScroll=!0,t._cacheEditableState(),t.refresh(),t._restoreEditableState(),t._virtualColScroll=!1),t.rowResizer&&t.rowResizer.css(`left`,e.currentTarget.scrollLeft+`px`)});var m=t.content.data(`kendoTouchScroller`);m&&m.destroy(),m=n.touchScroller(t.content),m&&m.movable&&(t.touchScroller=m,m.movable.bind(`change`,function(e){n.scrollLeft(t.scrollables,-e.sender.x),t.lockedContent&&t.lockedContent.scrollTop(-e.sender.y)}),t.one(be,function(e){e.sender.wrapper.addClass(`k-grid-backface`)}))}}},_createVirtualScrollable:function(){var e=this;e.virtualScrollable&&e.virtualScrollable.destroy(),e.virtualScrollable=new on(e.content,{dataSource:e.dataSource,itemHeight:function(){return e._averageRowHeight()},page:function(){e._restoreEditableState()},scroll:function(){e._focusEditable()},loadStart:function(){e._progress(!0)},loadEnd:function(){e._progress(!1)}}),e.virtualScrollable.bind(Te,e._onVirtualPaging.bind(e))},_onVirtualPaging:function(){var e=this;e._cacheEditableState(),e._isVirtualIncellEditable()&&(e._shouldClearEditableState=!1,e.closeCell(),e._shouldClearEditableState=!0)},_isVirtualEditable:function(){return this._isVirtualIncellEditable()||this._isVirtualInlineEditable()||this._isVirtualPopupEditable()},_isVirtualInlineEditable:function(){return this.virtualScrollable&&this._editMode()===Ct},_isVirtualIncellEditable:function(){return this.virtualScrollable&&this._editMode()===St},_isVirtualPopupEditable:function(){return this.virtualScrollable&&this._editMode()===`popup`},_hasVirtualColumns:function(){return!!(this.virtualScroll||{}).columns},_hasVirtualRows:function(){return!!(this.virtualScroll||{}).rows},_scrollVirtualWrapper:function(){var e=this,t=e.virtualScrollable;(e._isVirtualInlineEditable()||e._isVirtualIncellEditable())&&(t._isScrolledToBottom()?t._scrollWrapperToBottom():t._isScrolledToTop()&&t._scrollWrapperToTop())},_scrollVirtualWrapperOnColumnResize:function(){var e=this.virtualScrollable;e&&e._scrollWrapperOnColumnResize()},_restoreEditableState:function(){var t=this,n=t._editableState||{},r=n.model,i=t.dataSource,a=t._isVirtualInlineEditable(),o=t._isVirtualIncellEditable(),s=t._hasVirtualColumns(),c,l;if((a||o||s)&&r&&i._getByUid(r.uid,i.view())){if(t._editMode()===Ct)t._shouldClearEditableState=!1,t.editRow(r),s||t._focusEditable();else if(t._editMode()===St){let i=t._isStackedMode();c=t.tbody.children(dn(`uid`,r.uid)),l=i?e(c).find(`.k-grid-stack-cell:not(.k-drag-cell):not(.k-command-cell)`+dn(bt,n.field)):e(c).children(dn(bt,n.field)),l[0]&&(t._shouldClearEditableState=!1,t.editCell(l,i&&l.parent().children().index(l)),s||t._focusEditable())}}t._shouldClearEditableState=!0},_focusEditable:function(){var e=this,t=(e._editableState||{}).field,n=e._editContainer;n&&n.length&&!C(n[0],s())&&e._canFocusEditable()&&(e._isVirtualInlineEditable()||e._hasVirtualColumns()?n.find(dn(yt,t)).find(F).eq(0).trigger(`focus`):(e._isVirtualIncellEditable()||e._hasVirtualColumns())&&n.find(F).eq(0).trigger(`focus`))},_canFocusEditable:function(){var e=this;return(e._isVirtualIncellEditable()||e._isVirtualInlineEditable()||e._hasVirtualColumns())&&(oi((e.virtualScrollable||{}).wrapper,e._editContainer)||oi(e.content,e._editContainer))},_cacheEditableState:function(){var t=this,r=t._editContainer,i=r?t._modelForContainer(r):null,a=t._isVirtualInlineEditable(),o=t._isVirtualIncellEditable(),c=t._hasVirtualColumns(),l,u,d;(a||o||c)&&i&&(t._clearEditableState(),l=e(s()),r&&l[0]&&C(r[0],l[0])&&(l.change(),u=n.widgetInstance(l,n.ui),u&&b(u.value)&&l.is(xt)&&(d=l.val(),l.is(`[type='checkbox'`)&&(d=l.is(`:checked`)),u.value(d),u.trigger(P))),t._editMode()===Ct?t._editableState={model:i,field:l.closest(`[`+n.attr(yt)+`]`).attr(n.attr(yt))}:t._editMode()===St&&(t._editableState={model:i,field:r.attr(n.attr(bt))}))},_clearSortClasses:function(){var e=this,t=e.content||e.table,n=e.lockedContent;t&&t.find(M).removeClass(Ue),n&&n.find(M).removeClass(Ue)},_clearEditableState:function(){var e=this;(e.virtualScrollable||e.virtualScroll&&e._hasVirtualColumns())&&(e._editableState=null)},_destroyVirtualScrollable:function(){var e=this;e._clearEditableState(),e.virtualScrollable&&e.virtualScrollable.element&&e.virtualScrollable.destroy(),e.virtualScrollable=null},_destroyRowResizing:function(){this.rowResizing&&=(this.rowResizing.destroy(),null),this.rowResizer&&(this._detachRowResizerEvents(),this.rowResizer.off(pt+N),this.rowResizer=null,this._clearCachedRowsHeight())},_renderNoRecordsContent:function(){var t=this;if(t.options.noRecords){var r=t.table.parent().children(`.`+ze);r.length&&r.remove(),(!t.dataSource||!t.dataSource.view().length)&&(r=e(t.noRecordsTemplate({grid:t})),n.applyStylesFromKendoAttributes(r,[`margin`,`position`]),r.insertAfter(t.table))}},_setContentWidth:function(t){var r=this,i=`k-grid-content-expander`,a=`<div class="`+i+`"></div>`,o=r.resizable,s;r.options.scrollable&&r.wrapper.is(`:visible`)&&(s=r.table.parent().children(`.`+i),r._setContentWidthHandler=r._setContentWidth.bind(r),!r.dataSource||!r.dataSource.view().length?(s[0]||(s=e(a).appendTo(r.table.parent()),o&&o.bind(`resize`,r._setContentWidthHandler)),r.thead&&(s.width(r.thead.width()),isNaN(parseFloat(t,10))||n.scrollLeft(r.content,t))):s[0]&&(s.remove(),o&&o.unbind(`resize`,r._setContentWidthHandler)),r._applyLockedContainersWidth(!0),r._syncLockedContentHeight(),r.lockedHeader&&r.table[0].clientWidth===0&&(r.table[0].style.width=`1px`))},_applyLockedContainersWidth:function(e){if(this.options.scrollable&&this.lockedHeader){let t=this.thead.parent(),r=t.parent(),i=this.wrapper[0].clientWidth,a=this._groups(),o=n.support.scrollbar(),s=this.lockedHeader.find(`>table>colgroup>col:not(.k-group-col, .k-hierarchy-col)`),c=t.find(`>colgroup>col:not(.k-group-col, .k-hierarchy-col)`),u=ar(s),d=ar(c),f;a>0&&e&&(u+=l(this.lockedHeader.find(`.k-group-cell`).first())*a),u>=i&&(u=i-3*o),this.lockedHeader.add(this.lockedContent).width(u),r[0].style.width=r.parent().width()-u-2+`px`,t.add(this.table).width(d),this.virtualScrollable&&!Xt&&(i-=o),this.content[0].style.width=i-u-1+`px`,this.lockedFooter&&this.lockedFooter.length&&(this.lockedFooter.width(u),f=this.footer.find(`.k-grid-footer-wrap`),f[0].style.width=r[0].clientWidth+`px`,f.children().first().width(d))}},_setContentHeight:function(){var e=this,t=e.options,r,i=e.wrapper.children(`.k-grid-header`),a=n.support.scrollbar(),o=(t.scrollable||{}).height;t.scrollable&&e.wrapper.is(`:visible`)&&(o&&e.content[0].style.height===``&&(e.content[0].style.height=o),r=e.wrapper.innerHeight(),r-=u(i),e.pager&&e.pager.element.is(`:visible`)&&(r-=u(e.pager.element)),t.groupable&&(r-=u(e.wrapper.children(`.k-grouping-header:not(.k-hidden)`))),t.toolbar&&(r-=u(e.wrapper.children(`.k-grid-toolbar`))),e.footerTemplate&&(r-=u(e.wrapper.children(`.k-grid-footer`))),e.statusBar&&(r-=u(e.wrapper.children(`.k-selection-aggregates`))),function(e){var t,n;return e[0].style.height?!0:(t=e.height(),e.height(gt),n=e.height(),t==n?(e.height(``),!1):(e.height(``),!0))}(e.wrapper)&&(r>a*2?(e.lockedContent&&(a=e.table[0].offsetWidth>e.table.parent()[0].clientWidth?a:0,e.lockedContent.height(r-a)),e.content.height(r)):e.content.height(a*2+1)))},_averageRowHeight:function(){var e=this,t=e._items(e.tbody,!0).length,n=e._rowHeight;if(t===0)return n;e._rowHeight||(e._rowHeight=n=u(e.table)/t,e._sum=n,e._measures=1);var r=u(e.table)/t;return n!==r&&(e._measures++,e._sum+=r,e._rowHeight=e._sum/e._measures),n},_dataSource:function(){var e=this,n=e.options,r,a=n.dataSource;a=_(a)?{data:a}:a,p(a)&&(m(a,{table:e.table,fields:e.columns}),r=n.pageable,p(r)&&r.pageSize!==t&&(a.pageSize=r.pageSize)),e.dataSource&&e._refreshHandler?e.dataSource.unbind(P,e._refreshHandler).unbind(T,e._progressHandler).unbind(je,e._requestEndHandler).unbind(E,e._errorHandler).unbind(Tt,e._sortHandler):(e._refreshHandler=e.refresh.bind(e),e._progressHandler=e._requestStart.bind(e),e._requestEndHandler=e._requestEnd.bind(e),e._errorHandler=e._error.bind(e),e._sortHandler=e._clearSortClasses.bind(e)),e.dataSource=i.create(a).bind(P,e._refreshHandler).bind(T,e._progressHandler).bind(je,e._requestEndHandler).bind(E,e._errorHandler).bind(Tt,e._sortHandler)},_error:function(){this._progress(!1),this._requestInProgress=!1},_requestStart:function(){this._progress(!0),this._requestInProgress=!0},_requestEnd:function(){this._requestInProgress=!1},_modelChange:function(t){var i=this,a=i.tbody,o=t.model,s=i.tbody.find(`tr[`+n.attr(`uid`)+`=`+o.uid+`]`),c,l,u,d=s.hasClass(`k-table-alt-row`),f,p=i._items(a).index(s),m=i.lockedContent,h,g,_,v,y;let b=i._isStackedMode();if(m&&(c=i._relatedRow(s)),(b?s.add(c).find(`.k-grid-stack-cell:not(.k-drag-cell):not(.k-command-cell)`):s.add(c).children(`.k-edit-cell`)).length&&!i.options.rowTemplate)(b?s.add(c).children(`:not(.k-group-cell,.k-hierarchy-cell)`).find(`.k-grid-stack-cell:not(.k-drag-cell):not(.k-command-cell)`):s.add(c).children(`:not(.k-group-cell,.k-hierarchy-cell)`)).each(function(){if(l=e(this),!(b&&l.hasClass(`.k-command-cell`))&&(u=Z(i.columns)[i._calculateColumnIndex(l)],u.field===t.field)){let e=b?`k-grid-stack-edit-cell`:`k-edit-cell`;if(l.hasClass(e))l.addClass(`k-dirty-cell`);else{let e=b?l.find(`.k-grid-stack-content`):l;i._displayCell(e,u,o)}}});else if(!s.hasClass(`k-grid-edit-row`)){g=e().add(s),m&&(f=(d?i.lockedAltRowTemplate:i.lockedRowTemplate)(o),g=g.add(c),c.replaceWith(f)),f=(d?i.altRowTemplate:i.rowTemplate)(o);let t=e(f);for(n.applyStylesFromKendoAttributes(t,[`display`]),s.replaceWith(t),f=i._items(a).eq(p),m&&(s=s.add(c),c=i._relatedRow(f)[0],Xr(f[0],c),f=f.add(c)),h=i.options.selectable,(h||i._checkBoxSelection)&&s.hasClass(I)&&i.select(f),v=g.children(`:not(.k-group-cell,.k-hierarchy-cell)`),_=f.children(`:not(.k-group-cell,.k-hierarchy-cell)`),p=0,y=i.columns.length;p<y;p++)u=i.columns[p],l=b?_.find().eq(p):_.eq(p),h&&v.eq(p).hasClass(I)&&l.addClass(I);i.trigger(`itemChange`,{item:f,data:o,ns:r})}i._toggleToolbarEditingItemsVisibility()},_pageable:function(){var t=this,r,i=t.options.pageable,a=t.options.size,o=t.options.navigatable;if(i){r=t.wrapper.children(`div.k-grid-pager`),r.length||(r=e(`<div class="k-pager k-grid-pager"/>`)),i.position===`top`?r.prependTo(t.wrapper).addClass(`k-grid-pager-top`):r.appendTo(t.wrapper),t.pager&&t.pager.destroy();let s=t.options.adaptiveMode;t.options.adaptiveMode===`auto`&&i&&typeof i==`object`&&i.adaptiveMode&&(s=i.adaptiveMode),typeof i==`object`&&i instanceof n.ui.Pager?t.pager=i:t.dataSource._groupPaging?t.pager=new $t(r,m({},i,{dataSource:t.dataSource,navigatable:o,size:a,adaptiveMode:s})):t.pager=new n.ui.Pager(r,m({},i,{dataSource:t.dataSource,navigatable:o,size:a,adaptiveMode:s})),t.pager.bind(`pageChange`,function(e){t.trigger(`page`,{page:e.index})&&e.preventDefault()}),t._togglePagerVisibility()}},_statusBar:function(){var t=this,n=t.options,r=t.wrapper,i=n.statusBarTemplate,a=``;i&&(t.statusBar?t.statusBar.html(i({aggregates:t._cellAggregates})):(a+=`<div class="k-selection-aggregates k-grid-selection-aggregates">`,a+=i({aggregates:t._cellAggregates}),a+=`</div>`,n.scrollable?t.statusBar=e(a).insertAfter(r.find(`.k-grid-container`)):t.statusBar=e(a).insertAfter(r.find(`.k-grid-table`))))},_footer:function(){var t=this,r=t.dataSource.aggregates(),i=``,a=t.footerTemplate,o=t.options,s,c=t.footer||t.wrapper.find(`.k-grid-footer`);if(a)if(i=e(t._wrapFooter(a(r))),n.applyStylesFromKendoAttributes(i,[`display`,`left`,`right`]),c.length){var l=i;c.replaceWith(l),c=t.footer=l}else o.scrollable?(t.statusBar?t.footer=i.insertBefore(t.statusBar):o.pageable&&o.pageable.position!==`top`?t.footer=i.insertBefore(t.wrapper.children(`div.k-grid-pager`)):t.footer=i.appendTo(t.wrapper),c=t.footer):c=t.footer=i.insertAfter(t.tbody);else c&&!t.footer&&(t.footer=c);if(c.length&&(o.scrollable&&(s=c.attr(_t,-1).children(`.k-grid-footer-wrap`),t.scrollables=e(t.scrollables.filter(function(){return!e(this).is(`.k-grid-footer-wrap`)}).toArray()).add(s)),t._footerWidth&&c.find(`table`).css(`width`,t._footerWidth),s)){var u=n.scrollLeft(t.content);o.scrollable!==!0&&t.virtualScroll&&t.virtualScroll.rows&&(u=n.scrollLeft(t.wrapper.find(`.k-virtual-scrollable-wrap`))),n.scrollLeft(s,u)}t.lockedContent&&(t._appendLockedColumnFooter(),t._applyLockedContainersWidth(),t._syncLockedFooterHeight())},_wrapFooter:function(t){var r=this,i=``,a,o=n.support.mobileOS?0:n.support.scrollbar();return r.options.scrollable?(i=e(`<div class="k-grid-footer"><div class="k-grid-footer-wrap"><table class="k-table k-grid-footer-table"><tfoot class="k-table-tfoot">`+t+`</tfoot></table></div></div>`),a=i.find(`table`),a.addClass(n.getValidCssClass(`k-table-`,`size`,r.options.size)),r._appendCols(a),i.css(W?`padding-left`:`padding-right`,o),i):`<tfoot class="k-grid-footer k-table-tfoot">`+t+`</tfoot>`},_actionsheetFooterActionsTemplate:function(e){let t=``;return e.forEach(e=>{let r=e.command,i=e.text;t+=n.html.renderButton(`<button data-command=${r}>${i}</button>`,e)}),t},_isAdaptive:function(){let e=this;return e.options.adaptiveMode===`auto`&&(e.smallMQL.mediaQueryList.matches||e.mediumMQL.mediaQueryList.matches)},_isStackedMode:function(){return this.options.dataLayoutMode===`stacked`},_toolPopup:function(e){return e.popup&&e.popup.wrapper},_filterToolbarTool:function(t){let r=this,i=Z(r.columns),a=r.options,o=e=>{let t=r._isAdaptive()?`[ref-actionsheet-action-button]`:`[ref='clear-filter']`;return r._toolPopup(e)?.find(t)},s=r._toolbarOptionsForTool(`filter`);function c({isAdaptive:e}){let t=``;for(let e=0;e<i.length;e++){let n=i[e];!(a.filterable&&n.filterable!==!1)||n.command||n.draggable||n.selectable||(t+=`<div class="k-columnmenu-item-wrapper">`,t+=`<div class="k-columnmenu-item-content k-columns-item" ref="filter" tabindex="0" data-field="${n.field}" data-index=${n.index||e||0}></div>`,t+=`</div>`)}return(!s||s.clearButton)&&!e&&(t+=`<div class="k-actions k-actions-stretched k-actions-horizontal k-column-menu-footer">`,t+=n.html.renderButton(`<button ref="clear-filter">${an(r.options.messages).filter[0].text}</button>`,{icon:`filter-clear`}),t+=`</div>`),t}let l=t.data(`kendoColumnMenu`);l&&(l.wrapper.off(`click`+N),l.element.off(`click`+N),l.destroy());let u=a.filterable&&r.options.columnMenu.filterable!==!1?m(!0,{pane:r.pane},a.filterable):!1;if(!u)return;let d={dataSource:r.dataSource,columns:!1,sortable:!1,filterable:u,hideAutoSizeColumn:!0,owner:r,adaptiveMode:r.options.adaptiveMode,encodeTitles:r.options.encodeTitles,componentType:`modern`,_actionsheet:{actionButtons:an(r.options.messages).filter,title:`Filter by`,closeButton:!0,ref:`filter-view`},closeCallback:function(e){e.removeClass(I);let n=r._toolPopup(t);n.length&&n.find(`.k-focus`).removeClass(`k-focus`),t.element.focus()},init:function(e){if(t.wrapper.attr(`ref`,`filter-tool`),!r._showAdaptiveView)for(var n=0,o=i.length;n<o;n++){let e=i[n],o=e.field;if(!(a.filterable&&e.filterable!==!1&&!e.draggable&&!e.selectable&&!e.command))continue;let s=t.wrapper.find(`.k-columns-item[data-field="${o}"]`);r._initFilterMenuForColumn(e,s)}},contentTemplate:c,filtering:function(e){r.trigger(`filter`,{filter:e.filter,field:e.field})?e.preventDefault():(r._clearEditableState(),r.dataSource.options.endless&&r._resetEndless())}};t=t.kendoColumnMenu(d).data(`kendoColumnMenu`),t.element.bind(`click`+N,function(n){t.popup&&t.popup._closing||(e(n.currentTarget).addClass(I),o(t)?.toggleClass(`k-disabled`,!t.dataSource._filter))});let f=function(e){let t=e.sender.wrapper&&e.sender.wrapper.find(`.k-grid-filter-tool`)?.data(`kendoColumnMenu`),n=t.dataSource._filter,i=e.field,a=!e.filter,s,c=n&&n.filters;if(a&&c&&c.length&&!c.find(e=>e.filters&&e.filters.length?e.filters[0].field===i:e.field===i))return;let l=t.wrapper.find(`.k-columns-item[data-field='${i}']`),u=l?.closest(`.k-expander`)?.find(`.k-columnmenu-item`);n&&n.filters.length?s=a?c.filter(e=>e.field!==i).length>0:!a:a||(s=!0),l.length&&l.data(`kendoExpansionPanel`).toggle(!1),o(t)?.toggleClass(`k-disabled`,!s),r._toggleColumnMenuFilterIndicator(u,!a),r._toggleBadge(t.element,s)};r.unbind(`filter`,f),r.bind(`filter`,f),t.bind(`open`,function(){let e=r._toolPopup(t);if(e.length){e.focus();let n=o(t),i=t.dataSource._filter&&t.dataSource._filter.filters;i&&i.length&&i.forEach(e=>{let n=e.field||e.filters[0].field,i=t.wrapper.find(`.k-columns-item[data-field='${n}']`)?.closest(`.k-expander`)?.find(`.k-columnmenu-item`);r._toggleColumnMenuFilterIndicator(i,!0)}),n.length&&(n.off(`mousedown`+N),n.on(`mousedown`+N,function(){r.dataSource.filter([]),r._toggleBadge(t.element,!1),t.wrapper.find(`.k-columnmenu-indicators`).remove(),n.toggleClass(`k-disabled`,!0),t.popup.close()}))}})},_initFilterMenuForColumn:function(e,t){let n=this,r=n._hasFilterMenu(),i;if(t.length){i=t.data(`kendoFilterMenu`),i&&i.destroy(),i=t.data(`kendoFilterMultiCheck`),i&&i.destroy();var a=e.filterable,o=m({},r,a,{appendToElement:!0,componentType:`modern`,dataSource:n.dataSource,values:e.values,format:e.format,title:e.title||e.field,pane:n.pane,adaptiveMode:n.options.adaptiveMode,change:function(e){n.trigger(`filter`,{filter:e.filter,field:e.field})?e.preventDefault():(n._clearEditableState(),n.dataSource.options.endless&&n._resetEndless())}});return a&&a.messages&&(o.messages=m(!0,{},r.messages,a.messages)),a&&a.dataSource&&(o.forceUnique=!1,o.checkSource=a.dataSource),a&&a.multi?t.kendoFilterMultiCheck(o).data(`kendoFilterMultiCheck`):t.kendoFilterMenu(o).data(`kendoFilterMenu`)}},_isRowSelection:function(){let e=this,t=e.options.selectable;if(!t&&!e._checkBoxSelection)return!1;if(t===!0||t===`multiple`||t===`single`||t?.mode===`multiple`||t?.mode===`single`||e._checkBoxSelection)return!0;if(p(t)){let e=t.mode;return e?typeof e==`string`&&e.includes(`row`):!1}return typeof t==`string`?t.includes(`row`):!1},_isSingleSelectionEnabled:function(){let e=this.options.selectable;if(!e)return!1;if(e===!0||e===`single`||e?.mode===`single`||e===`row`||e?.mode===`row`||e===`cell`||e?.mode===`cell`)return!0;if(p(e)){let t=e.mode;return t?typeof t==`string`&&t.includes(`single`):!1}return typeof e==`string`?e.includes(`single`):!1},_initAiPrompt:function(){let t=this,r=t.options.ai,i=r?.aiAssistant||{},a=t.options.messages?.ai,o=r?.service,s={data:e=>Hr(e,er(t.columns)),outputGetter:e=>Ur(e,a,t._isRowSelection())};if(r?.service){let e=typeof r.service==`string`,t=e?r.service:r.service.url;t&&(o={...s,...e?{}:r.service,url:t})}let c=`skeleton`+n.guid(),l=t._aiAssistant=e(`<div></div>`).kendoAIPrompt(e.extend(!0,{service:o,speechToText:!0,promptTextArea:{resize:`none`,rows:3,placeholder:a?.promptPlaceholder||``,fillMode:`outline`,maxLength:1e3},outputTemplate:e=>e.output.output?.split(`/n`).map(e=>qr(e,a,er(t.columns))).join(``),views:[{type:`prompt`,buttonIcon:`sparkles`,themeColor:`primary`,footerTemplate:()=>`<div class="k-actions k-actions-start k-actions-horizontal k-prompt-actions">${n.html.renderButton(`<button ref-ai-apply-button>Apply</button>`,{themeColor:`primary`,icon:`table-wizard`,rounded:`full`})}</div>`},{type:`output`,themeColor:`primary`,isStreaming:!0,isLoading:!0}],promptRequest:e=>{l.options.service&&(l.activeView(`output`),l.removePromptOutput(vn),l.addPromptOutput({id:c,prompt:e.prompt,output:``,isLoading:!0,isStreaming:!0}),l._requestInProgress=!0,l.transport.options.requestStart=null)},promptResponse:e=>{e.preventDefault();let n=e;Gr(n,l,c),n&&n.response&&t.handleAIResponse(n.response),r.autoClose!==!1&&t._aiAssistantWindow?.close()},promptRequestCancel:()=>{l.removePromptOutput(c),l.outputObjects.size||l.addPromptOutput(yn(a)),l._requestInProgress=!1}},i)).data(`kendoAIPrompt`);l?.transport&&(l.transport.options.error=function(e){e.response.abort(),Gr({output:e.output,outputId:e.id},l,c)}),t._aiAssistantWindow.element.append(t._aiAssistant.element),t._aiAssistantWindow.wrapper.addClass(`k-grid-assistant-window`)},handleAIResponse:function(e){let r=this,i=r.dataSource.options.schema?.model?.fields,a=r.options.sortable?.mode===`multiple`||r.options.sortable?.mode===`mixed`,o=Wr(e?.commands,a),s=er(r.columns),c=Un(r.options,r.dataSource,r._checkBoxSelection);if(o)for(let e=0;e<o.length;e++){let l=o[e],u=l?.type,d=gn[u]||_n[u],f=d===`page`||d===`pageSize`,p=!l[d],m;if(gn[u]){let e=r.dataSource[d]();if(f?m=l[d]:(m=p?[]:l[d],m=Array.isArray(m)?m:[m]),!(p||!p&&!un(m,d))||p&&!e)continue;if(c[u]){if(!p&&d===`filter`&&(m=hn(m,i)),d===`sort`&&!a){r.dataSource[d](m);continue}if(e&&!p&&!f){let t=Array.isArray(e)?e:[e];if(d===`filter`)m=t.map(e=>({...e,filters:[...e.filters,m[0]]}));else{let e=Hn(t,m,d);if(e.shouldContinue)continue;m=e.descriptors}}r.dataSource[d](m)}}if(_n[u]){if(m=p?[]:l[d],m=Array.isArray(m)?m:[m],d===`highlight`){r.clearHighlight(),p||(r._hasAIHighlight=m,r._applyAIHighlight(m));continue}if(d===`select`&&c[u]&&!l.skipCommand){r.clearSelection(),p||(r._hasAISelection=m,r._applyAISelection(m));continue}if(d===`_exportPdf`||d===`_exportExcel`){let t={commands:o.slice(e+1)},n=l?.fileName;r._changeAIExportFileName(d,n,!0),r[d](()=>{r._changeAIExportFileName(d,n,!1),r.handleAIResponse(t)});break}if(c[u]){let e=l?.id,i=n.parseFloat(l?.size),a=l?.position??l?.index,o=d===`lockColumn`||d===`unlockColumn`,c,u=s.find((t,n)=>{if(t.uid===e)return c=n,t}),f=o?c:u,p=s.length>r.columns.length;if(f){let e=a??f,n=a===t?i:f,o;p&&d===`reorderColumn`&&(e=tr(s,r.columns,c,a),o=c>a?`before`:`after`),r[d](e,n,o)}}}}},getAIRequest:function(e){return Hr(e,er(this.columns))},_changeAIExportFileName:function(e,t,n){let r=this;if(!n){e===`_exportPdf`&&(r.options.pdf.fileName=r?._aiPdfFilename,delete r._aiPdfFilename),e===`_exportExcel`&&(r.options.excel.fileName=r?._aiExcelFilename,delete r._aiExcelFilename);return}let i=e===`_exportPdf`?r.options?.pdf?.fileName:r.options?.excel?.fileName;if(t){let n=e===`_exportPdf`?`_aiPdfFilename`:`_aiExcelFilename`;r[n]=i,e===`_exportPdf`&&(r.options.pdf.fileName=t),e===`_exportExcel`&&(r.options.excel.fileName=t)}},_bindAIPrompt:function(){let t=this,n=t.options.ai,r=t._aiAssistant,i=e=>e.find(`[ref-ai-apply-button]`);r.element.on(`input`+N,`[ref-prompt-input]`,t=>{let n=i(r.element),a=e(t.currentTarget).val();n.toggleClass(`k-disabled`,!a||a.trim()===``)}),n?.aiAssistant?.promptSuggestions&&r.element.on(`click`+N,`.k-suggestion`,e=>{i(r.element).toggleClass(`k-disabled`,!1)}),r.element.on(`click`+N,`[ref-ai-apply-button]`,()=>{let e=r.element.find(`[ref-prompt-input]`).getKendoTextArea().value(),t=r._selectedView,n={prompt:e,isRetry:!1,history:[]};t?.service&&(n.service=t.service),r.trigger(`promptRequest`,n),r.transport&&r.transport.read({prompt:n.prompt,history:n.history,isRetry:!1,service:t.service})}),r?.speechToTextButton&&r.speechToTextButton.bind(`result`,function(){i(r.element).toggleClass(`k-disabled`,!1)})},_unbindAIPrompt:function(){let e=this._aiAssistant;e?.element?.off(`input`+N),e?.element?.off(`click`+N)},_prepareAIDataForSelectOrHighlight:function(e){let t=this,n=t.dataSource.options.schema,r=n?.model?.id||`id`,i=n?.model?.fields;return e=hn(e,i),t.dataSource.parseHighlightDescriptors(e,r)},_applyAIHighlight:function(e){let t=this,n=t._prepareAIDataForSelectOrHighlight(e);t.highlight(n)},_applyAISelection:function(e){let t=this,n=t._prepareAIDataForSelectOrHighlight(e);t._getElementsToSelect(n).forEach(e=>t.select(e))},_initAiAssistantWindow:function(t){let n=this,r=n.options.ai,i=r&&r===!0||r===!1,a=r?.aiAssistantWindow||{},o=a?.content,s={modal:!1,resizable:!1,title:`AI Assistant`,visible:!1,actions:[`Minimize`,`Maximize`,`Close`],position:{top:u(t)+t.offset().top,left:t.offset().left+t.outerWidth()/2},width:437,...a,open:function(e){if(a.open&&a.open(e),e._defaultPrevented)return;let t=n._aiAssistant;if(t&&t.element){let e=n.options.messages?.ai;t.outputObjects.size||t.addPromptOutput(yn(e)),t.activeView(`prompt`);let r=t.element.find(`[ref-ai-apply-button]`),i=t.element.find(`[ref-prompt-input]`).val();n._aiAssistant&&n._bindAIPrompt(),r.toggleClass(`k-disabled`,!i||i.trim()===``)}},close:function(t){if(a.close&&a.close(t),!t._defaultPrevented){if(t.userTriggered){t.sender.element.trigger(`focus`);var i=n.items().index(e(n.current()).parent());n._toggleToolbarEditingItemsVisibility(),n.options.navigatable&&n.current()&&(n._setCurrent(n.items().eq(i).children().filter(A).first()),$(n.table,!0))}n._aiAssistant&&(r?.keepOutputHistory||n._aiAssistant?.clearOutput(),n._unbindAIPrompt())}}};i||(n._aiAssistantWindow=e(`<div></div>`).kendoWindow(s).data(`kendoWindow`),o||n._initAiPrompt()),t.bind(`click`+N,function(e){n._aiAssistantWindow&&(n._aiAssistantWindow.element.is(`:visible`)?n._aiAssistantWindow.close():n._aiAssistantWindow.open())})},_toolbarOptionsForTool:function(e){let t=this.options,n=[];return Array.isArray(t.toolbar)?n=t.toolbar:t.toolbar&&t.toolbar.items&&(n=t.toolbar.items),m({},K[e],n.find(t=>t.name===e))},_groupToolbarTool:function(t){let r=this,i=r.options,a=e=>{let t=r._isAdaptive()?`[ref-actionsheet-action-button]:not('.k-button-primary')`:`[ref='clear-group']`;return r._toolPopup(e)?.find(t)},o,s;if(!(i.groupable&&i.groupable.enabled!==!1||r.dataSource._groupPaging))return;o=t.data(`kendoColumnMenu`),o&&(o.wrapper.off(`click`+N),o.element.off(`click`+N),o.destroy());let c=r._toolbarOptionsForTool(`group`);c.reorderButtons=!0;let l=({isAdaptive:t,isFirstItem:r,isLastItem:i})=>`<span class="k-group-menu-item-actions">
                ${c.reorderButtons?`<span class="k-group-menu-item-action k-group-menu-item-up-action ${r?`k-disabled`:``}" ${r?`aria-disabled=true`:`aria-disabled=false`}>
                    ${n.ui.icon(e(`<span></span>`),{icon:`chevron-up`,size:t?`large`:`medium`})}
                </span>
                <span class="k-group-menu-item-action k-group-menu-item-down-action ${i?`k-disabled`:``}" ${i?`aria-disabled=true`:`aria-disabled=false`}>
                    ${n.ui.icon(e(`<span></span>`),{icon:`chevron-down`,size:t?`large`:`medium`})}
                </span>`:`<span class="k-group-menu-item-action k-group-menu-item-drag-action">
                    ${n.ui.icon(e(`<span></span>`),{icon:`handle-drag-dots`,size:t?`large`:`medium`})}
                    </span>`}
                </span>`,u=(t,i,a)=>{let o=r._isAdaptive(),s=t.title||t.field||``;return`<div class="k-group-menu-item" data-field="${t.field}" data-index="${a&&a.index||t.index||`0`}" tabindex="0">
                ${a&&a.renderIndicator?l({isAdaptive:o,isFirstItem:a.isFirstItem,isLastItem:a.isLastItem}):``}
                        <span class="k-group-item-text">${s}</span>
                        <span class="k-spacer"></span>
                        <span class="k-group-menu-item-actions">
                            <span class="k-group-menu-item-action ${i.actionClass}">
                                ${n.ui.icon(e(`<span></span>`),{...i,size:o?`large`:`medium`})}
                            </span>
                        </span>
                    </div>`};s={dataSource:r.dataSource,columns:!1,sortable:!1,filterable:!1,hideAutoSizeColumn:!1,owner:r,adaptiveMode:r.options.adaptiveMode,encodeTitles:r.options.encodeTitles,componentType:`modern`,_actionsheet:{actionButtons:an(r.options.messages).group,title:`Group by`,ref:`group-view`,closeButton:{icon:`check`,themeColor:`primary`}},init:function(e){let n=t.wrapper.find(`.k-group-menu`);n.attr(`ref`,`group-tool`),t._showAdaptiveView?(n.unwrap(),n.removeClass(`k-group-menu-md`).addClass(`k-group-menu-lg`)):t.wrapper.removeClass(`k-column-menu`),n.find(`.k-group-menu-item`).on(`click`+N,`.k-group-menu-item-remove-action, .k-group-menu-item-add-action`,function(e){r._groupItemClickHandler(e,t,{itemTemplate:u,indicator:l})}),r._syncGroupingTool(e,t,r.dataSource.group(),{itemTemplate:u,indicator:l})},closeCallback:function(e){e.removeClass(I);let n=r._toolPopup(t);n.length&&n.find(`.k-focus`).removeClass(`k-focus`),t.element.focus()},contentTemplate:({columns:e})=>{let t=r._isAdaptive(),i=`<div class="k-group-menu"><div class='k-group-menu-item-wrap'>`;return e.forEach(e=>{!$r(r,e)||e.command||e._originalObject.selectable||(i+=u(e,{icon:`plus-circle`,actionClass:`k-group-menu-item-add-action`}))}),i+=`</div>`,(!c||c.clearButton)&&!t&&(i+=`<div class="k-actions k-actions-stretched k-actions-horizontal k-column-menu-footer">
                                     ${n.html.renderButton(`<button ref="clear-group">${an(r.options.messages).group[0].text}</button>`,{icon:`x`})}
                                </div>`),i+=`</div>`,i}};let d=r.dataSource.group()||[];t=t.kendoColumnMenu(s).data(`kendoColumnMenu`);let f=function(e){let t=this,n=e.sender.wrapper&&e.sender.wrapper.find(`.k-grid-group-tool`)?.data(`kendoColumnMenu`),r=e.groups||t.dataSource.group()||[],i=a(n),o=d.length>r.length?d:r;t._syncGroupingTool(e,n,o,{itemTemplate:u,indicator:l}),t._toggleBadge(n.element,r.length>0),i?.toggleClass(`k-disabled`,!r.length),d=r};r.unbind(`group`,f),r.bind(`group`,f),t.element.on(`click`+N,function(n){t.popup&&t.popup._closing||e(n.currentTarget).addClass(I)}),t.bind(`open`,function(){let e=a(t);e.length&&(e.off(`mousedown`+N),e.on(`mousedown`+N,function(){r.dataSource.group([]),r.groupable.trigger(P,{groups:[]}),r._toggleBadge(t.element,!1),e?.toggleClass(`k-disabled`,!0),t.popup.close()})),e?.toggleClass(`k-disabled`,!r.dataSource.group().length)})},_toggleReorderButtonsDisabledState:function(e,t,n){let r=`k-disabled`;if(!e.length)return;let i=e.find(`.k-group-menu-item-actions .k-group-menu-item-up-action`);if(i.length){t&&!i.hasClass(r)?(i.addClass(r),i.attr(`aria-disabled`,!0)):!t&&i.hasClass(r)&&(i.removeClass(r),i.attr(`aria-disabled`,!1));let e=i.next();e.length&&(n&&!e.hasClass(r)?(e.addClass(r),e.attr(`aria-disabled`,!0)):!n&&e.hasClass(r)&&(e.removeClass(r),e.attr(`aria-disabled`,!1)))}},_syncGroupingTool:function(t,n,r,i){let a=this,o=t.groups||a.dataSource.group()||[],s=()=>n._showAdaptiveView?a._toolPopup(n):n.wrapper,c=`k-group-menu-item-wrap`,l=()=>s()?.find(`.${c}`),u=s(),d=l();if(n._draggableInstance&&n._triggeredReordering){delete n._triggeredReordering;return}if(d&&d.length&&(r.forEach((t,r)=>{let s=u.find(`.k-group-menu-item[data-field='${t.field}']`),f=s.data(`index`),p=s.find(`.k-icon`)?.attr(`class`).includes(`plus-circle`)?`remove`:`add`,m=p===`remove`,h=`k-group-menu-item-${p}-action`,g=s.parent();d=l();let _=o&&o.length?o[0]?.field===t.field:!1,v=o&&o.length?o[o.length-1].field===t.field:!1;a._toggleReorderButtonsDisabledState(s,_,v);let y=!o.find(e=>e.field===t.field);if(!y&&g.is(`[ref='group-container']`))return;let b;if(d&&d.length===2)b=m?d.first():d.last();else{b=e(`<div class="${c}" ${m?`ref="group-container`:``}"></div>`);let t=m?`prepend`:`append`,n=d.first().parent(),r=n.find(`[ref='clear-group']`);r.length&&!m?r.parent().before(b):n.length&&n[t](b)}let x=Z(a.columns)[f],S=!y&&o.length>1,C={renderIndicator:S,index:f,isFirstItem:_,isLastItem:v},w=e(i.itemTemplate(x,{icon:m?`x-circle`:`plus-circle`,actionClass:h},C));if(s.remove(),d.length===2&&!g.children().length&&(g.data(`kendoReorderable`)&&g.data(`kendoReorderable`)?.destroy(),g.remove()),m){if(S){let e=b.children().first();e.find(`.k-group-menu-item-actions`)?.length===1&&e.prepend(i.indicator({isAdaptive:a._isAdaptive(),isFirstItem:!0,isLastItem:!1}))}b.append(w)}else{let e=b.find(`.k-group-menu-item[data-index="${f+1}"]`);o.length===1&&g.children().first().find(`.k-group-menu-item-actions:first-of-type`).remove(),e.length?e.before(w):b.append(w)}b.find(w).on(`click`+N,`.k-group-menu-item-remove-action, .k-group-menu-item-add-action`,function(e){a._groupItemClickHandler(e,n)})}),d=l(),d&&d.length)){let t=d.first().find(`.k-group-menu-item-drag-action`),r=d.first().find(`.k-group-menu-item-up-action, .k-group-menu-item-down-action`),i=d.first(),o=i.is(`[ref='group-container']`)&&i?.length,s=t.length,c=r.length;o&&c?r.each(function(){let t=e(this);t.unbind(`click`+N),t.bind(`click`+N,e=>a._buttonClickReorderHandler(e,n))}):o&&s&&(a._groupToolDraggableInstance(n,i),a._groupToolReorderableInstance(n,i))}},_buttonClickReorderHandler:function(t,n){t.preventDefault(),t.stopPropagation();let r=this,i=`.k-group-menu-item`,a=e(t.currentTarget),o=a.closest(i),s=a.hasClass(`k-group-menu-item-up-action`)?`before`:`after`,c={element:o,target:s===`before`?o.prev(i):o.next(i),position:s};r._handleGroupReordering(c,n)},_groupToolDraggableInstance:function(t,r){let i=this._isMobile;t._draggableInstance=r.kendoDraggable({holdToDrag:i,showHintOnHold:i,preventOsHoldFeatures:i,group:`group-item-draggable`,autoScroll:!0,filter:`.k-group-menu-item-drag-action`,hint:function(t){return e(`<div class="k-reorder-clue k-drag-clue">`+n.ui.icon({icon:`cancel`,iconClass:`k-drag-status`})+`</div>`)},clickMoveClick:!1,cursorOffset:{top:0,left:0}}).data(`kendoDraggable`)},_groupToolReorderableInstance:function(t,n){let r=this,i=`.k-group-menu-item`;n&&n.data(`kendoReorderable`)&&n.data(`kendoReorderable`).destroy(),n.kendoReorderable({smartPosition:!1,draggable:t._draggableInstance,dragOverContainers:function(t,n){return e(i).eq(n),!0},dropFilter:`> `+i,allowIcon:`insert-middle`,orientation:`vertical`,reorderDropCue:e(`<div class="k-drop-hint k-drop-hint-h"><div class="k-drop-hint-start"></div><div class="k-drop-hint-line"></div></div>`),positionDropCue:function(e){e.css({transform:`translate(0,-50%)`})},externalDraggable:function(e){var t=e.draggable;if(t)return t},change:function(e){r._handleGroupReordering(e,t)}})},_handleGroupReordering:function(t,n){let r=t.element,i=t.target,a=t.position===`before`?`insertBefore`:`insertAfter`,o=this.groupable.descriptors();r[a](i);let s=r.parent().children(),c=[];for(let t=0;t<s.length;t++){let n=e(s[t]).data(`field`),r=o.find(e=>e.field===n);r&&c.push(r)}n._triggeredReordering=!0,this.dataSource.group(c),this.groupable.trigger(P,{groups:c})},_groupItemClickHandler:function(t,n){let r=this,i=e(t.currentTarget).closest(`.k-group-menu-item`),a=(e(t.currentTarget).find(`.k-icon`)?.attr(`class`).includes(`plus-circle`)?`remove`:`add`)==`remove`,o=i.data(`index`),s=r.groupable.descriptors();s.length||(s=r.dataSource.group());let c=Z(r.columns)[o];a?s.push({field:c.field,dir:`asc`,aggregates:r.groupable.aggregates()||[],colID:c.uid,compare:c.sortable&&c.sortable.compare||r.groupable.sort&&r.groupable.sort.compare}):s=s.filter(e=>e.field!==c.field),r.dataSource.group(s),r.groupable.trigger(P,{groups:s})},_sortToolbarTool:function(r){let i=this,a=i.options,o=`k-columnmenu-indicators`,s=i._isAdaptive(),c=e=>{let t=i._isAdaptive()?`[ref-actionsheet-action-button]:not('.k-button-primary')`:`[ref='clear-sort']`;return i._toolPopup(e)?.find(t)},l,u,d=i._toolbarOptionsForTool(`sort`);l=r.data(`kendoColumnMenu`),l&&(l.wrapper.off(`click`+N),l.element.off(`click`+N),l.destroy());function f({columns:e,isAdaptive:t}){let r=`<div class="k-columnmenu-item-wrapper">`;return e.forEach(e=>{e.sortable===!1||e.command||e._originalObject.draggable||e._originalObject.selectable||(r+=`<div class="k-columnmenu-item" tabindex="0" data-field="${e.field}">${e.title||e.field||``}</div>`)}),r+=`</div>`,(!d||d.clearButton)&&!t&&(r+=`<div class="k-actions k-actions-stretched k-actions-horizontal k-column-menu-footer">`,r+=n.html.renderButton(`<button ref="clear-sort">${an(i.options.messages).sort[0].text}</button>`,{icon:`x`}),r+=`</div>`),r}let p=a.columnMenu.sortable!==!1&&a.sortable!==!1?m({},a.sortable,{allowUnsort:!1}):!1;if(!p)return;u={dataSource:i.dataSource,columns:!1,sortable:p,filterable:!1,hideAutoSizeColumn:!0,owner:i,adaptiveMode:i.options.adaptiveMode,encodeTitles:i.options.encodeTitles,componentType:`modern`,_actionsheet:{actionButtons:an(i.options.messages).sort,title:`Sort by`,ref:`sort-view`,closeButton:{icon:`check`,themeColor:`primary`}},init:function(e){r.wrapper.attr(`ref`,`sort-tool`)},closeCallback:function(e){e.removeClass(I);let t=i._toolPopup(r);t.length&&t.find(`.k-focus`).removeClass(`k-focus`),r.element.focus()},sort:function(e){let t=e.preventClose;r._preventClose=i.options.sortable.mode===`multiple`||t,i.trigger(`sort`,{sort:e.sort})?e.preventDefault():(i._clearEditableState(),i.dataSource.options.endless&&i._resetEndless())},contentTemplate:f},r=r.kendoColumnMenu(u).data(`kendoColumnMenu`);let h=function(e){let n=e.sender.wrapper&&e.sender.wrapper.find(`.k-grid-sort-tool`)?.data(`kendoColumnMenu`),r=e.sender.dataSource._sortFields,a=Array.isArray(e.sort),s=e.sort.field,l=e.sender.options.sortable&&(e.sender.options.sortable.mode===`multiple`||e.sender.options.sortable.mode===`mixed`),u,d=e.sort.dir===t;u=a?e.sort.length:r&&Object.keys(r).length?!d||d&&Object.keys(r).length-1>0:!d,i._toggleBadge(n.element,u);let f=n.wrapper.find(`.k-columnmenu-item[data-field='${s}']`),p=f.find(`.`+o);d?p.remove():(l||(p=n.wrapper.find(`.`+o)),p.length&&p.remove(),f.append(i._renderIndicator(`sort-${e.sort.dir}-small`))),c(n)?.toggleClass(`k-disabled`,!u)};i.unbind(`sort`,h),i.bind(`sort`,h),r.bind(`open`,function(){let t=i._toolPopup(r);if(t.length){t.focus();let n=c(r),a=t.find(`.k-columnmenu-item`);n.length&&(n.off(`mousedown`+N),n.on(`mousedown`+N,function(){i.dataSource.sort([]),i._toggleBadge(r.element,!1),c(r)?.toggleClass(`k-disabled`,!0),r.wrapper.find(`.k-columnmenu-indicators`).remove(),r.close()})),a.length&&(t.off(`click`+N),t.on(`click`+N,`.k-columnmenu-item`,function(t){let n=e(t.currentTarget),a=n.data(`field`),s=i._toggleColumnMenuSortIndicator(n),c=i.options.sortable&&i.options.sortable.mode===`mixed`,l=t.originalEvent.ctrlKey;r.field=a,r._sortHandler({item:n,allowUnsort:s,allowSelectedState:!1,isMixed:c,hasCtrlKey:l}),i._toggleSortIndexes(i.dataSource._sortFields&&Object.keys(i.dataSource._sortFields).length>1,r,o)}))}}),r.element.on(`click`+N,function(t){if(r.popup&&r.popup._closing)return;e(t.currentTarget).addClass(I);let n=r.dataSource._sortFields,a=n&&Object.keys(n).length,l=Object.keys(n).length>1;a&&Object.keys(n).forEach(e=>{let t=r.wrapper.find(`.k-columnmenu-item[data-field='${e}']`),a=t.find(`.`+o);a.length&&a.remove(),t.append(i._renderIndicator(`sort-${n[e].dir}-small`))}),i._toggleSortIndexes(l,r,o,s),c(r)?.toggleClass(`k-disabled`,!a)})},_toggleSortIndexes:function(t,n,r){let i=this;if(!(i.options.sortable&&i.options.sortable.showIndexes))return;let a=n.wrapper.find(`.${r}`),o=n.dataSource&&n.dataSource._sortFields;a.length&&(t?a.each((t,n)=>{let r=o[e(n).closest(`.k-columnmenu-item`).data(`field`)],i=e(n).parent().find(`.k-sort-index`);i.length?i.text(r.index):r.index?e(n).append(`<span class='k-sort-index'>${r.index}</span>`):e(n).append(`<span class='k-sort-index'>${t+1}</span>`)}):n.wrapper.find(`.k-sort-index`).remove())},_columnChooserTool:function(t){let n=this,r=`column-chooser`;function i(e){let t=e._defaultContents()[r];return t(e)}let a=t.data(`kendoColumnMenu`);a&&(a.wrapper.off(`click`+N),a.element.off(`click`+N),a.destroy());let o={dataSource:n.dataSource,columns:!0,sortable:!1,filterable:!1,hideAutoSizeColumn:!0,owner:n,adaptiveMode:n.options.adaptiveMode,encodeTitles:n.options.encodeTitles,messages:{reset:n.options.messages.clearButtons?n.options.messages.clearButtons.columnChooserReset:`Reset`,apply:n.options.messages.applyButtons?n.options.messages.applyButtons.columnChooserApply:`Apply`},componentType:`modern`,contentTemplate:i,_actionsheet:{actionButtons:an(n.options.messages)[r],title:`Column visibility`,subtitle:`Selected fields are visible`,closeButton:!0,ref:`${r}-view`},init:function(e){t.wrapper.attr(`ref`,r+`-tool`),t._showAdaptiveView?t.popup._content.find(`[ref='${r}']`).unwrap():t.wrapper.removeClass(`k-column-menu`)},closeCallback:function(e){e.removeClass(I);let r=n._toolPopup(t);r.length&&r.find(`.k-focus`).removeClass(`k-focus`),t&&t._showAdaptiveView&&t._applyColumnVisibility(),t.element.focus()}};t=t.kendoColumnMenu(o).data(`kendoColumnMenu`),t.element.bind(`click`,function(n){t.popup&&t.popup._closing||e(n.currentTarget).addClass(I)}),t.bind(`open`,function(){let e=n._toolPopup(t);e.length&&e.find(`.k-checkbox`)?.first()?.focus()})},_toggleBadge:function(t,n){let r=t.closest(`.k-badge-container`),i=r.length&&r.find(`.k-badge`),a=t.data(`overflow`);!i.length&&n?t.wrap(`<div class='k-badge-container' ${a?`data-overflow=`+a:``}></div>`).parent().append(e(`<span></span>`).kendoBadge({round:`full`,position:`edge`,align:`top end`,themeColor:`primary`,cutoutBorder:!0})):!n&&i.length&&(i.remove(),t.unwrap(`.k-badge-container`))},_toggleColumnMenuFilterIndicator:function(e,t){let n=this,r=e.find(`.k-columnmenu-indicators`),i=e.find(`.k-spacer`);if(t&&i.length){if(r&&r.length)return;i.before(n._renderIndicator(`filter`))}else r&&r.length&&r.remove()},_toggleColumnMenuSortIndicator:function(e){let t=this,n=e.find(`.k-columnmenu-indicators`),r=e.find(`.k-sort-index`),i,a=r.length?`before`:`append`;if(n&&n.length){let e=n.find(`.k-icon`);e.length&&e.hasClass(`k-svg-i-sort-desc-small`)?(n.remove(),i=!0):(e.remove(),n[a](t._renderIndicator(`sort-desc-small`)),i=!1)}else e[a](t._renderIndicator(`sort-asc-small`)),i=!1;return i},_renderIndicator:function(t){return e(`<span class='k-columnmenu-indicators'></span>`).append(n.ui.icon(e(`<span></span>`),{icon:t}))},_globalColumnsMenu:function(e){var t=this,n,r=Z(t.columns),i=t.options.columnMenu,a,o=function(e){t._isAdaptive()&&e.sender.popup.wrapper.find(`.k-expanded [ref=columns-visibility]`).data(`handler`).toggle(!1),t.trigger(fe,{field:e.field,container:e.container})},s=function(e){t.trigger(me,{field:e.field,container:e.container})},c=function(){e.trigger(`focus`)};if(i){typeof i==`boolean`&&(i={}),t._setColumnsMediaVisibility(r);let l=!!(i.autoSize||i.clearAllFilters);n=e.data(`kendoColumnMenu`),n&&n.destroy();let u={toggleable:l,expanded:i.expanded||!0,animation:!1,hideExpanderIndicator:!l};a={dataSource:t.dataSource,columns:i.columns,sortable:!1,filterable:!1,clearAllFilters:i.clearAllFilters,messages:i.messages,hideAutoSizeColumn:!0,owner:t,closeCallback:c,init:o,open:s,pane:t.options.adaptiveMode!==`auto`&&t.pane,autoSize:i.autoSize,encodeTitles:t.options.encodeTitles,componentType:`modern`,adaptiveMode:`auto`,columnsExpanderOptions:u},e.kendoColumnMenu(a)}},_columnMenu:function(){var e=this,r,i=Z(e.columns),a,o=e.options,s=o.columnMenu,c,l,u,d,f=g(e.columns,function(e){return e.columns!==t}).length>0,p=g(e.columns,function(e){return e.lockable!==!1}).length>0,h=g(e.columns,function(e){return e.stickable===!0}).length>0,_=this._isMobile,v=function(t){e.trigger(fe,{field:t.field,container:t.container})},y=function(t){e.trigger(me,{field:t.field,container:t.container})},b=function(){$(e.table,!0)},x=function(t){e.trigger(it,{column:t.column})},S=function(t){e.trigger(at,{column:t.column})},C=function(t){e.trigger(`sort`,{sort:t.sort})?t.preventDefault():(e._clearEditableState(),e.dataSource.options.endless&&e._resetEndless())},w=function(t){e.trigger(`filter`,{filter:t.filter,field:t.field})?t.preventDefault():(e._clearEditableState(),e.dataSource.options.endless&&e._resetEndless())};if(s&&!e._isStackedMode()){typeof s==`boolean`&&(s={}),e._setColumnsMediaVisibility(i),d=Q(e.thead);for(var T=0,E=d.length;T<E;T++){a=i[T];var D=d.eq(T);if(a.columnMenu!==!1&&!a.command&&(a.field||D.attr(`data-`+n.ns+`field`))){r=D.data(`kendoColumnMenu`),r&&r.destroy(),l=a.sortable!==!1&&s.sortable!==!1&&o.sortable!==!1?m({},o.sortable,{compare:(a.sortable||{}).compare}):!1,u=o.filterable&&a.filterable!==!1&&s.filterable!==!1?m(!0,{pane:e.pane},o.filterable,a.filterable):!1,a.filterable&&a.filterable.dataSource&&(u.forceUnique=!1,u.checkSource=a.filterable.dataSource),u&&(u.format=a.format);let t=e.options.adaptiveMode===`auto`?e.options.adaptiveMode:s.adaptiveMode||e.options.adaptiveMode;c={dataSource:e.dataSource,values:a.values,columns:s.columns,sortable:l,filterable:u,messages:s.messages,owner:e,adaptiveMode:t,adaptiveTitle:a.title||a.field,closeCallback:b,init:v,open:y,stick:x,unstick:S,pane:e.options.adaptiveMode!==`auto`&&e.pane,sort:C,filtering:w,filter:_?`:not(.k-column-active)`:``,autoSize:s.autoSize,hasLockableColumns:J(i).length>0&&p&&!f,hasStickableColumns:h&&!f,encodeTitles:e.options.encodeTitles,componentType:s.componentType,appendTo:`.`+Qt.headerCellInner,reorderable:o.reorderable===!0||o.reorderable&&o.reorderable.columns,groupable:e.options.groupable&&e.options.groupable.enabled!==!1&&a.groupable!==!1},D.kendoColumnMenu(c)}}}},_headerCells:function(){return e(this.thead).find(`th`).filter(function(){var t=e(this);return!t.hasClass(`k-group-cell`)&&!t.hasClass(`k-hierarchy-cell`)})},_hasFilterMenu:function(){var e=this.options.filterable;return e&&typeof e.mode==B&&e.mode.indexOf(`menu`)==-1?!1:e},_filterable:function(){var e=this,t=Z(e.columns),r,i,a,o=function(t){e.trigger(de,{field:t.field,container:t.container})},s=function(){$(e.table,!0)},c=function(t){e.trigger(`filter`,{filter:t.filter,field:t.field})?t.preventDefault():(e._clearEditableState(),e.dataSource.options.endless&&e._resetEndless())},l=function(t){e.trigger(pe,{field:t.field,container:t.container})},u=e._hasFilterMenu();if(u&&!e.options.columnMenu&&!e._isStackedMode()){i=Q(e.thead);for(var d=0,f=i.length;d<f;d++)if(a=i.eq(d),t[d].filterable!==!1&&!t[d].command&&(t[d].field||a.attr(`data-`+n.ns+`field`))){r=a.data(`kendoFilterMenu`),r&&r.destroy(),r=a.data(`kendoFilterMultiCheck`),r&&r.destroy();var p=t[d].filterable,h=m({},u,p,{dataSource:e.dataSource,values:t[d].values,format:t[d].format,closeCallback:s,title:t[d].title||t[d].field,init:o,open:l,pane:e.pane,change:c,appendTo:`.`+Qt.headerCellInner,adaptiveMode:e.options.adaptiveMode});p&&p.messages&&(h.messages=m(!0,{},u.messages,p.messages)),p&&p.dataSource&&(h.forceUnique=!1,h.checkSource=p.dataSource),p&&p.multi?a.kendoFilterMultiCheck(h):a.kendoFilterMenu(h)}}},_filterRow:function(){var t=this;if(t._hasFilterRow()){var r,a=Z(t.columns),o=t.options.filterable,s=t.thead.find(`.k-filter-row`),c=function(e){t.trigger(`filter`,{filter:e.filter,field:e.field})?e.preventDefault():(t._clearEditableState(),t.dataSource.options.endless&&t._resetEndless())};this._updateHeader(t._groups());for(var l=0;l<a.length;l++){var u,d=a[l],f=t.options.filterable.operators,p=!1,h=e(`<td class='k-table-td' title='`+t.options.messages.filterCellTitle+`'/>`),g=d.field;if(d.hidden&&h.hide(),s.append(h),g&&d.filterable!==!1){var _=d.filterable&&d.filterable.cell||{};u=t.options.dataSource,u instanceof i&&(u=t.options.dataSource.options);var v=m(!0,{},o.messages);if(d.filterable&&m(!0,v,d.filterable.messages),_.enabled===!1){h.html(`&nbsp;`);continue}_.dataSource&&(u=_.dataSource,p=!0),d.filterable&&d.filterable.operators&&(f=d.filterable.operators),r={column:d,dataSource:t.dataSource,suggestDataSource:u,customDataSource:p,field:g,messages:v,size:t.options.size,values:d.values,template:_.template,delay:_.delay,inputWidth:_.inputWidth,suggestionOperator:_.suggestionOperator,minLength:_.minLength,dataTextField:_.dataTextField,operator:_.operator,operators:f,showOperators:_.showOperators,change:c,adaptiveMode:t.options.adaptiveMode},e(`<span/>`).attr(n.attr(`field`),g).appendTo(h).kendoFilterCell(r)}else h.html(`&nbsp;`);h.data(`column`,d)}this._filterFocusable().attr(_t,-1)}},_sortable:function(){var e=this,t=Z(e.columns),r,i,a,o=e.options.sortable,s=function(t){e.trigger(`sort`,{sort:t.sort})?t.preventDefault():e._clearEditableState()};if(o&&!e._isStackedMode()){for(var c=Q(e.thead),l=0,u=c.length;l<u;l++)r=t[l],r.sortable!==!1&&!r.command&&r.field&&(a=c.eq(l),i=a.data(`kendoColumnSorter`),i&&i.destroy(),a.attr(`data-`+n.ns+`field`,r.field).kendoColumnSorter(m({},o,r.sortable,{dataSource:e.dataSource,aria:!0,filter:`:not(.k-column-active)`,change:s})));c=null}},_columns:function(t){var r=this,i=r.table,a,o=i.find(`col`),s,c=r.element.find(`thead tr`),l=r.options.dataSource,u;if(t=t.length?t:h(i.find(`th:not(.k-group-cell):not(.k-hierarchy-cell)`),function(t,r){t=e(t);var i=t.attr(n.attr(`sortable`)),a=t.attr(n.attr(`filterable`)),s=t.attr(n.attr(`type`)),c=t.attr(n.attr(`groupable`)),l=t.attr(n.attr(`field`)),u=t.attr(n.attr(`title`)),d=t.attr(n.attr(`column-menu`)),f=t.attr(n.attr(`menu`));return l||=t.text().replace(/\s|[^A-z0-9]/g,``),{field:l,type:s,title:u,sortable:i!==`false`,filterable:a!==`false`,groupable:c!==`false`,menu:f!==`false`,columnMenu:d!==`false`,template:t.attr(n.attr(`template`)),width:o.eq(r).css(ht)}}),a=!(r.table.find(`tbody tr`).length>0&&(!l||!l.transport)),r.options.scrollable&&!r._isStackedMode()){var d=t;if(s=J(t),t=Y(t),s.length>0&&t.length===0)throw Error(`There should be at least one non locked column`);Mr(r.element.find(`tr:has(th)`).first(),d),t=s.concat(t)}if(c.length&&t.length&&r._updateColumnIDs(t,c.first()),r.columns=wn(t,a),e.grep(Z(r.columns),function(e){return e.selectable}).length&&(r._selectedIds={},r._checkBoxSelection=!0,r.wrapper.on(R+N,`tbody > tr `+Re,r._checkboxClick.bind(r)),r.wrapper.on(R+N,`thead > tr `+Re,r._headerCheckboxClick.bind(r))),u=e.grep(Z(r.columns),function(e){return e.draggable}),u.length){r._hasDragHandleColumn=!0;for(var f=0;f<u.length;f++)u[f].headerAttributes=e.extend({"aria-label":r.options.messages.dragHandleLabel},u[f].headerAttributes)}r._foreignKeyBindings(nr(r.columns))},_foreignKeyBindings:function(e){for(var t=this,n=e.length,r,i=0;i<n;i++)r=e[i],r.dataSource&&t._fetchForeignKeyValues(r)},_fetchForeignKeyValues:function(t){var n=this,r=e.Deferred();n._hasBoundForeignKey=!0,t.dataSource=i.create(t.dataSource),n._foreignKeyPromises||=[],n._foreignKeyPromises.push(r),t.dataSource.fetch().then(function(){t.values=t.dataSource.data().map(function(e){return{value:e[t.dataValueField],text:e[t.dataTextField]}}),r.resolve()})},_updateColumnIDs:function(e,t){if(e.length){for(var n=t.find(`th:not(.k-group-cell):not(.k-hierarchy-cell)`),r,i=0;i<e.length;i++)r=n.eq(i).attr(`id`),r&&(e[i].headerAttributes=m(e[i].headerAttributes,{id:r}));this._updateColumnIDs(yr(e),t.next())}},_headerCheckboxClick:function(t){var n=this,r=e(t.target),i=r.prop(`checked`);if(n._belongsToGrid(r)){if(n.trigger(ge,{target:r,originalEvent:t})){t.preventDefault();return}i?n.select(n.items()):n.clearSelection(),n._calculateAggregatesForSelected(),n.trigger(P,{cellAggregates:n._cellAggregates})}},_checkboxClick:function(t){var n=this,r=e(t.target).closest(`tr`),i=!r.hasClass(I);if(n._belongsToGrid(r)){if(n.trigger(ge,{target:r,originalEvent:t})){t.preventDefault();return}i?n.select(r):n._deselectCheckRows(r),n._calculateAggregatesForSelected(),n.trigger(P,{cellAggregates:n._cellAggregates})}},_groups:function(){var e=this.dataSource.group();return e?e.length:0},_getStackedLayoutSettings:function(){let e=this.options.stackedLayoutSettings,t=e&&e.cols,n=[],r=``;if(t)if(Array.isArray(t))for(let e=0;e<t.length;e++)if(typeof t[e]==`object`){let r=t[e].width;if(!r&&r!==0)continue;typeof r==`number`&&n.push(`${r}px`),typeof r==`string`&&n.push(r)}else typeof t[e]==`number`?n.push(`${t[e]}px`):typeof t[e]==`string`&&n.push(t[e]);else typeof t==`number`&&(r=`k-grid-cols-${t}`);return{colClass:r,colsConfig:n.join(` `)}},_tmpl:function(t,r,i,a){var o=this,s=m({},n.Template,o.options.templateSettings),c,l=r.length,u={storage:{},count:0},d,f=o._hasDetails(),p=o._groups(),h=n.attr(`field`),g,_,v;let y;return t||(y=t=>{var s=l?` ${n.attr(`uid`)}="${n.getter(`uid`)(t)}"`:``,y=`<tr class="${i?`k-table-row k-table-alt-row `:`k-table-row `}k-master-row"${s}>`;for(p>0&&!a&&(y+=fn(p)),f&&(y+=`<td class="k-hierarchy-cell k-table-td" aria-expanded="false">`+n.ui.icon(e(`<a href="#" ${V}="${Ot}" tabindex="-1"></a>`),{icon:`caret-alt-${W?`left`:`right`}`})+`</td>`),c=0;c<l;c++){d=r[c],d.template,g=d.field,v={};let e;o._editMode()&&g&&(d.attributes=d.attributes||{},o.virtualScroll&&(d.attributes[h]=g),e=o._dirtyCellTemplate(g)(t)),d.colSpan&&d.colSpan>0&&kr(d.attributes)?d.attributes=Ar(d.attributes):!d.colSpan&&d.hidden&&(d.attributes=Or(d.attributes)),d.command&&(d.attributes=d.attributes||{},_=d.attributes.class,_===void 0?d.attributes.class=` k-command-cell `:_.indexOf(`k-command-cell`)<0&&(d.attributes.class+=` k-command-cell `)),d.draggable&&(d.attributes=d.attributes||{},d.attributes.class===void 0?d.attributes.class=` k-drag-cell `:d.attributes.class.indexOf(`k-drag-cell`)<0&&(d.attributes.class+=` k-drag-cell `),d.attributes[`ref-grid-drag-cell`]||(d.attributes[`ref-grid-drag-cell`]=!0),d.attributes[V]===void 0&&(d.attributes[V]=o.options.messages.dragHandleLabel),d.attributes.style===void 0?d.attributes.style=`cursor: move;`:d.attributes.style.indexOf(`cursor: move;`)<0&&(d.attributes.style+=` cursor: move;`)),d._attributesFunction&&(v=d._attributesFunction(t));let i=m({},d.attributes,v);e&&(i.class=i.class||``,i.class+=e);let a=mn(i),s=``;d.colSpan&&(d.colSpan>1&&(s+=` `+n.attr(`virtual`)),s+=` colSpan="${d.colSpan}"`),y+=Zn(`<td${a}${s}>`),y+=d.selectable?n.template(Kt)({size:n.getValidCssClass(`k-checkbox-`,`size`,o.options.size)}):o._cellTmpl(d,u)(t),y+=`</td>`}return y+=`</tr>`,y},o._isStackedMode()&&(y=e=>{r=Z(q(r)),l=r.length;var t=l?` ${n.attr(`uid`)}="${n.getter(`uid`)(e)}"`:``,s=`<tr class="${i?`k-table-row k-table-alt-row `:`k-table-row `}k-master-row"${t}>`;for(p>0&&!a&&(s+=fn(p)),s+=`<td class="k-table-td">
                            <div class="k-grid-stack-row">
                        `,c=0;c<l;c++){d=r[c],d.template,g=d.field,v={};let t=p>0&&o.dataSource.group().find(e=>e.field===g)&&d.hideOnGroup,i;if(t)continue;o._editMode()&&g&&(d.attributes=d.attributes||{},o.virtualScroll&&(d.attributes[h]=g),i=o._dirtyCellTemplate(g)(e)),d.colSpan&&d.colSpan>0&&kr(d.attributes)?d.attributes=Ar(d.attributes):!d.colSpan&&d.hidden&&(d.attributes=Or(d.attributes)),d.attributes.class=`k-grid-stack-cell`,d.title&&(d.attributes[n.attr(`title`)]=d.title),d.aggregates&&(d.attributes[n.attr(`aggregates`)]=d.aggregates);let a=!d.selectable,l=!d.selectable;d.command&&(d.attributes=d.attributes||{},_=d.attributes.class,_===void 0?d.attributes.class=`k-command-cell`:_.indexOf(`k-command-cell`)<0&&(d.attributes.class+=` k-command-cell`),l=d.title&&d.title!==`&nbsp;`,a=!0),d.draggable&&(l=!1,a=!0,d.attributes=d.attributes||{},d.attributes.class===void 0?d.attributes.class=`k-drag-cell`:d.attributes.class.indexOf(`k-drag-cell`)<0&&(d.attributes.class+=` k-drag-cell`),d.attributes[`ref-grid-drag-cell`]||(d.attributes[`ref-grid-drag-cell`]=!0),d.attributes[V]===void 0&&(d.attributes[V]=o.options.messages.dragHandleLabel),d.attributes.style===void 0?d.attributes.style=`cursor: move;`:d.attributes.style.indexOf(`cursor: move;`)<0&&(d.attributes.style+=` cursor: move;`)),d._attributesFunction&&(v=d._attributesFunction(e));let f=m({},d.attributes,v);i&&(f.class=f.class||``,f.class+=i);let y=mn(f),b=``;d.colSpan&&(d.colSpan>1&&(b+=` `+n.attr(`virtual`)),b+=` colSpan="${d.colSpan}"`);let x=d.parentIds?Cr(o,d):d.title||d.field||``;s+=Zn(`<div${y}${b} ${d.field?`data-field=${d.field}`:``} data-index=${c}>`,!0),l&&(s+=`<div class="k-grid-stack-header">${x}</div>`),a&&(s+=`<div class="k-grid-stack-content">`),s+=d.selectable?n.template(Kt)({size:n.getValidCssClass(`k-checkbox-`,`size`,o.options.size)}):o._cellTmpl(d,u)(e),a&&(s+=`</div>`),s+=`</div>`}return f&&(s+=`<div class="k-grid-stack-cell">
                                <div class="k-grid-stack-content">
                                    ${n.html.renderButton(`<button tabindex='-1' ref="expand-detail-button">${o.options.messages.details.expand}</button>`,{icon:`plus`,fillMode:`flat`,themeColor:`primary`})}
                                </div>
                            </div>`),s+=`</div></td></tr>`,s})),t=n.template(t||y,s),u.count>0?t.bind(u.storage):t},_dirtyCellTemplate:function(e){return t=>e&&t&&t.dirty&&t.dirtyFields&&(e.charAt(0)===`[`?n.getter(e)(t.dirtyFields):t.dirtyFields[e])?` k-dirty-cell`:``},_headerCellText:function(e){var t=this,r=m({},n.Template,t.options.templateSettings),i=e.headerTemplate,a=typeof i,o=e.title&&(t.options.encodeTitles?mi(e.title):e.title)||mi(e.field||``);return a===z?o=n.template(i,r)({}):a===B&&(o=i),o},_cellTmpl:function(e,t){var r=this,i=m({},n.Template,r.options.templateSettings),a=e.template,o=e.field,s,c,l=e.format,u=typeof a,d=e.values;return e.command?_(e.command)?t=>{let n=``;for(s=0,c=e.command.length;s<c;s++)e.command[s].visible?n+=e.command[s].visible(t)?r._createButton(e.command[s]):``:n+=r._createButton(e.command[s]);return n}:()=>r._createButton(e.command):e.selectable?Kt:e.draggable?Jt:s=>{let c=r._dirtyIndicatorTemplate(o)(s);if(u===z)t.storage[`tmpl`+t.count]=a,c+=a(s),t.count++;else if(u===B)c+=n.template(a,i)(s);else if(d&&d.length&&p(d[0])&&`value`in d[0]&&o){var f=Nr(d)[i.useWithBlock?n.getter(o)(s):o];c+=x(f??``)}else{let t=``;o&&(o=n.getter(o)(s),t=o??``),l&&(t=n.format(l.replace(Bt,`$1`),t)),c+=e.encoded?x(t):t}return c}},_dirtyIndicatorTemplate:function(e){return t=>e&&t&&t.dirty&&t.dirtyFields&&(e.charAt(0)===`[`?n.getter(e)(t.dirtyFields):t.dirtyFields[e])?`<span class="k-dirty"></span>`:``},_virtualCols:function(t){var r=this,i=e.map(t,function(e){return e.hidden?0:parseInt(e.width,10)}),a=r.virtualScrollable?n.scrollLeft(r.content.find(`>.k-virtual-scrollable-wrap`)):n.scrollLeft(r.content),o=l(r.content),s=ir(t),c=[],u=0,d=0,f=0,p=0,m=0,h;for(p=0;p<t.length;p++)if(h=p<i.length-1?i[p+1]:0,m+i[p]+2*h<a)i[p]&&f++,m+=i[p];else{u=1+f;break}f=0,m=0;for(var g=t.length-1;g>=0;g--)if(m+3*i[g]<s-o-a)i[g]&&f++,m+=i[g];else{d=1+f;for(var _=p;_<=g;_++)t[_].locked||(c.push(t[_]),t[_].colSpan&&delete t[_].colSpan);c[0].colSpan=u,c[c.length-1].colSpan=d;break}return c[0].hidden&&c[0].colSpan--,r.virtualCols=c,c},_templates:function(){var t=this,n=t.options,r=t.dataSource,i=r.group(),a=t.footer||t.wrapper.find(`.k-grid-footer`),o=r.aggregate(),s=t._isStackedMode(),c=Z(t.columns),l=Z(J(t.columns)),u=n.scrollable?Z(Y(t.columns)):c,d=(t.virtualScroll||{}).columns?t._virtualCols(u):u,f=g(q(l),function(e,t){return e.groupHeaderColumnTemplate&&t!==0}),p=g(q(d),function(e){return e.groupHeaderColumnTemplate});if(n.scrollable&&l.length&&!s){if(n.rowTemplate||n.altRowTemplate)throw Error(`Having both row template and locked columns is not supported`);t.rowTemplate=t._tmpl(n.rowTemplate,d,!1,!0),t.altRowTemplate=t._tmpl(n.altRowTemplate||n.rowTemplate,d,!0,!0),t.lockedRowTemplate=t._tmpl(n.rowTemplate,l),t.lockedAltRowTemplate=t._tmpl(n.altRowTemplate||n.rowTemplate,l,!0)}else t.rowTemplate=t._tmpl(n.rowTemplate,s?t.columns:d),t.altRowTemplate=t._tmpl(n.altRowTemplate||n.rowTemplate,s?t.columns:d,!0);t._hasDetails()&&(t.detailTemplate=t._detailTmpl(n.detailTemplate||(()=>``))),(t._group&&!S(o)||!S(o)&&!a.length||g(c,function(e){return e.footerTemplate}).length)&&(t.footerTemplate=t._footerTmpl(c,o,`footerTemplate`,`k-footer-template k-table-row`)),i&&g(c,function(e){return e.groupFooterTemplate}).length&&(o=e.map(i,function(e){return e.aggregates}),t.groupFooterTemplate=t._footerTmpl(d,o,`groupFooterTemplate`,`k-group-footer k-table-row`,l.length),n.scrollable&&l.length&&(t.lockedGroupFooterTemplate=t._footerTmpl(l,o,`groupFooterTemplate`,`k-group-footer k-table-row`))),i&&(f.length||p.length)?(o=e.map(i,function(e){return e.aggregates}),t.groupHeaderColumnTemplate=t._groupHeaderTmpl(q(d),o,`groupHeaderColumnTemplate`,`k-table-group-row k-grouping-row k-table-row`,l.length,p),n.scrollable&&l.length&&(t.lockedGroupHeaderColumnTemplate=t._groupHeaderTmpl(q(l),o,`groupHeaderColumnTemplate`,`k-table-group-row k-grouping-row k-table-row`,0,f))):(t.groupHeaderColumnTemplate=null,t.lockedGroupHeaderColumnTemplate=null),t.options.noRecords&&(t.noRecordsTemplate=t._noRecordsTmpl())},_noRecordsTmpl:function(){var t=`<div class="{0}">{1}</div>`,r=`<div class="k-grid-norecords-template"{1}>{0}</div>`,i=this.options.scrollable&&!this.wrapper[0].style.height?` ${n.attr(`style-margin`)}="0 auto" ${n.attr(`style-position`)}="static"`:``,a={storage:{},count:0},o=e.extend({},n.Template,this.options.templateSettings);o.paramName;var s,c,l;let u;if(s=this.options.noRecords.template?this.options.noRecords.template:n.format(r,this.options.messages.noRecords,i),c=typeof s,c===`function`){let e=a.storage[`tmpl`+a.count]=s;a.count++,u=r=>n.format(t,ze,e(r))}else c===`string`&&(u=this.options.noRecords.template?n.format(t,ze,s):()=>n.format(t,ze,s));return l=n.template(u,o),a.count>0&&(l=l.bind(a.storage)),l},_footerTmpl:function(e,t,r,i,a){var o=this,s=m({},n.Template,o.options.templateSettings),c=s.paramName,l,u,d,f,p={},h=0,g={},_=o._groups(),v=o.dataSource._emptyAggregates(t),y;let b=o._isStackedMode(),x=n.template(t=>{let x=`<tr class="`+i+`">`;_>0&&!a&&(x+=fn(_)),o._hasDetails()&&!b&&(x+=`<td class="k-hierarchy-cell k-table-td">&nbsp;</td>`);let S=e;if(b){for(x+=Zn(`<td>`),x+=`<div class="${Ze}">`,l=0,u=S.length;l<u;l++)y=S[l],d=y[r],f=typeof d,d&&(f!==z&&(g=v[y.field]?m({},s,{paramName:c+`['`+y.field+`']`}):{},d=n.template(d,g)),p[`tmpl`+h]=d,x+=d(t),h++);x+=`</div></td>`}else for(l=0,u=S.length;l<u;l++)y=S[l],d=y[r],f=typeof d,x+=Zn(`<td`+mn(y.footerAttributes)+`>`),d?(f!==z&&(g=v[y.field]?m({},s,{paramName:c+`['`+y.field+`']`}):{},d=n.template(d,g)),p[`tmpl`+h]=d,x+=d(t),h++):x+=`&nbsp;`,x+=`</td>`;return x+=`</tr>`,x},s);return h>0?x.bind(p):x},_groupHeaderTmpl:function(e,t,r,i,a,o){var s=this,c=m({},n.Template,s.options.templateSettings),l=c.paramName,u=``,d,f,h,g,_={},y=0,b={},x=s.dataSource._emptyAggregates(t),S,C=o.length?v(o[0],e):-1,w;if(C<0)return;let T=s._isStackedMode();return u=n.template(t=>{let u=``;var v=`<tr data-group-uid="`+t.uid+`" class="`+i+`">`;if(!a)for(var E=0;E<t.groupCells;E++)v+=`<td class="k-table-td k-group-cell">&nbsp;</td>`;let D=e;if(T){for(u+=`<div class="${Ze}">`,d=C,f=D.length;d<f;d++)S=D[d],h=S[r],g=typeof h,h&&(g!==z&&(b=x[S.field]?m({},c,{paramName:l+`['`+S.field+`']`}):{},h=n.template(h,b)),_[`tmpl`+y]=h,u+=_[`tmpl`+y](t),y++);u+=`</div>`}if(s._hasDetails()&&!T&&(v+=`<td class="k-table-td k-hierarchy-cell">&nbsp;</td>`),C<1&&o.length<=1&&!a)return v+=a?``:li(D.length,T,u)(t),v;if(C<1?(C=a?0:1,v+=a?``:li(C,T,u)(t)):v+=a?ui(C):li(C,T,u)(t),!T)for(d=C,f=D.length;d<f;d++){if(S=D[d],h=S[r],g=typeof h,S.sticky){let e=``;w=S.groupHeaderColumnTemplateClass||``,w||=S.groupHeaderColumnTemplateClass=`group-header-column-template-`+n.guid(),p(S.stickyStyle)&&(e=`${S.stickyStyle.left?`${n.attr(`style-left`)}="${S.stickyStyle.left}"`:``} ${S.stickyStyle.right?`${n.attr(`style-right`)}="${S.stickyStyle.right}"`:``}`),v+=`<td class="k-table-td ${qe} ${w}" ${e}>`}else v+=`<td class='k-table-td'>`;h?(g!==z&&(b=x[S.field]?m({},c,{paramName:l+`['`+S.field+`']`}):{},h=n.template(h,b)),_[`tmpl`+y]=h,v+=_[`tmpl`+y](t),y++):v+=`&nbsp;`,v+=`</td>`}return v+=`</tr>`,v},c),y>0?u.bind(_):u},_detailTmpl:function(e){var t=this,r=m({},n.Template,t.options.templateSettings);r.paramName;var i={},a=0,o=t._groups(),s=t._isStackedMode(),c=s?t.table.find(`col`).length:q(Z(t.columns)).length,l=typeof e;let u=n.template(t=>{let u=`<tr role="row" class="k-detail-row k-table-row">`;return o>0&&(u+=fn(o)),s||(u+=`<td role="gridcell" class="k-hierarchy-cell k-table-td"></td>`),u+=`<td role="gridcell" class="k-detail-cell k-table-td" ${c?` colspan="${c}"`:``}>`,l===z?(i[`tmpl`+a]=e,u+=e(t),a++):u+=n.template(e,r)(t),u+=`</td></tr>`,u},r);return a>0?u.bind(i):u},_hasDetails:function(){var e=this;return e.options.detailTemplate!==null||(e._events[ue]||[]).length},_hasFilterRow:function(){var t=this.options.filterable,n=t&&typeof t.mode==B&&t.mode.indexOf(`row`)!=-1,r=this.columns,i=e.grep(r,function(e){return e.filterable===!1});return(this._isStackedMode()||r.length&&i.length==r.length)&&(n=!1),n},_details:function(){var t=this;if(t.options.scrollable&&t._hasDetails()&&J(t.columns).length)throw Error(`Having both detail template and locked columns is not supported`);let n=t._isStackedMode(),r=n?`[ref="expand-detail-button"], [ref="collapse-detail-button"]`:`.k-hierarchy-cell `+re+`, .k-hierarchy-cell a[class*='-i-caret-alt-down']`;t.table.on(R+N,r,function(r){var i=e(this);return n?t._toggleStackedDetails(i):t._toggleDetails(i),r.preventDefault(),!1})},_setCurrentStackedCell:function(t){let n=this,r=t?e(t).closest(`tr`).index():n._currentRowIndex,i=n._currentStackedCell();if(!(!i||!n.options.navigatable)&&r>=0){let e,t=i&&i.index;e=n.table.find(`tr:eq(${r}) .k-grid-stack-cell`).eq(t),e.length&&((e.attr(`tabindex`)===`-1`||!e.attr(`tabindex`))&&On(e.parent().children()),n._currentStackedCell(e,!0))}},_toggleStackedDetails:function(e,t){let r=this,i=e.closest(`.k-grid-stack-cell`),a=i.find(`.k-grid-stack-content`),o=e.is(`[ref="expand-detail-button"]`),s=e.closest(`tr.k-master-row`),c=o?Dt:Ot;e.remove();let l;l=o?n.html.renderButton(`<button tabindex='-1' ref="collapse-detail-button" aria-label=${c}>${n.htmlEncode(r.options.messages.details.collapse)}</button>`,{icon:`minus`,fillMode:`flat`,themeColor:`primary`}):n.html.renderButton(`<button tabindex='-1' ref="expand-detail-button" aria-label=${c}>${n.htmlEncode(r.options.messages.details.expand)}</button>`,{icon:`plus`,fillMode:`flat`,themeColor:`primary`}),a.append(l),r._addDetailRow(s,o,t),r._setCurrentStackedCell(i)},_addDetailRow:function(t,n,r){let i=this,a=i.detailTemplate,o=t.attr(Nt),s=i._hasDetails(),c=t.next(),l;c.hasClass(`k-hidden`)&&c.removeClass(`k-hidden`),s&&!c.hasClass(`k-detail-row`)&&(l=i.dataItem(t),c=e(a(l)).addClass(t.hasClass(`k-table-alt-row`)?`k-table-alt-row`:``).insertAfter(t),(o||o===0)&&c.attr(Nt,Number(o)+1),i.trigger(ue,{masterRow:t,detailRow:c,data:l,detailCell:c.find(`.k-detail-cell`)})),i.trigger(n?xe:Se,{masterRow:t,detailRow:c}),r?pi(c,n):c.toggle(n)},_toggleDetails:function(e,t){var r=this,i=e.closest(`td.k-hierarchy-cell`),a=e.is(re),o=e.closest(`tr.k-master-row`),s=a?Dt:Ot,c=a?`true`:`false`;a?n.ui.icon(e,{icon:`caret-alt-down`}):n.ui.icon(e,{icon:`caret-alt-${W?`left`:`right`}`}),e.attr(V,s),i.attr(Pt,c),r._addDetailRow(o,a,t)},dataItem:function(t){if(t=e(t)[0],!t)return null;var n=this.tbody.children(),r=/k-grouping-row|k-detail-row|k-group-footer/,i=t.sectionRowIndex,a,o=i;for(a=0;a<i;a++)r.test(n[a].className)&&o--;return this._data[o]},expandRow:function(t,n){var r=e(t).find(`> td `+re);r.length&&this._toggleDetails(r,n)},collapseRow:function(t,n){var r=e(t).find(`> td `+ne);r.length&&this._toggleDetails(r,n)},_createHeaderCells:function(r,i){var a=this,o,s,c,l=``,u,d,f=a.options.columnMenu;a.options.sortable;var p=a._hasFilterMenu(),m=a.options.messages,h=Z(a.columns),g=a.dataSource.group(),_;for(o=0,u=r.length;o<u;o++){s=r[o].column||r[o],c=a._headerCellText(s),d=s.title,_=``;let u=v(s,h),y=``;s.selectable?(y+=`<th scope='col'`+mn(s.headerAttributes),i&&!r[o].colSpan&&(y+=` rowspan='`+i+`'`),u>-1&&(y+=n.attr(`index`)+`='`+u+`'`),c=s.headerTemplate?c:n.template(qt)({size:n.getValidCssClass(`k-checkbox-`,`size`,a.options.size)}),y+=`>`+c+`</th>`):s.draggable?(y+=`<th class='k-header' ref-grid-drag-cell scope='col'`+mn(s.headerAttributes),i&&!r[o].colSpan&&(y+=` rowspan='`+i+`'`),u>-1&&(y+=n.attr(`index`)+`='`+u+`'`),c=s.headerTemplate?c:``,y+=`>`+c+`</th>`):s.command?(y+=`<th scope='col'`+mn(s.headerAttributes),i&&!r[o].colSpan&&(y+=` rowspan='`+i+`'`),u>-1&&(y+=n.attr(`index`)+`='`+u+`'`),y+=`>`+(!c||c===`&nbsp;`?c:n.template(Yt)({text:c}))+`</th>`):(s.field&&(_=n.attr(`field`)+`='`+s.field+`' `),y+=`<th scope='col' `+_,f&&s.field&&s.menu!==!1?y+=` aria-haspopup='menu'`:p&&s.filterable!==!1&&!s.command&&(y+=` aria-haspopup='dialog'`),i&&!r[o].colSpan&&(y+=` rowspan='`+i+`'`),r[o].colSpan>1?(y+=`colspan="`+(r[o].colSpan-rr(s.columns))+`" `,y+=n.attr(`colspan`)+`='`+r[o].colSpan+`'`):r[o].colSpan===1&&(y+=n.attr(`colspan`)+`='`+r[o].colSpan+`'`),d&&(d&&=a.options.encodeTitles?mi(d,!0):d,y+=n.attr(`title`)+`="`+d+`" `),s.groupable!==t&&(y+=n.attr(`groupable`)+`='`+s.groupable+`' `),$r(a,s)&&(!s.headerAttributes||!s.headerAttributes.title)&&(y+=`title='`,y+=ei(g,s.field)?m.ungroupHeader:m.groupHeader,y+=`' `),s.aggregates&&s.aggregates.length&&(y+=n.attr(`aggregates`)+`='`+s.aggregates+`'`),u>-1&&(y+=n.attr(`index`)+`='`+u+`'`),y+=mn(s.headerAttributes),c=n.template(Yt)({text:c}),y+=`>`+c+`</th>`),a.options.resizable?l+=e(y).attr(`data-resizable`,(s.resizable!==!1).toString()).addClass(`k-table-th`)[0].outerHTML:l+=e(y).addClass(`k-table-th`)[0].outerHTML}return l},_appendLockedColumnContent:function(){var t=this.columns,r,i=this.table.find(`colgroup`),a=i.find(M),o,s=e(),c=0,l,u,d,f=0;for(r=0,o=t.length;r<o;r++)if(t[r].locked)if(In(t[r])){for(u=1,t[r].columns&&(u=Z(t[r].columns).length-rr(t[r].columns)),u||=1,d=0;d<u;d++)s=s.add(a.eq(r+f+d-c));f+=u-1}else c++;l=e(`<div class="k-grid-content-locked"><table class="k-grid-table k-table"><colgroup></colgroup><tbody class="k-table-tbody"></tbody></table></div>`),i.detach(),l.find(`colgroup`).append(s),i.insertBefore(this.table.find(`tbody`)),this.lockedContent=l.insertBefore(this.content),this.lockedTable=l.children(`table`),this.lockedTable.addClass(n.getValidCssClass(`k-table-`,`size`,this.options.size))},_appendLockedColumnFooter:function(){var t=this,r=t.footer,i=r.find(`.k-footer-template>td`),a=r.find(`.k-grid-footer-wrap>table>colgroup>col`),o=e(`<div class="k-grid-footer-locked"><table class="k-grid-footer-table k-table"><colgroup></colgroup><tfoot class="k-table-tfoot"><tr class="k-footer-template k-table-row"></tr></tfoot></table></div>`),s,c,l=t._groups(),u=e(),d=e();for(o.find(`table`).addClass(n.getValidCssClass(`k-table-`,`size`,this.options.size)),u=u.add(i.filter(`.k-group-cell`)),s=0,c=Z(J(t.columns)).length;s<c;s++)u=u.add(i.eq(s+l));for(d=d.add(a.filter(`.k-group-col`)),s=0,c=q(Z(_r(t.columns))).length;s<c;s++)d=d.add(a.eq(s+l));u.appendTo(o.find(`tr`)),d.appendTo(o.find(`colgroup`)),t.lockedFooter=o.prependTo(r)},_appendLockedColumnHeader:function(t){var r=this,i=this.columns,a,o,s,c,l,u,d,f,p,m=[],h=0,g=e(),_=r._hasFilterRow(),v=0,y=e(),b,x=0,S=e();c=r.thead.prev().find(M),f=r.thead.find(`tr`).first().find(`.k-header:not(.k-group-cell,.k-hierarchy-cell)`),p=r.thead.find(`.k-filter-row`).find(`td:not(.k-group-cell,.k-hierarchy-cell)`);var C=0;for(a=0,s=i.length;a<s;a++){if(i[a].locked){if(b=f.eq(a),x=Z(i[a].columns||[]).length,In(i[a])){var w=null;i[a].columns&&(w=x-rr(i[a].columns)),w||=1;for(var T=0;T<w;T++)g=g.add(c.eq(a+C+T-h));C+=w-1}lr([i[a]],Er(b),m,0,0),x||=1;for(var E=0;E<x;E++)y=y.add(p.eq(v+E));v+=x}i[a].columns&&(h+=rr(i[a].columns)),In(i[a])||h++}if(m.length){for(o=`<div class="k-grid-header-locked"><table class="k-grid-header-table k-table"><colgroup></colgroup><thead class="k-table-thead">`,o+=Array(m.length+1).join(`<tr class='k-table-row'></tr>`),o+=(_?`<tr class="k-filter-row k-table-row"></tr>`:``)+`</thead></table></div>`,d=e(o),d.find(`.k-grid-header-locked`).css(`width`,`1px`),d.find(`table`).addClass(n.getValidCssClass(`k-table-`,`size`,r.options.size)),c=d.find(`colgroup`),c.append(r.thead.prev().find(`col.k-group-col`).add(g)),l=d.find(`thead tr:not(.k-filter-row)`),a=0,s=m.length;a<s;a++)S=zn(m[a]),l.eq(a).append(r.thead.find(`tr`).eq(a).find(`.k-group-cell`).add(S));var D=cr(this.thead);return m.length<D&&or(d,D-m.length),u=d.find(`.k-filter-row`),u.append(r.thead.find(`.k-filter-row .k-group-cell`).add(y)),this.lockedHeader=d.prependTo(t),this.thead.find(`.k-group-cell`).remove(),!0}return!1},_removeLockedContainers:function(){var e=this.lockedHeader.add(this.lockedContent).add(this.lockedFooter);n.destroy(e),e.off(N).remove(),this.lockedHeader=this.lockedContent=this.lockedFooter=null,this.selectable=null},_thead:function(){var t=this,r=t.columns,i=t._hasDetails()&&r.length,a=t._hasFilterRow(),o,s=``,c=t.table.find(`>thead`),l=t.element.find(`thead`).first().length>0,u=t.options.messages.expandCollapseColumnHeader,d;let f=t._isStackedMode();if(!f){if(c.length||(c=e(`<thead/>`).insertBefore(t.tbody)),c.addClass(`k-table-thead`),t.lockedHeader&&t.thead?(d=t.thead.find(`tr:has(th):not(.k-filter-row)`).html(``),d.remove(),d=e(),t._removeLockedContainers()):d=l?t.element.find(`thead`).first().find(`tr:has(th):not(.k-filter-row)`):t.element.find(`tr:has(th)`).first(),d.length){for(o=0;o<r.length;o++){let e=v(r[o],Z(r)),t=Q(d.parent()).filter(`th:not(.k-group-cell):not(.k-hierarchy-cell)`).eq(e);t.addClass(`k-table-th`);let n=t[0],i=n?.childNodes||[];i.length===1&&i[0].nodeType===3&&t.html(Yt({text:mi(t.text())})),r[o].hidden&&e>=0&&(n.style.display=U)}t._updateHeadersAttr(yr(r))}else if(d=c.children().first(),!d.length){var p=[{rowSpan:1,cells:[],index:0}];for(t._prepareColumns(p,r),o=0;o<p.length;o++)s+=`<tr class='k-table-row'>`,i&&(s+=`<th class="k-hierarchy-cell k-table-th" scope="col">`+u+`</th>`),s+=t._createHeaderCells(p[o].cells,p[o].rowSpan),s+=`</tr>`;d=e(s),n.applyStylesFromKendoAttributes(d,[`display`,`left`,`right`])}if(a){var m=e(`<tr/>`);m.addClass(`k-filter-row k-table-row`),(i||d.find(`.k-hierarchy-cell`).length)&&m.prepend(`<td class="k-table-td k-hierarchy-cell">&nbsp;</td>`);var h=(t.thead||c).find(`.k-filter-row`);h.length&&(n.destroy(h),h.remove()),c.append(m)}d.children().length?i&&!d.find(`.k-hierarchy-cell`)[0]&&d.prepend(`<th class="k-hierarchy-cell k-table-th" scope="col">`+(u||`&nbsp;`)+`</th>`):(s=``,i&&(s+=`<th class="k-hierarchy-cell k-table-th" scope="col">&nbsp;</th>`),s+=t._createHeaderCells(r),d.html(s));let f=d.find(`th`);f.addClass(We),f.length>0&&c.attr(H,Lt),t.options.scrollable||c.addClass(`k-grid-header`),d.find(`script`).remove().end().prependTo(c),t.thead&&t._destroyColumnAttachments(),t.thead=c}t._sortable(),t._filterable(),t._filterRow(),t._scrollable(),t._columnMenu();var g,_=this.options.scrollable&&J(this.columns).length;_&&!f&&(g=t._appendLockedColumnHeader(t.thead.closest(`.k-grid-header`)),t._appendLockedColumnContent(),t.lockedContent.on(`DOMMouseScroll`+N+` mousewheel.kendoGrid`,t._wheelScroll.bind(t)),n.support.touch&&(t._lockedContentUserEvents=new n.UserEvents(t.lockedContent,{move:function(e){t.content.scrollTop(t.content.scrollTop()+-e.y.delta),e.preventDefault()}})),t._updateLockedCols()),t._updateCols(),f||(t._updateColumnCellIndex(),t._updateFirstColumnClass()),t._resizable(),t._draggable(),t._reorderable(),f||(t._updateHeader(t._groups()),t._updateStickyColumns()),_&&!f&&(g&&t._syncLockedHeaderHeight(),t._applyLockedContainersWidth())},_retrieveFirstColumn:function(t,n){var r=e();if(n.length&&t[0]){for(var i=t[0];i.columns&&i.columns.length;)i=i.columns[0],n=n.filter(`:not(:first)`);r=r.add(n)}return r},_updateFirstColumnClass:function(){var t=this,n=t.columns||[];if(!(t._hasDetails()&&n.length)&&!t._groups()){var r=t.thead.find(`>tr:not(.k-filter-row):not(:first)`);n=Y(n);var i=t._retrieveFirstColumn(n,r);t._isLocked()&&(r=t.lockedHeader.find(`thead>tr:not(.k-filter-row):not(:first)`),n=J(t.columns),i=i.add(t._retrieveFirstColumn(n,r))),i.each(function(){var t=e(this).find(`th`);t.removeClass(`k-first`),t.eq(0).addClass(`k-first`)})}},_prepareColumns:function(e,t,n,r){for(var i=r||e[e.length-1],a=e[i.index+1],o=0,s=0;s<t.length;s++){var c={column:t[s],colSpan:0};i.cells.push(c),t[s].columns&&t[s].columns.length&&(a||(a={rowSpan:0,cells:[],index:e.length},e.push(a)),c.colSpan=t[s].columns.length,this._prepareColumns(e,t[s].columns,c,a),o+=c.colSpan-1,i.rowSpan=e.length-i.index)}n&&(n.colSpan+=o)},_wheelScroll:function(e){if(!e.ctrlKey){var t=this.content;this.virtualScroll&&this.virtualScroll.rows&&(t=this.virtualScrollable.verticalScrollbar);var r=t.scrollTop(),i=n.wheelDeltaY(e);i&&(t[0].scrollHeight>t[0].clientHeight&&(t[0].scrollTop<t[0].scrollHeight-t[0].clientHeight&&i<0||t[0].scrollTop>0&&i>0)&&e.preventDefault(),t.scrollTop(r+-i))}},_isLocked:function(){return this.lockedHeader!=null},_updateHeaderCols:function(){var e=this.thead.parent().add(this.table);this._isLocked()?jr(e,X(gr(this.columns)),this._hasDetails(),0):jr(e,X(q(this.columns)),this._hasDetails(),0)},_updateColumnSorters:function(){var e=this,t=Q(e.thead),n=Z(e.columns),r,i,a;if(e.options.sortable)for(var o=0,s=t.length;o<s;o++)r=n[o],r.sortable!==!1&&!r.command&&r.field&&(i=t.eq(o),a=i.data(`kendoColumnSorter`),a&&a.refresh())},_updateHeadersAttr:function(e){if(e.length){for(var t=this,n=0;n<e.length;n++)e[n].headerAttributes&&t.element.find(`[id='`+e[n].headerAttributes.id+`']`).attr(`headers`,e[n].headerAttributes.headers);t._updateHeadersAttr(yr(e))}},_updateCols:function(e){let t=this,n=t._isStackedMode()?t.table:t.thead.parent().add(t.table);e||=n,this._appendCols(e,this._isLocked())},_updateLockedCols:function(e){this._isLocked()&&(e||=this.lockedHeader.find(`table`).add(this.lockedTable),jr(e,X(_r(this.columns)),this._hasDetails(),this._groups()))},_appendCols:function(e,t){t?jr(e,X(gr(this.columns)),this._hasDetails(),0):jr(e,X(q(this.columns)),this._hasDetails(),this._groups(),this._isStackedMode())},_autoColumns:function(e){if(e&&e.toJSON){var t=this,r,i;for(r in e=e.toJSON(),i=!(t.table.find(`tbody tr`).length>0&&(!t.dataSource||!t.dataSource.transport)),e)t.columns.push({field:r,encoded:i,headerAttributes:{id:n.guid()}});t._thead(),t._templates()}},_setRowCachedHeight:function(t,n){var r=this._cachedRowsHeight[n],i;return r&&(i=e(t),i[0].style.height=r+`px`,t=i.prop(`outerHTML`)),t},_rowsHtml:function(e,t){var n=this,r=``,i,a=t.rowTemplate,o=t.altRowTemplate,s=n._cachedRowsHeight,c,l;for(i=0,c=e.length;i<c;i++)n._skipRerenderItemsCount>0?n._skipRerenderItemsCount--:(l=i%2?o(e[i]):a(e[i]),s&&(l=n._setRowCachedHeight(l,e[i].uid)),r+=l),n._data.push(e[i]);return r},_groupData:function(e,t,n){var r=this._groupAggregatesDefaultObject||{},i=e.items,a=m({},r,e.aggregates),o=m({},{field:e.field,value:e.value,items:i,aggregates:a},e.aggregates[n?n.field:e.field]),s={};if(!t)for(var c in a)s[c]=m({},a[c],{group:{field:e.field,value:e.value,items:i}});return m({},s,o)},_removeGroupIfEmpty:function(e){for(var t=this,n,r,i=t.dataSource._group.length,a=0;a<i;a++)e=e.prev(),n=+e.attr(`data-group-item-count`),r=+e.attr(`data-sub-group-count`),(n==1||r==1)&&e.hide()},_groupRowHtml:function(e,t,r,i,a,o,s,c){var l=this,u=``,d,f,p=l.lockedContent!=null,m=e.field,h=g(Z(l.columns),function(e){return e.field==m})[0]||{},_=q(l.columns)[0],y=_?_.groupHeaderColumnTemplate:null,b=h.groupHeaderTemplate?h.groupHeaderTemplate:y,x=(h.title&&(l.options.encodeTitles?mi(h.title,!0):h.title)||mi(m,!0))+`: `+Pr(e.value,h.format,h.values,h.encoded),S=e.currentItems||e.items,C=l._groups(),w=a.groupFooterTemplate,T=a.groupHeaderColumnTemplate,E,D=l.dataSource._isGroupPaged(),O=D?l.dataSource._groupsState[e.uid]:!0;if(l.options.editable&&e.items&&e.items[0]&&e.items[0].isNew&&e.items[0].isNew()&&(O=!0),(a.groupFooterTemplate||a.groupHeaderColumnTemplate||h.groupHeaderTemplate||l._isStackedMode())&&(E=l._groupData(e,!1,!h.groupHeaderTemplate&&q(l.columns)[0].groupHeaderColumnTemplate?q(l.columns)[0]:!1)),b&&!o&&(x=typeof b===z?b(E):n.template(b)(E)),l._skipRerenderItemsCount?i(t,r,x,O,e.uid,D,l._isStackedMode()):e.excludeHeader?p?e.excludeHeader=!c:e.excludeHeader=!1:u+=ci({groupHeaderColumnTemplate:T,groupHeaderBuilder:i,colspan:t,templateColspan:C-r,groupData:E,level:r,text:x,expanded:O,group:e,isGroupPaged:D,stacked:l._isStackedMode()}),O)if(e.hasSubgroups)for(d=0,f=S.length;d<f;d++)u+=l._groupRowHtml(S[d],o?t:t-1,r+1,i,a,o,s&&d===S.length-1,c);else u+=l._rowsHtml(S,a);return w&&(s?v(e.value,l._skippedGroups)||l._skippedGroups.push(e.value):(l._skippedGroups.length&&l._skippedGroups[0]===e.value&&l._skippedGroups.shift(),l._skipRerenderItemsCount||(u+=w(E)))),u},collapseGroup:function(t){var r,i=this,a=t,o=this.options.groupable.showFooter?0:1,s,c=e(),l,u,d;if(t=e(t),r=t.find(`.k-group-cell`).length,this.dataSource._isGroupPaged()){var f=t.attr(`data-group-uid`),p=i.dataSource._getGroupByUid(f),m=i.dataSource._calculateGroupsTotal([p],!0),h;i.dataSource._groupsState[f]=!1,h=i.dataSource._calculateGroupsTotal([p],!0),i.dataSource._serverGroupsTotal-=m-h,i._progress(!0),i.dataSource.range(i.dataSource._currentRangeStart,i.dataSource.take(),function(){i._progress(!1)},`collapseGroup`);return}this._isLocked()&&(t.closest(`div`).hasClass(`k-grid-content-locked`)?c=this.tbody.children(`tr`).eq(t.index()).nextAll(`tr`):(c=t.nextAll(`tr`),t=this.lockedTable.find(`>tbody>tr`).eq(t.index()))),t.find(ne).length&&n.ui.icon(t.find(ne),{icon:`caret-alt-${W?`left`:`right`}`}),t.find(`td[aria-expanded='true']`).first().attr(Pt,!1).find(`a`).attr(V,Ot),t=t.nextAll(`tr`);var g=[];for(l=0,u=t.length;l<u&&(d=t.eq(l),s=d.find(`.k-group-cell`).length,d.hasClass(L)?o++:d.hasClass(`k-group-footer`)&&o--,!(s<=r||d.hasClass(`k-group-footer`)&&o<0));l++)c.length&&g.push(c[l]),g.push(d[0]);e(g).hide(),this.options.scrollable.endless&&this.content&&(clearTimeout(i._collapseGroupsTimeOut),i._collapseGroupsTimeOut=setTimeout(function(){i.content.scroll(),i._groupToCollapse=a}))},expandGroup:function(t){t=e(t);var r=this,i=r.options.groupable.showFooter,a,o,s,c=e(),l,u,d=[],f=1;if(a=t.find(`.k-group-cell`).length,this.dataSource._isGroupPaged()){var p=t.attr(`data-group-uid`),m=r.dataSource._getGroupByUid(p),h=r.dataSource._calculateGroupsTotal([m],!0),g;r.dataSource._groupsState[p]=!0,m.items&&m.items.length&&(g=r.dataSource._calculateGroupsTotal([m],!0),r.dataSource._serverGroupsTotal+=g-h),r._progress(!0),r.dataSource.range(r.dataSource._currentRangeStart,r.dataSource.take(),function(){r._progress(!1)},`expandGroup`);return}for(this._isLocked()&&(t.closest(`div`).hasClass(`k-grid-content-locked`)?c=this.tbody.children(`tr`).eq(t.index()).nextAll(`tr`):(c=t.nextAll(`tr`),t=this.lockedTable.find(`>tbody>tr`).eq(t.index()))),t.find(re).length&&n.ui.icon(t.find(re),{icon:`caret-alt-down`}),t.find(`td[aria-expanded='false']`).first().attr(Pt,!0).find(`a`).attr(V,Dt),t=t.nextAll(`tr`),l=0,u=t.length;l<u&&(o=t.eq(l),s=o.find(`.k-group-cell`).length,!(s<=a));l++)if(s==a+1&&!o.hasClass(`k-detail-row`)&&(o.show(),c.eq(l).show(),o.hasClass(L)&&o.find(`.k-icon,.k-svg-icon`).is(ne)&&r.expandGroup(o),o.hasClass(`k-master-row`)&&o.find(`.k-icon,.k-svg-icon`).is(ne)&&(o.next().show(),c.eq(l+1).show())),o.hasClass(L)&&(i&&d.push(o.is(`:visible`)),f++),o.hasClass(`k-group-footer`)){if(i){var _=d.pop();o.toggle(_),c.eq(l).toggle(_)}f==1?(o.show(),c.eq(l).show()):f--}(a===0&&r.options.scrollable.endless&&this._isLocked()||!r.options.scrollable.endless&&this._isLocked())&&r._syncLockedContentHeight()},_updateHeader:function(t){var n=this,r=n._isLocked()?n.lockedHeader.find(`thead`):n.thead,i=r.find(`tr.k-filter-row`).find(`td.k-group-cell`).length,a=r.find(`tr`).first().find(`th.k-group-cell`).length,o=r.children(`tr:not(:first)`).filter(function(){return!e(this).children(`:visible`).length});t>a?(e(Array(t-a+1).join(`<th class="k-group-cell k-header k-table-th" scope="col">`+x(n.options.messages.expandCollapseColumnHeader)+`</th>`)).prependTo(r.children(`tr:not(.k-filter-row)`)),n.element.is(`:visible`)&&o.find(`th.k-group-cell`).hide()):t<a&&r.find(`tr`).each(function(){e(this).find(`.k-group-cell`).eq(t).remove(),e(this).find(`.k-group-cell`).slice(t).remove()}),t>i&&e(Array(t-i+1).join(`<td class="k-group-cell k-table-group-td k-table-td">&nbsp;</td>`)).prependTo(r.find(`.k-filter-row`))},_firstDataItem:function(e,t){return e&&t&&(e=e.hasSubgroups?this._firstDataItem(e.items[0],t):e.items[0]),e},_updateTablesWidth:function(){var t=this,n;t._isLocked()&&(n=e(`>.k-grid-footer>.k-grid-footer-wrap>table`,t.wrapper).add(t.thead.parent()).add(t.table),t._footerWidth=Vr(n.eq(0)),n.width(t._footerWidth),n=e(`>.k-grid-footer>.k-grid-footer-locked>table`,t.wrapper).add(t.lockedHeader.find(`>table`)).add(t.lockedTable),n.width(Vr(n.eq(0))))},hideColumn:function(t){var n=this,r,i,a,o,s,c,u=0,d,f,m=n.footer||n.wrapper.find(`.k-grid-footer`),h=n.virtualScroll||{},_=n.columns,y=n.lockedHeader?Q(n.lockedHeader.find(`>table>thead`)).filter(Pn).length:0,b,x;(Array.isArray(t)?t:[t]).forEach(t=>{if(x=g(Z(n.columns),function(e){return e.groupHeaderColumnTemplate}),t=typeof t==`number`?_[t]:p(t)?g(nr(_),function(e){return e===t})[0]:g(nr(_),function(e){return e.field===t})[0],!(!t||!In(t))){if(n._isStackedMode()){n._stackedColumnVisibility(t,`hide`),n.trigger(_e,{column:t});return}var S=n._columnVisibilitySetter(t);if(t.columns&&t.columns.length){for(c=$n(t,_),S(t,!1),Fr(Sn(e(`>table>thead`,n.lockedHeader),n.thead,`>tr:eq(`+c.row+`)>th`),c.cell,!1),a=0;a<t.columns.length;a++)this.hideColumn(t.columns[a]);n._ariaAddHiddenColIndex(),n.trigger(_e,{column:t});return}b=v(t,q(Z(_))),S(t,!1),n._setParentsVisibility(t,!1),n._templates(),n._updateCols(),n._updateLockedCols();var C=n.thead;if(d=b,n.lockedHeader&&y>b?C=n.lockedHeader.find(`>table>thead`):d-=y,r=Q(C).filter(Pn).eq(d),r[0].style.display=U,Fr(Sn(e(`>table>thead`,n.lockedHeader),n.thead,`>tr.k-filter-row>td`),b,!1),m[0]&&(n._updateCols(m.find(`>.k-grid-footer-wrap>table`)),n._updateLockedCols(m.find(`>.k-grid-footer-locked>table`)),Fr(m.find(`.k-footer-template>td`),b,!1)),h.columns&&!t.locked){n._updateContentWidth(),n.trigger(_e,{column:t});return}if(n.lockedTable&&y>b?Ir(n.lockedTable.find(`>tbody>tr`),b):Ir(n.tbody.children(),b-y),n.lockedTable)n._updateTablesWidth(),n._applyLockedContainersWidth(),n._syncLockedContentHeight(),n._syncLockedHeaderHeight(),n._syncLockedFooterHeight();else{for(o=n.thead?n.thead.prev().find(`col`):[],a=0,f=o.length;a<f;a+=1){if(s=o[a].style.width,o[a].className.indexOf(`k-hierarchy-col`)>-1){u+=l(o[a]);continue}if(o[a].className.indexOf(`k-group-col`)>-1){u+=l(o[a]);continue}if(s&&s.indexOf(`%`)==-1)u+=parseInt(s,10);else{u=0;break}}i=n.wrapper.find(`>.k-grid-header table`).first().add(n.wrapper.find(`>.k-grid-footer table`).first()).add(n.table),n._footerWidth=null,u&&(i.each(function(){this.style.width=u+`px`}),n._footerWidth=u,n._setContentWidth())}n._updateFirstColumnClass(),n._updateStickyColumns(),n._ariaAddHiddenColIndex(),x.length>0&&n._renderGroupRows(),n.trigger(_e,{column:t})}})},_stackedColumnVisibility:function(t,n){let r=this,i=t.field,a;if(r.columns.length){for(let e=0;e<r.columns.length;e++)if(r.columns[e].field===i){a=e;break}(a||a===0)&&(r.table.find(`.k-grid-stack-cell[data-index='`+a+`']`).each(function(){let t=e(this);t.closest(`.k-detail-row`).length||t[n]()}),Dn(t,n===`show`))}},_setParentsVisibility:function(t,r){var i=this,a=i.columns,o,s=[],c,l,u,d,f=i._columnVisibilitySetter(t),p=r?function(e){return q(e.columns).length&&e.hidden}:function(e){return!q(e.columns).length&&!e.hidden};if(En(t,a,s)&&s.length)for(o=s.length-1;o>=0;o--)c=s[o],l=Yn(c,a),u=Sn(e(`>table>thead`,this.lockedHeader),this.thead,`>tr:eq(`+l.row+`)>th:not(.k-group-cell):not(.k-hierarchy-cell)`).eq(l.cell),p(c)&&(f(c,r),u[0].style.display=r?``:U),u.filter(`[`+n.attr(`colspan`)+`]`).length&&(d=parseInt(u.attr(n.attr(`colspan`)),10),u[0].colSpan=d-rr(c.columns)||1)},_updateContentWidth:function(){let t=this;t.table.add(t.thead?t.thead.parent():e()).css({width:ir(X(gr(t.columns)))}),t.refresh()},showColumn:function(t){var n=this,r,i,a,o,s,c,u,d,f,m=n.columns,h=n.virtualScroll||{},_=n.footer||n.wrapper.find(`.k-grid-footer`),y=n.lockedHeader?Q(n.lockedHeader.find(`>table>thead`)).length:0,b,x,S,C;(Array.isArray(t)?t:[t]).forEach(t=>{if(C=g(Z(n.columns),function(e){return e.groupHeaderColumnTemplate}),typeof t==`number`?(b=t,t=m[t]):p(t)?e.each(nr(m),function(e,n){if(n===t)return t=n,b=e,!1}):e.each(nr(m),function(e,n){if(n.field===t)return t=n,b=e,!1}),!(!t||In(t))){if(n._isStackedMode()){n._stackedColumnVisibility(t,`show`),n.trigger(ve,{column:t});return}var w=n._columnVisibilitySetter(t);if(t.columns&&t.columns.length){for(u=Yn(t,m),x=nr(n.options.columns)[b],w(t,!0),Fr(Sn(e(`>table>thead`,n.lockedHeader),n.thead,`>tr:eq(`+u.row+`)>th`),u.cell,!0),r=0;r<t.columns.length;r++)x.columns[r].hidden||this.showColumn(t.columns[r]);n._ariaRemoveHiddenColIndex(),n.trigger(ve,{column:t});return}S=v(t,Z(m)),w(t,!0),n._setParentsVisibility(t,!0),n._templates(),n._updateCols(),n._updateLockedCols();var T=n.thead;if(c=S,n.lockedHeader&&y>S?T=n.lockedHeader.find(`>table>thead`):c-=y,a=Q(T).eq(c),a[0].style.display=``,a[0].classList.remove(`k-hidden`),Fr(Sn(e(`>table>thead`,n.lockedHeader),n.thead,`>tr.k-filter-row>td`),S,!0),_[0]&&(n._updateCols(_.find(`>.k-grid-footer-wrap>table`)),n._updateLockedCols(_.find(`>.k-grid-footer-locked>table`)),Fr(_.find(`.k-footer-template>td`),S,!0)),h.columns&&!t.locked){n._updateContentWidth(),n.trigger(ve,{column:t});return}if(n.lockedTable&&y>S?zr(n.lockedTable.find(`>tbody>tr`),S):zr(n.tbody.children(),S-y),n.lockedTable)n._updateTablesWidth(),n._applyLockedContainersWidth(),n._syncLockedContentHeight(),n._syncLockedHeaderHeight();else if(o=n.wrapper.find(`>.k-grid-header table`).first().add(n.wrapper.find(`>.k-grid-footer table`).first()).add(n.table),!t.width)o.width(``);else{for(s=0,f=n.thead.prev().find(`col`),r=0,i=f.length;r<i;r+=1){if(d=f[r].style.width,f[r].className.indexOf(`k-hierarchy-col`)>-1){s+=l(f[r]);continue}if(f[r].className.indexOf(`k-group-col`)>-1){s+=l(f[r]);continue}if(d.indexOf(`%`)>-1){s=0;break}s+=parseInt(d,10)}n._footerWidth=null,s&&(o.each(function(){this.style.width=s+`px`}),n._footerWidth=s,n._setContentWidth())}n._updateFirstColumnClass(),n._updateStickyColumns(),C.length>0&&n._renderGroupRows(),n._ariaRemoveHiddenColIndex(),n.trigger(ve,{column:t})}})},_columnVisibilitySetter:function(e){return Rn((e||{}).media)?Dn:jn},_buildSkeleton:function(){let e=this.virtualCols?this.virtualCols:X(this.columns),t=this.dataSource.pageSize()||this.dataSource.total(),n=this._groups(),r=this._isStackedMode(),i=``,a,o=r?1:e.length+n;this._hasDetails()&&!r&&o++,this._hasVirtualColumns()&&(a=parseInt(this.content.find(`tr`).first().find(`td`).first().attr(`colspan`),10));for(var s=0;s<t;s++){i+=`<tr class='k-table-row' data-skeleton-row>`;for(var c=0;c<o;c++)a&&!c?i+=`<td colspan='`+a+`'><span class='k-skeleton k-skeleton-text k-skeleton-pulse k-table-td'></span></td>`:i+=`<td><span class='k-skeleton k-skeleton-text k-skeleton-pulse k-table-td'></span></td>`;i+=`</tr>`}return i},_progress:function(e){var t=this.element,r=this.options.scrollable&&this.options.scrollable.endless,i=this.options.loaderType,a=this.options.scrollable&&this.options.scrollable.virtual,o;if(a?t=this.content:this._editContainer&&this._editMode()===`popup`?t=this._editContainer:this.lockedContent||r?t=this.wrapper:this.element.is(`table`)?t=this.element.parent():this.content&&this.content.length&&(t=this.content),i==`skeleton`&&!this._isExport){let n=t.find(`tbody`);e?(o=this._buildSkeleton(),r&&(this._currentEndlessRows=n.children(`:not([data-skeleton-row])`)),n.empty().append(o)):r?(t.find(`[data-skeleton-row]`).remove(),n.prepend(this._currentEndlessRows)):t.find(`.k-skeleton`).closest(`tbody`).empty()}else this._isExport?this._loaderContainer(e,{message:this.options.messages.loader.exporting}):r&&e?n.ui.progress(t,e,{height:this.content.height(),top:this.content.parent()[0].offsetTop,opacity:!0}):n.ui.progress(t,e)},_resize:function(e,t){this._syncLockedContentHeight(),this._syncLockedHeaderHeight(),this.content&&(this._setContentWidth(),this._setContentHeight()),this.lockedTable&&this._syncLockedScroll(),this.virtualScrollable&&(t||this._rowHeight)&&(t&&(this._rowHeight=null),this.virtualScrollable.repaintScrollbar()),this.pager&&this.pager.element&&this.pager.resize(t),this._anyStickyColumns()&&this._updateStickyColumns(!1)},_isActiveInTable:function(){var t=s();return t?this.table[0]===t||e.contains(this.table[0],t)||this._isLocked()&&(this.lockedTable[0]===t||e.contains(this.lockedTable[0],t)):!1},refresh:function(r){var i=this,a=i.dataSource.view(),o=i.options.navigatable,s=i.virtualScroll||{},c,l=e(i.current()),u=!1,d=i._groups(),f=d+X(q(i.columns)).length,p=g(i.columns,function(e){return e.columns!==t}).length>0,m,h,_=0,y=i.dataSource.group()&&i.dataSource.group().length>0;let b=i._isStackedMode();if(r&&r.action===`itemchange`&&(i.editable||i.options.scrollable.endless)&&(this._editMode()!=`popup`||this._editMode()===`popup`&&!i._editableIsClosing)||(i._shouldMapHights&&=(i._mapCachedRowsHeight(`get`,`uid`),!1),s.columns&&i._templates(),r&&r.action===`remove`&&i.editable&&i.editable.options.model&&v(i.editable.options.model,r.items)>-1&&i.editable.options.model.unbind(P,i._modelChangeHandler),r||={},i.trigger(`dataBinding`,{action:r.action||`rebind`,index:r.index,items:r.items})))return;if(r.action===Oe&&i._isVirtualEditable()&&(i._destroyEditable(),i._clearEditableState()),!i._endlessFetchInProgress){let e=i._isAdaptive()?`kendoActionSheet`:`kendoWindow`;o&&(i._isActiveInTable()||i._editContainer&&i._editContainer.data(e))&&(u=l.is(`th`),c=u?l.parent().children(`:not(.k-group-cell)`).index(l[0]):Math.max(i.cellIndex(l),0),u&&p&&(_=l.parent().index())),i._destroyEditable()}i.options.scrollable&&i.options.scrollable.endless&&!i._pdfInitialized?(clearTimeout(i._progressTimeOut),i._progressTimeOut=setTimeout(function(){i._endlessFetchInProgress||(i._progress(!1),b&&i._toggleGroupableHeader(y))},250)):i._isExport||(i._progress(!1),b&&i._toggleGroupableHeader(y)),l.length&&(i._currentRowIndex=l.parent().index()),i._hideResizeHandle(),i._data=[],i.columns.length||(i._autoColumns(i._firstDataItem(a[0],d)),f=d+i.columns.length),i._group=d>0||i._group,i._group&&(i._templates(),i._updateCols(),i._updateLockedCols(),!i._virtualColScroll&&!b&&i._updateHeader(d),i._group=d>0,i._groupRows=Lr(a)),i.content&&(m=n.scrollLeft(i.content));let x=i.dataSource.group()?.some(e=>e.aggregates)&&i.columns?.some(e=>e.groupFooterTemplate||e.groupHeaderTemplate);if(i.options.loaderType!==`skeleton`&&r&&r.action===`sync`&&r.partialUpdate&&r.changedItems&&r.changedItems.length&&!x?(i._data=i.dataSource.flatView(),r.changedItems.forEach(e=>{let t=i.tbody.find(`[`+n.attr(`uid`)+`=`+e.uid+`]`);i._editMode()===St&&i.dataSource.options.autoSync&&i.dataSource.isLocalTransport()&&i.trigger(he,{type:`save`,model:r.changedItems[0],container:t.find(`.k-edit-cell`)}),i._displayRow(t)}),i._progress(!1),b&&i._toggleGroupableHeader(y),i._destroyEditable()):(h=i._skipRerenderItemsCount,i._renderContent(a,f,d),i.options.scrollable&&i.options.scrollable.endless&&this.lockedContent&&(i._skipRerenderItemsCount=h),i._renderLockedContent(a,f,d)),i._virtualColScroll||(i._footer(),i._renderNoRecordsContent(),i._togglePagerVisibility(),i._setContentHeight(),i._setContentWidth(i.content&&m)),i.lockedTable&&(s.rows?i.content.find(`>.k-virtual-scrollable-wrap`).trigger(`scroll`):i.touchScroller?i.touchScroller.movable.trigger(`change`):(i.wrapper.one(`scroll`,function(e){e.stopPropagation()}),i.content.trigger(`scroll`))),!i._endlessFetchInProgress&&!i._rowDropping)if(b&&i.options.navigatable)i._setCurrentStackedCell();else{let e=i._isLocked()&&l.closest(`.k-grid-header-locked`).length&&u;i._restoreCurrent(c,u,_,e)}if(i.touchScroller&&i.touchScroller.contentResized(),i.selectable&&i.selectable.resetTouchEvents(),i._checkBoxSelection&&i._toggleHeaderCheckState(!1),i.options.persistSelection&&(i.selectable&&!n.ui.Selectable.parseOptions(i.options.selectable).cell||i._checkBoxSelection)&&(i.items().length||i.dataSource._isGroupPaged())&&i._restoreSelection(),i._restoreHighlight(),i._hasAIHighlight&&i._applyAIHighlight(i._hasAIHighlight),i._hasAISelection&&!i._isSingleSelectionEnabled()&&i._applyAISelection(i._hasAISelection),i.options.persistSelection||(i._selectedIds={}),i._hasReorderableRows()&&(i._draggableRows(),i._reorderableRows()),i.options.selectable&&i.options.selectable.cellAggregates&&i._calculateAggregatesForSelected(),b){let e=i._getStackedLayoutSettings(),t=i.tbody.find(`.k-grid-stack-row`);e.colClass?t.addClass(e.colClass):e.colsConfig&&t.css(`grid-template-columns`,e.colsConfig)}i._toggleToolbarEditingItemsVisibility(),i._aria(),i.trigger(be)},_getSchemaIdField:function(){let e=this.dataSource.options.schema.model;return b(e)?e.fn.idField:e&&e.id},_restoreCurrent:function(n,r,i,a){if(!(n===t||n<0)){if(this._removeCurrent(),r){let e=a?this.lockedHeader:this.thead;this._setCurrent(e.find(`tr:eq(${i}) th:not(.k-group-cell)`).eq(n),!1,this._hasVirtualColumns())}else{var o=0,s=this.virtualScroll||{};this._rowVirtualIndex?o=s.rows?this.virtualScrollable.position(this._rowVirtualIndex):this._rowVirtualIndex:this._currentRowIndex?o=this._currentRowIndex:n=0;var c=e(),l;this.lockedTable&&(c=this._shouldFocusInLastRow?this.lockedTable.find(`>tbody>tr`).last():this._shouldFocusInFirstRow?this.lockedTable.find(`>tbody>tr`).first():this.lockedTable.find(`>tbody>tr`).eq(o));let t;t=this._shouldFocusInLastRow?this.tbody.children().last():this._shouldFocusInFirstRow?this.tbody.children().first():this.tbody.children().eq(o),c=c.add(t),this._hasVirtualColumns()&&(l=parseInt(c.find(`td`).first().attr(`colspan`),10),n=this._virtualCellIndex-(l>1?l-1:0));var u=c.find(`>td:not(.k-group-cell):not(.k-hierarchy-cell)`).eq(n);if(!u.length||n<0)return;this._hasVirtualColumns()?this._setCurrent(u,!0,!0):this._setCurrent(u)}this._current&&$(this.table,!0)}},_restoreSelection:function(){var e=this,t=e.items(),n,r=e._getSchemaIdField();n=g(t,function(t){var n=e.dataItem(t)[r];if(e._selectedIds[n])return t}),e.select(n)},_getSelectedRowUids:function(){var t=this,r=t.select(),i,a,o=[];for(let s=0;s<r.length;s++)i=e(r[s]),n.ui.Selectable.parseOptions(t.options.selectable).cell&&(i=i.closest(`tr`)),a=i.data(`uid`),o.indexOf(a)===-1&&o.push(a);return o},_getSelectedColumnFields:function(){var t=this,r=t.select(),i,a,o=X(t.columns).filter(e=>!e.selectable&&!e.draggable&!e.command),s=[];if(!n.ui.Selectable.parseOptions(t.options.selectable).cell)return o.map(e=>e.field);for(let n=0;n<r.length;n++)a=e(r[n]).index(),i=t.thead.find(`th:eq(`+a+`)`).data(`field`),s.indexOf(i)===-1&&s.push(i);return s},_cleanupDetailItems:function(){var e=this;e._hasDetails()&&e.tbody.find(`.k-detail-cell`).empty()},_renderContent:function(e,t,r){var i=this,a,o,s=``,c=i.lockedContent!=null,l=null,u,d,f=i.options.scrollable,p={rowTemplate:i.rowTemplate,altRowTemplate:i.altRowTemplate,groupFooterTemplate:i.groupFooterTemplate,groupHeaderColumnTemplate:i.groupHeaderColumnTemplate};let m=i._isStackedMode();if(f&&f.endless&&!i.dataSource.options.endless&&(i._skipRerenderItemsCount=0,i.content&&(i.content[0].scrollTop=0)),l=i._skipRerenderItemsCount>0,t=c?t-X(_r(i.columns)).length:t,m&&(t=i.table.find(`col`).length),r>0)for(t=c?t-r:t,i.detailTemplate&&!m&&t++,i.groupFooterTemplate&&(i._groupAggregatesDefaultObject=i.dataSource.aggregates()),i.options.scrollable.endless&&(d=i.dataSource.flatView().length),a=0,o=e.length;a<o;a++)i._skippedGroups||=[],u=d&&a===e.length-1&&d!==i.dataSource.total(),s+=i._groupRowHtml(e[a],t,0,c?fi:di,p,c,u,!1);else s+=i._rowsHtml(e,p);l?(i.tbody.append(s),n.applyStylesFromKendoAttributes(i.tbody,[`display`,`left`,`right`]),clearTimeout(i._endlessFetchTimeOut),i._endlessFetchTimeOut=setTimeout(function(){i._groupToCollapse&&=(i.collapseGroup(i._groupToCollapse),null)}),i._endlessFetchInProgress=null):i.tbody=Dr(i.tbody,i.table,s,this.options.size)},_renderGroupRows:function(){var t=this,r=t._groupRows,i=t.wrapper.find(`.`+L),a=t._groups(),o,s=t.lockedContent!=null,c,l,u,d,f,p,h,_,v,y,b,x,S,C,w,T;i.each(function(i,E){S=e(E),v=S.closest(`table`).parent(),y=v.is(`.k-grid-content-locked`),c=X(q(y?J(t.columns):Y(t.columns))),C=S.find(`.k-group-cell`).length,s?(o=y?di:fi,l=y?c.length+a-C:c.length):(o=di,l=c.length+a-C),u=i>=r.length?r[i-r.length]:r[i],d=u.field,f=g(Z(t.columns),function(e){return e.field==d})[0]||{},T=!f.groupHeaderTemplate&&q(t.columns)[0].groupHeaderColumnTemplate?q(t.columns)[0]:!1,p=f.groupHeaderTemplate?f.groupHeaderTemplate:q(t.columns)[0].groupHeaderColumnTemplate,h=(f.title&&(t.options.encodeTitles?mi(f.title,!0):f.title)||mi(d,!0))+`: `+Pr(u.value,f.format,f.values,f.encoded),a=a,_=t._groupData(u,!1,T),w=y?t.lockedGroupHeaderColumnTemplate:t.groupHeaderColumnTemplate,p&&(h=typeof p===z?p(_):n.template(p)(_)),b=S.prev().length?S.prev():S.parent(),x=e(w?w(m({},_,{groupCells:C,colspan:a-C,text:h})):o(l,C,h,null,null,null,W,t._isStackedMode())),n.applyStylesFromKendoAttributes(x,[`display`,`left`,`right`]),b.is(`tbody`)?b.prepend(x):b.after(x),S.remove()})},_renderLockedContent:function(e,t,n){var r=``,i,a,o,s=null,c,l={rowTemplate:this.lockedRowTemplate,altRowTemplate:this.lockedAltRowTemplate,groupFooterTemplate:this.lockedGroupFooterTemplate,groupHeaderColumnTemplate:this.lockedGroupHeaderColumnTemplate};if(this.lockedContent){var u=this.lockedTable;if(s=this._skipRerenderItemsCount>0,n>0)for(t-=q(Z(Y(this.columns))).length,this.options.scrollable.endless&&(c=this.dataSource.flatView().length),i=0,a=e.length;i<a;i++)o=c&&i===e.length-1&&c!==this.dataSource.total(),r+=this._groupRowHtml(e[i],t,0,di,l,!1,o,!0);else r=this._rowsHtml(e,l);s?u.children(`tbody`).append(r):Dr(u.children(`tbody`),u,r,this.options.size),this._syncLockedContentHeight()}},_togglePagerVisibility:function(){this.options.pageable.alwaysVisible===!1&&this.wrapper.find(`.k-grid-pager`).toggle(this.dataSource.total()>=this.dataSource.pageSize())},_adjustRowsHeight:function(e,t){var n=e[0].rows,r=n.length,i,a=t[0].rows,o=e.add(t),s=o.length,c=[];for(i=0;i<r&&a[i];i++)n[i].style.height&&(n[i].style.height=a[i].style.height=``);for(i=0;i<r&&a[i];i++){var l=n[i].getBoundingClientRect().height,u=a[i].getBoundingClientRect().height,d=0;l>u?d=l:l<u&&(d=u),c.push(d)}for(i=0;i<s;i++)o[i].style.display=U;for(i=0;i<r;i++)c[i]&&(n[i].style.height=a[i].style.height=c[i]+`px`);for(i=0;i<s;i++)o[i].style.display=``}});n.ExcelMixin&&n.ExcelMixin.extend(Jr.prototype),n.PDFMixin&&(n.PDFMixin.extend(Jr.prototype),Jr.prototype._drawPDF_autoPageBreak=function(r){var i=this,a=new e.Deferred,o=i.dataSource,s=i.options.pdf.allPages,c=i.wrapper.find(`> table > tbody, .k-grid-content > table > tbody`).first(),l=e(`<div>`).css({position:`absolute`,left:-1e4,top:-1e4}),u;i.toggleUnexportableColumns(i.columns),u=i.wrapper.clone().css({height:gt,width:gt}).appendTo(l),u.find(`.k-grid-content`).css({height:gt,width:gt,overflow:`visible`}),u.find(`> table, .k-grid-header table, .k-grid-content > table, .k-grid-footer table`).css({height:gt,width:`100%`,overflow:`visible`}),u.find(`.k-grid-pager, .k-grid-toolbar, .k-grouping-header`).remove(),u.find(`.k-grid-header, .k-grid-footer, .k-auto-scrollable`).css({paddingRight:0});var d=u.find(`> table > tbody, .k-grid-content > table > tbody`).first().empty(),f=o.page();function p(){s&&f!==t?(o.one(`change`,m),o.page(f)):(i.refresh(),m())}function m(){l.appendTo(document.body);var t=e.extend({},i.options.pdf,{_destructive:!0,progress:function(e){r.notify({page:e.page,pageNumber:e.pageNum,progress:.5+e.pageNum/e.totalPages/2,totalPages:e.totalPages})}});n.drawing.drawDOM(u,t).always(function(){l.remove()}).then(function(e){a.resolve(e),i.toggleUnexportableColumns(i.columns,!0)}).fail(function(e){a.reject(e)})}function h(){var e=o.page(),t=s?o.totalPages():1;d.append(c.children(`tr:not(.k-detail-row)`)),e<t?o.page(e+1):(o.unbind(`change`,h),p())}return s?(o.bind(`change`,h),o.page(1)):h(),a.promise()},Jr.prototype.toggleUnexportableColumns=function(e,t){for(var n=e.length,r,i,a,o,s=0;s<n;s++)r=e[s],i=r.exportable,t?r._toggledDuringExport?(r._toggledDuringExport=!1,r.hidden?this.showColumn(r):this.hideColumn(r)):r.columns&&this.toggleUnexportableColumns(r.columns,t):(typeof r.exportable==`object`&&(i=r.exportable.pdf),a=!r.hidden&&i!==!1,o=r.hidden&&i===!0,i=a||o,!i&&!r.hidden?(r._toggledDuringExport=!0,this.hideColumn(r)):i&&r.hidden?(r._toggledDuringExport=!0,this.showColumn(r)):i&&r.columns&&this.toggleUnexportableColumns(r.columns))},Jr.prototype._drawPDF=function(r){var i=this;if(i.options.pdf.paperSize&&i.options.pdf.paperSize!=gt)return i._drawPDF_autoPageBreak(r);var a=new e.Deferred,o=i.dataSource,s=i.options.pdf.allPages,c=new n.drawing.Group,l=o.page();function u(){s&&l!==t?(o.unbind(`change`,d),o.one(`change`,function(){a.resolve(c)}),o.page(l)):a.resolve(c)}function d(){i.toggleUnexportableColumns(i.columns),i._drawPDFShadow({width:i.wrapper.width()},{avoidLinks:i.options.pdf.avoidLinks}).done(function(e){var t=o.page(),n=s?o.totalPages():1,a={page:e,pageNumber:t,progress:t/n,totalPages:n};i.toggleUnexportableColumns(i.columns,!0),r.notify(a),c.append(a.page),t<n?o.page(t+1):u()}).fail(function(e){a.reject(e)})}return s?(o.bind(`change`,d),o.page(1)):d(),a.promise()});function Yr(e,t){if(e=e[0],t=t[0],e.rows.length!==t.rows.length){var n=e.offsetHeight,r=t.offsetHeight,i,a;n>r?(i=t.rows[t.rows.length-1],Ut.test(i.className)&&(i=t.rows[t.rows.length-2]),a=n-r):(i=e.rows[e.rows.length-1],Ut.test(i.className)&&(i=e.rows[e.rows.length-2]),a=r-n),i.style.height=i.offsetHeight+a+`px`}}function Xr(e,t){var n,r=e.offsetHeight,i=t.offsetHeight;r>i?n=r+`px`:r<i&&(n=i+`px`),n&&(e.style.height=t.style.height=n)}function Zr(e,t){var n,r,i;if(typeof e===B&&e===t||p(e)&&e.name===t)return e;if(_(e)){for(n=0,r=e.length;n<r;n++)if(i=e[n],typeof i===B&&i===t||i.name===t)return i}return null}function Qr(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function $(t,r){if(!(!t||t.length===0))if(r===!0){t=e(t);var i=n.scrollLeft(t.parent());n.focusElement(t),n.scrollLeft(t.parent(),i)}else e(t).one(`focusin`,function(e){e.preventDefault()}).trigger(`focus`)}function $r(e,n){return e.options.groupable&&(n.groupable||n.groupable===t)}function ei(t,n){return!!e.grep(t,function(e){return e.field===n}).length}function ti(e,t){return!(!e.field||e.selectable||t.editable&&!t.editable(e.field)||e.editable&&!e.editable(t))}function ni(t){return e(t).is(`:button,a,:input,a>.k-icon,a>.k-svg-icon,textarea,span.k-select,span.k-icon,span.k-svg-icon,span.k-svg-icon>svg,span.k-svg-icon>svg>path,span.k-link,label.k-checkbox-label,.k-input,.k-multiselect-wrap,.k-picker-wrap,.k-picker-wrap>.k-selected-color,.k-tool-icon,.k-dropdownlist,.k-switch-thumb,.k-switch-track,.k-switch-label-off,.k-switch-label-on`)||e(t).is(`div[contenteditable=true]`)}function ri(t){var r=this,i=e(t.currentTarget),a=i.is(`th`),o=this.table.add(this.lockedTable),s=this.thead&&this.thead.parent().add(e(`>table`,this.lockedHeader)),c=ni(t.target),l=e(t.target).is(`.k-checkbox`),u=e(t.target),d=i.closest(`table`)[0];if(!r._isStackedMode()&&c&&i.find(n.roleSelector(`filtercell`)).length){this._setCurrent(i,null,null,!0);return}d!==o[0]&&d!==o[1]&&d!==s[0]&&d!==s[1]||u.is(re+`,a[class*='-i-caret-alt-down'],[ref='expand-detail-button'], [ref='collapse-detail-button']`)||(this.options.navigatable&&this._setCurrent(i,!1,l),(a||!c)&&setTimeout(function(){var t=e(n._activeElement());(t.hasClass(`k-widget`)||t.hasClass(`k-dropdownlist`)||t.is(`.k-upload .k-upload-button`))&&!t.hasClass(`k-grid-pager`)||t.hasClass(`k-select-checkbox`)||r.table&&(t.is(Re)||!ni(n._activeElement())||!e.contains(d,n._activeElement()))&&$(r.table[0],!0)}),a&&!n.support.touch&&t.preventDefault())}function ii(e,t){if(!t)return 0;var r=0;return n.support.browser.webkit&&(r=e.width()),r}function ai(e){var t;if(typeof e==`string`)return t=e.toLowerCase(),t===`true`?{rows:!0}:{rows:t.indexOf(`rows`)>-1,columns:t.indexOf(`columns`)>-1};if(e===!0)return{rows:!0}}function oi(t,n){var r,i;return t?(n=e(n),!!(n[0]&&C(t[0],n[0])&&(r=n.offset().top-t.offset().top,i=n.outerHeight()/2,(r>=0||w.abs(r)<=i)&&w.floor(r+i)<=t.height()))):!1}function si(e){return e&&(e.hasClass(`k-edit-cell`)||e.parent().hasClass(`k-grid-edit-row`)||e.hasClass(`k-grid-stack-edit-cell`))}function ci({groupHeaderColumnTemplate:e,groupHeaderBuilder:t,colspan:n,templateColspan:r,groupData:i,level:a,text:o,expanded:s,group:c,isGroupPaged:l,stacked:u}){return e?e(m({},i,{groupCells:a,colspan:r,text:o,expanded:s,isRtl:W,uid:c.uid})):t(n,a,o,s,c.uid,l,W,u)}function li(t,r,i){return({colspan:a,text:o,expanded:s,isRtl:c})=>{let l=a+t>0?a+t:0,u=`caret-alt-${c?`left`:`right`}`;return`<td class="k-table-td" colspan="${a+t}"><p class="k-reset">`+n.ui.icon(e(`<a href="\\#" tabindex="-1" ${V}="${s?Dt:Ot}"></a>`),{icon:s?`caret-alt-down`:u})+o+`</p>${i||``}</td>${r?``:Array(l).join(`<td hidden group-header-spanned-hidden></td>`)}`}}function ui(e){return`<td class="k-table-td" colspan="`+e+`"><p class="k-reset">&nbsp;</p></td>${Array(e).join(`<td hidden group-header-spanned-hidden></td>`)}`}function di(t,r,i,a,o,s,c,l,u){return`<tr `+(s?`data-group-uid="`+o+`"`:``)+`class="k-table-group-row k-grouping-row k-table-row">`+fn(r)+`<td class="k-table-td" colspan="`+t+`" aria-expanded="`+!!a+`"><p class="k-reset">`+n.ui.icon(e(`<a href="#" tabindex="-1" `+V+`="`+(a?Dt:Ot)+`"></a>`),{icon:a?`caret-alt-down`:`caret-alt-${c?`left`:`right`}`})+i+`</p>${u||``}</td>${l?``:Array(t).join(`<td hidden group-header-spanned-hidden></td>`)}</tr>`}function fi(e){return`<tr class="k-table-group-row k-grouping-row k-table-row"><td class="k-table-td" colspan="`+e+`" aria-expanded="true"><p class="k-reset">&nbsp;</p></td>${Array(e).join(`<td hidden group-header-spanned-hidden></td>`)}</tr>`}function pi(t,n){t=e(t)[0],n?t.style.display=``:t.style.display=U}function mi(e,t){return(``+e).replace(/&/g,`&amp;`).replace(/</g,`&lt;`).replace(/>/g,`&gt;`).replace(/"/g,function(e){return t?`\\`+e:`&quot;`}).replace(/'/g,`&#39;`)}function hi(e){return!/\S/.test(e)}function gi(e,t){return t.filter(function(t){return t.field===e})[0].title||e}function _i(e,t){return this.dataSource.indexOf(this.dataSource.getByUid(e.uid))-this.dataSource.indexOf(this.dataSource.getByUid(t.uid))}function vi(e){return!(e.exportable===!1||e.exportable&&e.exportable.excel===!1)}r.plugin(Jr),r.plugin(on),m(n.ui.grid,{defaultBodyContextMenu:en,defaultHeadContextMenu:tn,defaultGroupsContextMenu:nn})})(window.kendo.jQuery);var ne=kendo;e.__meta__=te,e.default=ne});
//# sourceMappingURL=kendo.grid.min.js.map