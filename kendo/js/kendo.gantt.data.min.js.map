{"version":3,"file":"kendo.gantt.data.min.js","names":[],"sources":["../../src/kendo.gantt.data.js"],"sourcesContent":["import \"./kendo.data.js\";\nimport \"./kendo.treelist.js\";\n\nexport const __meta__ = {\n    id: \"gantt.data\",\n    name: \"GanttData\",\n    category: \"web\",\n    description: \"The Gantt Data.\",\n    depends: [ \"data\", \"treelist\" ],\n    hidden: true\n};\n\n(function($, undefined) {\n    var isArray = Array.isArray,\n        extend = $.extend,\n        map = $.map,\n\n        kendoData = kendo.data,\n        Query = kendoData.Query,\n        DataSource = kendoData.DataSource,\n        TreeListDataSource = kendoData.TreeListDataSource,\n        TreeListModel = kendoData.TreeListModel,\n\n        PARENTIDFIELD = \"parentId\";\n\n    var createDataSource = function(type, name) {\n        return function(options) {\n            options = isArray(options) ? { data: options } : options;\n\n            var dataSource = options || {};\n            var data = dataSource.data;\n\n            dataSource.data = data;\n\n            if (!(dataSource instanceof type) && dataSource instanceof DataSource) {\n                throw new Error(\"Incorrect DataSource type. Only \" + name + \" instances are supported\");\n            }\n\n            return dataSource instanceof type ? dataSource : new type(dataSource);\n        };\n    };\n\n    var dateCompareValidator = function(input) {\n        if (input.filter(\"[name=end], [name=start], [name=plannedEnd], [name=plannedStart]\").length) {\n            var field = input.attr(\"name\"),\n                picker = kendo.widgetInstance(input, kendo.ui),\n                dates = {},\n                container = input,\n                editable,\n                model;\n\n            while (container !== window && !editable) {\n                container = container.parent();\n\n                editable = container.data(\"kendoEditable\");\n            }\n\n            model = editable ? editable.options.model : null;\n\n            if (!model) {\n                return true;\n            }\n\n            if (field.indexOf(\"planned\") >= 0) {\n                dates.plannedStart = model.plannedStart;\n                dates.plannedEnd = model.plannedEnd;\n            } else {\n                dates.start = model.start;\n                dates.end = model.end;\n            }\n\n            dates[field] = picker ? picker.value() : kendo.parseDate(input.val());\n\n            if (field.indexOf(\"planned\") >= 0) {\n                return dates.plannedStart <= dates.plannedEnd;\n            } else {\n                return dates.start <= dates.end;\n            }\n        }\n\n        return true;\n    };\n\n    var GanttDependency = kendo.data.Model.define({\n        id: \"id\",\n        fields: {\n            id: { type: \"number\", editable: false },\n            predecessorId: { type: \"number\", validation: { required: true } },\n            successorId: { type: \"number\", validation: { required: true } },\n            type: { type: \"number\", validation: { required: true } }\n        }\n    });\n\n    var GanttDependencyDataSource = DataSource.extend({\n        init: function(options) {\n            DataSource.fn.init.call(this, extend(true, {}, {\n                schema: {\n                    modelBase: GanttDependency,\n                    model: GanttDependency\n                }\n            }, options));\n        },\n\n        dependencies: function(id) {\n            var predecessors = this.predecessors(id),\n                successors = this.successors(id);\n\n            predecessors.push.apply(predecessors, successors);\n\n            return predecessors;\n        },\n\n        predecessors: function(id) {\n            return this._dependencies(\"successorId\", id);\n        },\n\n        successors: function(id) {\n            return this._dependencies(\"predecessorId\", id);\n        },\n\n        _dependencies: function(field, id) {\n            var data = this.view();\n            var filter = {\n                field: field,\n                operator: \"eq\",\n                value: id\n            };\n\n            data = new Query(data).filter(filter).toArray();\n\n            return data;\n        }\n    });\n\n    GanttDependencyDataSource.create = createDataSource(GanttDependencyDataSource, \"GanttDependencyDataSource\");\n\n    var GanttTask = TreeListModel.define({\n        fields: {\n            id: { type: \"number\", editable: false },\n            parentId: { type: \"number\", defaultValue: null, nullable: true },\n            orderId: { type: \"number\", validation: { required: true } },\n            title: { type: \"string\", defaultValue: \"New task\" },\n            start: { type: \"date\", validation: { required: true } },\n            end: {\n                type: \"date\",\n                validation: {\n                    required: true,\n                    dateCompare: dateCompareValidator,\n                    message: \"End date should be after or equal to the start date\"\n                }\n            },\n            percentComplete: { type: \"number\", validation: { required: true, min: 0, max: 1, step: 0.01 } },\n            summary: { type: \"boolean\" },\n            expanded: { type: \"boolean\", defaultValue: true },\n            plannedStart: { type: \"date\", defaultValue: null, nullable: true },\n            plannedEnd: {\n                type: \"date\",\n                defaultValue: null,\n                nullable: true,\n                validation: {\n                    dateCompare: dateCompareValidator,\n                    message: \"Planned end date should be after or equal to the planned start date\"\n                }\n            }\n        },\n\n        duration: function() {\n            var end = this.end,\n                start = this.start;\n\n            return end - start;\n        },\n\n        plannedDuration: function() {\n            var end = this.plannedEnd,\n                start = this.plannedStart;\n\n            if (end && start) {\n                return end - start;\n            }\n\n            return 0;\n        },\n\n        isMilestone: function() {\n            return this.duration() === 0;\n        },\n\n        _offset: function(value) {\n            var field = [\"start\", \"end\"],\n                newValue;\n\n            for (var i = 0; i < field.length; i++) {\n                newValue = new Date(this.get(field[i]).getTime() + value);\n                this.set(field[i], newValue);\n            }\n        },\n\n        _offsetPlanned: function(value) {\n            var field = [\"plannedStart\", \"plannedEnd\"],\n                newValue;\n\n            for (var i = 0; i < field.length; i++) {\n                newValue = new Date(this.get(field[i]).getTime() + value);\n                this.set(field[i], newValue);\n            }\n        }\n    });\n\n    GanttTask.define = function(base, options) {\n        if (options === undefined) {\n            options = base;\n            base = GanttTask;\n        }\n\n        var parentId = options.parentId || PARENTIDFIELD;\n\n        options.parentIdField = parentId;\n\n        var model = TreeListModel.define(base, options);\n\n        if (parentId) {\n            model.parentIdField = parentId;\n        }\n\n        return model;\n    };\n\n    var GanttDataSource = TreeListDataSource.extend({\n        init: function(options) {\n            TreeListDataSource.fn.init.call(this, extend(true, {}, {\n                schema: {\n                    modelBase: GanttTask,\n                    model: GanttTask\n                },\n                sort: { field: \"orderId\", dir: \"asc\" }\n            }, options));\n        },\n\n        add: function(task) {\n            if (!task) {\n                return;\n            }\n\n            task = this._toGanttTask(task);\n\n            return this.insert(this.taskSiblings(task).length, task);\n        },\n\n        insert: function(index, task) {\n            if (!task) {\n                return;\n            }\n\n            task = this._toGanttTask(task);\n\n            task.set(\"orderId\", index);\n\n            task = DataSource.fn.insert.call(this, index, task);\n\n            this._reorderSiblings(task, this.taskSiblings(task).length - 1);\n            this._resolveSummaryFields(this.taskParent(task));\n\n            return task;\n        },\n\n        remove: function(task) {\n            var parentId = task.get(\"parentId\"),\n                children = this.taskAllChildren(task);\n\n            this._removeItems(children);\n\n            task = TreeListDataSource.fn.remove.call(this, task);\n\n            this._childRemoved(parentId, task.get(\"orderId\"));\n\n            return task;\n        },\n\n        taskAllChildren: function(task) {\n            var data = [],\n                that = this;\n            var callback = function(task) {\n                var tasks = that.taskChildren(task);\n\n                data.push.apply(data, tasks);\n                map(tasks, callback);\n            };\n\n            if (!!task) {\n                callback(task);\n            } else {\n                data = this.view();\n            }\n\n            return data;\n        },\n\n        taskChildren: function(task, fromView) {\n            var filter = {\n                field: \"parentId\",\n                operator: \"eq\",\n                value: null\n            };\n\n            var order = (this._sort && this._sort.length) ? this._sort : {\n                field: \"orderId\",\n                dir: \"asc\"\n            };\n            var taskId, data;\n\n            if (fromView) {\n                data = this.view();\n            } else {\n                data = this.data();\n            }\n\n            if (!!task) {\n                taskId = task.get(\"id\");\n\n                if (taskId === undefined || taskId === null || taskId === \"\") {\n                    return [];\n                }\n\n                filter.value = taskId;\n            }\n\n            data = new Query(data).filter(filter).sort(order).toArray();\n\n            return data;\n        },\n\n        taskLevel: function(task) {\n            var level = 0,\n                parent = this.taskParent(task);\n\n            while (parent !== null) {\n                level += 1;\n                parent = this.taskParent(parent);\n            }\n\n            return level;\n        },\n\n        taskParent: function(task) {\n            if (!task || task.get(\"parentId\") === null) {\n                return null;\n            }\n            return this.get(task.parentId);\n        },\n\n        taskSiblings: function(task) {\n            if (!task) {\n                return null;\n            }\n\n            var parent = this.taskParent(task);\n\n            return this.taskChildren(parent);\n        },\n\n        taskTree: function(task) {\n            var data = [],\n                current,\n                tasks = this.taskChildren(task, true);\n\n            for (var i = 0, l = tasks.length; i < l; i++) {\n                current = tasks[i];\n                data.push(current);\n\n                if (current.get(\"expanded\")) {\n                    var children = this.taskTree(current);\n\n                    data.push.apply(data, children);\n                }\n            }\n\n            return data;\n        },\n\n        update: function(task, taskInfo) {\n            var that = this,\n                oldValue;\n\n            var offsetChildren = function(parentTask, offset) {\n                var children = that.taskAllChildren(parentTask);\n\n                for (var i = 0, l = children.length; i < l; i++) {\n                    children[i]._offset(offset);\n                }\n            };\n\n            var offsetChildrenPlanned = function(parentTask, offset) {\n                var children = that.taskAllChildren(parentTask);\n\n                for (var i = 0, l = children.length; i < l; i++) {\n                    children[i]._offsetPlanned(offset);\n                }\n            };\n\n            var modelChangeHandler = function(e) {\n                var field = e.field,\n                    model = e.sender;\n\n                switch (field) {\n                    case \"start\":\n                        that._resolveSummaryStart(that.taskParent(model));\n\n                        offsetChildren(model, model.get(field).getTime() - oldValue.getTime());\n                        break;\n                    case \"end\":\n                        that._resolveSummaryEnd(that.taskParent(model));\n                        break;\n                    case \"plannedStart\":\n                        that._resolveSummaryPlannedStart(that.taskParent(model));\n\n                        if (model.get(field) && oldValue) {\n                            offsetChildrenPlanned(model, model.get(field).getTime() - oldValue.getTime());\n                        }\n                        break;\n                    case \"plannedEnd\":\n                        that._resolveSummaryPlannedEnd(that.taskParent(model));\n                        break;\n                    case \"percentComplete\":\n                        that._resolveSummaryPercentComplete(that.taskParent(model));\n                        break;\n                    case \"orderId\":\n                        that._reorderSiblings(model, oldValue);\n                        break;\n                }\n            };\n\n            if (taskInfo.parentId !== undefined) {\n                oldValue = task.get(\"parentId\");\n\n                if (oldValue !== taskInfo.parentId) {\n                    task.set(\"parentId\", taskInfo.parentId);\n\n                    that._childRemoved(oldValue, task.get(\"orderId\"));\n\n                    task.set(\"orderId\", that.taskSiblings(task).length - 1);\n                    that._resolveSummaryFields(that.taskParent(task));\n                }\n\n                delete taskInfo.parentId;\n            }\n\n            task.bind(\"change\", modelChangeHandler);\n            task.bind(\"equalSet\", modelChangeHandler);\n\n            for (var field in taskInfo) {\n                oldValue = task.get(field);\n\n                if (field === \"plannedStart\" || field === \"plannedEnd\") {\n                    // Update plannedStart and plannedEnd only when oldValue is not undefined or new value is not null\n                    // That limitation is needed to avoid redundant update requests when custom edit template is used\n                    // and the plannedStart and plannedEnd fields are not updated upon edit\n                    if (oldValue !== undefined || taskInfo[field] !== null) {\n                        task.set(field, taskInfo[field]);\n                    }\n                } else if (field === \"start\" || field === \"end\") {\n                    task.set(field, taskInfo[field]);\n                } else if (task.get(field) !== taskInfo[field]) {\n                    task.set(field, taskInfo[field]);\n                }\n            }\n\n            task.unbind(\"change\", modelChangeHandler);\n            task.unbind(\"equalSet\", modelChangeHandler);\n        },\n\n        _childRemoved: function(parentId, index) {\n            var parent = parentId === null ? null : this.get(parentId),\n                children = this.taskChildren(parent);\n\n            for (var i = index, l = children.length; i < l; i++) {\n                children[i].set(\"orderId\", i);\n            }\n\n            this._resolveSummaryFields(parent);\n        },\n\n        _resolveSummaryFields: function(summary) {\n            if (!summary) {\n                return;\n            }\n\n            this._updateSummary(summary);\n\n            if (!this.taskChildren(summary).length) {\n                return;\n            }\n\n            this._resolveSummaryStart(summary);\n            this._resolveSummaryEnd(summary);\n            this._resolveSummaryPlannedStart(summary);\n            this._resolveSummaryPlannedEnd(summary);\n            this._resolveSummaryPercentComplete(summary);\n        },\n\n        _resolveSummaryStart: function(summary) {\n            var that = this;\n            var getSummaryStart = function(parentTask) {\n                var children = that.taskChildren(parentTask);\n                var min = children[0].start.getTime();\n                var currentMin;\n\n                for (var i = 1, l = children.length; i < l; i++) {\n                    currentMin = children[i].start.getTime();\n                    if (currentMin < min) {\n                        min = currentMin;\n                    }\n                }\n\n                return new Date(min);\n            };\n\n            this._updateSummaryRecursive(summary, \"start\", getSummaryStart);\n        },\n\n        _resolveSummaryEnd: function(summary) {\n            var that = this;\n            var getSummaryEnd = function(parentTask) {\n                var children = that.taskChildren(parentTask);\n                var max = children[0].end.getTime();\n                var currentMax;\n\n                for (var i = 1, l = children.length; i < l; i++) {\n                    currentMax = children[i].end.getTime();\n                    if (currentMax > max) {\n                        max = currentMax;\n                    }\n                }\n\n                return new Date(max);\n            };\n\n            this._updateSummaryRecursive(summary, \"end\", getSummaryEnd);\n        },\n\n        _resolveSummaryPlannedStart: function(summary) {\n            var that = this;\n            var getSummaryPlannedStart = function(parentTask) {\n                var children = that.taskChildren(parentTask),\n                    min = null,\n                    currentMin;\n\n                for (var i = 0, l = children.length; i < l; i++) {\n                    if (children[i].plannedStart) {\n                        currentMin = children[i].plannedStart.getTime();\n                        if (!min || currentMin < min) {\n                            min = currentMin;\n                        }\n                    }\n                }\n\n                if (!min) {\n                    return null;\n                }\n\n                return new Date(min);\n            };\n\n            this._updateSummaryRecursive(summary, \"plannedStart\", getSummaryPlannedStart);\n        },\n\n        _resolveSummaryPlannedEnd: function(summary) {\n            var that = this;\n            var getSummaryPlannedEnd = function(parentTask) {\n                var children = that.taskChildren(parentTask),\n                    max = null,\n                    currentMax;\n\n                for (var i = 0, l = children.length; i < l; i++) {\n                    if (children[i].plannedEnd) {\n                        currentMax = children[i].plannedEnd.getTime();\n                        if (!max || currentMax > max) {\n                            max = currentMax;\n                        }\n                    }\n                }\n\n                if (!max) {\n                    return null;\n                }\n\n                return new Date(max);\n            };\n\n            this._updateSummaryRecursive(summary, \"plannedEnd\", getSummaryPlannedEnd);\n        },\n\n        _resolveSummaryPercentComplete: function(summary) {\n            var that = this;\n            var getSummaryPercentComplete = function(parentTask) {\n                var children = that.taskChildren(parentTask);\n                var percentComplete = new Query(children).aggregate([{\n                    field: \"percentComplete\",\n                    aggregate: \"average\"\n                }]);\n\n                return percentComplete.percentComplete.average;\n            };\n\n            this._updateSummaryRecursive(summary, \"percentComplete\", getSummaryPercentComplete);\n        },\n\n        _reorderSiblings: function(task, oldOrderId) {\n            var orderId = task.get(\"orderId\"),\n                direction = orderId > oldOrderId,\n                startIndex = direction ? oldOrderId : orderId,\n                endIndex = direction ? orderId : oldOrderId,\n                newIndex = direction ? startIndex : startIndex + 1,\n                siblings = this.taskSiblings(task);\n\n            if (!siblings.length) {\n                return;\n            }\n\n            endIndex = Math.min(endIndex, siblings.length - 1);\n\n            for (var i = startIndex; i <= endIndex; i++) {\n                if (siblings[i] === task) {\n                    continue;\n                }\n\n                siblings[i].set(\"orderId\", newIndex);\n\n                newIndex += 1;\n            }\n        },\n\n        _toGanttTask: function(task) {\n            if (!(task instanceof GanttTask)) {\n                var taskInfo = task;\n\n                task = DataSource.fn._createNewModel.call(this);\n                task.accept(taskInfo);\n            }\n\n            return task;\n        },\n\n        _updateSummary: function(task) {\n            if (task !== null) {\n                var childCount = this.taskChildren(task).length;\n\n                task.set(\"summary\", childCount > 0);\n            }\n        },\n\n        _updateSummaryRecursive: function(summary, field, callback) {\n            if (!summary) {\n                return;\n            }\n\n            var value = callback(summary);\n\n            summary.set(field, value);\n\n            var parent = this.taskParent(summary);\n\n            if (parent) {\n                this._updateSummaryRecursive(parent, field, callback);\n            }\n        }\n    });\n\n    GanttDataSource.create = createDataSource(GanttDataSource, \"GanttDataSource\");\n\n    extend(true, kendo.data, {\n        GanttDataSource: GanttDataSource,\n        GanttTask: GanttTask,\n        GanttDependencyDataSource: GanttDependencyDataSource,\n        GanttDependency: GanttDependency\n    });\n})(window.kendo.jQuery);\nexport default kendo;\n\n"],"mappings":"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"}