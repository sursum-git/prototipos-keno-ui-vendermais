{"version":3,"file":"kendo.scheduler.min.js","names":[],"sources":["../../src/kendo.scheduler.js"],"sourcesContent":["import \"./kendo.dropdownlist.js\";\nimport \"./kendo.editable.js\";\nimport \"./kendo.multiselect.js\";\nimport \"./kendo.window.js\";\nimport \"./kendo.datetimepicker.js\";\nimport \"./kendo.scheduler.recurrence.js\";\nimport \"./kendo.scheduler.view.js\";\nimport \"./kendo.scheduler.dayview.js\";\nimport \"./kendo.scheduler.agendaview.js\";\nimport \"./kendo.scheduler.monthview.js\";\nimport \"./kendo.scheduler.timelineview.js\";\nimport \"./kendo.scheduler.yearview.js\";\nimport \"./kendo.dialog.js\";\nimport \"./kendo.pane.js\";\nimport \"./kendo.pdf.js\";\nimport \"./kendo.switch.js\";\nimport \"./kendo.toolbar.js\";\nimport \"./kendo.html.button.js\";\nimport \"./kendo.icons.js\";\n\nexport const __meta__ = {\n    id: \"scheduler\",\n    name: \"Scheduler\",\n    category: \"web\",\n    description: \"The Scheduler is an event calendar.\",\n    depends: [ \"dropdownlist\", \"editable\", \"multiselect\", \"window\", \"datepicker\", \"datetimepicker\", \"toolbar\", \"scheduler.recurrence\", \"scheduler.view\", \"html.button\", \"icons\" ],\n    features: [ {\n        id: \"scheduler-dayview\",\n        name: \"Scheduler Day View\",\n        description: \"Scheduler Day View\",\n        depends: [ \"scheduler.dayview\" ]\n    }, {\n        id: \"scheduler-agendaview\",\n        name: \"Scheduler Agenda View\",\n        description: \"Scheduler Agenda View\",\n        depends: [ \"scheduler.agendaview\" ]\n    }, {\n        id: \"scheduler-monthview\",\n        name: \"Scheduler Month View\",\n        description: \"Scheduler Month View\",\n        depends: [ \"scheduler.monthview\" ]\n    }, {\n        id: \"scheduler-timelineview\",\n        name: \"Scheduler Timeline View\",\n        description: \"Scheduler Timeline View\",\n        depends: [ \"scheduler.timelineview\" ]\n    }, {\n        id: \"scheduler-yearview\",\n        name: \"Scheduler Year View\",\n        description: \"Scheduler Year View\",\n        depends: [ \"scheduler.yearview\" ]\n    }, {\n        id: \"scheduler-mobile\",\n        name: \"Scheduler adaptive rendering\",\n        description: \"Support for adaptive rendering\",\n        depends: [ \"dialog\", \"pane\", \"switch\" ]\n    }, {\n        id: \"scheduler-pdf-export\",\n        name: \"PDF export\",\n        description: \"Export the scheduler events as PDF\",\n        depends: [ \"pdf\", \"drawing\" ]\n    }, {\n        id: \"scheduler-timezones\",\n        name: \"Timezones\",\n        description: \"Allow selecting timezones different than Etc/UTC\",\n        depends: [ \"timezones\" ]\n    }]\n};\n\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        date = kendo.date,\n        MS_PER_DAY = date.MS_PER_DAY,\n        getDate = date.getDate,\n        getMilliseconds = kendo.date.getMilliseconds,\n        recurrence = kendo.recurrence,\n        encode = kendo.htmlEncode,\n        keys = kendo.keys,\n        ui = kendo.ui,\n        Widget = ui.Widget,\n        DataBoundWidget = ui.DataBoundWidget,\n        STRING = \"string\",\n        Popup = ui.Popup,\n        Calendar = ui.Calendar,\n        DataSource = kendo.data.DataSource,\n        isPlainObject = $.isPlainObject,\n        extend = $.extend,\n        toString = Object.prototype.toString,\n        isArray = Array.isArray,\n        NS = \".kendoScheduler\",\n        CLICK = \"click\",\n        MOUSEDOWN = \"mousedown\",\n        TOUCHSTART = kendo.support.pointers ? \"pointerdown\" : \"touchstart\",\n        TOUCHMOVE = kendo.support.pointers ? \"pointermove\" : \"touchmove\",\n        TOUCHEND = kendo.support.pointers ? \"pointerup\" : \"touchend\",\n        MOUSEMOVE = kendo.support.mousemove,\n        CHANGE = \"change\",\n        PROGRESS = \"progress\",\n        ERROR = \"error\",\n        CANCEL = \"cancel\",\n        REMOVE = \"remove\",\n        RESET = \"resetSeries\",\n        SAVE = \"save\",\n        ADD = \"add\",\n        EDIT = \"edit\",\n        DISABLED = \"disabled\",\n        OPTION = \"option\",\n        FOCUSEDSTATE = \"k-focus\",\n        INVERSECOLORCLASS = \"k-event-inverse\",\n        valueStartEndBoundRegex = /(?:value:start|value:end)(?:,|$)/,\n        MIN_SCREEN = \"(min-width: 1024px)\",\n        TODAY = getDate(new Date()),\n        EXCEPTION_SEPARATOR = \",\",\n        OLD_EXCEPTION_SEPARATOR_REGEXP = /\\;/g,\n        RECURRENCE_EXCEPTION = \"recurrenceException\",\n        DELETECONFIRM = \"Are you sure you want to delete this event?\",\n        DELETERECURRING = \"Do you want to delete only this event occurrence or the whole series?\",\n        EDITRECURRING = \"Do you want to edit only this event occurrence or the whole series?\",\n        DELETERECURRINGCONFIRM = \"Are you sure you want to delete this event occurrence?\",\n        RESETSERIESCONFIRM = \"Are you sure you want to reset the whole series?\",\n        DELETESERIESCONFIRM = \"Are you sure you want to delete the whole series?\",\n        ONGOING_CLASS = \"k-event-ongoing\",\n        COMMANDBUTTONTMPL = ({ className, attr, text, icon, fillMode, themeColor }) =>\n            kendo.html.renderButton(`<button type=\"button\" class=\"${className}\" ${attr}>${text}</button>`, {\n                icon: icon,\n                fillMode: fillMode,\n                themeColor: themeColor\n            }),\n        VIEWS_DROPDOWN_TEMPLATE = kendo.template(({ label, views, type }) =>\n            `<select aria-label=\"${label}\" class=\"k-picker k-dropdown-list k-dropdown ${type}\">` +\n                Object.keys(views).map((view) => `<option value=\"${view}\">${views[view].title}</option>`).join('') +\n            '</select>'\n        ),\n\n        DEFAULT_TOOLS = {\n            pdf: {\n                name: \"pdf\",\n                type: \"button\",\n                icon: \"file-pdf\",\n                attributes: {\n                    class: \"k-pdf\"\n                }\n            },\n            pdfMobile: {\n                name: \"pdf\",\n                type: \"button\",\n                icon: \"file-pdf\",\n                showText: \"overflow\",\n                attributes: {\n                    class: \"k-pdf\"\n                }\n            },\n            today: {\n                name: \"today\",\n                type: \"button\",\n                attributes: {\n                    \"ref-nav-today\": \"\",\n                }\n            },\n            previous: {\n                name: \"previous\",\n                type: \"button\",\n                icon: \"caret-alt-left\",\n                showText: \"overflow\",\n                attributes: {\n                    \"ref-nav-prev\": \"\",\n                },\n                groupClass: \"k-scheduler-navigation\"\n            },\n            next: {\n                name: \"next\",\n                type: \"button\",\n                icon: \"caret-alt-right\",\n                showText: \"overflow\",\n                attributes: {\n                    \"ref-nav-next\": \"\",\n                },\n                groupClass: \"k-scheduler-navigation\"\n            },\n            current: {\n                name: \"current\",\n                type: \"button\",\n                icon: \"calendar\",\n                fillMode: \"flat\",\n                text: 'placeholder',\n                attributes: {\n                    \"aria-live\": \"polite\",\n                    class: \"k-nav-current\"\n                }\n            },\n            search: {\n                template: '<span class=\"k-scheduler-search k-textbox k-input\">' +\n                        '<input tabindex=\"-1\" autocomplete=\"off\" class=\"k-input-inner k-scheduler-search-input k-input-inner\" />' +\n                        `<span class=\"k-input-suffix\">${kendo.ui.icon(\"search\")}</span>` +\n                    '</span>'\n            },\n            refresh: {\n                name: \"refresh\",\n                type: \"button\",\n                icon: \"arrow-rotate-cw\",\n                showText: \"overflow\",\n                attributes: {\n                    class: \"k-scheduler-refresh\"\n                }\n            },\n            create: {\n                name: \"create\",\n                type: \"button\",\n                icon: \"plus\",\n                attributes: {\n                    class: \"k-create-event\"\n                }\n            },\n            calendar: {\n                name: \"calendar\",\n                type: \"button\",\n                icon: \"calendar\",\n                attributes: {\n                    class: \"k-nav-calendar\"\n                }\n            },\n            previousMobile: {\n                name: \"previous\",\n                type: \"button\",\n                icon: \"chevron-left\",\n                showText: \"overflow\",\n                attributes: {\n                    \"ref-nav-prev\": \"\",\n                },\n                groupClass: \"k-scheduler-navigation\"\n            },\n            nextMobile: {\n                name: \"next\",\n                type: \"button\",\n                icon: \"chevron-right\",\n                showText: \"overflow\",\n                attributes: {\n                    \"ref-nav-next\": \"\",\n                },\n                groupClass: \"k-scheduler-navigation\"\n            },\n            currentMobile: {\n                template: '<span class=\"k-scheduler-navigation\">' +\n                        '<span class=\"k-nav-current\">' +\n                            '<span class=\"k-m-date-format\"></span>' +\n                            '<span class=\"k-y-date-format\"></span>' +\n                        '</span>' +\n                    '</span>'\n            },\n            view: {\n                name: \"view\",\n                type: \"button\",\n                togglable: true,\n                group: \"views\"\n            }\n        },\n\n        defaultDesktopTools = [\n            [\"today\", \"previous\", \"next\"],\n            \"current\",\n            { type: \"spacer\" }\n        ],\n\n        defaultMobileToolsFirst = [\n            [\"calendar\"],\n            { type: \"spacer\" }\n        ],\n\n        defaultMobileToolsSecond = [\n            \"previousMobile\",\n            { type: \"spacer\" },\n            \"currentMobile\",\n            { type: \"spacer\" },\n            \"nextMobile\"\n        ],\n\n        MOBILEDATERANGEEDITOR = function(container, options) {\n            var attr = { name: options.field, title: options.title };\n            var isAllDay = options.model.isAllDay;\n            var dateTimeValidate = kendo.attr(\"validate\") + \"='\" + (!isAllDay) + \"'\";\n            var dateValidate = kendo.attr(\"validate\") + \"='\" + (!!isAllDay) + \"'\";\n\n            appendTimezoneAttr(attr, options);\n            appendValidDateValidator(attr, options);\n            appendDateCompareValidator(attr, options);\n\n            $('<input type=\"datetime-local\" required ' + kendo.attr(\"type\") + '=\"datetime-local\" ' + kendo.attr(\"bind\") + '=\"value:' + options.field + ', invisible:isAllDay\" ' + dateTimeValidate + '/>')\n                .attr(attr)\n                .appendTo(container);\n\n            $('<input type=\"date\" required ' + kendo.attr(\"type\") + '=\"date\" ' + kendo.attr(\"bind\") + '=\"value:' + options.field + ',visible:isAllDay\" ' +\n                dateValidate + '/>')\n                .attr(attr).appendTo(container);\n\n            $('<span ' + kendo.attr(\"for\") + '=\"' + options.field + '\" class=\"k-invalid-msg\"/>').hide().appendTo(container);\n        },\n        DATERANGEEDITOR = function(container, options) {\n            var attr = { name: options.field, title: options.title },\n                isAllDay = options.model.isAllDay,\n                dateTimeValidate = kendo.attr(\"validate\") + \"='\" + (!isAllDay) + \"' \",\n                dateValidate = kendo.attr(\"validate\") + \"='\" + (!!isAllDay) + \"' \";\n\n            appendTimezoneAttr(attr, options);\n            appendValidDateValidator(attr, options);\n            appendDateCompareValidator(attr, options);\n\n            $('<input type=\"text\" required ' + kendo.attr(\"type\") + '=\"date\"' + ' ' + kendo.attr(\"role\") + '=\"datetimepicker\" ' + kendo.attr(\"bind\") + '=\"value:' + options.field + ',invisible:isAllDay\" ' +\n                dateTimeValidate + '/>')\n            .attr(attr).appendTo(container);\n\n            $('<input type=\"text\" required ' + kendo.attr(\"type\") + '=\"date\"' + ' ' + kendo.attr(\"role\") + '=\"datepicker\" ' + kendo.attr(\"bind\") + '=\"value:' + options.field + ',visible:isAllDay\" ' +\n                dateValidate + '/>')\n            .attr(attr).appendTo(container);\n\n            $('<span ' + kendo.attr(\"bind\") + '=\"text: ' + options.field + 'Timezone\"></span>').appendTo(container);\n\n            if (options.field === \"end\") {\n                $('<span ' + kendo.attr(\"bind\") + '=\"text: startTimezone, invisible: endTimezone\"></span>').appendTo(container);\n            }\n\n            $('<span ' + kendo.attr(\"for\") + '=\"' + options.field + '\" class=\"k-invalid-msg\"/>').hide().appendTo(container);\n        },\n        RECURRENCEEDITOR = function(container, options) {\n            $('<div ' + kendo.attr(\"bind\") + '=\"value:' + options.field + '\" />')\n                .attr({\n                    name: options.field\n                })\n                .appendTo(container)\n                .kendoRecurrenceEditor({\n                    start: options.model.start,\n                    timezone: options.timezone,\n                    messages: options.messages\n                });\n        },\n        MOBILERECURRENCEEDITOR = function(container, options) {\n            $('<div ' + kendo.attr(\"bind\") + '=\"value:' + options.field + '\" />')\n                .attr({\n                    name: options.field\n                })\n                .appendTo(container)\n                .kendoMobileRecurrenceEditor({\n                    start: options.model.start,\n                    timezone: options.timezone,\n                    messages: options.messages,\n                    pane: options.pane,\n                    value: options.model[options.field]\n                });\n        },\n        MOBILEISALLDAYEDITOR = function(container, options) {\n            $('<input type=\"checkbox\" data-role=\"switch\"' + kendo.attr(\"bind\") + '=\"value:' + options.field + '\" />').appendTo(container);\n        },\n        ISALLDAYEDITOR = function(container, options) {\n            $('<input type=\"checkbox\" data-role=\"checkbox\"' + kendo.attr(\"bind\") + '=\"value:' + options.field + '\" data-label=\"' + options.title + '\" />')\n                .attr({\n                    id: options.field,\n                    name: options.field,\n                    title: options.title ? options.title : options.field\n                })\n                .appendTo(container);\n        },\n        MOBILETIMEZONEPOPUP = function(container, options) {\n            var text = timezoneButtonText(options.model, options.messages.noTimezone);\n            $('<span class=\"k-timezone-label\"></span>').text(text).appendTo(container);\n            $(kendo.ui.icon(\"arrow-chevron-right\")).appendTo(container);\n            container.closest(\"li.k-item label\").on(CLICK, options.click);\n        },\n        TIMEZONEPOPUP = function(container, options) {\n            $('<a href=\"#\" class=\"k-button\" data-bind=\"invisible:isAllDay\"><span class=\"k-button-text\">' + options.messages.timezoneEditorButton + '</span></a>').on(CLICK, options.click).appendTo(container);\n        },\n        MOBILETIMEZONEEDITOR = function(container, options) {\n            $('<div class=\"k-mobiletimezoneeditor\" ' + kendo.attr(\"bind\") + '=\"value:' + options.field + '\" />')\n                .attr({\n                    name: options.field\n                })\n                .appendTo(container)\n                .kendoMobileTimezoneEditor({\n                    optionLabel: options.noTimezone\n                });\n        },\n        TIMEZONEEDITOR = function(container, options) {\n            var visible = options.visible || options.visible === undefined;\n            $('<div ' + kendo.attr(\"bind\") + '=\"value:' + options.field + '\" />')\n                .attr({ name: options.field })\n                .toggle(visible)\n                .appendTo(container)\n                .kendoTimezoneEditor({\n                    optionLabel: options.noTimezone,\n                    title: options.title\n                });\n        };\n\n    function timezoneButtonText(model, message) {\n        message = message || \"\";\n\n        if (model.startTimezone) {\n            message = model.startTimezone;\n\n            if (model.endTimezone) {\n                message += \" | \" + model.endTimezone;\n            }\n        }\n\n        return message;\n    }\n\n    function appendTimezoneAttr(attrs, options) {\n        var timezone = options.timezone;\n\n        if (timezone) {\n            attrs[kendo.attr(\"timezone\")] = timezone;\n        }\n    }\n\n    function appendValidDateValidator(attrs, options) {\n        var validationRules = options.model.fields[options.field].validation;\n\n        if (validationRules) {\n            var validDateRule = validationRules.validDateValidator;\n            if (validDateRule && isPlainObject(validDateRule) && validDateRule.message) {\n                attrs[kendo.attr(\"validDate-msg\")] = validDateRule.message;\n            }\n        }\n    }\n\n    function appendDateCompareValidator(attrs, options) {\n        var validationRules = options.model.fields[options.field].validation;\n\n        if (validationRules) {\n            var dateCompareRule = validationRules.dateCompare;\n            if (dateCompareRule && isPlainObject(dateCompareRule) && dateCompareRule.message) {\n                attrs[kendo.attr(\"dateCompare-msg\")] = dateCompareRule.message;\n            }\n        }\n    }\n\n    function wrapDataAccess(originalFunction, timezone) {\n        return function(data) {\n            data = originalFunction(data);\n\n            convertData(data, \"apply\", timezone);\n\n            return data || [];\n        };\n    }\n\n    function wrapDataSerialization(originalFunction, timezone) {\n        return function(data) {\n\n            if (data) {\n                if (toString.call(data) !== \"[object Array]\" && !(data instanceof kendo.data.ObservableArray)) {\n                    data = [data];\n                }\n            }\n\n            convertData(data, \"remove\", timezone, true);\n\n            data = originalFunction(data);\n\n            return data || [];\n        };\n    }\n\n    function convertData(data, method, timezone, removeUid) {\n        var event,\n            idx,\n            length,\n            startOffset,\n            endOffset;\n\n        data = data || [];\n\n        for (idx = 0, length = data.length; idx < length; idx++) {\n            event = data[idx];\n            startOffset = event.start ? event.start.getTimezoneOffset() : null;\n            endOffset = event.start ? event.end.getTimezoneOffset() : null;\n\n            if (removeUid) {\n                if (event.startTimezone || event.endTimezone) {\n                    if (timezone) {\n                        event.start = kendo.timezone.convert(event.start, event.startTimezone || event.endTimezone, timezone);\n                        event.end = kendo.timezone.convert(event.end, event.endTimezone || event.startTimezone, timezone);\n\n                        event.start = kendo.timezone[method](event.start, timezone);\n                        event.end = kendo.timezone[method](event.end, timezone);\n                    } else {\n                        event.start = kendo.timezone[method](event.start, event.startTimezone || event.endTimezone);\n                        event.end = kendo.timezone[method](event.end, event.endTimezone || event.startTimezone);\n                    }\n\n                } else if (timezone) {\n                    event.start = kendo.timezone[method](event.start, timezone);\n                    event.end = kendo.timezone[method](event.end, timezone);\n                }\n            } else {\n                if (event.startTimezone || event.endTimezone) {\n                    event.start = kendo.timezone[method](event.start, event.startTimezone || event.endTimezone);\n                    event.end = kendo.timezone[method](event.end, event.endTimezone || event.startTimezone);\n\n                    if (timezone) {\n                        event.start = kendo.timezone.convert(event.start, event.startTimezone || event.endTimezone, timezone);\n                        event.end = kendo.timezone.convert(event.end, event.endTimezone || event.startTimezone, timezone);\n                    }\n\n                } else if (timezone) {\n                    event.start = kendo.timezone[method](event.start, timezone);\n                    event.end = kendo.timezone[method](event.end, timezone);\n                }\n            }\n\n            if (removeUid) {\n                delete event.uid;\n            }\n\n            if (method === \"remove\" && event.start && startOffset && startOffset !== event.start.getTimezoneOffset()) {\n                event.start = new Date(event.start.getTime() + (startOffset - event.start.getTimezoneOffset()) * 60000);\n            }\n            if (method === \"remove\" && event.end && endOffset && endOffset !== event.end.getTimezoneOffset()) {\n                event.end = new Date(event.end.getTime() + (endOffset - event.end.getTimezoneOffset()) * 60000);\n            }\n        }\n        return data;\n    }\n\n    function getOccurrenceByUid(data, uid) {\n        var length = data.length,\n            idx = 0,\n            event;\n\n        for (; idx < length; idx++) {\n            event = data[idx];\n\n            if (event.uid === uid) {\n                return event;\n            }\n        }\n    }\n\n    var SchedulerDataReader = kendo.Class.extend({\n        init: function(schema, reader) {\n            var timezone = schema.timezone;\n\n            this.reader = reader;\n\n            if (reader.model) {\n                this.model = reader.model;\n            }\n\n            this.timezone = timezone;\n            this.data = wrapDataAccess(this.data.bind(this), timezone);\n            this.serialize = wrapDataSerialization(this.serialize.bind(this), timezone);\n        },\n        errors: function(data) {\n            return this.reader.errors(data);\n        },\n        parse: function(data) {\n            return this.reader.parse(data);\n        },\n        data: function(data) {\n            return this.reader.data(data);\n        },\n        total: function(data) {\n            return this.reader.total(data);\n        },\n        groups: function(data) {\n            return this.reader.groups(data);\n        },\n        aggregates: function(data) {\n            return this.reader.aggregates(data);\n        },\n        serialize: function(data) {\n            return this.reader.serialize(data);\n        }\n    });\n\n    function applyZone(date, fromZone, toZone) {\n        if (toZone) {\n            date = kendo.timezone.convert(date, fromZone, toZone);\n        } else {\n            date = kendo.timezone.remove(date, fromZone);\n        }\n\n        return date;\n    }\n\n    function validDateValidator(input) {\n        if ((input.filter(\"[name=start]\").length && input.filter(\"[title=Start]\").length) ||\n            (input.filter(\"[name=end]\").length && input.filter(\"[title=End]\").length) ||\n            input.filter(\".k-recur-until\").length) {\n            var date;\n            var picker = kendo.widgetInstance(input, kendo.ui);\n\n            if (picker) {\n                date = kendo.parseDate(input.val(), picker.options.format);\n                return !!date && picker.value();\n            } else {\n                date = kendo.parseDate(input.val());\n                return !!date;\n            }\n        }\n\n        return true;\n    }\n\n    function dateCompareValidator(input) {\n        if (input.filter(\"[name=end]\").length) {\n            var container = input.closest(\".k-scheduler-edit-form\");\n            var startInput = container.find(\"[name=start]:visible\");\n            var endInput = container.find(\"[name=end]:visible\");\n\n            if (endInput[0] && startInput[0]) {\n                var start, end;\n                var startPicker = kendo.widgetInstance(startInput, kendo.ui);\n                var endPicker = kendo.widgetInstance(endInput, kendo.ui);\n\n                var editable = container.data(\"kendoEditable\");\n                var model = editable ? editable.options.model : null;\n\n                if (startPicker && endPicker) {\n                    start = startPicker.value();\n                    end = endPicker.value();\n                } else {\n                    start = kendo.parseDate(startInput.val());\n                    end = kendo.parseDate(endInput.val());\n                }\n\n                if (start && end) {\n                    if (model) {\n                        var timezone = startInput.attr(kendo.attr(\"timezone\"));\n                        var startTimezone = model.startTimezone;\n                        var endTimezone = model.endTimezone;\n\n                        startTimezone = startTimezone || endTimezone;\n                        endTimezone = endTimezone || startTimezone;\n\n                        if (startTimezone) {\n                            start = applyZone(start, startTimezone, timezone);\n                            end = applyZone(end, endTimezone, timezone);\n                        }\n                    }\n\n                    return start <= end;\n                }\n            }\n        }\n\n        return true;\n    }\n\n    function untilDateCompareValidator(input) {\n        var untilPicker, until,\n            container, startInput, start, startPicker;\n\n        if (input.filter(\".k-recur-until\").length) {\n            untilPicker = kendo.widgetInstance(input, kendo.ui);\n            until = untilPicker.value();\n            container = input.closest(\".k-scheduler-edit-form\");\n            startInput = container.find(\"[name=start]:visible\");\n\n            if (startInput[0]) {\n                startPicker = kendo.widgetInstance(startInput, kendo.ui);\n\n                if (startPicker) {\n                    start = startPicker.value();\n                } else {\n                    start = kendo.parseDate(startInput.val());\n                }\n\n                if (start && until) {\n                    return start <= until;\n                }\n            }\n        }\n\n        return true;\n    }\n\n    var SchedulerEvent = kendo.data.Model.define({\n        init: function(value) {\n            var that = this;\n\n            kendo.data.Model.fn.init.call(that, value);\n\n            that._defaultId = that.defaults[that.idField];\n        },\n\n        _time: function(field) {\n            var date = this[field];\n            var fieldTime = \"_\" + field + \"Time\";\n\n            if (this[fieldTime]) {\n                return this[fieldTime] - kendo.date.toUtcTime(kendo.date.getDate(date));\n            }\n\n            return getMilliseconds(date);\n        },\n\n        _date: function(field) {\n            var fieldTime = \"_\" + field + \"Time\";\n\n            if (this[fieldTime]) {\n                return this[fieldTime] - this._time(field);\n            }\n\n            return kendo.date.getDate(this[field]);\n        },\n\n        clone: function(options, updateUid) {\n            var uid = this.uid,\n                event = new this.constructor($.extend({}, this.toJSON(), options));\n\n            if (!updateUid) {\n                event.uid = uid;\n            }\n\n            return event;\n        },\n\n        duration: function() {\n            var end = this.end;\n            var start = this.start;\n            var offset = (end.getTimezoneOffset() - start.getTimezoneOffset()) * kendo.date.MS_PER_MINUTE;\n\n            return end - start - offset;\n        },\n\n        expand: function(start, end, zone) {\n            return recurrence ? recurrence.expand(this, start, end, zone) : [this];\n        },\n\n        update: function(eventInfo) {\n            for (var field in eventInfo) {\n                this.set(field, eventInfo[field]);\n            }\n\n            if (this._startTime) {\n                this.set(\"_startTime\", kendo.date.toUtcTime(this.start));\n            }\n\n            if (this._endTime) {\n                this.set(\"_endTime\", kendo.date.toUtcTime(this.end));\n            }\n        },\n\n        isMultiDay: function() {\n            return this.isAllDay || this.duration() >= kendo.date.MS_PER_DAY;\n        },\n\n        isException: function() {\n            return !this.isNew() && this.recurrenceId;\n        },\n\n        isOccurrence: function() {\n            return this.isNew() && this.recurrenceId;\n        },\n\n        isRecurring: function() {\n            return !!(this.recurrenceRule || this.recurrenceId);\n        },\n\n        isRecurrenceHead: function() {\n            return !!(this.id && this.recurrenceRule);\n        },\n\n        toOccurrence: function(options) {\n            options = $.extend(options, {\n                recurrenceException: null,\n                recurrenceRule: null,\n                recurrenceId: this.id || this.recurrenceId\n            });\n\n            options[this.idField] = this.defaults[this.idField];\n\n            return this.clone(options, true);\n        },\n\n        toJSON: function() {\n            var obj = kendo.data.Model.fn.toJSON.call(this);\n            obj.uid = this.uid;\n\n            delete obj._startTime;\n            delete obj._endTime;\n\n            return obj;\n        },\n\n        shouldSerialize: function(field) {\n            return kendo.data.Model.fn.shouldSerialize.call(this, field) && field !== \"_defaultId\";\n        },\n\n        set: function(key, value) {\n            var isAllDay = this.isAllDay || false;\n\n            kendo.data.Model.fn.set.call(this, key, value);\n\n            if (key == \"isAllDay\" && value != isAllDay) {\n                var start = kendo.date.getDate(this.start);\n                var end = new Date(this.end);\n                var milliseconds = kendo.date.getMilliseconds(end);\n\n                if (milliseconds === 0 && value) {\n                    milliseconds = MS_PER_DAY;\n                }\n\n                this.set(\"start\", start);\n\n                if (value === true) {\n                    kendo.date.setTime(end, -milliseconds);\n\n                    if (end < start) {\n                        end = start;\n                    }\n                } else {\n                    kendo.date.setTime(end, MS_PER_DAY - milliseconds);\n                }\n\n                this.set(\"end\", end);\n            }\n        },\n        id: \"id\",\n        fields: {\n            id: { type: \"number\" },\n            title: { defaultValue: \"\", type: \"string\" },\n            start: { type: \"date\", validation: { required: true, validDate: { value: validDateValidator } } },\n            startTimezone: { type: \"string\" },\n            end: {\n                type: \"date\",\n                validation: {\n                    required: true,\n                    validDate: { value: validDateValidator },\n                    dateCompare: { value: dateCompareValidator }\n                }\n            },\n            endTimezone: { type: \"string\" },\n            recurrenceRule: {\n                defaultValue: \"\",\n                type: \"string\",\n                validation: {\n                    validDate: { value: validDateValidator },\n                    untilDateCompare: { value: untilDateCompareValidator }\n                }\n            },\n            recurrenceException: { defaultValue: \"\", type: \"string\" },\n            isAllDay: { type: \"boolean\", defaultValue: false },\n            description: { type: \"string\" }\n        }\n    });\n\n    var SchedulerDataSource = DataSource.extend({\n        init: function(options) {\n\n            DataSource.fn.init.call(this, extend(true, {}, {\n                schema: {\n                    modelBase: SchedulerEvent,\n                    model: SchedulerEvent\n                }\n            }, options));\n\n            this.reader = new SchedulerDataReader(this.options.schema, this.reader);\n        },\n\n        expand: function(start, end) {\n            var data = this.view(),\n                filter = {},\n                endOffset;\n\n            if (start && end) {\n                endOffset = end.getTimezoneOffset();\n                end = new Date(end.getTime() + MS_PER_DAY - 1);\n\n                if (end.getTimezoneOffset() !== endOffset) {\n                    end = kendo.timezone.apply(end, endOffset);\n                }\n\n                filter = {\n                    logic: \"or\",\n                    filters: [\n                        {\n                            logic: \"and\",\n                            filters: [\n                                { field: \"start\", operator: \"gte\", value: start },\n                                { field: \"end\", operator: \"gte\", value: start },\n                                { field: \"start\", operator: \"lte\", value: end }\n                            ]\n                        },\n                        {\n                            logic: \"and\",\n                            filters: [\n                                { field: \"start\", operator: \"lte\", value: new Date(start.getTime() + MS_PER_DAY - 1) },\n                                { field: \"end\", operator: \"gte\", value: start }\n                            ]\n                        }\n                    ]\n                };\n\n                data = new kendo.data.Query(expandAll(data, start, end, this.reader.timezone)).filter(filter).toArray();\n            }\n\n            return data;\n        },\n\n        cancelChanges: function(model) {\n            if (model && model.isOccurrence()) {\n                this._removeExceptionDate(model);\n            }\n\n            DataSource.fn.cancelChanges.call(this, model);\n        },\n\n        insert: function(index, model) {\n            if (!model) {\n                return;\n            }\n\n            if (!(model instanceof SchedulerEvent)) {\n                var eventInfo = model;\n\n                model = this._createNewModel();\n                model.accept(eventInfo);\n            }\n\n            if ((!this._pushCreated && model.isRecurrenceHead()) || model.recurrenceId) {\n                model = model.recurrenceId ? model : model.toOccurrence();\n                this._addExceptionDate(model);\n            }\n\n            return DataSource.fn.insert.call(this, index, model);\n        },\n\n        pushCreate: function(items) {\n            this._pushCreated = true;\n            DataSource.fn.pushCreate.call(this, items);\n            this._pushCreated = false;\n        },\n\n        remove: function(model) {\n            if (model.isRecurrenceHead()) {\n                this._removeExceptions(model);\n            } else if (model.isRecurring()) {\n                this._addExceptionDate(model);\n            }\n\n            return DataSource.fn.remove.call(this, model);\n        },\n\n        _removeExceptions: function(model) {\n            var data = this.data().slice(0),\n                item = data.shift(),\n                id = model.id;\n\n            while (item) {\n                if (item.recurrenceId === id) {\n                    DataSource.fn.remove.call(this, item);\n                }\n\n                item = data.shift();\n            }\n\n            model.set(RECURRENCE_EXCEPTION, \"\");\n        },\n\n        _removeExceptionDate: function(model) {\n            if (model.recurrenceId) {\n                var head = this.get(model.recurrenceId);\n\n                if (head) {\n                    var start = model.defaults.start;\n                    var replaceRegExp = new RegExp(\"(\\\\\" + EXCEPTION_SEPARATOR + \"?)\" + recurrence.toExceptionString(start, this.reader.timezone));\n                    var recurrenceException = (head.recurrenceException || \"\").replace(OLD_EXCEPTION_SEPARATOR_REGEXP, EXCEPTION_SEPARATOR).replace(/\\,$/, \"\");\n\n                    if (replaceRegExp.test(recurrenceException)) {\n                        head.set(RECURRENCE_EXCEPTION, recurrenceException.replace(replaceRegExp, \"\"));\n                    } else {\n                        start = model.start;\n                        replaceRegExp = new RegExp(\"(\\\\\" + EXCEPTION_SEPARATOR + \"?)\" + recurrence.toExceptionString(start, this.reader.timezone));\n                        head.set(RECURRENCE_EXCEPTION, recurrenceException.replace(replaceRegExp, \"\"));\n                    }\n                }\n            }\n        },\n\n        _addExceptionDate: function(model) {\n            var start = model.start;\n            var zone = this.reader.timezone;\n            var head = this.get(model.recurrenceId);\n            var recurrenceException = (head.recurrenceException || \"\").replace(OLD_EXCEPTION_SEPARATOR_REGEXP, EXCEPTION_SEPARATOR).replace(/\\,$/, \"\");\n\n            if (!recurrence.isException(recurrenceException, start, zone)) {\n                var newException = recurrence.toExceptionString(start, zone);\n                model.defaults.start = start;\n                head.set(RECURRENCE_EXCEPTION, recurrenceException + (recurrenceException && newException ? EXCEPTION_SEPARATOR : \"\") + newException);\n            }\n        }\n    });\n\n    function expandAll(events, start, end, zone) {\n        var length = events.length,\n            data = [],\n            idx = 0;\n\n        for (; idx < length; idx++) {\n            data = data.concat(events[idx].expand(start, end, zone));\n        }\n\n        return data;\n    }\n\n    SchedulerDataSource.create = function(options) {\n        if (isArray(options) || options instanceof kendo.data.ObservableArray) {\n            options = { data: options };\n        }\n\n        var dataSource = options || {},\n            data = dataSource.data;\n\n        dataSource.data = data;\n\n        if (!(dataSource instanceof SchedulerDataSource) && dataSource instanceof kendo.data.DataSource) {\n            throw new Error(\"Incorrect DataSource type. Only SchedulerDataSource instances are supported\");\n        }\n\n        return dataSource instanceof SchedulerDataSource ? dataSource : new SchedulerDataSource(dataSource);\n    };\n\n    extend(true, kendo.data, {\n       SchedulerDataSource: SchedulerDataSource,\n       SchedulerDataReader: SchedulerDataReader,\n       SchedulerEvent: SchedulerEvent\n    });\n\n    var defaultCommands = {\n        update: {\n            text: \"Save\",\n            className: \"k-button-primary k-scheduler-update\"\n        },\n        canceledit: {\n            text: \"Cancel\",\n            className: \"k-scheduler-cancel\"\n        },\n        destroy: {\n            text: \"Delete\",\n            icon: \"trash\",\n            imageClass: \"k-i-trash\",\n            className: \"k-button-primary k-scheduler-delete\",\n            iconClass: \"k-icon\"\n        }\n    };\n\n    function trimOptions(options, overrideOptions) {\n        delete options.name;\n        delete options.prefix;\n\n        delete options.remove;\n        delete options.edit;\n        delete options.add;\n        delete options.navigate;\n\n        for (var key in overrideOptions) {\n            options[key] = overrideOptions[key];\n        }\n\n        return options;\n    }\n\n    /*\n    function fieldType(field) {\n        field = field != null ? field : \"\";\n        return field.type || kendo.type(field) || \"string\";\n    }\n    */\n\n    function descriptionEditor(options) {\n        var attr = createValidationAttributes(options.model, options.field);\n\n        return function(container, model) {\n            $('<textarea name=\"description\" class=\"k-input-inner\" title=\"' + model.title + '\"/>').attr(attr)\n                .appendTo(container)\n                .wrap('<span class=\"k-input k-textarea\"></span>');\n        };\n    }\n\n    function createValidationAttributes(model, field) {\n        var modelField = (model.fields || model)[field];\n        var specialRules = [\"url\", \"email\", \"number\", \"date\", \"boolean\"];\n        var validation = modelField ? modelField.validation : {};\n        // var type = fieldType(modelField);\n        var datatype = kendo.attr(\"type\");\n        var inArray = $.inArray;\n        var ruleName;\n        var rule;\n\n        var attr = {};\n\n        for (ruleName in validation) {\n            rule = validation[ruleName];\n\n            if (inArray(ruleName, specialRules) >= 0) {\n                attr[datatype] = ruleName;\n            } else if (!kendo.isFunction(rule)) {\n                attr[ruleName] = isPlainObject(rule) ? (rule.value || ruleName) : rule;\n            }\n\n            attr[kendo.attr(ruleName + \"-msg\")] = rule.message;\n        }\n\n        return attr;\n    }\n\n    function filterResourceEditorData(editor, parentValue, parentValueField, valueField) {\n        var editorValue = editor.value(),\n            isMs = Array.isArray(editorValue),\n            valueArray;\n\n        if (isMs) {\n            valueArray = JSON.parse(JSON.stringify(editorValue));\n        } else {\n            valueArray = [editorValue.toString()];\n        }\n\n        editor.dataSource.data().forEach(function(item) {\n            if (item[parentValueField] === null || item[parentValueField] === undefined || item[parentValueField] == parentValue) {\n                item.set(DISABLED, false);\n            } else {\n                var currentValue = item.get(valueField);\n\n                item.set(DISABLED, true);\n\n                if (valueArray.indexOf(currentValue) >= 0 || valueArray.indexOf(currentValue.toString()) >= 0) {\n                    if (isMs) {\n                        valueArray.splice(valueArray.indexOf(currentValue), 1);\n                    } else {\n                        editor.value(null);\n                        editor.trigger(CHANGE);\n                    }\n                }\n            }\n        });\n\n        if (isMs && valueArray.length < editorValue.length) {\n            editor.value(valueArray);\n            editor.trigger(CHANGE);\n        }\n    }\n\n    function bindParentValueChangeHandler(container, currentEditor, resource, parent) {\n        var parentElement = container.closest(\".k-edit-form-container\").find(\"[data-\" + kendo.ns + \"bind='value:\" + parent + \"']\");\n        var parentWidget = parentElement.getKendoDropDownList();\n\n        if (parentWidget) {\n            parentWidget.bind(CHANGE, function(ev) {\n                var parentValue = ev.sender.value();\n\n                filterResourceEditorData(currentEditor, parentValue, resource.dataParentValueField, resource.dataValueField);\n            });\n        } else {\n            parentElement.on(CHANGE, function(ev) {\n                var parentValue = ev.target.value;\n\n                filterResourceEditorData(currentEditor, parentValue, resource.dataParentValueField, resource.dataValueField);\n            });\n        }\n    }\n\n    function filterMobileResourceEditorData(resource, currentEditor, parentSelectedValue) {\n        var options = currentEditor.find(OPTION),\n            editorValue = currentEditor.val(),\n            isMs = Array.isArray(editorValue),\n            valueArray;\n\n        if (isMs) {\n            valueArray = JSON.parse(JSON.stringify(editorValue));\n        } else {\n            valueArray = [editorValue];\n        }\n\n        resource.dataSource.view().forEach(function(item, index) {\n            var itemParentValue = kendo.getter(resource.dataParentValueField)(item);\n            var valid = itemParentValue === null || itemParentValue === undefined || itemParentValue == parentSelectedValue;\n\n            if (valid) {\n                options[index].removeAttribute(DISABLED);\n            } else {\n                options[index].setAttribute(DISABLED, DISABLED);\n\n                var currentValue = \"\" + item.get(resource.dataValueField);\n\n                if (valueArray.indexOf(currentValue) >= 0) {\n                    if (isMs) {\n                        valueArray.splice(valueArray.indexOf(currentValue), 1);\n                    } else {\n                        currentEditor.val(null);\n                        currentEditor.trigger(CHANGE);\n                    }\n                }\n            }\n        });\n\n        if (isMs && valueArray.length < editorValue.length) {\n            currentEditor.val(valueArray);\n            currentEditor.trigger(CHANGE);\n        }\n    }\n\n    function dropDownResourceEditor(resource, model, parent) {\n        var attr = createValidationAttributes(model, resource.field);\n\n        return function(container) {\n            var currentEditor;\n\n            if (parent) {\n                setTimeout(function() {\n                    filterResourceEditorData(currentEditor, model[parent], resource.dataParentValueField, resource.dataValueField);\n                    bindParentValueChangeHandler(container, currentEditor, resource, parent);\n                });\n            }\n\n            currentEditor = $(kendo.format('<select aria-labelledby=\"' + resource.field + '_label\" data-{0}bind=\"value:{1}\" title=\"' + model.title + '\">', kendo.ns, resource.field))\n                .appendTo(container)\n                .attr(attr)\n                .kendoDropDownList({\n                    dataTextField: resource.dataTextField,\n                    dataValueField: resource.dataValueField,\n                    dataSource: resource.dataSource.data(),\n                    valuePrimitive: resource.valuePrimitive,\n                    optionLabel: \"None\",\n                    template: (data) => `<span ${data.disabled ? \"data-disabled\" : \"\"}><span class=\"k-scheduler-mark\" ${kendo.attr(\"style-background-color\")}=\"${data[resource.dataColorField] || \"none\"}\"></span>${data[resource.dataTextField]}</span>`,\n                    select: function(e) {\n                        if (e.dataItem && e.dataItem.disabled) {\n                            e.preventDefault();\n                        }\n                    },\n                    dataBound: function(e) {\n                        let options = e.sender.list.find('li');\n\n                        for (let i = 0; i < options.length; i++) {\n                            var element = options.eq(i);\n\n                            if (element.find(\"[data-disabled]\").length > 0) {\n                                element.addClass(\"k-disabled\");\n                            }\n                        }\n                    }\n                }).data(\"kendoDropDownList\");\n       };\n    }\n\n    function dropDownResourceEditorMobile(resource, model, parent) {\n        var attr = createValidationAttributes(model, resource.field);\n\n        return function(container) {\n            var options = \"\";\n            var view = resource.dataSource.view();\n\n            for (var idx = 0, length = view.length; idx < length; idx++) {\n                options += kendo.format('<option value=\"{0}\">{1}</option>',\n                    kendo.getter(resource.dataValueField)(view[idx]),\n                    kendo.getter(resource.dataTextField)(view[idx])\n                );\n            }\n\n            var currentEditor = $(kendo.format('<select aria-labelledby=\"' + resource.field + '_label\" data-{0}bind=\"value:{1}\">{2}</select>',\n                kendo.ns,\n                resource.field,\n                options\n            ))\n            .appendTo(container)\n            .attr(attr);\n\n            if (parent) {\n                setTimeout(function() {\n                    var parentElement = container.closest(\".k-stretched-view\").find(\"[data-\" + kendo.ns + \"bind='value:\" + parent + \"']\");\n                    var parentSelectedValue = model[parent];\n\n                    filterMobileResourceEditorData(resource, currentEditor, parentSelectedValue);\n\n                    parentElement.on(CHANGE, function(ev) {\n                        var parentValue = ev.target.value;\n\n                        filterMobileResourceEditorData(resource, currentEditor, parentValue);\n                    });\n                });\n            }\n       };\n    }\n\n    function multiSelectResourceEditor(resource, model, parent) {\n        var attr = createValidationAttributes(model, resource.field);\n\n        return function(container) {\n            var currentEditor;\n\n            if (parent) {\n                setTimeout(function() {\n                    filterResourceEditorData(currentEditor, model[parent], resource.dataParentValueField, resource.dataValueField);\n                    bindParentValueChangeHandler(container, currentEditor, resource, parent);\n                });\n            }\n\n            currentEditor = $(kendo.format('<select aria-labelledby=\"' + resource.field + '_label\" data-{0}bind=\"value:{1}\">', kendo.ns, resource.field))\n                .appendTo(container)\n                .attr(attr)\n                .kendoMultiSelect({\n                    dataTextField: resource.dataTextField,\n                    dataValueField: resource.dataValueField,\n                    dataSource: resource.dataSource.data(),\n                    valuePrimitive: resource.valuePrimitive,\n                    itemTemplate: (data) => `<span ${data.disabled ? \"data-disabled\" : \"\"}><span class=\"k-scheduler-mark\" ${kendo.attr(\"style-background-color\")}=\"${data[resource.dataColorField] || \"none\"}\"></span>${data[resource.dataTextField]}</span>`,\n                    tagTemplate: (data) => `<span class=\"k-scheduler-mark\" ${kendo.attr(\"style-background-color\")}=\"${data[resource.dataColorField] || \"none\"}\"></span>${data[resource.dataTextField]}`,\n                    select: function(e) {\n                        if (e.dataItem && e.dataItem.disabled) {\n                            e.preventDefault();\n                        }\n                    },\n                    dataBound: function(e) {\n                        let options = e.sender.list.find('li');\n\n                        for (let i = 0; i < options.length; i++) {\n                            let element = options.eq(i);\n\n                            if (element.find(\"[data-disabled]\").length > 0) {\n                                element.addClass(\"k-disabled\");\n                            }\n                        }\n                    }\n                }).data(\"kendoMultiSelect\");\n       };\n    }\n\n    function multiSelectResourceEditorMobile(resource, model, parent) {\n        var attr = createValidationAttributes(model, resource.field);\n\n        return function(container) {\n            var options = \"\";\n            var view = resource.dataSource.view();\n\n            for (var idx = 0, length = view.length; idx < length; idx++) {\n                options += kendo.format('<option value=\"{0}\">{1}</option>',\n                    kendo.getter(resource.dataValueField)(view[idx]),\n                    kendo.getter(resource.dataTextField)(view[idx])\n                );\n            }\n\n            var currentEditor = $(kendo.format('<select aria-labelledby=\"' + resource.field + '_label\" data-{0}bind=\"value:{1}\" multiple=\"multiple\">{2}</select>',\n                kendo.ns,\n                resource.field,\n                options\n            ))\n            .appendTo(container)\n            .attr(attr);\n\n            if (parent) {\n                setTimeout(function() {\n                    var parentElement = container.closest(\".k-stretched-view\").find(\"[data-\" + kendo.ns + \"bind='value:\" + parent + \"']\");\n                    var parentSelectedValue = model[parent];\n\n                    filterMobileResourceEditorData(resource, currentEditor, parentSelectedValue);\n\n                    parentElement.on(CHANGE, function(ev) {\n                        var parentValue = ev.target.value;\n\n                        filterMobileResourceEditorData(resource, currentEditor, parentValue);\n                    });\n                });\n            }\n       };\n    }\n\n    function moveEventRange(event, distance) {\n        var duration = event.end.getTime() - event.start.getTime();\n\n        var start = new Date(event.start.getTime());\n\n        kendo.date.setTime(start, distance);\n\n        var end = new Date(start.getTime());\n\n        kendo.date.setTime(end, duration, true);\n\n        return {\n            start: start,\n            end: end\n        };\n    }\n\n    var editors = {\n        mobile: {\n            dateRange: MOBILEDATERANGEEDITOR,\n            timezonePopUp: MOBILETIMEZONEPOPUP,\n            timezone: MOBILETIMEZONEEDITOR,\n            recurrence: MOBILERECURRENCEEDITOR,\n            description: descriptionEditor,\n            multipleResources: multiSelectResourceEditorMobile,\n            resources: dropDownResourceEditorMobile,\n            isAllDay: MOBILEISALLDAYEDITOR\n        },\n        desktop: {\n            dateRange: DATERANGEEDITOR,\n            timezonePopUp: TIMEZONEPOPUP,\n            timezone: TIMEZONEEDITOR,\n            recurrence: RECURRENCEEDITOR,\n            description: descriptionEditor,\n            multipleResources: multiSelectResourceEditor,\n            resources: dropDownResourceEditor,\n            isAllDay: ISALLDAYEDITOR\n        }\n    };\n\n    var Editor = kendo.Observable.extend({\n        init: function(element, options) {\n\n            kendo.Observable.fn.init.call(this);\n\n            this.element = element;\n            this.options = extend(true, {}, this.options, options);\n            this.createButton = this.options.createButton;\n\n            this.toggleDateValidationHandler = this._toggleDateValidation.bind(this);\n        },\n\n        _toggleDateValidation: function(e) {\n            if (e.field == \"isAllDay\") {\n                var container = this.container,\n                    isAllDay = this.editable.options.model.isAllDay,\n                    bindAttribute = kendo.attr(\"bind\"),\n                    element, isDateTimeInput, shouldValidate;\n                container.find(\"[\" + bindAttribute + \"*=end],[\" + bindAttribute + \"*=start]\").each(function() {\n                    element = $(this);\n                    if (valueStartEndBoundRegex.test(element.attr(bindAttribute))) {\n                        isDateTimeInput = element.is(\"[\" + kendo.attr(\"role\") + \"=datetimepicker],[type*=datetime]\");\n                        shouldValidate = isAllDay !== isDateTimeInput;\n                        element.attr(kendo.attr(\"validate\"), shouldValidate.toString());\n                    }\n                });\n            }\n        },\n\n        fields: function(editors, model) {\n            var that = this;\n            var messages = that.options.messages;\n            var timezone = that.options.timezone;\n\n            var click = function(e) {\n                e.preventDefault();\n                that._initTimezoneEditor(model, this);\n            };\n\n            var fields = [\n                { field: \"title\", title: messages.editor.title /*, format: field.format, editor: field.editor, values: field.values*/ },\n                { field: \"start\", title: messages.editor.start, editor: editors.dateRange, timezone: timezone },\n                { field: \"end\", title: messages.editor.end, editor: editors.dateRange, timezone: timezone },\n                { field: \"isAllDay\", title: messages.editor.allDayEvent, editor: editors.isAllDay }\n            ];\n\n            var checkHierarchical = function(item) {\n                return !!item[resource.dataParentValueField];\n            };\n\n            if (kendo.timezone.windows_zones) {\n                fields.push({ field: \"timezone\", title: messages.editor.timezone, editor: editors.timezonePopUp, click: click, messages: messages.editor, model: model });\n                fields.push({ field: \"startTimezone\", title: messages.editor.startTimezone, editor: editors.timezone, noTimezone: messages.editor.noTimezone });\n                fields.push({ field: \"endTimezone\", title: messages.editor.endTimezone, editor: editors.timezone, noTimezone: messages.editor.noTimezone });\n            }\n\n            if (!model.recurrenceId) {\n                fields.push({ field: \"recurrenceRule\", title: messages.editor.repeat, editor: editors.recurrence, timezone: timezone, messages: messages.recurrenceEditor, pane: this.pane });\n            }\n\n            if (\"description\" in model) {\n                fields.push({ field: \"description\", title: messages.editor.description, editor: editors.description({ model: model, field: \"description\" }) });\n            }\n\n            for (var resourceIndex = 0; resourceIndex < this.options.resources.length; resourceIndex++) {\n                var resource = this.options.resources[resourceIndex];\n                var resourceView = resource.dataSource.view();\n                var hasParent = resourceView.some(checkHierarchical);\n                var parentResource, parent;\n\n                if (hasParent) {\n                    parentResource = this.options.resources[resourceIndex - 1];\n\n                    if (parentResource) {\n                        parent = parentResource.field;\n                    }\n                }\n\n                fields.push({\n                    field: resource.field,\n                    title: resource.title,\n                    editor: resource.multiple ? editors.multipleResources(resource, model, parent) : editors.resources(resource, model, parent)\n                });\n            }\n\n            return fields;\n        },\n\n        end: function() {\n            return this.editable.end();\n        },\n\n        _buildDesktopEditTemplate: function(model, fields, editableFields) {\n            var messages = this.options.messages;\n\n            const startTimezone = `<div class=\"k-popup-edit-form k-scheduler-edit-form k-scheduler-timezones\" ${kendo.attr(\"style-display\")}=\"none\">` +\n                                    '<div class=\"k-form\">' +\n                                    '<div class=\"k-form-field\"><div class=\"k-form-field-wrap\">' + kendo.html.renderCheckBox($('<input class=\"k-timezone-toggle\"/>'), { label: messages.editor.separateTimezones }) + '</div></div>';\n\n            const editableField = (fieldName) => {\n                const isEditable = !model.editable || model.editable(fieldName);\n\n                if (isEditable) {\n                    return `<div ${kendo.attr(\"container-for\")}=\"${fieldName}\" class=\"k-form-field-wrap\"></div>`;\n                } else {\n                    return `<div class=\"k-form-field-wrap\">${(fieldName && kendo.getter(fieldName)(model)) || ''}</div>`;\n                }\n            };\n\n            const generateFields = (field) => {\n                const fieldName = field.field;\n                const fieldTitle = field.title;\n                const modelField = model.fields[fieldName];\n                const isEditable = !model.editable || model.editable(fieldName);\n\n                if (isEditable) {\n                    editableFields.push(field);\n                }\n\n                return (fieldName === 'startTimezone' ? startTimezone : '') +\n                    (modelField && modelField.type === \"boolean\" ?\n                        `<div class=\"k-form-field\">${editableField(fieldName)}</div>` :\n                        `<div class=\"k-form-field\"><label class=\"k-label k-form-label\" for=\"${fieldName}\" id=\"${fieldName}_label\">${fieldTitle || fieldName || \"\"}</label>${editableField(fieldName)}</div>`) +\n                    (fieldName === 'endTimezone' ? this._createEndTimezoneButton() : '');\n            };\n\n            return `<div class=\"k-form\">` +\n                fields.map(generateFields).join('') +\n            `</div>`;\n        },\n\n        _buildMobileEditTemplate: function(model, fields, editableFields) {\n            var messages = this.options.messages;\n\n            const startTimezone = `<div class=\"k-popup-edit-form k-scheduler-edit-form k-scheduler-timezones\" ${kendo.attr(\"style-display\")}=\"none\">` +\n                                    '<ul class=\"k-listgroup k-listgroup-flush\">' +\n                                        '<li class=\"k-item k-listgroup-item\">' +\n                                            '<label class=\"k-label k-listgroup-form-row\">' +\n                                                '<span class=\"k-item-title k-listgroup-form-row\">' + encode(messages.editor.separateTimezones) + '</span>' +\n                                                '<span class=\"k-listgroup-form-field-wrapper\">' +\n                                                    '<input class=\"k-timezone-toggle\" data-role=\"switch\" type=\"checkbox\" />' +\n                                                '</span>' +\n                                            '</label>' +\n                                        '</li>';\n\n            const editableField = (field) => {\n                const fieldName = field.field;\n                const fieldTitle = field.title;\n                const isEditable = !model.editable || model.editable(fieldName);\n                let midPart;\n\n                if (isEditable) {\n                    midPart = `${fieldName === 'timezone' ?\n                                    `<label class=\"k-label k-listgroup-form-row\" data-bind=\"css: { k-disabled: isAllDay }\">` :\n                                    `<label class=\"k-label k-listgroup-form-row\">`}` +\n                        `<span class=\"k-item-title k-listgroup-form-field-label\">${fieldTitle || fieldName || \"\"}</span>` +\n                        `<div class=\"k-listgroup-form-field-wrapper\" ${kendo.attr(\"container-for\")}=\"${fieldName}\"></div>`;\n                } else {\n                    midPart = `<li class=\"k-item k-listgroup-item\">` +\n                        `<label class=\"k-label k-no-click k-listgroup-form-row\">` +\n                        `<span class=\"k-item-title k-listgroup-form-field-label\">${fieldTitle || fieldName || \"\"}</span>` +\n                        `<span class=\"k-no-editor k-listgroup-form-field-wrapper\">${(fieldName && kendo.getter(fieldName)(model)) || ''}</span>`;\n                }\n\n\n                return `<li class=\"k-item k-listgroup-item\">` +\n                   midPart +\n                `</label></li>`;\n\n            };\n\n            const generateFields = (field) => {\n                const fieldName = field.field;\n                const isEditable = !model.editable || model.editable(fieldName);\n\n                if (isEditable) {\n                    editableFields.push(field);\n                }\n\n                return (fieldName === \"timezone\" || fieldName === \"recurrenceRule\" ? '</ul><ul class=\"k-listgroup k-listgroup-flush\">' : '') +\n                    (fieldName === 'startTimezone' ? startTimezone : '') +\n                    editableField(field) +\n                    (fieldName === 'recurrenceRule' ? '</ul><ul class=\"k-listgroup k-listgroup-flush\">' : '') +\n                    (fieldName === 'endTimezone' ? '</ul></div>' : '');\n            };\n\n            const result = `<ul class=\"k-listgroup k-listgroup-flush\">` +\n                fields.map(generateFields).join('') +\n            `</ul>`;\n\n            return result;\n        },\n\n        _buildEditTemplate: function(model, fields, editableFields, isMobile) {\n            var settings = extend({}, kendo.Template, this.options.templateSettings);\n            var template = this.options.editable.template;\n            var html = \"\";\n\n            if (template) {\n                if (typeof template === STRING) {\n                    template = kendo.unescape(template);\n                }\n                html += (kendo.template(template, settings))(model);\n            } else if (isMobile) {\n                html += '<div data-role=\"content\">' + this._buildMobileEditTemplate(model, fields, editableFields) + '</div>';\n            } else {\n                html += this._buildDesktopEditTemplate(model, fields, editableFields);\n            }\n\n            return html;\n        },\n\n        _createEndTimezoneButton: function() {\n            return '</ul></div>';\n        },\n\n        _revertTimezones: function(model) {\n            model.set(\"startTimezone\", this._startTimezone);\n            model.set(\"endTimezone\", this._endTimezone);\n\n            delete this._startTimezone;\n            delete this._endTimezone;\n        }\n    });\n\n    var MobileEditor = Editor.extend({\n        init: function() {\n            Editor.fn.init.apply(this, arguments);\n\n            this.pane = kendo.Pane.wrap(this.element, {\n                viewEngine: {\n                    viewOptions: {\n                        renderOnInit: true,\n                        wrap: false,\n                        wrapInSections: true,\n                        detachOnHide: false,\n                        detachOnDestroy: false\n                    }\n                }\n            });\n            this.pane.element.parent().css(\"height\", this.options.height);\n            this.view = this.pane.view();\n        },\n\n        options: {\n            animations: {\n                left: \"slide\",\n                right: \"slide:right\"\n            }\n        },\n\n        destroy: function() {\n            this.close();\n            this.unbind();\n            this.pane.destroy();\n        },\n\n        _initTimezoneEditor: function(model) {\n            var that = this;\n            var pane = that.pane;\n            var messages = that.options.messages;\n            var timezoneView = that.timezoneView;\n            var container = timezoneView ? timezoneView.content.find(\".k-scheduler-timezones\") : that.container.find(\".k-scheduler-timezones\");\n            var kSwitch = container.find(\"input.k-timezone-toggle\").data(\"kendoSwitch\");\n            var endTimezoneRow = container.find(\"li.k-item:not(.k-zonepicker)\").last();\n            var startTimezoneChange = function(e) {\n                if (e.field === \"startTimezone\") {\n                    var value = model.startTimezone;\n\n                    kSwitch.enable(value);\n\n                    if (!value) {\n                        endTimezoneRow.hide();\n                        model.set(\"endTimezone\", \"\");\n                        kSwitch.value(false);\n                    }\n                }\n            };\n\n            that._startTimezone = model.startTimezone || \"\";\n            that._endTimezone = model.endTimezone || \"\";\n\n            if (!timezoneView) {\n                var html = '<div data-role=\"view\" class=\"k-popup-edit-form k-scheduler-edit-form\">' +\n                '<div data-role=\"header\" class=\"k-appbar k-appbar-primary\">' +\n                    kendo.html.renderButton(`<button class=\"k-header-cancel k-scheduler-cancel\" title=\"${messages.cancel}\" aria-label=\"${messages.cancel}\"></button>`, {\n                        fillMode: \"flat\",\n                        icon: \"chevron-left\"\n                    }) +\n                    '<span class=\"k-spacer\"></span>' +\n                    `<span>${encode(messages.editor.timezoneTitle)}</span>` +\n                    '<span class=\"k-spacer\"></span>' +\n                    encode(messages.editor.timezoneTitle) +\n                    kendo.html.renderButton(`<button class=\"k-header-done k-scheduler-update\" title=\"${messages.save}\" aria-label=\"${messages.save}\"></button>`, {\n                        fillMode: \"flat\",\n                        icon: \"check\"\n                    }) +\n                '</div><div data-role=\"content\"></div>';\n\n                this.timezoneView = timezoneView = pane.append(html);\n\n                timezoneView.contentElement.append(container.show());\n\n                timezoneView.element.on(CLICK + NS, \".k-scheduler-cancel, .k-scheduler-update\", function(e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n\n                    if ($(this).hasClass(\"k-scheduler-cancel\")) {\n                        that._revertTimezones(model);\n                    }\n\n                    var editView = that._editPane;\n\n                    var text = timezoneButtonText(model, messages.editor.noTimezone);\n\n                    editView.content.find(\".k-timezone-label\").text(text);\n\n                    pane.navigate(editView, that.options.animations.right);\n                });\n\n                kSwitch.bind(CHANGE, function(ev) {\n                    endTimezoneRow.toggle(ev.checked);\n                    model.set(\"endTimezone\", \"\");\n                });\n                model.bind(CHANGE, startTimezoneChange);\n            }\n\n            kSwitch.value(!!model.endTimezone);\n            kSwitch.enable(!!model.startTimezone);\n\n            if (model.endTimezone) {\n                endTimezoneRow.show();\n            } else {\n                endTimezoneRow.hide();\n            }\n\n            pane.navigate(timezoneView, that.options.animations.left);\n        },\n\n        showDialog: function(options) {\n            var actions = options.buttons.map(function(button) {\n                return {\n                    text: button.text,\n                    action: button.click\n                };\n            });\n\n            actions.push({\n                text: this.options.messages.cancel,\n                primary: true\n            });\n\n            $(\"<div />\").appendTo(document.body)\n                .kendoDialog({\n                    close: function() {\n                        this.destroy();\n                    },\n                    modal: {\n                        preventScroll: true\n                    },\n                    closable: false,\n                    title: false,\n                    content: options.text,\n                    actions: actions\n                });\n        },\n\n        editEvent: function(model) {\n            var pane = this.pane;\n            var html = \"\";\n\n            var messages = this.options.messages;\n            var updateText = messages.save;\n            var removeText = messages.destroy;\n            var cancelText = messages.cancel;\n            var titleText = messages.editor.editorTitle;\n            var resetSeries = messages.resetSeries;\n\n            html += '<div data-role=\"view\" class=\"k-popup-edit-form k-scheduler-edit-form\"' + kendo.attr(\"uid\") + '=\"' + model.uid + '\">' +\n                '<div data-role=\"header\" class=\"k-appbar k-appbar-primary\">' +\n                    kendo.html.renderButton(`<button class=\"k-header-cancel k-scheduler-cancel\" title=\"${cancelText}\" aria-label=\"${cancelText}\"></button>`, {\n                        fillMode: \"flat\",\n                        icon: \"chevron-left\"\n                    }) +\n                    '<span class=\"k-spacer\"></span>' +\n                    `<span>${encode(titleText)}</span>` +\n                    '<span class=\"k-spacer\"></span>' +\n                    kendo.html.renderButton(`<button class=\"k-header-done k-scheduler-update\" title=\"${updateText}\" aria-label=\"${updateText}\"></button>`, {\n                        fillMode: \"flat\",\n                        icon: \"check\"\n                    }) +\n                '</div>';\n\n            var fields = this.fields(editors.mobile, model);\n\n            var that = this;\n\n            var editableFields = [];\n\n            html += this._buildEditTemplate(model, fields, editableFields, true);\n\n            html += \"</div>\";\n\n            var view = pane.append(html);\n\n            if (!model.isNew() && this.options.editable && this.options.editable.destroy !== false && model.isRecurrenceHead() && model.recurrenceException) {\n                var resetSeriesBtn = '<ul class=\"k-edit-buttons k-listgroup k-listgroup-flush\"><li class=\"k-item k-listgroup-item\"><span class=\"k-scheduler-resetSeries k-link k-label\" aria-label=\"' + resetSeries + '\">' + resetSeries + '</span></li></ul>';\n                view.contentElement.append(resetSeriesBtn);\n            }\n\n            if (!model.isNew() && this.options.editable && this.options.editable.destroy !== false) {\n                var deleteBtn = '<ul class=\"k-edit-buttons k-listgroup k-listgroup-flush\"><li class=\"k-item k-listgroup-item\"><span class=\"k-scheduler-delete k-link k-label\" aria-label=\"' + removeText + '\">' + removeText + '</span></li></ul>';\n                view.contentElement.append(deleteBtn);\n            }\n\n            this._editPane = view;\n\n            var container = this.container = view.element;\n\n            this.editable = container.kendoEditable({\n                fields: editableFields,\n                model: model,\n                clearContainer: false,\n                target: that.options.target,\n                validateOnBlur: true\n            }).data(\"kendoEditable\");\n\n            if (!this.trigger(\"edit\", { container: container, model: model })) {\n\n                container.on(CLICK + NS, \"a.k-scheduler-edit, .k-scheduler-cancel, .k-scheduler-update, span.k-scheduler-delete, span.k-scheduler-resetSeries\", function(e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n\n                    var button = $(this);\n\n                    if (!button.hasClass(\"k-scheduler-edit\")) {\n\n                        var name = \"cancel\";\n\n                        if (button.hasClass(\"k-scheduler-update\")) {\n                            name = \"save\";\n                        } else if (button.hasClass(\"k-scheduler-delete\")) {\n                            name = \"remove\";\n                        } else if (button.hasClass(\"k-scheduler-resetSeries\")) {\n                            name = RESET;\n                        }\n\n                        that.trigger(name, { container: container, model: model });\n                    } else {\n                        pane.navigate(this._editPane, that.options.animations.right);\n                    }\n                });\n\n                pane.navigate(view, that.options.animations.left);\n\n                model.bind(CHANGE, that.toggleDateValidationHandler);\n            } else {\n                this.trigger(\"cancel\", { container: container, model: model });\n            }\n\n            return this.editable;\n        },\n\n        _views: function() {\n            return this.pane.element\n                    .find(kendo.roleSelector(\"view\"))\n                    .not(this.view.element);\n        },\n\n        close: function() {\n            if (this.container) {\n                this.pane.navigate(\"\", this.options.animations.right);\n\n                var views = this._views();\n                var view;\n\n                for (var idx = 0, length = views.length; idx < length; idx++) {\n                    view = views.eq(idx).data(\"kendoView\");\n                    if (view) {\n                       view.purge();\n                    }\n                }\n\n                views.remove();\n\n                this.container = null;\n                if (this.editable) {\n                    this.editable.options.model.unbind(CHANGE, this.toggleDateValidationHandler);\n                    this.editable.destroy();\n                    this.editable = null;\n                }\n                this.timezoneView = null;\n            }\n        }\n    });\n\n    var PopupEditor = Editor.extend({\n        destroy: function() {\n            this.close();\n            this.unbind();\n        },\n\n        editEvent: function(model) {\n            var that = this;\n            var editable = that.options.editable;\n            var html = '<div ' + kendo.attr(\"uid\") + '=\"' + model.uid + '\" class=\"k-popup-edit-form k-scheduler-edit-form\"><div class=\"k-edit-form-container\">';\n            var $html;\n            var messages = that.options.messages;\n            var updateText = messages.save;\n            var updateIcon = \"save\";\n            var cancelText = messages.cancel;\n            var cancelIcon = \"cancel-outline\";\n            var deleteText = messages.destroy;\n            var deleteIcon = \"trash\";\n            var resetSeries = messages.resetSeries;\n            var fields = this.fields(editors.desktop, model);\n            var editableFields = [];\n            var fieldName;\n\n            html += this._buildEditTemplate(model, fields, editableFields, false);\n\n            var attr;\n            var options = isPlainObject(editable) ? editable.window : {};\n\n            html += '<div class=\"k-edit-buttons\">';\n\n            html += this.createButton({ name: \"update\", text: updateText, attr: attr, icon: updateIcon }) + this.createButton({ name: \"canceledit\", text: cancelText, attr: attr, icon: cancelIcon });\n\n            if (!model.isNew() && editable.destroy !== false && model.isRecurrenceHead() && model.recurrenceException) {\n                html += this.createButton({ name: \"resetSeries\", text: resetSeries, attr: attr });\n            }\n\n            if ((!model.isNew() || model.isRecurring()) && editable.destroy !== false) {\n                html += '<span class=\"k-spacer\"></span>' + this.createButton({ name: \"delete\", text: deleteText, attr: attr, icon: deleteIcon, fillMode: \"flat\", themeColor: \"primary\" });\n            }\n\n            html += '</div></div></div>';\n\n            $html = $(html);\n            kendo.applyStylesFromKendoAttributes($html, [\"display\"]);\n\n            var container = this.container = $html\n                .appendTo(that.element).eq(0)\n                .kendoWindow(extend({\n                    modal: true,\n                    resizable: false,\n                    draggable: true,\n                    title: messages.editor.editorTitle,\n                    visible: false,\n                    close: function(e) {\n                        if (e.userTriggered) {\n                            if (that.trigger(CANCEL, { container: container, model: model })) {\n                                e.preventDefault();\n                            }\n                        }\n                    }\n                }, options));\n\n            that.editable = container.kendoEditable({\n                fields: editableFields,\n                model: model,\n                clearContainer: false,\n                validateOnBlur: true,\n                target: that.options.target\n            }).data(\"kendoEditable\");\n\n            for (var field in editableFields) {\n                if (editableFields[field].field !== \"recurrenceRule\") {\n                    fieldName = editableFields[field].field;\n                    container.find(\"[name='\" + fieldName + \"']\").attr(\"aria-labelledby\", fieldName + \"_label\");\n                }\n\n                if (editableFields[field].field === \"isAllDay\") {\n                    container.find(\"label[for='\" + fieldName + \"']\").attr(\"id\", fieldName + \"_label\");\n                }\n            }\n\n            if (!that.trigger(EDIT, { container: container, model: model })) {\n\n                if (editable.window && editable.window.position) {\n                    container.data(\"kendoWindow\").open();\n                } else {\n                    container.data(\"kendoWindow\").center().open();\n                }\n\n                container.on(CLICK + NS, \"button.k-scheduler-cancel\", function(e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n\n                    that.trigger(CANCEL, { container: container, model: model });\n                });\n\n                container.on(CLICK + NS, \"button.k-scheduler-update\", function(e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n\n                    that.trigger(\"save\", { container: container, model: model });\n                });\n\n                container.on(CLICK + NS, \"button.k-scheduler-delete\", function(e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n\n                    that.trigger(REMOVE, { container: container, model: model });\n                });\n\n                container.on(CLICK + NS, \"button.k-scheduler-resetSeries\", function(e) {\n                    e.preventDefault();\n                    e.stopPropagation();\n                    that.trigger(RESET, { container: container, model: model });\n                });\n\n                kendo.cycleForm(container);\n\n                model.bind(CHANGE, that.toggleDateValidationHandler);\n            } else {\n                that.trigger(CANCEL, { container: container, model: model });\n            }\n\n            return that.editable;\n        },\n\n        close: function() {\n            var that = this;\n\n            var destroy = function() {\n                if (that.editable) {\n                    that.editable.options.model.unbind(CHANGE, that.toggleDateValidationHandler);\n                    that.editable.destroy();\n                    that.editable = null;\n                    that.container = null;\n                }\n                if (that.popup) {\n                    that.popup.destroy();\n                    that.popup = null;\n                }\n            };\n\n            if (that.editable) {\n                if (that._timezonePopup && that._timezonePopup.data(\"kendoWindow\")) {\n                    that._timezonePopup.data(\"kendoWindow\").destroy();\n                    that._timezonePopup = null;\n                }\n\n                if (that.container.is(\":visible\")) {\n                    that.container.data(\"kendoWindow\").bind(\"deactivate\", destroy).close();\n                } else {\n                    destroy();\n                }\n            } else {\n                destroy();\n            }\n        },\n\n        _createEndTimezoneButton: function() {\n            var messages = this.options.messages;\n            var html = \"\";\n\n            html += '<div class=\"k-edit-buttons\">';\n            html += this.createButton({ name: \"savetimezone\", icon: \"save\", themeColor: \"primary\", text: messages.save }) + this.createButton({ name: \"canceltimezone\", icon: \"cancel-outline\", text: messages.cancel });\n            html += '</div></div></div>';\n\n            return html;\n        },\n\n        showDialog: function(options) {\n            var html = kendo.format(\"<div class='k-popup-edit-form'><div class='k-edit-form-container'><p class='k-popup-message'>{0}</p>\", options.text);\n\n            html += '<div class=\"k-edit-buttons\">';\n\n            for (var buttonIndex = 0; buttonIndex < options.buttons.length; buttonIndex++) {\n                html += this.createButton(options.buttons[buttonIndex]);\n            }\n\n            html += '</div></div></div>';\n\n            var wrapper = this.element;\n\n            if (this.popup) {\n                this.popup.destroy();\n            }\n\n            var popup = this.popup = $(html).appendTo(wrapper)\n                               .eq(0)\n                               .on(CLICK, \".k-button\", function(e) {\n                                    e.preventDefault();\n\n                                    popup.close();\n\n                                    var buttonIndex = $(e.currentTarget).index();\n\n                                    options.buttons[buttonIndex].click();\n                               })\n                               .kendoWindow({\n                                   modal: true,\n                                   resizable: false,\n                                   draggable: false,\n                                   title: options.title,\n                                   visible: false,\n                                   close: function() {\n                                       this.destroy();\n                                       wrapper.trigger(\"focus\");\n                                   }\n                               })\n                               .getKendoWindow();\n\n            popup.center().open();\n        },\n\n        _initTimezoneEditor: function(model, activator) {\n            var that = this;\n            var container = that.container.find(\".k-scheduler-timezones\");\n            var checkbox = container.find(\"input.k-timezone-toggle\");\n            var endTimezoneRow = container.find(\".k-form-field\").last();\n            var saveButton = container.find(\".k-scheduler-savetimezone\");\n            var cancelButton = container.find(\".k-scheduler-canceltimezone\");\n            var timezonePopup = that._timezonePopup;\n            var startTimezoneChange = function(e) {\n                if (e.field === \"startTimezone\") {\n                    var value = model.startTimezone;\n\n                    checkbox.prop(DISABLED, !value);\n\n                    if (!value) {\n                        endTimezoneRow.hide();\n                        model.set(\"endTimezone\", \"\");\n                        checkbox.prop(\"checked\", false);\n                    }\n                }\n            };\n            var wnd;\n\n            that._startTimezone = model.startTimezone;\n            that._endTimezone = model.endTimezone;\n\n            if (!timezonePopup) {\n                that._timezonePopup = timezonePopup = container.kendoWindow({\n                    modal: true,\n                    resizable: false,\n                    draggable: true,\n                    title: that.options.messages.editor.timezoneEditorTitle,\n                    visible: false,\n                    close: function(e) {\n                        model.unbind(CHANGE, startTimezoneChange);\n\n                        if (e.userTriggered) {\n                            that._revertTimezones(model);\n                        }\n\n                        if (activator) {\n                            activator.focus();\n                        }\n                    }\n                });\n\n                checkbox.on(CLICK, function() {\n                    endTimezoneRow.toggle(checkbox.prop(\"checked\"));\n                    model.set(\"endTimezone\", \"\");\n                });\n\n                saveButton.on(CLICK, function(e) {\n                    e.preventDefault();\n                    wnd.close();\n                });\n\n                cancelButton.on(CLICK, function(e) {\n                    e.preventDefault();\n                    that._revertTimezones(model);\n                    wnd.close();\n                });\n\n                model.bind(CHANGE, startTimezoneChange);\n            }\n\n            checkbox.prop(\"checked\", model.endTimezone).prop(DISABLED, !model.startTimezone);\n\n            if (model.endTimezone) {\n                endTimezoneRow.show();\n            } else {\n                endTimezoneRow.hide();\n            }\n\n            wnd = timezonePopup.data(\"kendoWindow\");\n            wnd.center().open();\n        }\n    });\n\n    var Scheduler = DataBoundWidget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            Widget.fn.init.call(that, element, options);\n\n            if (!that.options.views || !that.options.views.length) {\n                that.options.views = [\"day\", \"week\"];\n            }\n\n            that.resources = [];\n\n            that._initModel();\n\n            that._wrapper();\n\n            if (that.options.selectable) {\n                that._tabindex();\n            }\n\n            that._views();\n\n            that._toolbar();\n\n            that._dataSource();\n\n            that._resources();\n\n            that._resizeHandler = function() {\n                that.resize();\n            };\n\n            that.wrapper.on(MOUSEDOWN + NS + \" selectstart\" + NS, function(e) {\n                var target = $(e.target);\n\n                if (!target.is(\":kendoFocusable\") && target.closest(\".k-button\").length === 0) {\n                    e.preventDefault();\n                }\n            });\n\n            if (that.options.editable && that.options.editable.resize !== false) {\n                that._resizable();\n            }\n\n            that._movable();\n\n            that._bindResize();\n\n            if (that.options.messages && that.options.messages.recurrence) {\n                recurrence.options = that.options.messages.recurrence;\n            }\n\n            that._navigation();\n            that._selectable();\n            that._touchHandlers();\n\n            that._ariaId = kendo.guid();\n\n            that._createEditor();\n\n            that.mediaQueryList = kendo.mediaQuery(MIN_SCREEN);\n            that.mediaQueryList.onChange(that._onMediaChange.bind(that));\n\n            that.toolbar.find('.k-scheduler-views').children().removeClass('k-button-rectangle');\n\n            if (that._showWatermarkOverlay) {\n                that._showWatermarkOverlay(that.element[0]);\n            }\n        },\n\n        _onMediaChange: function(e) {\n            var that = this;\n            var view = that._selectedView;\n            var toolbarEl = that.toolbar;\n            var toolbar = toolbarEl.getKendoToolBar();\n\n            if (e.matches) {\n                toolbar.hide(toolbarEl.find(\".k-views-dropdown\"));\n                toolbar.show(toolbarEl.find(\".k-views-dropdown\").parent().next(\".k-button-group\"));\n            } else {\n                toolbar.show(toolbarEl.find(\".k-views-dropdown\"));\n                toolbar.hide(toolbarEl.find(\".k-views-dropdown\").parent().next(\".k-button-group\"));\n            }\n\n            that._model.set(\"formattedDate\", e.matches ? view.dateForTitle() : view.shortDateForTitle());\n        },\n\n        _bindResize: function() {\n            $(window).on(\"resize\" + NS, this._resizeHandler);\n        },\n\n        _unbindResize: function() {\n            $(window).off(\"resize\" + NS, this._resizeHandler);\n        },\n\n        dataItems: function() {\n            var that = this;\n            var items = that.items();\n            var events = that._data;\n            var eventsUids = $.map(items, function(item) {\n                return $(item).attr(\"data-uid\");\n            });\n            var i;\n            var key;\n\n            var dict = {};\n            var eventsUidsLength = eventsUids.length;\n            for (i = 0; i < eventsUidsLength; i++) {\n                dict[eventsUids[i]] = null;\n            }\n\n            var eventsCount = events.length;\n            for (i = 0; i < eventsCount; i++) {\n                var event = events[i];\n                if (dict[event.uid] !== undefined) {\n                    dict[event.uid] = event;\n                }\n            }\n\n            var sortedData = [];\n            for (key in dict) {\n                sortedData.push(dict[key]);\n            }\n\n            return sortedData;\n        },\n\n        _isMobile: function() {\n            var options = this.options;\n            return (options.mobile === true && kendo.support.mobileOS) || options.mobile === \"phone\" || options.mobile === \"tablet\";\n        },\n\n        _isTouch: function(event) {\n            return /touch/.test(event.type) || (event.originalEvent && /touch/.test(event.originalEvent.pointerType));\n        },\n\n        _isInverseColor: function(eventElement) {\n            return eventElement.hasClass(INVERSECOLORCLASS);\n        },\n\n        _groupsByResource: function(resources, groupIndex, groupsArray, parentFieldValue, parentField) {\n            if (!groupsArray) {\n                groupsArray = [];\n            }\n\n            var resource = resources[0];\n            if (resource) {\n                var group;\n                var data = resource.dataSource.view();\n                var prevIndex = 0;\n\n                for (var dataIndex = 0; dataIndex < data.length; dataIndex++) {\n                    var fieldValue = kendo.getter(resource.dataValueField)(data[dataIndex]);\n                    var currentGroupIndex = groupIndex + prevIndex + dataIndex;\n\n                    group = this._groupsByResource(resources.slice(1), currentGroupIndex, groupsArray, fieldValue, resource.field);\n                    group[resource.field] = fieldValue;\n                    prevIndex = group.groupIndex;\n\n                    if (parentField && parentFieldValue) {\n                        group[parentField] = parentFieldValue;\n                    }\n\n                    if (resources.length === 1) {\n                        group.groupIndex = groupIndex + dataIndex;\n                        groupsArray.push(group);\n                    }\n                }\n                return group;\n            } else {\n                return {};\n            }\n        },\n\n        data: function() {\n            return this._data;\n        },\n\n        select: function(options) {\n            var that = this;\n            var view = that.view();\n            var selection = that._selection;\n            var groups = view.groups;\n            var selectedGroups;\n\n            if (options === undefined) {\n                var selectedEvents;\n                var slots = view._selectedSlots;\n\n                if (!selection) {\n                    return [];\n                }\n\n                if (selection && selection.events) {\n                    selectedEvents = that._selectedEvents();\n                }\n\n                return {\n                    start: selection.start,\n                    end: selection.end,\n                    events: selectedEvents,\n                    slots: slots,\n                    resources: view._resourceBySlot(selection)\n                };\n            }\n\n            if (!options) {\n                that._selection = null;\n                that._old = null;\n                view.clearSelection();\n\n                return;\n            }\n\n            if (Array.isArray(options)) {\n                options = {\n                    events: options.splice(0)\n                };\n            }\n\n            if (options.resources) {\n                var fieldName;\n                var filters = [];\n                var groupsByResource = [];\n\n                if (view.groupedResources) {\n                    that._groupsByResource(view.groupedResources, 0, groupsByResource);\n                }\n\n                for (fieldName in options.resources) {\n                    filters.push({ field: fieldName, operator: \"eq\", value: options.resources[fieldName] });\n                }\n\n                selectedGroups = new kendo.data.Query(groupsByResource)\n                    .filter(filters)\n                    .toArray();\n            }\n\n            if (options.events && options.events.length) {\n                that._selectEvents(options.events, selectedGroups);\n                that._select();\n\n                return;\n            }\n\n            if (groups && (options.start && options.end)) {\n                var rangeStart = getDate(view._startDate);\n                var rangeEnd = kendo.date.addDays(getDate(view._endDate),1);\n                var group;\n                var ranges;\n\n                if (options.start < rangeEnd && rangeStart <= options.end) {\n                    if (selectedGroups && selectedGroups.length) {\n                        group = groups[selectedGroups[0].groupIndex];\n                    } else {\n                        group = groups[0];\n                    }\n\n                    if (!group.timeSlotCollectionCount()) {\n                        options.isAllDay = true;\n                    }\n\n                    ranges = group.ranges(options.start, options.end, options.isAllDay, false);\n\n                    if (ranges.length) {\n                        that._selection = {\n                            start: kendo.timezone.toLocalDate(ranges[0].start.start),\n                            end: kendo.timezone.toLocalDate(ranges[ranges.length - 1].end.end),\n                            groupIndex: ranges[0].start.groupIndex,\n                            index: ranges[0].start.index,\n                            isAllDay: ranges[0].start.isDaySlot,\n                            events: []\n                        };\n\n                        that._select();\n                    }\n                }\n            }\n        },\n\n        _selectEvents: function(eventsUids, selectedGroups) {\n            var that = this;\n            var idx;\n            var view = that.view();\n            var groups = view.groups;\n            var eventsLength = eventsUids.length;\n            var isGrouped = selectedGroups && selectedGroups.length;\n            var ctrlKey = that._ctrlKey;\n\n            that._ctrlKey = true;\n\n            for (idx = 0; idx < eventsLength; idx++) {\n                if (groups && isGrouped) {\n                    var currentGroup = groups[selectedGroups[0].groupIndex];\n                    var events = [];\n                    var timeSlotCollectionCount = currentGroup.timeSlotCollectionCount();\n                    var daySlotCollectionCount = currentGroup.daySlotCollectionCount();\n\n                    for (var collIdx = 0; collIdx < timeSlotCollectionCount; collIdx++) {\n                        events = events.concat(currentGroup.getTimeSlotCollection(collIdx).events());\n                    }\n\n                    for (var dayCollIdx = 0; dayCollIdx < daySlotCollectionCount; dayCollIdx++) {\n                        events = events.concat(currentGroup.getDaySlotCollection(dayCollIdx).events());\n                    }\n\n                    events = new kendo.data.Query(events)\n                        .filter({ field: event => event.element[0].getAttribute('data-uid'), operator: \"eq\", value: eventsUids[idx] })\n                        .toArray();\n\n                    if (events[0]) {\n                        that._createSelection(events[0].element);\n                    }\n                } else {\n                    var element = view.element.find(kendo.format(\".k-event[data-uid={0}], .k-task[data-uid={0}]\", eventsUids[idx]));\n\n                    if (element.length) {\n                        that._createSelection(element[0]);\n                    }\n                }\n            }\n\n            that._ctrlKey = ctrlKey;\n        },\n\n        _touchHandlers: function() {\n            var that = this;\n            var startX;\n            var startY;\n            var endX;\n            var endY;\n            var timeStamp;\n            var wrapper = that.wrapper;\n            var touchMoveHandler = that._touchMove.bind(that);\n\n            wrapper.on(TOUCHSTART + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event\", function(e) {\n                var content = that.wrapper.find(\".k-scheduler-content\");\n\n                if (!that._isTouch(e)) {\n                    return;\n                }\n\n                content.stop(true, false);\n\n                that._touchPosX = startX = that._tapPosition(e, 'X');\n                that._touchPosY = startY = that._tapPosition(e, 'Y');\n                that._userTouched = true;\n                that.view()._scrolling = false;\n                timeStamp = Date.now();\n\n                wrapper.on(TOUCHMOVE + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event\", touchMoveHandler);\n            });\n\n            wrapper.on(\"contextmenu\" + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event\", function(e) {\n                that._preventFocus = true;\n            });\n\n            wrapper.on(TOUCHEND + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event\", function(e) {\n                if (!that._isTouch(e)) {\n                    return;\n                }\n\n                var delta = Date.now() - timeStamp;\n                var content = that.wrapper.find(\".k-scheduler-content\");\n                var amplitude = -that._amplitude * (3000 / delta);\n\n                endX = that._tapPosition(e, 'X');\n                endY = that._tapPosition(e, 'Y');\n\n                if (that._dragging) {\n                    return;\n                }\n\n                if (that.options.selectable && (Math.abs(endX - startX) <= 10 || Math.abs(endY - startY) <= 10)) {\n                    that._mouseDownSelection(e);\n                }\n\n                if (!kendo.support.kineticScrollNeeded && delta < 200 && Math.abs(endX - startX) > 10) {\n                    content.animate({\n                        scrollTop: content[0].scrollTop + amplitude\n                    });\n                }\n\n                wrapper.off(TOUCHMOVE + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td\", touchMoveHandler);\n            });\n        },\n\n        _navigation: function() {\n            var that = this,\n                wrapper = that.wrapper;\n\n            wrapper.on(\"focus\" + NS, function() {\n                var selection = that._selection;\n\n                setTimeout(function() {\n                    if (!that._preventFocus) {\n                        if ((!selection ||\n                                (selection.events.length > 0 && wrapper.find(\"[data-uid='\" + selection.events[0] + \"']\").length === 0)) &&\n                            !that._userTouched &&\n                            !that._mouseDown) {\n                                that._initialFocus();\n                        } else {\n                            that._mouseDown = false;\n                        }\n\n                        that._select();\n                    } else {\n                        that._preventFocus = false;\n                    }\n                }, 300);\n            });\n\n            wrapper.on(\"focusout\" + NS, function() {\n                that._ctrlKey = that._shiftKey = false;\n            });\n\n            wrapper.on(\"keydown\" + NS, that._keydown.bind(that));\n\n            wrapper.on(\"keyup\" + NS, function(e) {\n                that._ctrlKey = e.ctrlKey;\n                that._shiftKey = e.shiftKey;\n            });\n        },\n\n        _selectable: function() {\n            var that = this;\n            var wrapper = that.wrapper;\n\n            if (!that.options.selectable) {\n                return;\n            }\n\n            wrapper.on(MOUSEDOWN + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td, .k-event, .k-scheduler-body td .k-link\", function(e) {\n                if (that._isTouch(e)) {\n                    return;\n                }\n                that._mouseDownSelection(e);\n            });\n\n            var mouseMoveHandler = that._mouseMove.bind(that);\n\n            wrapper.on(MOUSEDOWN + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td\", function(e) {\n                var which = e.which;\n                var button = e.button;\n                var isRight = which && which === 3 || button && button == 2;\n\n                if (that._isTouch(e)) {\n                    return;\n                }\n\n                if (!isRight) {\n                    wrapper.on(MOUSEMOVE + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td\", mouseMoveHandler);\n                }\n            });\n\n            wrapper.on(\"mouseup\" + NS + \" mousecancel\" + NS, function() {\n                wrapper.off(MOUSEMOVE + NS, \".k-scheduler-header-all-day td, .k-scheduler-content td\", mouseMoveHandler);\n            });\n        },\n\n        _mouseDownSelection: function(e) {\n            var which = e.which;\n            var button = e.button;\n            var isRight = which && which === 3 || button && button == 2;\n\n            if (!isRight) {\n                if (e.ctrlKey) {\n                    this._ctrlKey = e.ctrlKey;\n                }\n\n                if (e.shiftKey) {\n                    this._shiftKey = e.shiftKey;\n                }\n\n                this._mouseDown = true;\n                this._createSelection(e.currentTarget);\n\n                if ($(e.currentTarget).hasClass(\"k-event\")) {\n                    this._selection.eventElement = e.currentTarget;\n                }\n            }\n\n            if (this.view().name !== \"year\" && kendo._activeElement() !== this.wrapper.get(0)) {\n                kendo.focusElement(this.wrapper);\n            } else {\n                this._select();\n            }\n\n            if (this.toolbar) {\n                this.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n            }\n        },\n\n        _selectFirstSlot: function() {\n            var firstAllDay = this.wrapper.find(\".k-scheduler-header-all-day\").find(\"td\").first(),\n                firstContent = this.wrapper.find(\".k-scheduler-content\").find(\"td\").first(),\n                firstSlot;\n\n            if (firstAllDay.length > 0) {\n                firstSlot = firstAllDay;\n            } else if (firstContent.length > 0) {\n                firstSlot = firstContent;\n            } else {\n                firstSlot = this.wrapper.find(\".k-scheduler-body\").find(\".k-link\").first();\n            }\n\n            this._createSelection(firstSlot);\n        },\n\n        _firstEvent: function() {\n            var firstEventInAllDay = this.wrapper.find(\".k-scheduler-header-wrap .k-event, .k-task\").first(),\n                firstEventInContent = this.wrapper.find(\".k-scheduler-content .k-event\").first(),\n                firstEvent, allDayEvent, contentEvent;\n\n            if (firstEventInAllDay.length > 0) {\n                if (firstEventInContent.length > 0) {\n                    allDayEvent = this.occurrenceByUid(firstEventInAllDay.data(\"uid\"));\n                    contentEvent = this.occurrenceByUid(firstEventInContent.data(\"uid\"));\n\n                    firstEvent = allDayEvent.start <= contentEvent.start ? firstEventInAllDay : firstEventInContent;\n                } else {\n                    firstEvent = firstEventInAllDay;\n                }\n            } else if (firstEventInContent) {\n                firstEvent = firstEventInContent;\n            }\n\n            return firstEvent;\n        },\n\n        _initialFocus: function() {\n            var firstEvent = this._firstEvent();\n\n            if (this.options.selectable) {\n                if (firstEvent && firstEvent.length > 0) {\n                    this._createSelection(firstEvent);\n                    this._selection.eventElement = firstEvent[0];\n                } else {\n                    this._selectFirstSlot();\n                }\n            } else if (this.toolbar && this.toolbar.find(\".\" + FOCUSEDSTATE).length === 0) {\n                this._focusToolbar();\n            } else if (this.toolbar) {\n                this.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n            }\n        },\n\n        _select: function() {\n            const that = this,\n                view = that.view(),\n                wrapper = that.wrapper,\n                selection = that._selection,\n                oldSelection = that._old ? that._old.selection : null,\n                oldEventsLength = that._old ? that._old.eventsLength : null;\n\n            let current = view.current();\n\n            if (!selection) {\n                return;\n            }\n\n            if (current) {\n                current.removeAttribute(\"id\");\n                wrapper.removeAttr(\"aria-activedescendant\");\n            }\n\n\n            view.select(selection);\n            that._selection.eventElement = null;\n\n            current = view.current();\n\n            if (current) {\n                current.setAttribute(\"id\", that._ariaId);\n                wrapper.attr(\"aria-activedescendant\", that._ariaId);\n\n                const oldSelectionStart = that._old ? that._old.selectionStart.getTime() : null;\n                const oldSelectionEnd = that._old ? that._old.selectionEnd.getTime() : null;\n                const selectionRangeChanged = (selection.start.getTime() !== oldSelectionStart) || ((selection.end.getTime() !== oldSelectionEnd));\n\n                if (oldSelection !== current || (selection.events && (oldEventsLength !== selection.events.length ) || selectionRangeChanged)) {\n                    var currentUid = $(current).data(\"uid\");\n\n                    if (that._old && currentUid &&\n                        currentUid === $(that._old.selection).data(\"uid\") &&\n                        (selection.events && that._old.eventsLength === selection.events.length)) {\n                        return;\n                    }\n\n                    var events = that._selectedEvents();\n                    var slots = view._selectedSlots;\n\n                    that._old = {\n                        selection: current,\n                        eventsLength: events.length,\n                        selectionStart: selection.start,\n                        selectionEnd: selection.end\n                    };\n\n                    that.trigger(CHANGE, {\n                        start: selection.start,\n                        end: selection.end,\n                        events: events,\n                        slots: slots,\n                        resources: view._resourceBySlot(selection)\n                    });\n                }\n            }\n        },\n\n        _selectedEvents: function() {\n            var uids = this._selection.events;\n            var length = uids.length;\n            var idx = 0;\n            var event;\n\n            var events = [];\n\n            for (; idx < length; idx++) {\n                event = this.occurrenceByUid(uids[idx]);\n                if (event) {\n                    events.push(event);\n                }\n            }\n\n            return events;\n        },\n\n        _tapPosition: function(event, coordinate) {\n            return /touch/.test(event.type) ? (event.originalEvent || event).changedTouches[0]['page' + coordinate] : event['page' + coordinate];\n        },\n\n        _touchMove: function(e) {\n            var that = this;\n            var content = that.wrapper.find(\".k-scheduler-content\");\n            var verticalScroll = content[0].scrollHeight > content[0].clientHeight;\n            var horizontalScroll = content[0].scrollWidth > content[0].clientWidth;\n            var endY = that._tapPosition(e, 'Y');\n            var endX = that._tapPosition(e, 'X');\n            var scrollTop = content[0].scrollTop - Math.round(endY - that._touchPosY);\n            var scrollLeft = content[0].scrollLeft - Math.round(endX - that._touchPosX);\n            var applyVerticalScroll = verticalScroll && Math.abs(endY - that._touchPosY) > 10;\n            var applyhorizontalScroll = horizontalScroll && Math.abs(endY - that._touchPosY) > 10;\n\n\n            if (that._dragging || kendo.support.kineticScrollNeeded || !that._isTouch(e)) {\n                return;\n            }\n\n            if (applyVerticalScroll || applyhorizontalScroll) {\n                that._amplitude = Math.round(endY - that._touchPosY);\n                that._touchPosY = endY;\n                that._touchPosX = endX;\n                content.animate({\n                    scrollTop: scrollTop,\n                    scrollLeft: scrollLeft\n                }, 0);\n                that.view()._scrolling = true;\n            }\n        },\n\n        _mouseMove: function(e) {\n            var that = this;\n            clearTimeout(that._moveTimer);\n\n            if (that._isTouch(e)) {\n                return;\n            }\n\n            that._moveTimer = setTimeout(function() {\n                var view = that.view();\n                var selection = that._selection;\n\n                if (selection) {\n                    var slot = view.selectionByElement($(e.currentTarget));\n\n                    if (slot && selection.groupIndex === slot.groupIndex) {\n                        var startDate = slot.startDate();\n                        var endDate = slot.endDate();\n\n                        if (startDate >= selection.end) {\n                            selection.backward = false;\n                        } else if (endDate <= selection.start) {\n                            selection.backward = true;\n                        }\n\n                        if (selection.backward) {\n                            selection.start = startDate;\n                        } else {\n                            selection.end = endDate;\n                        }\n\n                        that._select();\n                    }\n                }\n            }, 5);\n        },\n\n        _viewByIndex: function(index) {\n            var view, views = this.views;\n\n            for (view in views) {\n                if (!index) {\n                    return view;\n                }\n\n                index--;\n            }\n        },\n\n        _keydownToolbar: function(e) {\n            var key = e.keyCode;\n\n            if (e.altKey && key === keys.DOWN && this.toolbar.find(\".k-nav-current\").hasClass(FOCUSEDSTATE)) {\n                this._showCalendar();\n                e.preventDefault();\n                return;\n            } else if (key === keys.DOWN) {\n                if (this._selectedViewName === \"year\") {\n                    this.view().calendar.focus();\n                } else if (document.activeElement !== this.element[0]) {\n                    this.element.focus();\n                }\n\n                e.preventDefault();\n\n                return;\n            }\n        },\n\n        _keydownView: function(e) {\n            var key = e.keyCode,\n                isModifier = key === 16 || key === 18 || key === 17 || key === 91 || key === 92,\n                selection = this._selection,\n                view = this.view(),\n                editable = view.options.editable,\n                arrowKeys = [ keys.LEFT, keys.RIGHT, keys.UP, keys.DOWN ],\n                isRtl = kendo.support.isRtl(this.element),\n                previous, content, cell;\n\n            if (isModifier) {\n                return;\n            }\n\n            // slots selection via keyboard is no longer available\n            // see here: https://github.com/telerik/kendo-themes/blob/develop/docs/accessibility/Scheduler.md\n            if (!selection) {\n                return;\n            }\n\n            if (key === keys.ENTER) {\n                if (selection.events.length && editable) {\n                    if (editable.update !== false) {\n                        this.editEvent(selection.events[0]);\n                    }\n                }\n            } else if ((key === keys.DELETE || key === keys.BACKSPACE) && editable !== false && editable.destroy !== false) {\n                this.removeEvent(selection.events[0]);\n            } else if (arrowKeys.indexOf(key) > -1) {\n                previous = key === keys.UP || (key === keys.LEFT && !isRtl) || (key === keys.RIGHT && isRtl);\n\n                if (view.moveToEvent(selection, previous)) {\n                    this._select();\n\n                    // Focus the Scheduler element only if it not the currently focused element\n                    if (document.activeElement !== this.element[0]) {\n                        this.element.trigger(\"focus\");\n                    }\n\n                    e.preventDefault();\n                }\n            } else if (key === keys.HOME || key === keys.END) {\n                e.preventDefault();\n                content = this.view().content.eq(0);\n\n                if (key === keys.HOME) {\n                    cell = content.find(\".k-scheduler-table td\").first();\n                } else {\n                    cell = content.find(\".k-scheduler-table td\").last();\n                }\n\n                this.view()._scrollTo(cell[0], content[0]);\n            }\n        },\n\n        _keydownShortcut: function(key) {\n            var currentDate = new Date(),\n                timezone = this.options.timezone,\n                editable = this.view().options.editable;\n\n            if (key === 66 && !!this.view().toggleFullDay) {\n                this.view().toggleFullDay();\n            } else if (key === 67 && editable && editable.create !== false) {\n                this.addEvent(extend({}, {\n                    start: this.date(),\n                    end: this.date()\n                }));\n            } else if (key === 84) {\n                if (timezone) {\n                    var timezoneOffset = kendo.timezone.offset(currentDate, timezone);\n                    date = kendo.timezone.convert(currentDate, currentDate.getTimezoneOffset(), timezoneOffset);\n                } else {\n                    date = currentDate;\n                }\n\n                if (!this.trigger(\"navigate\", { view: this._selectedViewName, action: \"today\", date: date })) {\n                    this.date(date);\n                }\n            }\n        },\n\n        _keydownYearView: function(e) {\n            var view = this.view(),\n                selection = this._selection,\n                key = e.keyCode;\n\n            if (key === keys.TAB) {\n                return;\n            }\n\n            if (key === keys.F10) {\n                this._focusToolbar();\n                e.preventDefault();\n            } else {\n                this.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n                view.calendar.focus();\n            }\n\n            if (selection) {\n                this._adjustSelectedDate();\n            }\n\n            e.preventDefault();\n        },\n\n        _keydownAgendaView: function(e) {\n            var key = e.keyCode,\n                view = this.view(),\n                selection = this._selection,\n                content, cell;\n\n            if (view.move(selection, key)) {\n                e.preventDefault();\n                this.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n                this._select();\n            } else if (key === keys.HOME || key === keys.END) {\n                e.preventDefault();\n                content = this.view().content.eq(0);\n\n                if (key === keys.HOME) {\n                    cell = content.find(\".k-scheduler-table td\").first();\n                } else {\n                    cell = content.find(\".k-scheduler-table td\").last();\n                }\n\n                this.view()._scrollTo(cell[0], content[0]);\n            }\n        },\n\n        _keydownChangeView: function(key) {\n            var viewIndex = key - 49,\n                viewByIndex;\n\n            if (viewIndex === -1) {\n                viewIndex = 9;\n            }\n\n            viewByIndex = this._viewByIndex(viewIndex);\n\n            if (viewByIndex && !this.trigger(\"navigate\", { view: viewByIndex, action: \"changeView\", date: this.date() })) {\n                this.view(viewByIndex);\n            }\n        },\n\n        _keydownChangeDate: function(key) {\n            var isRtl = kendo.support.isRtl(this.element),\n                direction = (isRtl && key === keys.LEFT) || (!isRtl && key === keys.RIGHT) ? \"next\" : \"previous\";\n\n            if (direction === \"next\") {\n                date = this.view().nextDate();\n            } else {\n                date = this.view().previousDate();\n            }\n\n            if (!this.trigger(\"navigate\", { view: this._selectedViewName, action: direction, date: date })) {\n                this.date(date);\n                this._initialFocus();\n                this._select();\n            }\n        },\n\n        _keydown: function(e) {\n            var key = e.keyCode,\n                shortcutKeys = [66, 67, 84],\n                toolbarIsFocused = $(e.target).closest(\".k-toolbar\").length > 0,\n                altKey = e.altKey;\n\n            this._ctrlKey = e.ctrlKey;\n            this._shiftKey = e.shiftKey;\n\n            if (key === keys.ESC && this.popup && this.popup.visible()) {\n                this.popup.close();\n                e.preventDefault();\n                return;\n            }\n\n            if ((key === keys.LEFT || key === keys.RIGHT) && this._shiftKey) {\n                this._keydownChangeDate(key);\n                return;\n            }\n\n            if (altKey && key >= 48 && key <= 57) {\n                this._keydownChangeView(key);\n                return;\n            }\n\n            if (shortcutKeys.indexOf(key) > -1) {\n                if (!$(e.target).hasClass(\"k-scheduler-search-input\")) {\n                    this._keydownShortcut(key);\n                }\n\n                return;\n            }\n\n            if (toolbarIsFocused) {\n                this._keydownToolbar(e);\n            } else {\n                if (this._selectedViewName === \"year\") {\n                    this._keydownYearView(e);\n                    return;\n                }\n\n                if (key === keys.F10) {\n                    this._focusToolbar();\n                    e.preventDefault();\n                    return;\n                }\n\n                if (this._selectedViewName === \"agenda\") {\n                    this._keydownAgendaView(e);\n                    return;\n                }\n\n                this._keydownView(e);\n            }\n        },\n\n        _focusToolbar: function() {\n            this.toolbar.find(\"[tabindex=0]\").first()\n                .trigger(\"focus\")\n                .addClass(FOCUSEDSTATE);\n        },\n\n        _createSelection: function(item) {\n            var selection = this._selection,\n                uid, slot;\n\n            item = $(item);\n\n            if (item.is(\".k-event\")) {\n                uid = item.attr(kendo.attr(\"uid\"));\n\n                if (selection && selection.events.indexOf(uid) !== -1 && !this._ctrlKey) {\n                    return;\n                }\n            }\n\n            if (!selection || (!this._ctrlKey && !this._shiftKey)) {\n                selection = this._selection = {\n                    events: [],\n                    groupIndex: 0\n                };\n            }\n\n            slot = this.view().selectionByElement(item);\n\n            if (slot) {\n                selection.groupIndex = slot.groupIndex || 0;\n            }\n\n            if (uid) {\n                slot = getOccurrenceByUid(this._data, uid);\n            }\n\n            if (slot && slot.uid) {\n                uid = [slot.uid];\n            }\n\n            this._updateSelection(slot, uid);\n            this._adjustSelectedDate();\n        },\n\n        _updateSelection: function(dataItem, events, groupIndex) {\n            var selection = this._selection;\n\n            if (dataItem && selection) {\n                var view = this.view();\n\n                if (dataItem.uid) {\n                    dataItem = view._updateEventForSelection(dataItem);\n                }\n\n                if (this._shiftKey && selection.start && selection.end) {\n                    var backward = dataItem.end < selection.end;\n\n                    selection.end = dataItem.endDate ? dataItem.endDate() : dataItem.end;\n\n                    if (backward && view._timeSlotInterval) {\n                        kendo.date.setTime(selection.end, -view._timeSlotInterval());\n                    }\n                } else {\n                    selection.start = dataItem.startDate ? dataItem.startDate() : dataItem.start;\n                    selection.end = dataItem.endDate ? dataItem.endDate() : dataItem.end;\n                }\n\n                if (\"isDaySlot\" in dataItem) {\n                    selection.isAllDay = dataItem.isDaySlot;\n                } else {\n                    selection.isAllDay = dataItem.isAllDay;\n                }\n\n                if (groupIndex !== null && groupIndex !== undefined) {\n                    selection.groupIndex = groupIndex;\n                }\n\n                selection.index = dataItem.index;\n                if (this._ctrlKey) {\n                    var indexOfEvent = (events && events.length) ? selection.events.indexOf(events[0]) : -1;\n\n                    if (indexOfEvent > -1) {\n                        selection.events.splice(indexOfEvent, 1);\n                    } else {\n                        selection.events = selection.events.concat(events || []);\n                    }\n                } else {\n                        selection.events = events || [];\n                }\n            }\n        },\n\n        options: {\n            name: \"Scheduler\",\n            date: TODAY,\n            editable: true,\n            autoBind: true,\n            snap: true,\n            mobile: false,\n            timezone: \"\",\n            allDaySlot: true,\n            min: new Date(1900, 0, 1),\n            max: new Date(2099, 11, 31),\n            toolbar: null,\n            workWeekStart: 1,\n            workWeekEnd: 5,\n            workDays: null,\n            showWorkHours: false,\n            startTime: TODAY,\n            endTime: TODAY,\n            currentTimeMarker: {\n                updateInterval: 10000,\n                useLocalTimezone: true\n            },\n            ongoingEvents: {\n                cssClass: ONGOING_CLASS,\n                enabled: false,\n                updateInterval: 60000,\n                useLocalTimezone: true\n            },\n            footer: {},\n            messages: {\n                today: \"Today\",\n                pdf: \"Export to PDF\",\n                save: \"Save\",\n                cancel: \"Cancel\",\n                destroy: \"Delete\",\n                resetSeries: \"Reset Series\",\n                deleteWindowTitle: \"Delete event\",\n                next: \"Next\",\n                previous: \"Previous\",\n                refresh: \"Refresh\",\n                selectView: \"Select view\",\n                ariaSlotLabel: \"Selected from {0:t} to {1:t}\",\n                ariaEventLabel: {\n                    on: \"on\",\n                    at: \"at\",\n                    to: \"to\",\n                    allDay: \"(all day)\",\n                    prefix: \"\"\n                },\n                search: \"Search...\",\n                views: {\n                    day: \"Day\",\n                    week: \"Week\",\n                    workWeek: \"Work Week\",\n                    agenda: \"Agenda\",\n                    month: \"Month\",\n                    timeline: \"Timeline\",\n                    timelineWeek: \"Timeline Week\",\n                    timelineWorkWeek: \"Timeline Work Week\",\n                    timelineMonth: \"Timeline Month\",\n                    year: \"Year\"\n                },\n                recurrenceMessages: {\n                    deleteWindowTitle: \"Delete Recurring Item\",\n                    resetSeriesWindowTitle: \"Reset Series\",\n                    deleteWindowOccurrence: \"Delete current occurrence\",\n                    deleteWindowSeries: \"Delete the series\",\n                    editWindowTitle: \"Edit Recurring Item\",\n                    editWindowOccurrence: \"Edit current occurrence\",\n                    editWindowSeries: \"Edit the series\"\n                },\n                editable: {\n                    confirmation: DELETECONFIRM\n                },\n                editor: {\n                    title: \"Title\",\n                    start: \"Start\",\n                    end: \"End\",\n                    allDayEvent: \"All day event\",\n                    description: \"Description\",\n                    repeat: \"Repeat\",\n                    timezone: \"Timezone\",\n                    startTimezone: \"Start timezone\",\n                    endTimezone: \"End timezone\",\n                    separateTimezones: \"Use separate start and end time zones\",\n                    timezoneEditorTitle: \"Timezones\",\n                    timezoneEditorButton: \"Time zone\",\n                    timezoneTitle: \"Time zones\",\n                    noTimezone: \"No timezone\",\n                    editorTitle: \"Event\"\n                }\n            },\n            height: null,\n            width: null,\n            resources: [],\n            group: {\n                resources: [],\n                orientation: \"horizontal\"\n            },\n            views: [],\n            selectable: false\n        },\n\n        events: [\n            REMOVE,\n            EDIT,\n            CANCEL,\n            SAVE,\n            \"add\",\n            \"dataBinding\",\n            \"dataBound\",\n            \"moveStart\",\n            \"move\",\n            \"moveEnd\",\n            \"resizeStart\",\n            \"resize\",\n            \"resizeEnd\",\n            \"navigate\",\n            CHANGE\n        ],\n\n        destroy: function() {\n            var that = this,\n                element;\n\n            Widget.fn.destroy.call(that);\n\n            if (that.dataSource) {\n                that.dataSource.unbind(CHANGE, that._refreshHandler);\n                that.dataSource.unbind(PROGRESS, that._progressHandler);\n                that.dataSource.unbind(ERROR, that._errorHandler);\n            }\n\n            if (that._resourceRefreshHandler) {\n                for (var idx = 0; idx < that.resources.length; idx++) {\n                    var resourceDS = that.resources[idx].dataSource;\n                    resourceDS.unbind(CHANGE, that._resourceRefreshHandler);\n                    resourceDS.unbind(PROGRESS, that._resourceProgressHandler);\n                    resourceDS.unbind(ERROR, that._resourceErrorHandler);\n                }\n            }\n\n            if (that.calendar) {\n                that.calendar.destroy();\n                that.popup.destroy();\n            }\n\n            if (that.view()) {\n                that.view().destroy();\n            }\n\n            if (that._editor) {\n                that._editor.destroy();\n            }\n\n            if (this._moveDraggable) {\n                this._moveDraggable.destroy();\n            }\n\n            if (this._resizeDraggable) {\n                this._resizeDraggable.destroy();\n            }\n\n            if (that.mediaQueryList) {\n                that.mediaQueryList.destroy();\n            }\n\n            element = that.element\n                .add(that.wrapper)\n                .add(that.toolbar)\n                .add(that.popup);\n\n            element.off(NS);\n\n            clearTimeout(that._moveTimer);\n\n            that._model = null;\n            that.toolbar = null;\n            that.element = null;\n\n            $(window).off(\"resize\" + NS, that._resizeHandler);\n\n            kendo.destroy(that.wrapper);\n        },\n\n        setDataSource: function(dataSource) {\n            this.options.dataSource = dataSource;\n\n            this._dataSource();\n\n            if (this.options.autoBind && dataSource.fetch) {\n                dataSource.fetch();\n            } else if (isArray(dataSource)) {\n                this.view(this._selectedView);\n            }\n        },\n\n        items: function() {\n            var content = this.wrapper.find(\".k-scheduler-content\");\n            var view = this.view();\n\n            if (view && view.options.name === \"agenda\") {\n                return content.find(\".k-task\");\n            } else {\n                return content.find(\".k-event\")\n                              .add(this.wrapper.find(\".k-scheduler-header-wrap\")\n                                       .find(\".k-scheduler-header-all-day\").siblings());\n            }\n        },\n\n        _movable: function() {\n            var startSlot;\n            var endSlot;\n            var startResources;\n            var startTime;\n            var endTime;\n            var event;\n            var clonedEvent;\n            var that = this;\n            var originSlot;\n            var originStartTime;\n            var originalEvent;\n            var distance = 0;\n            var clonedEvents = [];\n            var cachedEvents = [];\n\n            var isMobile = that._isMobile();\n            var movable = that.options.editable && that.options.editable.move !== false;\n            var resizable = that.options.editable && that.options.editable.resize !== false;\n\n            if (movable || (resizable && isMobile)) {\n                that._dragging = false;\n                if (isMobile && kendo.support.mobileOS.android) {\n                    distance = 5;\n                }\n\n                that._moveDraggable = new kendo.ui.Draggable(that.element, {\n                    distance: distance,\n                    filter: \".k-event\",\n                    ignore: \".k-resize-handle\",\n                    holdToDrag: isMobile,\n                    autoScroll: true\n                });\n\n                if (movable) {\n                    that._moveDraggable.bind(\"dragstart\", function(e) {\n                        var view = that.view();\n                        var eventElement = e.currentTarget;\n                        var isTouch = that._isTouch(e);\n                        that._dragging = true;\n\n                        if (!view.options.editable || view.options.editable.move === false) {\n                            that._dragging = false;\n                            e.preventDefault();\n                            return;\n                        }\n\n                        if (isTouch && !eventElement.hasClass(\"k-event-active\")) {\n                            that._dragging = false;\n                            that.element.find(\".k-event-active\").removeClass(\"k-event-active\");\n                            e.preventDefault();\n                            return;\n                        }\n\n                        event = that.occurrenceByUid(eventElement.attr(kendo.attr(\"uid\")));\n\n                        clonedEvent = event.clone();\n                        originalEvent = event.clone();\n\n                        clonedEvent.update(view._eventOptionsForMove(clonedEvent));\n\n                        clonedEvent.inverseColor = that._isInverseColor(eventElement);\n\n                        clonedEvents = [];\n                        if (that._selection) {\n                            var events = that._selection.events;\n\n                            for (var i = 0; i < events.length; i++) {\n                                var evtClone = that.occurrenceByUid(events[i]).clone();\n                                var evtCloneElement = this.element.find('div.k-event[data-uid=\"' + evtClone.uid + '\"]').eq(0);\n\n                                evtClone.update(view._eventOptionsForMove(evtClone));\n\n                                if (evtCloneElement.length) {\n                                    evtClone.inverseColor = that._isInverseColor(evtCloneElement);\n                                }\n\n                                clonedEvents.push(evtClone);\n                            }\n                        } else {\n                            clonedEvents.push(clonedEvent);\n                        }\n\n                        startSlot = view._slotByPosition(e.x.startLocation, e.y.startLocation);\n                        startResources = view._resourceBySlot(startSlot);\n\n                        originStartTime = startTime = startSlot.startOffset(e.x.startLocation, e.y.startLocation, that.options.snap);\n\n                        endSlot = startSlot;\n\n                        originSlot = startSlot;\n\n                        if (!startSlot || that.trigger(\"moveStart\", { event: event })) {\n                            e.preventDefault();\n                        }\n                    })\n                    .bind(\"drag\", function(e) {\n                        var view = that.view();\n                        var slot = view._slotByPosition(e.x.location, e.y.location);\n                        var distance;\n                        var range;\n                        var i;\n\n                        if (!slot) {\n                            return;\n                        }\n\n                        endTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n\n                        if (slot.isDaySlot !== startSlot.isDaySlot) {\n\n                            if (slot.isDaySlot !== originSlot.isDaySlot) {\n                                var slotIndex = $(startSlot.element).index();\n\n                                var targetSlotElement = $(slot.element).parent().children().eq(slotIndex);\n\n                                startSlot = view._slotByPosition(targetSlotElement.offset().left, targetSlotElement.offset().top);\n\n                                startTime = startSlot.startOffset(e.x.location, e.y.location, true);\n\n                                cachedEvents = clonedEvents.map(function(event) { return event.clone(); });\n\n                                for (i = 0; i < clonedEvents.length; i++) {\n                                    if (clonedEvents[i].isAllDay != slot.isDaySlot) {\n                                        clonedEvents[i].isAllDay = slot.isDaySlot;\n\n                                        clonedEvents[i].end = kendo.date.getDate(clonedEvents[i].start);\n                                        clonedEvents[i].start = kendo.date.getDate(clonedEvents[i].start);\n\n                                        if (!slot.isDaySlot) {\n                                            kendo.date.setTime(clonedEvents[i].start, kendo.date.getMilliseconds(view.startTime()));\n                                            kendo.date.setTime(clonedEvents[i].end, kendo.date.getMilliseconds(view.startTime()) + view._timeSlotInterval());\n                                        }\n                                    }\n                                }\n                            } else {\n                                startSlot = $.extend(true, { }, originSlot);\n                                startTime = originStartTime;\n\n                                clonedEvents = cachedEvents;\n                            }\n                        }\n\n                        distance = endTime - startTime;\n\n                        for (i = 0; i < clonedEvents.length; i++) {\n                            view._updateMoveHint(clonedEvents[i], slot.groupIndex, distance);\n                        }\n\n                        range = moveEventRange(clonedEvent, distance);\n\n                        if (!that.trigger(\"move\", {\n                            event: event,\n                            slot: { element: slot.element, start: slot.startDate(), end: slot.endDate(), isDaySlot: slot.isDaySlot },\n                            resources: view._resourceBySlot(slot),\n                            start: range.start,\n                            end: range.end\n                        })) {\n                            endSlot = slot;\n                        } else {\n                            for (i = 0; i < clonedEvents.length; i++) {\n                                view._updateMoveHint(clonedEvents[i], slot.groupIndex, distance);\n                            }\n                        }\n                    })\n                    .bind(\"dragend\", function(e) {\n                        that.view()._removeMoveHint();\n                        var distance = endTime - startTime;\n                        var range = moveEventRange(clonedEvent, distance);\n                        var start = range.start;\n                        var end = range.end;\n                        that._dragging = false;\n\n                        var endResources = that.view()._resourceBySlot(endSlot);\n\n                        var prevented = that.trigger(\"moveEnd\", {\n                            event: event,\n                            slot: { element: endSlot.element, start: endSlot.startDate(), end: endSlot.endDate() },\n                            start: start,\n                            end: end,\n                            resources: endResources\n                        });\n\n                        if (!prevented && (event.start.getTime() !== start.getTime() ||\n                            event.end.getTime() !== end.getTime() ||\n                            originSlot.isDaySlot !== endSlot.isDaySlot ||\n                            kendo.stringify(endResources) !== kendo.stringify(startResources))) {\n\n                            that._isMultiDrag = clonedEvents.length > 1;\n\n                            for (var i = 0; i < clonedEvents.length; i++) {\n                                var evt = clonedEvents[i];\n\n                                range = moveEventRange(evt, distance);\n\n                                var updatedEventOptions = that.view()._eventOptionsForMove(evt);\n                                var eventOptions = $.extend(\n                                    {\n                                        isAllDay: evt.isAllDay,\n                                        start: range.start,\n                                        end: range.end\n                                    },\n                                    updatedEventOptions,\n                                    endResources\n                                );\n\n                                that._updateEvent(null, evt, eventOptions);\n                            }\n\n                            if (that._isMultiDrag) {\n                                that.dataSource.sync();\n                                that._isMultiDrag = false;\n                            }\n                        }\n\n                        e.currentTarget.removeClass(\"k-event-active\");\n                        this.cancelHold();\n                        clonedEvents = [];\n                        cachedEvents = [];\n                    })\n                    .bind(\"dragcancel\", function() {\n                        that.view()._removeMoveHint();\n                        this.cancelHold();\n                        clonedEvents = [];\n                        cachedEvents = [];\n                    });\n                }\n\n                that._moveDraggable.bind(\"hold\", function(e) {\n                    if (that._isTouch(e)) {\n                        that.element.find(\".k-event-active\").removeClass(\"k-event-active\");\n                        if (that.options.selectable) {\n                            that._createSelection(e.currentTarget);\n                        }\n                        e.currentTarget.addClass(\"k-event-active\");\n                    }\n                });\n            }\n        },\n\n        _resizable: function() {\n            var startTime;\n            var endTime;\n            var event;\n            var clonedEvent;\n            var slot;\n            var that = this;\n            var distance = 0;\n\n            function direction(handle) {\n                var directions = {\n                    \"k-resize-e\": \"east\",\n                    \"k-resize-w\": \"west\",\n                    \"k-resize-n\": \"north\",\n                    \"k-resize-s\": \"south\"\n                };\n\n                for (var key in directions) {\n                    if (handle.hasClass(key)) {\n                        return directions[key];\n                    }\n                }\n            }\n\n            if (that._isMobile() && kendo.support.mobileOS.android) {\n                distance = 5;\n            }\n\n            that._resizeDraggable = new kendo.ui.Draggable(that.element, {\n                distance: distance,\n                filter: \".k-resize-handle\",\n                autoScroll: true,\n                dragstart: function(e) {\n                    var dragHandle = $(e.currentTarget);\n\n                    var eventElement = dragHandle.closest(\".k-event\");\n\n                    var uid = eventElement.attr(kendo.attr(\"uid\"));\n\n                    var view = that.view();\n\n                    that._dragging = true;\n                    event = that.occurrenceByUid(uid);\n\n                    clonedEvent = event.clone();\n\n                    view._updateEventForResize(clonedEvent);\n\n                    slot = view._slotByPosition(e.x.startLocation, e.y.startLocation);\n\n                    if (that.trigger(\"resizeStart\", { event: event })) {\n                        e.preventDefault();\n                    }\n\n                    startTime = kendo.date.toUtcTime(clonedEvent.start);\n\n                    endTime = kendo.date.toUtcTime(clonedEvent.end);\n                },\n                drag: function(e) {\n                    if (!slot) {\n                        return;\n                    }\n\n                    var dragHandle = $(e.currentTarget);\n\n                    var dir = direction(dragHandle);\n\n                    var view = that.view();\n\n                    var currentSlot = view._slotByPosition(e.x.location, e.y.location);\n\n                    if (!currentSlot || slot.groupIndex != currentSlot.groupIndex) {\n                        return;\n                    }\n\n                    slot = currentSlot;\n\n                    var originalStart = startTime;\n\n                    var originalEnd = endTime;\n\n                    if (dir == \"south\") {\n                        if (!slot.isDaySlot && slot.end - kendo.date.toUtcTime(clonedEvent.start) >= view._timeSlotInterval()) {\n                            if (clonedEvent.isAllDay) {\n                                endTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n                            } else {\n                                endTime = slot.endOffset(e.x.location, e.y.location, that.options.snap);\n                            }\n                        }\n                    } else if (dir == \"north\") {\n                        if (!slot.isDaySlot && kendo.date.toUtcTime(clonedEvent.end) - slot.start >= view._timeSlotInterval()) {\n                            startTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n                        }\n                    } else if (dir == \"east\") {\n                        if (slot.isDaySlot && kendo.date.toUtcTime(kendo.date.getDate(slot.endDate())) >= kendo.date.toUtcTime(kendo.date.getDate(clonedEvent.start))) {\n                            if (clonedEvent.isAllDay) {\n                                endTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n                            } else {\n                                endTime = slot.endOffset(e.x.location, e.y.location, that.options.snap);\n                            }\n                        } else if (!slot.isDaySlot && slot.end - kendo.date.toUtcTime(clonedEvent.start) >= view._timeSlotInterval()) {\n                            endTime = slot.endOffset(e.x.location, e.y.location, that.options.snap);\n                        }\n                    } else if (dir == \"west\") {\n                        if (slot.isDaySlot && kendo.date.toUtcTime(kendo.date.getDate(clonedEvent.end)) >= kendo.date.toUtcTime(kendo.date.getDate(slot.startDate()))) {\n                            startTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n                        } else if (!slot.isDaySlot && kendo.date.toUtcTime(clonedEvent.end) - slot.start >= view._timeSlotInterval()) {\n                            startTime = slot.startOffset(e.x.location, e.y.location, that.options.snap);\n                        }\n                    }\n\n                    if (!that.trigger(\"resize\", {\n                        event: event,\n                        slot: { element: slot.element, start: slot.startDate(), end: slot.endDate() },\n                        start: kendo.timezone.toLocalDate(startTime),\n                        end: kendo.timezone.toLocalDate(endTime),\n                        resources: view._resourceBySlot(slot)\n                    })) {\n                        view._updateResizeHint(clonedEvent, slot.groupIndex, startTime, endTime);\n                    } else {\n                        startTime = originalStart;\n                        endTime = originalEnd;\n                    }\n                },\n                dragend: function(e) {\n                    var dragHandle = $(e.currentTarget);\n                    var start = new Date(clonedEvent.start.getTime());\n                    var end = new Date(clonedEvent.end.getTime());\n                    var dir = direction(dragHandle);\n\n                    that._dragging = false;\n                    that.view()._removeResizeHint();\n\n                    if (dir == \"south\") {\n                        end = kendo.timezone.toLocalDate(endTime);\n                    } else if (dir == \"north\") {\n                        start = kendo.timezone.toLocalDate(startTime);\n                    } else if (dir == \"east\") {\n                        if (slot.isDaySlot) {\n                            end = kendo.date.getDate(kendo.timezone.toLocalDate(endTime));\n                        } else {\n                            end = kendo.timezone.toLocalDate(endTime);\n                        }\n                    } else if (dir == \"west\") {\n                        if (slot.isDaySlot) {\n                            start = new Date(kendo.timezone.toLocalDate(startTime));\n                            start.setHours(0);\n                            start.setMinutes(0);\n                        } else {\n                            start = kendo.timezone.toLocalDate(startTime);\n                        }\n                    }\n\n                    var prevented = that.trigger(\"resizeEnd\", {\n                        event: event,\n                        slot: { element: slot.element, start: slot.startDate(), end: slot.endDate() },\n                        start: start,\n                        end: end,\n                        resources: that.view()._resourceBySlot(slot)\n                    });\n\n                    if (!prevented && end.getTime() >= start.getTime()) {\n                        if (clonedEvent.start.getTime() != start.getTime() || clonedEvent.end.getTime() != end.getTime()) {\n                            that.view()._updateEventForResize(event);\n                            that._updateEvent(dir, event, { start: start, end: end });\n                        }\n                    }\n\n                    slot = null;\n                    event = null;\n                },\n                dragcancel: function() {\n                    that._dragging = false;\n                    that.view()._removeResizeHint();\n\n                    slot = null;\n                    event = null;\n                }\n            });\n        },\n\n        _updateEvent: function(dir, event, eventInfo) {\n            var that = this;\n\n            var updateEvent = function(event, callback) {\n                var start;\n\n                try {\n                    that._preventRefresh = true;\n                    event.update(eventInfo);\n                    that._convertDates(event);\n                    start = event.start;\n\n                    if (dir && event.duration() % MS_PER_DAY === 0 && start.getHours() === 0 && start.getMinutes() === 0 && start.getSeconds() === 0 && start.getMilliseconds() === 0) {\n                        event.set(\"isAllDay\", true);\n                    }\n                } finally {\n                    that._preventRefresh = false;\n                }\n\n                if (!that.trigger(SAVE, { event: event })) {\n                    if (callback) {\n                        callback();\n                    }\n\n                    if (!that._isMultiDrag) {\n                        that.dataSource.sync();\n                    }\n                }\n            };\n\n            var recurrenceHead = function(event) {\n                if (event.recurrenceRule) {\n                    return that.dataSource.getByUid(event.uid);\n                } else {\n                    return that.dataSource.get(event.recurrenceId);\n                }\n            };\n\n            var updateSeries = function() {\n                var head = recurrenceHead(event);\n\n                if (dir == \"south\" || dir == \"north\") {\n                    if (eventInfo.start) {\n                        var start = kendo.date.getDate(head.start);\n                        kendo.date.setTime(start, getMilliseconds(eventInfo.start));\n                        eventInfo.start = start;\n                    }\n                    if (eventInfo.end) {\n                        var end = kendo.date.getDate(head.end);\n                        kendo.date.setTime(end, getMilliseconds(eventInfo.end));\n                        eventInfo.end = end;\n                    }\n                }\n\n                that.dataSource._removeExceptions(head);\n\n                updateEvent(head);\n            };\n\n            var updateOccurrence = function() {\n                var head = recurrenceHead(event);\n                var eventUid;\n\n                var callback = function() {\n                    that._convertDates(head);\n\n                    if (that._selection) {\n                        that._selection.events.push(eventUid);\n                    }\n                };\n\n                var exception = head.toOccurrence({ start: event.start, end: event.end });\n\n                eventUid = exception.uid;\n\n                updateEvent(that.dataSource.add(exception), callback);\n            };\n\n            if (event.recurrenceRule || event.isOccurrence()) {\n                var recurrenceMessages = that.options.messages.recurrenceMessages;\n\n                that._showRecurringDialog(event, updateOccurrence, updateSeries,{\n                    title: recurrenceMessages.editWindowTitle,\n                    text: recurrenceMessages.editRecurring ? recurrenceMessages.editRecurring : EDITRECURRING,\n                    occurrenceText: recurrenceMessages.editWindowOccurrence,\n                    seriesText: recurrenceMessages.editWindowSeries\n                });\n            } else {\n                updateEvent(that.dataSource.getByUid(event.uid));\n            }\n        },\n\n        _modelForContainer: function(container) {\n            container = $(container).closest(\"[\" + kendo.attr(\"uid\") + \"]\");\n\n            return this.dataSource.getByUid(container.attr(kendo.attr(\"uid\")));\n        },\n\n        showDialog: function(options) {\n            this.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n            this._editor.showDialog(options);\n        },\n\n        focus: function() {\n            this.wrapper.trigger(\"focus\");\n        },\n\n        _confirmation: function(callback, model, isResetSeries) {\n            var editable = this.options.editable;\n\n            if (editable === true || editable.confirmation !== false) {\n                var messages = this.options.messages;\n                var title = messages.deleteWindowTitle;\n                var text = typeof editable.confirmation === STRING ? editable.confirmation : messages.editable.confirmation;\n\n                if (this._isEditorOpened() && model.isRecurring()) {\n                    var recurrenceMessages = this.options.messages.recurrenceMessages;\n                    title = recurrenceMessages.deleteWindowTitle;\n\n                    if (model.isException() || model.isNew()) {\n                        text = recurrenceMessages.deleteRecurringConfirmation ? recurrenceMessages.deleteRecurringConfirmation : DELETERECURRINGCONFIRM;\n                    } else {\n                        text = recurrenceMessages.deleteSeriesConfirmation ? recurrenceMessages.deleteSeriesConfirmation : DELETESERIESCONFIRM;\n                    }\n\n                    if (isResetSeries) {\n                        title = recurrenceMessages.resetSeriesWindowTitle;\n                        text = recurrenceMessages.resetSeriesConfirmation ? recurrenceMessages.resetSeriesConfirmation : RESETSERIESCONFIRM;\n                    }\n                }\n\n                var buttons = [\n                    { name: \"destroy\", text: isResetSeries ? messages.resetSeries : messages.destroy, click: function() { callback(); } }\n                ];\n\n                if (!(this._isMobile() && kendo.Pane)) {\n                    buttons.push({ name: \"canceledit\", text: messages.cancel, click: function() { callback(true); } });\n                }\n\n                this._unbindResize();\n\n                this.showDialog({\n                    model: model,\n                    text: text,\n                    title: title,\n                    buttons: buttons\n                });\n\n                this._bindResize();\n            } else {\n                callback();\n            }\n        },\n\n        addEvent: function(eventInfo) {\n            var editable = this._editor.editable;\n            var dataSource = this.dataSource;\n            var event;\n\n            eventInfo = eventInfo || {};\n\n            var prevented = this.trigger(\"add\", { event: eventInfo });\n\n            if (!prevented && ((editable && editable.end()) || !editable)) {\n                this.cancelEvent();\n\n                if (eventInfo && eventInfo.toJSON) {\n                    eventInfo = eventInfo.toJSON();\n                }\n\n                event = dataSource.add(eventInfo);\n\n                if (event) {\n                    this.cancelEvent();\n                    this._editEvent(event);\n                }\n            }\n       },\n\n       saveEvent: function() {\n            var that = this;\n            var editor = that._editor;\n            var dataSource = that.dataSource;\n\n            if (!editor) {\n                return;\n            }\n\n            var editable = editor.editable;\n            var container = editor.container;\n            var model = that._modelForContainer(container);\n            var events, i, event;\n\n            if (container && editable && editable.end() &&\n                !that.trigger(SAVE, { container: container, event: model } )) {\n\n                if (!model.isOccurrence() && !!model.recurrenceException && !model.recurrenceRule) {\n                    events = dataSource.data();\n\n                    for (i = events.length - 1; i >= 0; i -= 1) {\n                        event = events[i];\n                        if (event && event.recurrenceId === model.id) {\n                            dataSource.remove(event);\n                        }\n                    }\n\n                    model.set(\"recurrenceException\", \"\");\n                }\n\n                if (!model.dirty && !model.isOccurrence()) {\n                    that._convertDates(model, \"remove\");\n                }\n\n                dataSource.sync();\n            }\n        },\n\n        cancelEvent: function() {\n            var editor = this._editor;\n            var container = editor.container;\n            var model;\n\n            if (container) {\n                model = this._modelForContainer(container);\n\n                if (model && model.isOccurrence()) {\n                    this._convertDates(model, \"remove\");\n                    this._convertDates(this.dataSource.get(model.recurrenceId), \"remove\");\n                }\n\n                this.dataSource.cancelChanges(model);\n\n                //TODO: handle the cancel in UI\n\n                editor.close();\n            }\n        },\n\n        editEvent: function(uid) {\n            var model = typeof uid == \"string\" ? this.occurrenceByUid(uid) : uid;\n\n            if (!model) {\n                return;\n            }\n\n            this.cancelEvent();\n\n            if (model.isRecurring()) {\n                this._editRecurringDialog(model);\n            } else {\n                this._editEvent(model);\n            }\n        },\n\n        _editEvent: function(model) {\n            this._preventRefresh = true;\n            this._unbindResize();\n\n            this._createPopupEditor(model);\n            this.toolbar.find(\".\" + FOCUSEDSTATE).removeClass(FOCUSEDSTATE);\n\n            this._bindResize();\n        },\n\n        _editRecurringDialog: function(model) {\n            var that = this;\n\n            var editOccurrence = function() {\n                if (model.isException()) {\n                    that._editEvent(model);\n                } else {\n                    that.addEvent(model);\n                }\n            };\n\n            var editSeries = function() {\n                if (model.recurrenceId) {\n                    model = that.dataSource.get(model.recurrenceId);\n                }\n\n                that._editEvent(model);\n            };\n\n            var recurrenceMessages = that.options.messages.recurrenceMessages;\n            that._showRecurringDialog(model, editOccurrence, editSeries, {\n                title: recurrenceMessages.editWindowTitle,\n                text: recurrenceMessages.editRecurring ? recurrenceMessages.editRecurring : EDITRECURRING,\n                occurrenceText: recurrenceMessages.editWindowOccurrence,\n                seriesText: recurrenceMessages.editWindowSeries\n            });\n         },\n\n         _showRecurringDialog: function(model, editOccurrence, editSeries, messages) {\n             var editable = this.options.editable;\n             var editRecurringMode = isPlainObject(editable) ? editable.editRecurringMode : \"dialog\";\n\n             if (editRecurringMode === \"occurrence\" || this._isMultiDrag) {\n                 editOccurrence();\n             } else if (editRecurringMode === \"series\") {\n                 editSeries();\n             } else {\n                 this._unbindResize();\n\n                 this.showDialog({\n                     model: model,\n                     title: messages.title,\n                     text: messages.text,\n                     buttons: [\n                         { text: messages.occurrenceText, click: editOccurrence },\n                         { text: messages.seriesText, click: editSeries }\n                     ]\n                 });\n\n                 this._bindResize();\n             }\n        },\n\n        _createButton: function(command) {\n            var template = command.template || COMMANDBUTTONTMPL,\n                commandName = typeof command === STRING ? command : command.name || command.text,\n                options = { className: \"k-scheduler-\" + (commandName || \"\").replace(/\\s/g, \"\"), text: commandName, attr: \"\" };\n\n            if (!commandName && !(isPlainObject(command) && command.template)) {\n                throw new Error(\"Custom commands should have name specified\");\n            }\n\n            if (isPlainObject(command)) {\n                if (command.className) {\n                    command.className += \" \" + options.className;\n                }\n\n                if (commandName === \"edit\" && isPlainObject(command.text)) {\n                    command = extend(true, {}, command);\n                    command.text = command.text.edit;\n                }\n\n                options = extend(true, options, defaultCommands[commandName], command);\n            } else {\n                options = extend(true, options, defaultCommands[commandName]);\n            }\n\n            return kendo.template(template)(options);\n        },\n\n        _convertDates: function(model, method) {\n            var timezone = this.dataSource.reader.timezone;\n            var startTimezone = model.startTimezone;\n            var endTimezone = model.endTimezone;\n            var start = model.start;\n            var end = model.start;\n\n            method = method || \"apply\";\n            startTimezone = startTimezone || endTimezone;\n            endTimezone = endTimezone || startTimezone;\n\n            if (startTimezone) {\n                if (timezone) {\n                    if (method === \"apply\") {\n                        start = kendo.timezone.convert(model.start, timezone, startTimezone);\n                        end = kendo.timezone.convert(model.end, timezone, endTimezone);\n                    } else {\n                        start = kendo.timezone.convert(model.start, startTimezone, timezone);\n                        end = kendo.timezone.convert(model.end, endTimezone, timezone);\n                    }\n                } else {\n                    start = kendo.timezone[method](model.start, startTimezone);\n                    end = kendo.timezone[method](model.end, endTimezone);\n                }\n\n                model._set(\"start\", start);\n                model._set(\"end\", end);\n            }\n        },\n\n        _createEditor: function() {\n            var that = this;\n\n            var editor;\n\n            if (this._isMobile() && kendo.Pane) {\n                editor = that._editor = new MobileEditor(this.wrapper, extend({}, this.options, {\n                    target: this,\n                    timezone: that.dataSource.reader.timezone,\n                    resources: that.resources,\n                    createButton: this._createButton.bind(this)\n                }));\n            } else {\n                editor = that._editor = new PopupEditor(this.wrapper, extend({}, this.options, {\n                    target: this,\n                    createButton: this._createButton.bind(this),\n                    timezone: that.dataSource.reader.timezone,\n                    resources: that.resources\n                }));\n            }\n\n            editor.bind(\"cancel\", function(e) {\n                if (that.trigger(\"cancel\", { container: e.container, event: e.model })) {\n                    e.preventDefault();\n                    return;\n                }\n                that._preventRefresh = false;\n                that.cancelEvent();\n\n                if (that._attemptRefresh) {\n                    that.refresh();\n                }\n\n                that.focus();\n            });\n\n            editor.bind(\"edit\", function(e) {\n                if (that.trigger(EDIT, { container: e.container, event: e.model })) {\n                    e.preventDefault();\n                }\n            });\n\n            editor.bind(\"save\", function() {\n                that._preventRefresh = false;\n                that.saveEvent();\n            });\n\n            editor.bind(\"remove\", function(e) {\n                that._preventRefresh = false;\n                that.removeEvent(e.model);\n            });\n\n            editor.bind(\"resetSeries\", function(e) {\n                that._confirmation(function(cancel) {\n                    that._preventRefresh = false;\n                    if (!cancel) {\n                        that.dataSource._removeExceptions(e.model);\n                        that.saveEvent();\n                    }\n                }, e.model, true);\n            });\n        },\n\n        _createPopupEditor: function(model) {\n            var editor = this._editor;\n\n            if (!model.isNew() || model.isOccurrence()) {\n                if (model.isOccurrence()) {\n                    this._convertDates(model.recurrenceId ? this.dataSource.get(model.recurrenceId) : model);\n                }\n                this._convertDates(model);\n            }\n\n            this.editable = editor.editEvent(model);\n        },\n\n        removeEvent: function(uid) {\n            var that = this,\n                model = typeof uid == \"string\" ? that.occurrenceByUid(uid) : uid;\n\n            if (!model) {\n                return;\n            }\n\n            if (model.isRecurring()) {\n                that._deleteRecurringDialog(model);\n            } else {\n                that._confirmation(function(cancel) {\n                    if (!cancel) {\n                        that._removeEvent(model);\n                    }\n                }, model);\n            }\n        },\n\n        occurrenceByUid: function(uid) {\n            var occurrence = this.dataSource.getByUid(uid);\n            if (!occurrence) {\n                occurrence = getOccurrenceByUid(this._data, uid);\n            }\n\n            return occurrence;\n        },\n\n        occurrencesInRange: function(start, end) {\n            return new kendo.data.Query(this._data).filter({\n                logic: \"or\",\n                filters: [\n                    {\n                        logic: \"and\",\n                        filters: [\n                            { field: \"start\", operator: \"gte\", value: start },\n                            { field: \"end\", operator: \"gte\", value: start },\n                            { field: \"start\", operator: \"lt\", value: end }\n                        ]\n                    },\n                    {\n                        logic: \"and\",\n                        filters: [\n                            { field: \"start\", operator: \"lte\", value: start },\n                            { field: \"end\", operator: \"gt\", value: start }\n                        ]\n                    }\n                ]\n            }).toArray();\n        },\n\n        _removeEvent: function(model) {\n            if (!this.trigger(REMOVE, { event: model })) {\n                if (this.dataSource.remove(model)) {\n                    this.dataSource.sync();\n                }\n            }\n        },\n\n        _deleteRecurringDialog: function(model) {\n            var that = this;\n            var currentModel = model;\n            var editable = that.options.editable;\n            var deleteOccurrence;\n            var deleteSeries;\n            var createException;\n            var deleteOccurrenceConfirmation;\n            var deleteSeriesConfirmation;\n            var createExceptionConfirmation;\n            var editRecurringMode = isPlainObject(editable) ? editable.editRecurringMode : \"dialog\";\n\n            deleteOccurrence = function() {\n                var occurrence = currentModel.recurrenceId ? currentModel : currentModel.toOccurrence();\n                var head = that.dataSource.get(occurrence.recurrenceId);\n\n                that._convertDates(head);\n                that._removeEvent(occurrence);\n            };\n\n            deleteSeries = function() {\n                if (currentModel.recurrenceId) {\n                    currentModel = that.dataSource.get(currentModel.recurrenceId);\n                }\n\n                that._removeEvent(currentModel);\n            };\n\n            createException = function() {\n                that.dataSource.remove(currentModel);\n                that.dataSource.sync();\n            };\n\n            if (editRecurringMode != \"dialog\" || that._isEditorOpened()) {\n                deleteOccurrenceConfirmation = function() {\n                    that._confirmation(function(cancel) {\n                        if (!cancel) {\n                            deleteOccurrence();\n                        }\n                    }, currentModel);\n                };\n\n                deleteSeriesConfirmation = function() {\n                    that._confirmation(function(cancel) {\n                        if (!cancel) {\n                            deleteSeries();\n                        }\n                    }, currentModel);\n                };\n\n                createExceptionConfirmation = function() {\n                    that._confirmation(function(cancel) {\n                        if (!cancel) {\n                            createException();\n                        }\n                    }, currentModel);\n                };\n            }\n\n            var seriesCallback = deleteSeriesConfirmation || deleteSeries;\n            var occurrenceCallback = deleteOccurrenceConfirmation || deleteOccurrence;\n            var exeptionCallback = createExceptionConfirmation || createException;\n\n            if (that._isEditorOpened()) {\n                if (model.isException()) {\n                    occurrenceCallback();\n                } else if (model.isNew()) {\n                    exeptionCallback();\n                } else {\n                    seriesCallback();\n                }\n            } else {\n                var recurrenceMessages = that.options.messages.recurrenceMessages;\n                that._showRecurringDialog(model, occurrenceCallback, seriesCallback, {\n                    title: recurrenceMessages.deleteWindowTitle,\n                    text: recurrenceMessages.deleteRecurring ? recurrenceMessages.deleteRecurring : DELETERECURRING,\n                    occurrenceText: recurrenceMessages.deleteWindowOccurrence,\n                    seriesText: recurrenceMessages.deleteWindowSeries\n                });\n            }\n        },\n\n        _isEditorOpened: function() {\n            return !!this._editor.container;\n        },\n\n        _unbindView: function(view) {\n            var that = this;\n\n            view.destroy();\n        },\n\n        _bindView: function(view) {\n            var that = this;\n\n            if (that.options.editable) {\n                if (that._viewRemoveHandler) {\n                    view.unbind(REMOVE, that._viewRemoveHandler);\n                }\n\n                that._viewRemoveHandler = function(e) {\n                    that.removeEvent(e.uid);\n                };\n\n                view.bind(REMOVE, that._viewRemoveHandler);\n\n                if (that._viewAddHandler) {\n                    view.unbind(ADD, that._viewAddHandler);\n                }\n\n                that._viewAddHandler = function(e) {\n                    that.addEvent(e.eventInfo);\n                };\n\n                view.bind(ADD, this._viewAddHandler);\n\n                if (that._viewEditHandler) {\n                    view.unbind(EDIT, that._viewEditHandler);\n                }\n\n                that._viewEditHandler = function(e) {\n                    that.editEvent(e.uid);\n                };\n\n                view.bind(EDIT, this._viewEditHandler);\n            }\n\n            if (that._viewNavigateHandler) {\n                view.unbind(\"navigate\", that._viewNavigateHandler);\n            }\n\n            that._viewNavigateHandler = function(e) {\n                if (e.action) {\n                    if (!that.trigger(\"navigate\", { view: e.view, isWorkDay: e.isWorkDay, action: e.action, date: e.date })) {\n                        that.date(e.date);\n                    }\n                } else if (e.view) {\n                    var switchWorkDay = \"isWorkDay\" in e;\n                    var action = switchWorkDay ? \"changeWorkDay\" : \"changeView\";\n\n                    if (!that.trigger(\"navigate\", { view: e.view, isWorkDay: e.isWorkDay, action: action, date: e.date })) {\n                        if (switchWorkDay) {\n                            that._workDayMode = e.isWorkDay;\n                        }\n\n                        that._selectView(e.view);\n                        that.date(e.date);\n                    }\n                }\n            };\n\n            view.bind(\"navigate\", that._viewNavigateHandler);\n\n            if (that._viewActivateHandler) {\n                view.unbind(\"activate\", that._viewActivateHandler);\n            }\n\n            that._viewActivateHandler = function() {\n                var view = this;\n                if (that._selection) {\n                    view.constrainSelection(that._selection);\n\n                    if ($(document.activeElement).closest(\".k-scheduler-toolbar\").length === 0) {\n                        if (document.activeElement !== that.wrapper[0]) {\n                            that.element.trigger(\"focus\");\n                        } else {\n                            that._select();\n                        }\n                    }\n\n                    that._adjustSelectedDate();\n                }\n            };\n\n            view.bind(\"activate\", that._viewActivateHandler);\n        },\n\n        _selectView: function(name) {\n            var that = this;\n\n            if (name && that.views[name]) {\n                if (that._selectedView) {\n                    that._unbindView(that._selectedView);\n                }\n\n                that._selectedView = that._renderView(name);\n                that._selectedViewName = name;\n\n                if (this._initialSize) {\n                    this._initialSize = false;\n                    this._onMediaChange(window.matchMedia(MIN_SCREEN));\n                }\n\n                if (that._viewsCount > 1 && !that._isMobile()) {\n                    var viewElementToSelect = that.toolbar.find(\"[\" + kendo.attr(\"name\") + \"=\" + name + \"]\");\n                    var viewsDropdown = that.toolbar.find(\".k-views-dropdown\");\n                    var viewsGroupEl = viewElementToSelect.closest(\".k-button-group\");\n                    var viewsButtonGroup = viewsGroupEl.data(\"kendoButtonGroup\");\n\n                    viewsDropdown.val(name);\n\n                    if (viewsButtonGroup) {\n                        viewsButtonGroup.select(viewElementToSelect);\n                    }\n                } else if (that._viewsCount > 1) {\n                    var viewSelect = that.toolbar.find(\".k-scheduler-mobile-views\");\n\n                    viewSelect.find(\"[value=\" + name.replace(/\\./g, \"\\\\.\") + \"]\")\n                        .prop(\"selected\", \"selected\");\n                }\n            }\n        },\n\n        view: function(name) {\n            var that = this;\n\n            if (name) {\n                if (name === \"year\") {\n                    that.wrapper.removeAttr(\"tabindex\");\n                } else {\n                    that.wrapper.attr(\"tabindex\", 0);\n                }\n\n                that._selectView(name);\n                that.rebind();\n\n                return;\n            }\n\n            return that._selectedView;\n        },\n\n        viewName: function() {\n            return this.view().name;\n        },\n\n        _renderView: function(name) {\n            var view = this._initializeView(name);\n\n            this._bindView(view);\n\n            if (kendo.support.mouseAndTouchPresent || kendo.support.pointers) {\n                view.content.css(\"-ms-touch-action\", \"pinch-zoom\");\n                view.content.css(\"touch-action\", \"pinch-zoom\");\n            }\n\n            this._model.set(\"formattedDate\", view.dateForTitle());\n            this._model.set(\"formattedShortDate\", view.shortDateForTitle());\n            this._model.set(\"formattedMobileDate\", view.mobileDateForTitle ? view.mobileDateForTitle() : view.shortDateForTitle());\n            this._model.set(\"formattedYear\", view.mobileYearForTitle ? view.mobileYearForTitle() : kendo.format(\"{0:yyyy}\", view.startDate()));\n\n            return view;\n        },\n\n        resize: function(force) {\n            var size = this.getSize();\n            var currentSize = this._size;\n            var view = this.view();\n\n            if (!view || !view.groups) {\n                return;\n            }\n\n            if (force || !currentSize || size.width !== currentSize.width || size.height !== currentSize.height) {\n                this.refresh({ action: \"resize\" });\n                this._size = size;\n            }\n        },\n\n        _adjustSelectedDate: function() {\n            var date = this._model.selectedDate,\n                selection = this._selection,\n                start = selection.start;\n\n            if (start && !kendo.date.isInDateRange(date, getDate(start), getDate(selection.end))) {\n                date.setFullYear(start.getFullYear(), start.getMonth(), start.getDate());\n            }\n        },\n\n        _initializeView: function(name) {\n            var view = this.views[name];\n\n            if (view) {\n                var isSettings = isPlainObject(view),\n                    overrideOptions = {},\n                    type = view.type;\n\n                if (typeof type === STRING) {\n                    type = kendo.getter(view.type)(window);\n                }\n\n                if (isSettings && view.workDays && view.workDays.length) {\n                    overrideOptions.workDays = view.workDays;\n                }\n\n                if (type) {\n                    view = new type(this.wrapper, trimOptions(extend(true, {}, this.options, isSettings ? view : {}, {\n                        resources: this.resources,\n                        date: this.date(),\n                        startTime: kendo.parseDate(view.startTime) || kendo.parseDate(this.options.startTime),\n                        endTime: kendo.parseDate(view.endTime) || kendo.parseDate(this.options.endTime),\n                        showWorkHours: this._workDayMode\n                    }),overrideOptions));\n\n                } else {\n                    throw new Error(\"There is no such view\");\n                }\n            }\n\n            return view;\n        },\n\n        _views: function() {\n            var views = this.options.views;\n            var view;\n            var defaultView;\n            var selected;\n            var isSettings;\n            var name;\n            var type;\n            var idx;\n            var length;\n\n            this.views = {};\n            this._viewsCount = 0;\n\n            for (idx = 0, length = views.length; idx < length; idx++) {\n                var hasType = false;\n\n                view = views[idx];\n\n                isSettings = isPlainObject(view);\n\n                if (isSettings) {\n                    type = name = view.type ? view.type : view;\n                    if (typeof type !== STRING) {\n                        name = view.name || view.title;\n                        hasType = true;\n                    }\n                } else {\n                    type = name = view;\n                    view = {};\n                }\n\n                defaultView = defaultViews[name];\n\n                if (defaultView && !hasType) {\n                    view.type = defaultView.type;\n                    defaultView.title = this.options.messages.views[name];\n                    if (defaultView.type === \"day\") {\n                        defaultView.messages = { allDay: this.options.messages.allDay };\n                    } else if (defaultView.type === \"agenda\") {\n                        defaultView.messages = {\n                            event: this.options.messages.event,\n                            date: this.options.messages.date,\n                            time: this.options.messages.time\n                        };\n                    }\n                }\n\n                view = extend({ title: name }, defaultView, isSettings ? view : {});\n\n                if (name) {\n                    this.views[name] = view;\n                    this._viewsCount++;\n\n                    if (!selected || view.selected) {\n                        selected = name;\n                    }\n                }\n            }\n\n            if (selected) {\n                this._selectedViewName = selected; // toolbar is not rendered yet\n            }\n        },\n\n        rebind: function() {\n            var that = this,\n                resources = that.resources,\n                resourceFetchArray = [];\n\n            if (that._preventRebind) {\n                that._preventRebind = false;\n                return;\n            }\n\n            if (that.options.autoBind === false && resources && resources.length > 0) {\n                resources.forEach(function(resource) {\n                    if (resource.dataSource.data().length === 0) {\n                        that._preventRebind = true;\n                        resourceFetchArray.push(resource.dataSource.fetch());\n                    }\n                });\n\n                $.when.apply(null, resourceFetchArray).then(function() {\n                    that.dataSource.fetch();\n                    that._preventRebind = false;\n                });\n            } else {\n                that.dataSource.fetch();\n            }\n        },\n\n        _dataSource: function() {\n            var that = this,\n                options = that.options,\n                dataSource = options.dataSource;\n\n            dataSource = isArray(dataSource) ? { data: dataSource } : dataSource;\n\n            if (options.timezone && !(dataSource instanceof SchedulerDataSource)) {\n                dataSource = extend(true, dataSource, { schema: { timezone: options.timezone } });\n            } else if (dataSource instanceof SchedulerDataSource) {\n                options.timezone = dataSource.options.schema ? dataSource.options.schema.timezone : \"\";\n            }\n\n            if (that.dataSource && that._refreshHandler) {\n                that.dataSource\n                    .unbind(CHANGE, that._refreshHandler)\n                    .unbind(PROGRESS, that._progressHandler)\n                    .unbind(ERROR, that._errorHandler);\n            } else {\n                that._refreshHandler = that.refresh.bind(that);\n                that._progressHandler = that._requestStart.bind(that);\n                that._errorHandler = that._error.bind(that);\n            }\n\n            that.dataSource = kendo.data.SchedulerDataSource.create(dataSource)\n                .bind(CHANGE, that._refreshHandler)\n                .bind(PROGRESS, that._progressHandler)\n                .bind(ERROR, that._errorHandler);\n\n            that.options.dataSource = that.dataSource;\n        },\n\n\n        _error: function() {\n            this._progress(false);\n        },\n\n        _requestStart: function() {\n            this._progress(true);\n        },\n\n        _progress: function(toggle) {\n            var element = this.element.find(\".k-scheduler-content\");\n            kendo.ui.progress(element, toggle);\n        },\n\n        _resources: function() {\n            var that = this;\n            var resources = that.options.resources;\n            var resourcePromises = [];\n\n            for (var idx = 0; idx < resources.length; idx++) {\n                var resource = resources[idx];\n                var field = resource.field;\n                var name = resource.name || field;\n                var dataSource = resource.dataSource;\n\n                if (!field || !dataSource) {\n                    throw new Error('The \"field\" and \"dataSource\" options of the scheduler resource are mandatory.');\n                }\n\n                that.resources.push({\n                    field: field,\n                    name: name,\n                    title: resource.title || field,\n                    dataTextField: resource.dataTextField || \"text\",\n                    dataValueField: resource.dataValueField || \"value\",\n                    dataColorField: resource.dataColorField || \"color\",\n                    dataParentValueField: resource.dataParentValueField || \"parentValue\",\n                    valuePrimitive: resource.valuePrimitive != null ? resource.valuePrimitive : true,\n                    multiple: resource.multiple || false,\n                    dataSource: that._resourceDataSource(dataSource, name, resourcePromises)\n                });\n            }\n\n            if (!that.options.autoBind) {\n                that._selectView(that._selectedViewName);\n            } else {\n                $.when.apply(null, resourcePromises)\n                      .then(function() {\n                            that.view(that._selectedViewName);\n                        });\n            }\n        },\n\n        _resourceDataSource: function(resourceDS, groupName, promises) {\n            var that = this;\n            var dataSource = isArray(resourceDS) ? { data: resourceDS } : resourceDS;\n            var dataSourceInstance = kendo.data.DataSource.create(dataSource);\n\n            if (that.options.autoBind) {\n                promises.push(dataSourceInstance.fetch(function() {\n                    // 'this' is the DataSource instance not the Scheduler\n                    that._bindResourceEvents(this, groupName);\n                }));\n            } else {\n                that._bindResourceEvents(dataSourceInstance, groupName);\n            }\n\n            return dataSourceInstance;\n        },\n\n        _bindResourceEvents: function(resourceDS, groupName) {\n            var that = this;\n            var isGrouped = that.options.group && that.options.group.resources.length;\n            var isResourceGrouped = isGrouped && that.options.group.resources.indexOf(groupName) > -1;\n\n            if (!that._resourceRefreshHandler && isResourceGrouped) {\n                that._resourceRefreshHandler = that._refreshResource.bind(that);\n                that._resourceErrorHandler = that._error.bind(that);\n            }\n\n            if (isResourceGrouped) {\n                resourceDS.bind(CHANGE, that._resourceRefreshHandler)\n                    .bind(ERROR, that._resourceErrorHandler);\n            }\n        },\n\n        _refreshResource: function() {\n            var that = this;\n            var preventRefresh = (that._editor && that._editor.editable) || that._preventRefresh;\n\n            if (!preventRefresh) {\n                that.view(that._selectedViewName);\n            }\n        },\n\n        _initModel: function() {\n            var that = this;\n            that._model = kendo.observable({\n               selectedDate: new Date(this.options.date),\n               formattedDate: \"\",\n               formattedShortDate: \"\"\n           });\n\n           that._model.bind(CHANGE, function(e) {\n                if (e.field === \"selectedDate\") {\n                    that.view(that._selectedViewName);\n                }\n           });\n        },\n\n        _wrapper: function() {\n            var that = this;\n            var options = that.options;\n            var height = options.height;\n            var width = options.width;\n\n            that.wrapper = that.element.addClass(\"k-scheduler\");\n\n            if (that._isMobile()) {\n               that.wrapper.addClass(\"k-scheduler-mobile\");\n            }\n\n            if (height) {\n                that.wrapper.height(height);\n            }\n\n            if (width) {\n                that.wrapper.width(width);\n            }\n        },\n\n        date: function(value) {\n            if (value != null && getDate(value) >= getDate(this.options.min) && getDate(value) <= getDate(this.options.max)) {\n                this._model.set(\"selectedDate\", value);\n            }\n            return getDate(this._model.get(\"selectedDate\"));\n        },\n\n        _processHandlers: function(defaults) {\n            var that = this;\n\n            that._pdfClickHandler = (e) => {\n                e.preventDefault();\n                that.saveAsPDF();\n            };\n\n            that._createClickHandler = (e) => {\n                e.preventDefault();\n                that.addEvent();\n            };\n\n            that._calendarClickHandler = that._currentClickHandler = (e) => {\n                e.preventDefault();\n                that._showCalendar(e.target);\n            };\n\n            that._todayClickHandler = (e) => {\n                e.preventDefault();\n\n                var timezone = that.options.timezone,\n                    currentDate = new Date(),\n                    date;\n\n                if (timezone) {\n                    var timezoneOffset = kendo.timezone.offset(currentDate, timezone);\n                    date = kendo.timezone.convert(currentDate, currentDate.getTimezoneOffset(), timezoneOffset);\n                } else {\n                    date = currentDate;\n                }\n\n                if (!that.trigger(\"navigate\", { view: that._selectedViewName, action: \"today\", date: date })) {\n                    that.date(date);\n                }\n            };\n\n            that._previousClickHandler = (e) => {\n                e.preventDefault();\n\n                var date = that.view().previousDate();\n\n                if (!that.trigger(\"navigate\", { view: that._selectedViewName, action: \"previous\", date: date })) {\n                    that.date(date);\n                }\n            };\n\n            that._nextClickHandler = (e) => {\n                e.preventDefault();\n\n                var date = that.view().nextDate();\n\n                if (!that.trigger(\"navigate\", { view: that._selectedViewName, action: \"next\", date: date })) {\n                    that.date(date);\n                }\n            };\n\n            that._refreshClickHandler = (e) => {\n                e.preventDefault();\n\n                var name = that.view().name;\n\n                if (!that.trigger(\"navigate\", { view: name, action: \"changeView\", date: that.date() })) {\n                    that.view(name);\n                }\n            };\n\n            that._viewClickHandler = (e) => {\n                var name = e.target.attr(kendo.attr(\"name\"));\n\n                if (!that.trigger(\"navigate\", { view: name, action: \"changeView\", date: that.date() })) {\n                    that.view(name);\n                }\n            };\n\n            Object.values(defaults).map(t => {\n                if (t.name) {\n                    t.click = that[\"_\" + t.name + \"ClickHandler\"];\n                }\n            });\n        },\n\n        _processDefaults: function() {\n            var views = this.views,\n                defaults = $.extend(true, {}, DEFAULT_TOOLS),\n                viewsButtons = [],\n                isRtl = kendo.support.isRtl(this.wrapper),\n                viewsDdl, viewsMobile;\n\n            Object.keys(views).map(name => {\n                var current = $.extend(true, {}, defaults.view);\n\n                current.text = views[name].title;\n                const refAttribute = `ref-view-${name.toLowerCase()}`;\n                current.attributes = {\n                    [refAttribute]: '',\n                    \"data-name\": name\n                };\n\n                current.groupClass = \"k-scheduler-views\";\n                defaults[name] = current;\n\n                viewsButtons.push(name);\n            });\n\n            if (viewsButtons.length > 1) {\n                viewsDdl = VIEWS_DROPDOWN_TEMPLATE({ views: this.views, label: this.options.messages.selectView, type: \"k-views-dropdown\" });\n                viewsMobile = VIEWS_DROPDOWN_TEMPLATE({ views: this.views, label: this.options.messages.selectView, type: \"k-scheduler-mobile-views\" });\n            }\n\n            defaults.viewsDdl = {\n                template: viewsDdl\n            };\n\n            defaults.viewsMobile = {\n                template: viewsMobile\n            };\n\n            this._viewsButtons = viewsButtons;\n\n            if (isRtl) {\n                defaults.previous.icon = \"caret-alt-right\";\n                defaults.next.icon = \"caret-alt-left\";\n            }\n\n            return defaults;\n        },\n\n        _processToolbarArray: function() {\n            var options = this.options,\n                toolbarOptions = options.toolbar,\n                commands = [],\n                isMobile = this._isMobile(),\n                tools, pdf, search;\n\n            if (toolbarOptions) {\n                commands = Array.isArray(toolbarOptions) ? toolbarOptions : [toolbarOptions];\n            }\n\n            pdf = $.grep(commands, function(item) {\n                return item == \"pdf\" || item.name == \"pdf\";\n            }).length > 0;\n\n            search = $.grep(commands, function(item) {\n                return item == \"search\" || item.name == \"search\";\n            }).length > 0;\n\n            if (isMobile) {\n                tools = [...defaultMobileToolsFirst];\n\n                if (options.editable) {\n                    tools[0].push(\"create\");\n                }\n            } else {\n                tools = [...defaultDesktopTools];\n            }\n\n            if (search) {\n                tools.push(\"search\");\n            }\n\n            if (pdf) {\n                if (isMobile) {\n                    tools[0].unshift(\"pdfMobile\");\n                } else {\n                    tools.unshift(\"pdf\");\n                }\n            }\n\n            if (this._viewsCount === 1) {\n                tools.push(\"refresh\");\n            } else if (this._viewsCount > 1) {\n                if (isMobile) {\n                    tools.push(\"viewsMobile\");\n                } else {\n                    tools.push(\"viewsDdl\");\n                    tools.push(this._viewsButtons);\n                }\n            }\n\n            return tools;\n        },\n\n        _processViewTools: function(items) {\n            var result = items,\n                viewsIndex = -1;\n\n            items.some((item, index) => {\n                if (item === \"views\" || item.name === \"views\") {\n                    viewsIndex = index;\n                    return true;\n                }\n\n                return false;\n            });\n\n            if (viewsIndex > -1) {\n                result.splice(viewsIndex, 1, \"viewsDdl\", this._viewsButtons);\n            }\n\n            return result;\n        },\n\n        _processToolbarItems: function() {\n            var desktopItems = this.options.toolbar.items.desktop || this.options.toolbar.items,\n                mobileItems = this.options.toolbar.items.mobile || this.options.toolbar.items,\n                isMobile = this._isMobile();\n\n            if (!isMobile) {\n                if (desktopItems.main) {\n                    if (desktopItems.navigation) {\n                        desktopItems = desktopItems.main.concat(desktopItems.navigation);\n                    } else {\n                        desktopItems = desktopItems.main;\n                    }\n                }\n\n                return { tools: this._processViewTools(desktopItems) };\n            } else {\n                if (Array.isArray(mobileItems)) {\n                    return {\n                        tools: this._processViewTools(mobileItems),\n                        navigation: []\n                    };\n                } else {\n                    return {\n                        tools: this._processViewTools(mobileItems.main),\n                        navigation: this._processViewTools(mobileItems.navigation)\n                    };\n                }\n            }\n        },\n\n        _processTools: function() {\n            var options = this.options,\n                toolbarOptions = options.toolbar;\n\n            if (toolbarOptions && toolbarOptions.items) {\n                return this._processToolbarItems();\n            } else {\n                return { tools: this._processToolbarArray() };\n            }\n        },\n\n        _toolbar: function() {\n            var that = this;\n            var options = that.options;\n            var defaults = that._processDefaults();\n            var { tools, navigation } = that._processTools();\n            var toolbar = $(\"<div class='k-scheduler-toolbar'>\");\n            var secondToolbar;\n\n            that._processHandlers(defaults);\n            that.wrapper.append(toolbar);\n            that.toolbar = toolbar;\n\n            toolbar.kendoToolBar({\n                resizable: false,\n                tools: tools,\n                defaultTools: defaults,\n                parentMessages: options.messages\n            });\n\n            if (that._isMobile() && (!navigation || navigation.length !== 0)) {\n                secondToolbar = $(\"<div class='k-scheduler-toolbar'>\");\n                that.wrapper.append(secondToolbar);\n                that.toolbar = that.toolbar.add(secondToolbar);\n\n                secondToolbar.kendoToolBar({\n                    resizable: false,\n                    tools: navigation || [...defaultMobileToolsSecond],\n                    defaultTools: defaults,\n                    parentMessages: options.messages\n                });\n            }\n\n            that.toolbar.find(\".k-nav-current .k-button-text\").attr('data-' + kendo.ns + 'bind', \"text: formattedDate\");\n            that.toolbar.find(\".k-m-date-format\").attr('data-' + kendo.ns + 'bind', \"text: formattedMobileDate\");\n            that.toolbar.find(\".k-y-date-format\").attr('data-' + kendo.ns + 'bind', \"text: formattedYear\");\n\n            kendo.bind(that.toolbar, that._model);\n\n            that.toolbar.find(\".k-scheduler-search-input\").attr({\n                placeholder: options.messages.search,\n                title: options.messages.search\n            });\n\n            toolbar.on(\"input\" + NS, \".k-scheduler-search-input\", kendo.throttle(function(e) {\n                that.dataSource.filter({\n                    logic: \"or\",\n                    filters: [\n                        { field: \"title\", operator: \"contains\", value: e.target.value },\n                        { field: \"description\", operator: \"contains\", value: e.target.value }\n                    ]\n                });\n            }, 250));\n\n            toolbar.on(CHANGE + NS, \".k-views-dropdown, .k-scheduler-mobile-views\", function() {\n                var name = this.value;\n\n                if (!that.trigger(\"navigate\", { view: name, action: \"changeView\", date: that.date() })) {\n                    that.view(name);\n                }\n            });\n\n            that._initialSize = true;\n        },\n\n        _showCalendar: function(targetElm) {\n            var that = this,\n                target = targetElm || that.toolbar.find(\".k-nav-current\"),\n                html = $('<div class=\"k-calendar-container\"><div class=\"k-scheduler-calendar\"></div></div>');\n\n            if (!that.popup) {\n                that.popup = new Popup(html, {\n                    anchor: target,\n                    activate: function() {\n                        if (that.popup && that.calendar) {\n                            that.popup._toggleResize(false);\n                            that.calendar.element.find(\"table\").trigger(\"focus\");\n                            that.popup._toggleResize(true);\n                        }\n                    },\n                    open: function() {\n                        if (!that.calendar) {\n                            that.calendar = new Calendar(this.element.find(\".k-scheduler-calendar\"),\n                            {\n                                change: function() {\n                                    var date = this.value();\n                                    if (!that.trigger(\"navigate\", { view: that._selectedViewName, action: \"changeDate\", date: date })) {\n                                        that.date(date);\n                                        that.popup.close();\n                                    }\n\n                                    if (!that._isMobile()) {\n                                        that._selectedView.element.trigger(\"focus\");\n                                        that.toolbar.find(\".k-nav-current\").trigger(\"focus\").addClass(FOCUSEDSTATE);\n                                    }\n                                },\n                                min: that.options.min,\n                                max: that.options.max\n                            });\n                        }\n                        that.calendar.element.on(\"keydown\" + NS, function(e) {\n                            if (e.keyCode === keys.ESC || e.keyCode === keys.TAB) {\n                                that.popup.close();\n                                that._selectedView.element.trigger(\"focus\");\n                                that.toolbar.find(\".k-nav-current\").trigger(\"focus\").addClass(FOCUSEDSTATE);\n                            }\n                        });\n\n                        that.calendar.setOptions({\n                            start: that._selectedViewName === \"year\" ? \"decade\" : \"month\",\n                            depth: that._selectedViewName === \"year\" ? \"decade\" : \"month\"\n                        });\n\n                        that.calendar.value(that.date());\n                    },\n                    copyAnchorStyles: false\n                });\n            }\n\n            that.popup.open();\n        },\n\n        refresh: function(e) {\n            var that = this;\n            var view = this.view();\n            var preventRefresh = (e && e.action === \"itemchange\" && (this._editor.editable || this._preventRefresh)) ||\n                                 (this.dataSource.options.type === \"signalr\" && this._preventRefresh);\n\n            this._progress(false);\n\n            e = e || {};\n\n            if (!view) {\n                return;\n            }\n\n            if (preventRefresh) { // skip rebinding if editing is in progress\n                // eslint-disable-next-line no-constant-binary-expression\n                this._attemptRefresh = true && this.dataSource.options.type === \"signalr\";\n                return;\n            }\n\n            if (this.trigger(\"dataBinding\", { action: e.action || \"rebind\", index: e.index, items: e.items })) {\n                return;\n            }\n\n            if (!(e && e.action === \"resize\") && this._editor) {\n                this._editor.close();\n            }\n\n            this._data = this.dataSource.expand(view.startDate(), view.visibleEndDate());\n\n            view.refreshLayout();\n\n            view.render(this._data);\n\n            this.trigger(\"dataBound\");\n            this._attemptRefresh = false;\n        },\n\n        slotByPosition: function(x, y) {\n            var view = this.view();\n\n            if (!view._slotByPosition) {\n                return null;\n            }\n\n            var slot = view._slotByPosition(x, y);\n\n            if (!slot) {\n                return null;\n            }\n\n            return {\n                startDate: slot.startDate(),\n                endDate: slot.endDate(),\n                groupIndex: slot.groupIndex,\n                element: slot.element,\n                isDaySlot: slot.isDaySlot\n            };\n        },\n\n        slotByElement: function(element) {\n            var el = $(element),\n                offset = el.offset(),\n                width = el.width(),\n                height = el.height(),\n                centerX = offset.left + width / 2,\n                centerY = offset.top + height / 2,\n                offset = $(element).offset();\n\n            return this.slotByPosition(centerX, centerY);\n        },\n\n        resourcesBySlot: function(slot) {\n            return this.view()._resourceBySlot(slot);\n        }\n    });\n\n    var defaultViews = {\n        day: {\n            type: \"kendo.ui.DayView\"\n        },\n        week: {\n            type: \"kendo.ui.WeekView\"\n        },\n        workWeek: {\n            type: \"kendo.ui.WorkWeekView\"\n        },\n        agenda: {\n            type: \"kendo.ui.AgendaView\"\n        },\n        month: {\n            type: \"kendo.ui.MonthView\"\n        },\n        timeline: {\n            type: \"kendo.ui.TimelineView\"\n        },\n        timelineWeek: {\n            type: \"kendo.ui.TimelineWeekView\"\n        },\n        timelineWorkWeek: {\n            type: \"kendo.ui.TimelineWorkWeekView\"\n        },\n        timelineMonth: {\n            type: \"kendo.ui.TimelineMonthView\"\n        },\n        year: {\n            type: \"kendo.ui.YearView\"\n        }\n    };\n\n    ui.plugin(Scheduler);\n\n    if (kendo.PDFMixin) {\n        kendo.PDFMixin.extend(Scheduler.prototype);\n\n        var SCHEDULER_EXPORT = \"k-scheduler-pdf-export\";\n        Scheduler.fn._drawPDF = function(progress) {\n            var wrapper = this.wrapper;\n            var styles = wrapper[0].style.cssText;\n\n            wrapper.css({\n                width: wrapper.width(),\n                height: wrapper.height()\n            });\n\n            wrapper.addClass(SCHEDULER_EXPORT);\n\n            var scheduler = this;\n            var promise = new $.Deferred();\n            var table = wrapper.find(\".k-scheduler-content\").find(\"table\").css(\"table-layout\", \"auto\");\n\n            setTimeout(function() {\n                table.css(\"table-layout\", \"fixed\");\n                scheduler.resize(true);\n\n                scheduler._drawPDFShadow({}, {\n                    avoidLinks: scheduler.options.pdf.avoidLinks\n                })\n                .done(function(group) {\n                    var args = {\n                        page: group,\n                        pageNumber: 1,\n                        progress: 1,\n                        totalPages: 1\n                    };\n\n                    progress.notify(args);\n                    promise.resolve(args.page);\n                })\n                .fail(function(err) {\n                    promise.reject(err);\n                })\n                .always(function() {\n                    wrapper[0].style.cssText = styles;\n                    wrapper.removeClass(SCHEDULER_EXPORT);\n                    scheduler.resize(true);\n\n                    //Required because slot.offsetLeft is incorrect after first resize\n                    scheduler.resize(true);\n                });\n            });\n\n            return promise;\n        };\n    }\n\n    var TimezoneEditor = Widget.extend({\n        init: function(element, options) {\n            var that = this,\n                zones = kendo.timezone.windows_zones;\n\n            if (!zones || !kendo.timezone.zones_titles) {\n                throw new Error('kendo.timezones.min.js is not included.');\n            }\n\n            Widget.fn.init.call(that, element, options);\n\n            that.wrapper = that.element;\n\n            that._zonesQuery = new kendo.data.Query(zones);\n            that._zoneTitleId = kendo.guid();\n            that._zoneTitlePicker();\n            that._zonePicker();\n\n            that._zoneTitle.bind(\"cascade\", function() {\n                if (!this.value()) {\n                    that._zone.wrapper.hide();\n                }\n            });\n\n            that._zone.bind(\"cascade\", function() {\n                that._value = this.value();\n                that.trigger(CHANGE);\n            });\n\n            that.value(that.options.value);\n        },\n        options: {\n            name: \"TimezoneEditor\",\n            value: \"\",\n            optionLabel: \"No timezone\"\n        },\n        events: [ CHANGE ],\n\n        _zoneTitlePicker: function() {\n            var that = this,\n                zoneTitle = $('<input id=\"' + that._zoneTitleId + '\" aria-label=\"' + that.options.title + '\"/>').appendTo(that.wrapper);\n\n            that._zoneTitle = new kendo.ui.DropDownList(zoneTitle, {\n                dataSource: kendo.timezone.zones_titles,\n                dataValueField: \"other_zone\",\n                dataTextField: \"name\",\n                optionLabel: that.options.optionLabel\n            });\n        },\n\n        _zonePicker: function() {\n            var that = this,\n                zone = $('<input aria-label=\"' + that.options.title + '\"/>').appendTo(this.wrapper);\n\n            that._zone = new kendo.ui.DropDownList(zone, {\n                dataValueField: \"zone\",\n                dataTextField: \"territory\",\n                dataSource: that._zonesQuery.data,\n                cascadeFrom: that._zoneTitleId,\n                dataBound: function() {\n                    that._value = this.value();\n                    this.wrapper.toggle(this.dataSource.view().length > 1);\n                }\n            });\n\n            that._zone.wrapper.hide();\n        },\n\n        destroy: function() {\n            Widget.fn.destroy.call(this);\n\n            kendo.destroy(this.wrapper);\n        },\n\n        value: function(value) {\n            var that = this,\n                zone;\n\n            if (value === undefined) {\n                return that._value;\n            }\n\n            zone = that._zonesQuery.filter({ field: \"zone\", operator: \"eq\", value: value }).data[0];\n\n            if (zone) {\n                that._zoneTitle.value(zone.other_zone);\n                that._zone.value(zone.zone);\n            } else {\n                that._zoneTitle.select(0);\n            }\n\n        }\n    });\n\n    ui.plugin(TimezoneEditor);\n\n    var ZONETITLEOPTIONTEMPLATE = kendo.template(({ name, other_zone }) => `<option value=\"${other_zone}\">${name}</option>`);\n    var ZONEOPTIONTEMPLATE = kendo.template(({ zone, territory }) => `<option value=\"${zone}\">${territory}</option>`);\n\n    var MobileTimezoneEditor = Widget.extend({\n        init: function(element, options) {\n            var that = this,\n                zones = kendo.timezone.windows_zones;\n\n            if (!zones || !kendo.timezone.zones_titles) {\n                throw new Error('kendo.timezones.min.js is not included.');\n            }\n\n            Widget.fn.init.call(that, element, options);\n\n            that.wrapper = that.element;\n\n            that._zonesQuery = new kendo.data.Query(zones);\n            that._zoneTitlePicker();\n            that._zonePicker();\n\n            that.value(that.options.value);\n        },\n\n        options: {\n            name: \"MobileTimezoneEditor\",\n            optionLabel: \"No timezone\",\n            value: \"\"\n        },\n\n        events: [ CHANGE ],\n\n        _bindZones: function(value) {\n            var data = value ? this._filter(value) : [];\n\n            this._zone.html(this._options(data, ZONEOPTIONTEMPLATE));\n        },\n\n        _filter: function(value) {\n            return this._zonesQuery.filter({ field: \"other_zone\", operator: \"eq\", value: value }).data;\n        },\n\n        _options: function(data, template, optionLabel) {\n            var idx = 0;\n            var html = \"\";\n            var length = data.length;\n\n            if (optionLabel) {\n                html += template({ other_zone: \"\", name: optionLabel });\n            }\n\n            for (; idx < length; idx++) {\n                html += template(data[idx]);\n            }\n\n            return html;\n        },\n\n        _zoneTitlePicker: function() {\n            var that = this;\n            var options = that._options(kendo.timezone.zones_titles, ZONETITLEOPTIONTEMPLATE, that.options.optionLabel);\n\n            that._zoneTitle = $('<select>' + options + '</select>')\n                                .appendTo(that.wrapper)\n                                .on(\"change\", function() {\n                                    var value = this.value;\n                                    var zone = that._zonePickerLabel;\n                                    var zoneSelect = zone.find(\"select\");\n\n                                    that._bindZones(value);\n\n                                    if (value && zoneSelect.children().length > 1) {\n                                        zone.show();\n                                    } else {\n                                        zone.hide();\n                                    }\n\n                                    that._value = that._zone[0].value;\n\n                                    that.trigger(CHANGE);\n                                });\n        },\n\n        _zonePicker: function() {\n            var that = this;\n\n            that._zonePickerLabel = $(\"<li class='k-item k-listgroup-item k-zonepicker'>\" +\n                                        \"<label class='k-label k-listgroup-form-row'>\" +\n                                            \"<span class='k-item-title k-listgroup-form-field-label'></span>\" +\n                                            \"<div class='k-listgroup-form-field-wrapper'></div>\" +\n                                        \"</label>\" +\n                                    \"</li>\").hide();\n\n            that._zone = $('<select></select>')\n                            .appendTo(that._zonePickerLabel.find(\"div\"))\n                            .on(\"change\", function() {\n                                that._value = this.value;\n\n                                that.trigger(CHANGE);\n                            });\n\n            this.wrapper.closest(\".k-item\").after(that._zonePickerLabel);\n\n            that._bindZones(that._zoneTitle.val());\n            that._value = that._zone[0].value;\n        },\n\n        destroy: function() {\n            Widget.fn.destroy.call(this);\n\n            kendo.destroy(this.wrapper);\n        },\n\n        value: function(value) {\n            var that = this;\n            var zonePicker = that._zone;\n            var other_zone = \"\";\n            var zone_value = \"\";\n            var zone;\n\n            if (value === undefined) {\n                return that._value;\n            }\n\n            zone = that._zonesQuery.filter({ field: \"zone\", operator: \"eq\", value: value }).data[0];\n\n            if (zone) {\n                zone_value = zone.zone;\n                other_zone = zone.other_zone;\n            }\n\n            that._zoneTitle.val(other_zone);\n            that._bindZones(other_zone);\n\n            zonePicker.val(zone_value);\n            zone_value = zonePicker[0].value;\n\n            if (zone_value && zonePicker.children.length > 1) {\n                that._zonePickerLabel.show();\n            } else {\n                that._zonePickerLabel.hide();\n            }\n\n            that._value = zone_value;\n        }\n    });\n\n    ui.plugin(MobileTimezoneEditor);\n\n})(window.kendo.jQuery);\nexport default kendo;\n\n"],"mappings":"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"}