{"version":3,"file":"kendo.pivotgrid.min.js","names":["serializeFilters","serializeFilters","count","identity","formatDate","join","serialize","serializeFilter","serializeSort","concat","rules","serializeFilter","take","skip","identity","identity","selectors","keyboardEvents","mouseEvents"],"sources":["../../node_modules/@progress/kendo-pivotgrid-common/dist/es2015/requests/serializers/filters.js","../../node_modules/@progress/kendo-pivotgrid-common/dist/es2015/requests/serializers/members.js","../../node_modules/@progress/kendo-pivotgrid-common/dist/es2015/requests/requestBuilder.js","../../node_modules/tslib/tslib.es6.mjs","../../node_modules/@progress/kendo-pivotgrid-common/dist/es2015/responses/responseParser.js","../../node_modules/@progress/kendo-pivotgrid-common/dist/es2015/requests/discover.js","../../node_modules/@progress/kendo-pivotgrid-common/dist/es2015/responses/discoverParser.js","../../node_modules/@progress/kendo-pivotgrid-common/dist/es2015/requests/fetch.js","../../node_modules/@progress/kendo-pivotgrid-common/dist/es2015/utils/index.js","../../node_modules/@progress/kendo-pivotgrid-common/dist/es2015/dataState/dataState.js","../../node_modules/@progress/kendo-pivotgrid-common/dist/es2015/dataState/expand.js","../../node_modules/@progress/kendo-pivotgrid-common/dist/es2015/dataState/sort.js","../../node_modules/@progress/kendo-pivotgrid-common/dist/es2015/dataState/filter.js","../../node_modules/@progress/kendo-pivotgrid-common/dist/es2015/reducers/headers-reducer.js","../../node_modules/@progress/kendo-pivotgrid-common/dist/es2015/reducers/configurator-reducer.js","../../node_modules/@progress/kendo-pivotgrid-common/dist/es2015/local-data-binding/aggregates.js","../../node_modules/@progress/kendo-data-query/dist/es2015/utils.js","../../node_modules/@progress/kendo-data-query/dist/es2015/filtering/filter-descriptor.interface.js","../../node_modules/@progress/kendo-data-query/dist/es2015/funcs.js","../../node_modules/@progress/kendo-data-query/dist/es2015/filter-serialization.common.js","../../node_modules/@progress/kendo-data-query/dist/es2015/filtering/filter.operators.js","../../node_modules/@progress/kendo-data-query/dist/es2015/odata-filtering.operators.js","../../node_modules/@progress/kendo-data-query/dist/es2015/odata.operators.js","../../node_modules/@progress/kendo-data-query/dist/es2015/accessor.js","../../node_modules/@progress/kendo-data-query/dist/es2015/mvc/operators.js","../../node_modules/@progress/kendo-data-query/dist/es2015/mvc/deserialization.js","../../node_modules/@progress/kendo-data-query/dist/es2015/sorting/sort-array.operator.js","../../node_modules/@progress/kendo-data-query/dist/es2015/transducers.js","../../node_modules/@progress/kendo-data-query/dist/es2015/grouping/aggregate.operators.js","../../node_modules/@progress/kendo-data-query/dist/es2015/filtering/filter-no-eval.js","../../node_modules/@progress/kendo-data-query/dist/es2015/filtering/filter-expression.factory.js","../../node_modules/@progress/kendo-data-query/dist/es2015/grouping/group.operators.js","../../node_modules/@progress/kendo-data-query/dist/es2015/array.operators.js","../../node_modules/@progress/kendo-data-query/dist/es2015/filtering/operators.enum.js","../../node_modules/@progress/kendo-pivotgrid-common/dist/es2015/local-data-binding/filtering.js","../../node_modules/@progress/kendo-pivotgrid-common/dist/es2015/local-data-binding/utils.js","../../node_modules/@progress/kendo-pivotgrid-common/dist/es2015/local-data-binding/dataTree.js","../../node_modules/@progress/kendo-pivotgrid-common/dist/es2015/local-data-binding/dataReader.js","../../node_modules/@progress/kendo-pivotgrid-common/dist/es2015/local-data-binding/tuples.js","../../node_modules/@progress/kendo-pivotgrid-common/dist/es2015/local-data-binding/schemaDimensions.js","../../node_modules/@progress/kendo-pivotgrid-common/dist/es2015/navigation/navigation.js","../../node_modules/@progress/kendo-pivotgrid-common/dist/es2015/navigation/pivotgrid.js","../../node_modules/@progress/kendo-pivotgrid-common/dist/es2015/navigation/configurator.js","../../src/utils/loaderContainer.js","../../src/kendo.pivotgrid.js"],"sourcesContent":["const filterFunctionFormats = {\n    contains: \", InStr({0}.CurrentMember.MEMBER_CAPTION,\\\"{1}\\\") > 0\",\n    doesnotcontain: \", InStr({0}.CurrentMember.MEMBER_CAPTION,\\\"{1}\\\")\",\n    endswith: \", Right({0}.CurrentMember.MEMBER_CAPTION,Len(\\\"{1}\\\"))=\\\"{1}\\\"\",\n    eq: \", {0}.CurrentMember.MEMBER_CAPTION = \\\"{1}\\\"\",\n    neq: \", {0}.CurrentMember.MEMBER_CAPTION = \\\"{1}\\\"\",\n    startswith: \", Left({0}.CurrentMember.MEMBER_CAPTION,Len(\\\"{1}\\\"))=\\\"{1}\\\"\"\n};\nconst operators = {\n    doesnotcontain: 'doesnotcontain',\n    in: 'in',\n    neq: \"neq\"\n};\n/**\n * @hidden\n */\nexport function serializeFilters(filters, cube) {\n    let command = \"\";\n    let current = \"\";\n    for (let idx = filters.length - 1; idx >= 0; idx--) {\n        current = \"SELECT (\";\n        current += serializeExpression(filters[idx]);\n        current += \") ON 0\";\n        if (idx === filters.length - 1) {\n            current += \" FROM [\" + cube + \"]\";\n            command = current;\n        }\n        else {\n            command = current + \" FROM ( \" + command + \" )\";\n        }\n    }\n    return command;\n}\nfunction serializeExpression(expression) {\n    let command = '';\n    const value = String(expression.value);\n    const field = expression.field;\n    const operator = expression.operator;\n    if (operator === operators.in) {\n        command += \"{\";\n        command += value;\n        command += \"}\";\n    }\n    else {\n        command += operator === operators.neq || operator === operators.doesnotcontain ? '-' : '';\n        command += \"Filter(\";\n        command += field + \".MEMBERS\";\n        command += formatString(filterFunctionFormats[operator], field, value);\n        command += \")\";\n    }\n    return command;\n}\nfunction formatString(str, ...values) {\n    values.forEach((value, index) => {\n        str = str.replace(new RegExp(`\\\\{${index}\\\\}`, 'g'), value);\n    });\n    return str;\n}\n","/**\n * @hidden\n */\nexport function serializeMembers(members, measures, sort) {\n    let command = \"\";\n    members = members || [];\n    const parsed = parseDescriptors(members);\n    const expanded = parsed.expanded;\n    const rootNames = getRootNames(parsed.root);\n    const crossJoinCommands = [];\n    const length = expanded.length;\n    let idx = 0;\n    let memberName;\n    let names = [];\n    if (rootNames.length > 1 || measures.length > 0) {\n        crossJoinCommands.push(crossJoinCommand(rootNames, measures));\n        for (; idx < length; idx++) {\n            memberName = expandMemberDescriptor(expanded[idx].name, sort);\n            names = mapNames(memberName, rootNames);\n            crossJoinCommands.push(crossJoinCommand(names, measures));\n        }\n        command += crossJoinCommands.join(\",\");\n    }\n    else {\n        for (; idx < length; idx++) {\n            memberName = expandMemberDescriptor(expanded[idx].name, sort);\n            names.push(memberName[0]);\n        }\n        command += rootNames.concat(names).join(\",\");\n    }\n    return command;\n}\n/**\n * @hidden\n */\nexport function measureNames(measures) {\n    const length = measures.length;\n    const result = [];\n    let measure;\n    for (let idx = 0; idx < length; idx++) {\n        measure = measures[idx];\n        result.push(measure.name !== undefined ? measure.name : measure);\n    }\n    return result;\n}\nfunction getRootNames(members) {\n    const root = [];\n    members.forEach(member => {\n        const name = member.name[0];\n        const hierarchyName = baseHierarchyPath(name);\n        if (!root.some(n => n.indexOf(hierarchyName) === 0)) {\n            root.push(name);\n        }\n    });\n    return root;\n}\nfunction parseDescriptors(members) {\n    let expanded = [];\n    const child = [];\n    const root = [];\n    let idx = 0;\n    let found;\n    for (; idx < members.length; idx++) {\n        const member = members[idx];\n        const name = member.name;\n        found = false;\n        if (name.length > 1) {\n            child.push(member);\n        }\n        else {\n            const hierarchyName = baseHierarchyPath(name[0]);\n            for (let j = 0, l = root.length; j < l; j++) {\n                if (root[j].name[0].indexOf(hierarchyName) === 0) {\n                    found = true;\n                    break;\n                }\n            }\n            if (!found) {\n                root.push(member);\n            }\n            if (member.expand) {\n                expanded.push(member);\n            }\n        }\n    }\n    expanded = expanded.concat(child);\n    return {\n        expanded: expanded,\n        root: root\n    };\n}\nfunction mapNames(names, rootNames) {\n    const rootLength = rootNames.length;\n    rootNames = rootNames.slice(0);\n    for (let idx = 0; idx < names.length; idx++) {\n        const name = names[idx];\n        for (let j = 0; j < rootLength; j++) {\n            const rootName = baseHierarchyPath(rootNames[j]);\n            if (name.indexOf(rootName) !== -1) {\n                rootNames[j] = name;\n                break;\n            }\n        }\n    }\n    return rootNames;\n}\nfunction crossJoinCommand(members, measures) {\n    const tmp = members.slice(0);\n    if (measures.length > 0) {\n        tmp.push(\"{\" + measureNames(measures).join(\",\") + \"}\");\n    }\n    return crossJoin(tmp);\n}\nfunction expandMemberDescriptor(names, sort) {\n    const idx = names.length - 1;\n    let name = names[idx];\n    const sortDescriptor = sortDescriptorForMember(sort, name);\n    if (sortDescriptor && sortDescriptor.dir) {\n        name = \"ORDER(\" + name + \".Children,\" + sortDescriptor.field + \".CurrentMember.MEMBER_CAPTION,\" + sortDescriptor.dir + \")\";\n    }\n    else {\n        name += \".Children\";\n    }\n    names[idx] = name;\n    return names;\n}\nfunction sortDescriptorForMember(sort, member) {\n    for (let idx = 0, length = sort.length; idx < length; idx++) {\n        if (member.indexOf(sort[idx].field) === 0) {\n            return sort[idx];\n        }\n    }\n    return null;\n}\nfunction baseHierarchyPath(memberName) {\n    const parts = memberName.split(\".\");\n    if (parts.length > 2) {\n        return parts[0] + \".\" + parts[1];\n    }\n    return memberName;\n}\nfunction crossJoin(names) {\n    let result = \"CROSSJOIN({\";\n    let name;\n    if (names.length > 2) {\n        name = names.pop();\n        result += crossJoin(names);\n    }\n    else {\n        result += names.shift();\n        name = names.pop();\n    }\n    result += \"},{\";\n    result += name;\n    result += \"})\";\n    return result;\n}\n","import { serializeFilters } from './serializers/filters';\nimport { measureNames, serializeMembers } from './serializers/members';\n/**\n * @hidden\n */\nexport function createRequestBody(options) {\n    let command = '<Envelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\"><Header/><Body><Execute xmlns=\"urn:schemas-microsoft-com:xml-analysis\"><Command><Statement>';\n    let { columnAxes = [], rowAxes = [] } = options;\n    const { measureAxes = [], sort = [], filter = [] } = options;\n    let measuresRowAxis = options.measuresAxis === \"rows\";\n    command += \"SELECT NON EMPTY {\";\n    if (!columnAxes.length && rowAxes.length && (!measureAxes.length || (measureAxes.length && measuresRowAxis))) {\n        columnAxes = rowAxes;\n        rowAxes = [];\n        measuresRowAxis = false;\n    }\n    if (!columnAxes.length && !rowAxes.length) {\n        measuresRowAxis = false;\n    }\n    if (columnAxes.length) {\n        command += serializeMembers(columnAxes, !measuresRowAxis ? measureAxes : [], sort);\n    }\n    else if (measureAxes.length && !measuresRowAxis) {\n        command += measureNames(measureAxes).join(\",\");\n    }\n    command += \"} DIMENSION PROPERTIES CHILDREN_CARDINALITY, PARENT_UNIQUE_NAME ON COLUMNS\";\n    if (rowAxes.length || (measuresRowAxis && measureAxes.length > 1)) {\n        command += \", NON EMPTY {\";\n        if (rowAxes.length) {\n            command += serializeMembers(rowAxes, measuresRowAxis ? measureAxes : [], sort);\n        }\n        else {\n            command += measureNames(measureAxes).join(\",\");\n        }\n        command += \"} DIMENSION PROPERTIES CHILDREN_CARDINALITY, PARENT_UNIQUE_NAME ON ROWS\";\n    }\n    if (filter.length) {\n        command += \" FROM \";\n        command += \"(\";\n        command += serializeFilters(filter, options.connection.cube);\n        command += \")\";\n    }\n    else {\n        command += \" FROM [\" + options.connection.cube + \"]\";\n    }\n    command += '</Statement></Command><Properties><PropertyList><Catalog>' + options.connection.catalog + '</Catalog><Format>Multidimensional</Format></PropertyList></Properties></Execute></Body></Envelope>';\n    return command.replace(/&/g, \"&amp;\");\n}\n","/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport var __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nexport function __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nexport function __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nexport function __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nexport function __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nexport function __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n  return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nexport function __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nexport function __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\n  function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nvar ownKeys = function(o) {\n  ownKeys = Object.getOwnPropertyNames || function (o) {\n    var ar = [];\n    for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n    return ar;\n  };\n  return ownKeys(o);\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nexport function __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nexport function __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nexport function __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose, inner;\n    if (async) {\n      if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n      dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n      if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n      dispose = value[Symbol.dispose];\n      if (async) inner = dispose;\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nexport function __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  var r, s = 0;\n  function next() {\n    while (r = env.stack.pop()) {\n      try {\n        if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\n        if (r.dispose) {\n          var result = r.dispose.call(r.value);\n          if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n        }\n        else s |= 1;\n      }\n      catch (e) {\n        fail(e);\n      }\n    }\n    if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nexport function __rewriteRelativeImportExtension(path, preserveJsx) {\n  if (typeof path === \"string\" && /^\\.\\.?\\//.test(path)) {\n      return path.replace(/\\.(tsx)$|((?:\\.d)?)((?:\\.[^./]+?)?)\\.([cm]?)ts$/i, function (m, tsx, d, ext, cm) {\n          return tsx ? preserveJsx ? \".jsx\" : \".js\" : d && (!ext || !cm) ? m : (d + ext + \".\" + cm.toLowerCase() + \"js\");\n      });\n  }\n  return path;\n}\n\nexport default {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __esDecorate,\n  __runInitializers,\n  __propKey,\n  __setFunctionName,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n  __rewriteRelativeImportExtension,\n};\n","/**\n * @hidden\n */\nexport function parseResponse(response) {\n    const xmlDoc = new DOMParser().parseFromString(response, \"text/xml\");\n    const axes = Array.from(xmlDoc.querySelectorAll(\"Axis\"));\n    const cells = Array.from(xmlDoc.querySelectorAll(\"CellData > Cell\"))\n        .map(cell => ({\n        fmtValue: getPropertyValue(cell, \"FmtValue\"),\n        ordinal: parseInt(cell.getAttribute(\"CellOrdinal\"), 10),\n        value: getPropertyValue(cell, \"Value\")\n    }));\n    const columns = { tuples: [] };\n    const rows = { tuples: [] };\n    const data = [];\n    axes.forEach((axis) => {\n        if (axis.getAttribute('name') !== \"SlicerAxis\") {\n            const tuples = columns.tuples.length === 0 ? columns.tuples : rows.tuples;\n            Array.prototype.push.apply(tuples, translateAxis(axis));\n        }\n    });\n    const indexedData = new Array(rows.tuples.length * columns.tuples.length).fill(null);\n    cells.forEach(c => { indexedData[c.ordinal] = c; });\n    let counter = 0;\n    rows.tuples.forEach((rowTuple) => {\n        columns.tuples.forEach((colTuple) => {\n            data.push({\n                columnTuple: colTuple,\n                data: indexedData[counter],\n                rowTuple: rowTuple\n            });\n            counter++;\n        });\n    });\n    return { columns, data, rows };\n}\n/**\n * @hidden\n */\nexport function getPropertyValue(member, name) {\n    const node = member.querySelector(name);\n    return node ? node.textContent : \"\";\n}\nfunction translateAxis(axis) {\n    const tuples = Array.from(axis.querySelectorAll(\"Tuple\"));\n    return tuples.map(tuple => {\n        const memberElements = Array.from(tuple.querySelectorAll(\"Member\"));\n        const members = memberElements.map(member => {\n            const lNum = parseInt(getPropertyValue(member, \"LNum\") || \"0\", 10);\n            const hasChildren = parseInt(getPropertyValue(member, \"CHILDREN_CARDINALITY\") || \"0\", 10) > 0;\n            return {\n                caption: getPropertyValue(member, \"Caption\"),\n                children: [],\n                hasChildren: hasChildren,\n                hierarchy: member.getAttribute('Hierarchy'),\n                levelName: getPropertyValue(member, \"LName\"),\n                levelNum: lNum,\n                name: getPropertyValue(member, \"UName\"),\n                parentName: getPropertyValue(member, \"PARENT_UNIQUE_NAME\")\n            };\n        });\n        return { members };\n    });\n}\n","/**\n * @hidden\n */\nexport const discoverCommands = {\n    schemaCatalogs: \"DBSCHEMA_CATALOGS\",\n    schemaCubes: \"MDSCHEMA_CUBES\",\n    schemaDimensions: \"MDSCHEMA_DIMENSIONS\",\n    schemaHierarchies: \"MDSCHEMA_HIERARCHIES\",\n    schemaKPIs: \"MDSCHEMA_KPIS\",\n    schemaLevels: \"MDSCHEMA_LEVELS\",\n    schemaMeasures: \"MDSCHEMA_MEASURES\",\n    schemaMembers: \"MDSCHEMA_MEMBERS\"\n};\n/**\n * @hidden\n */\nexport function createDiscoverBody(options) {\n    const properties = {};\n    let command = '<Envelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\"><Header/><Body><Discover xmlns=\"urn:schemas-microsoft-com:xml-analysis\">';\n    command += \"<RequestType>\" + (discoverCommands[options.command] || options.command) + \"</RequestType>\";\n    command += \"<Restrictions>\" + serializeOptions(\"RestrictionList\", options.restrictions, true) + \"</Restrictions>\";\n    if (options.connection && options.connection.catalog) {\n        properties.Catalog = options.connection.catalog;\n    }\n    command += \"<Properties>\" + serializeOptions(\"PropertyList\", properties, false) + \"</Properties>\";\n    command += '</Discover></Body></Envelope>';\n    return command;\n}\nfunction serializeOptions(parentTagName, options, capitalize) {\n    let result = \"\";\n    if (options) {\n        result += \"<\" + parentTagName + \">\";\n        let value;\n        for (let key in options) {\n            if (options[key]) {\n                value = options[key];\n                if (capitalize) {\n                    key = key.replace(/([A-Z]+(?=$|[A-Z][a-z])|[A-Z]?[a-z]+)/g, \"$1_\").toUpperCase().replace(/_$/, \"\");\n                }\n                result += \"<\" + key + \">\" + value + \"</\" + key + \">\";\n            }\n        }\n        result += \"</\" + parentTagName + \">\";\n    }\n    else {\n        result += \"<\" + parentTagName + \"/>\";\n    }\n    return result;\n}\n","import { getPropertyValue } from './responseParser';\n/**\n * @hidden\n */\nexport function parseCubes(response) {\n    const xmlDoc = new DOMParser().parseFromString(response, \"text/xml\");\n    const rows = Array.from(xmlDoc.querySelectorAll(\"DiscoverResponse > return > root > row\"))\n        .map(row => ({\n        name: getPropertyValue(row, \"CUBE_NAME\"),\n        caption: getPropertyValue(row, \"CUBE_CAPTION\"),\n        description: getPropertyValue(row, \"DESCRIPTION\"),\n        type: getPropertyValue(row, \"CUBE_TYPE\")\n    }));\n    return rows;\n}\n/**\n * @hidden\n */\nexport function parseCatalogs(response) {\n    const xmlDoc = new DOMParser().parseFromString(response, \"text/xml\");\n    const rows = Array.from(xmlDoc.querySelectorAll(\"DiscoverResponse > return > root > row\"))\n        .map(row => ({\n        name: getPropertyValue(row, \"CATALOG_NAME\"),\n        description: getPropertyValue(row, \"DESCRIPTION\")\n    }));\n    return rows;\n}\n/**\n * @hidden\n */\nexport function parseMeasures(response) {\n    const xmlDoc = new DOMParser().parseFromString(response, \"text/xml\");\n    const rows = Array.from(xmlDoc.querySelectorAll(\"DiscoverResponse > return > root > row\"))\n        .map(row => ({\n        name: getPropertyValue(row, \"MEASURE_NAME\"),\n        caption: getPropertyValue(row, \"MEASURE_CAPTION\"),\n        uniqueName: getPropertyValue(row, \"MEASURE_UNIQUE_NAME\"),\n        description: getPropertyValue(row, \"DESCRIPTION\"),\n        aggregator: getPropertyValue(row, \"MEASURE_AGGREGATOR\"),\n        groupName: getPropertyValue(row, \"MEASUREGROUP_NAME\"),\n        displayFolder: getPropertyValue(row, \"MEASURE_DISPLAY_FOLDER\"),\n        defaultFormat: getPropertyValue(row, \"DEFAULT_FORMAT_STRING\")\n    }));\n    return rows;\n}\n/**\n * @hidden\n */\nexport function parseKPIs(response) {\n    const xmlDoc = new DOMParser().parseFromString(response, \"text/xml\");\n    const rows = Array.from(xmlDoc.querySelectorAll(\"DiscoverResponse > return > root > row\"))\n        .map(row => ({\n        name: getPropertyValue(row, \"KPI_NAME\"),\n        uniqueName: getPropertyValue(row, \"KPI_NAME\"),\n        caption: getPropertyValue(row, \"KPI_CAPTION\"),\n        value: getPropertyValue(row, \"KPI_VALUE\"),\n        goal: getPropertyValue(row, \"KPI_GOAL\"),\n        status: getPropertyValue(row, \"KPI_STATUS\"),\n        trend: getPropertyValue(row, \"KPI_TREND\"),\n        statusGraphic: getPropertyValue(row, \"KPI_STATUS_GRAPHIC\"),\n        trendGraphic: getPropertyValue(row, \"KPI_TREND_GRAPHIC\"),\n        description: getPropertyValue(row, \"KPI_DESCRIPTION\"),\n        groupName: getPropertyValue(row, \"MEASUREGROUP_NAME\"),\n        type: \"kpi\"\n    }));\n    return rows;\n}\n/**\n * @hidden\n */\nexport function parseDimensions(response) {\n    const xmlDoc = new DOMParser().parseFromString(response, \"text/xml\");\n    const rows = Array.from(xmlDoc.querySelectorAll(\"DiscoverResponse > return > root > row\"))\n        .map(row => ({\n        caption: getPropertyValue(row, \"DIMENSION_CAPTION\"),\n        defaultHierarchy: getPropertyValue(row, \"DEFAULT_HIERARCHY\"),\n        description: getPropertyValue(row, \"DESCRIPTION\"),\n        name: getPropertyValue(row, \"DIMENSION_NAME\"),\n        type: parseInt(getPropertyValue(row, \"DIMENSION_TYPE\"), 10),\n        uniqueName: getPropertyValue(row, \"DIMENSION_UNIQUE_NAME\")\n    }));\n    return rows;\n}\n/**\n * @hidden\n */\nexport function parseHierarchies(response) {\n    const xmlDoc = new DOMParser().parseFromString(response, \"text/xml\");\n    const rows = Array.from(xmlDoc.querySelectorAll(\"DiscoverResponse > return > root > row\"))\n        .map(row => ({\n        name: getPropertyValue(row, \"HIERARCHY_NAME\"),\n        caption: getPropertyValue(row, \"HIERARCHY_CAPTION\"),\n        description: getPropertyValue(row, \"DESCRIPTION\"),\n        uniqueName: getPropertyValue(row, \"HIERARCHY_UNIQUE_NAME\"),\n        dimensionUniqueName: getPropertyValue(row, \"DIMENSION_UNIQUE_NAME\"),\n        displayFolder: getPropertyValue(row, \"HIERARCHY_DISPLAY_FOLDER\"),\n        origin: getPropertyValue(row, \"HIERARCHY_ORIGIN\"),\n        defaultMember: getPropertyValue(row, \"DEFAULT_MEMBER\")\n    }));\n    return rows;\n}\n/**\n * @hidden\n */\nexport function parseLevels(response) {\n    const xmlDoc = new DOMParser().parseFromString(response, \"text/xml\");\n    const rows = Array.from(xmlDoc.querySelectorAll(\"DiscoverResponse > return > root > row\"))\n        .map(row => ({\n        name: getPropertyValue(row, \"LEVEL_NAME\"),\n        caption: getPropertyValue(row, \"LEVEL_CAPTION\"),\n        description: getPropertyValue(row, \"DESCRIPTION\"),\n        uniqueName: getPropertyValue(row, \"LEVEL_UNIQUE_NAME\"),\n        dimensionUniqueName: getPropertyValue(row, \"DIMENSION_UNIQUE_NAME\"),\n        displayFolder: getPropertyValue(row, \"LEVEL_DISPLAY_FOLDER\"),\n        orderingProperty: getPropertyValue(row, \"LEVEL_ORDERING_PROPERTY\"),\n        origin: getPropertyValue(row, \"LEVEL_ORIGIN\"),\n        hierarchyUniqueName: getPropertyValue(row, \"HIERARCHY_UNIQUE_NAME\")\n    }));\n    return rows;\n}\n/**\n * @hidden\n */\nexport function parseMembers(response) {\n    const xmlDoc = new DOMParser().parseFromString(response, \"text/xml\");\n    const rows = Array.from(xmlDoc.querySelectorAll(\"DiscoverResponse > return > root > row\"))\n        .map(row => ({\n        name: getPropertyValue(row, \"MEMBER_NAME\"),\n        caption: getPropertyValue(row, \"MEMBER_CAPTION\"),\n        uniqueName: getPropertyValue(row, \"MEMBER_UNIQUE_NAME\"),\n        dimensionUniqueName: getPropertyValue(row, \"DIMENSION_UNIQUE_NAME\"),\n        hierarchyUniqueName: getPropertyValue(row, \"HIERARCHY_UNIQUE_NAME\"),\n        levelUniqueName: getPropertyValue(row, \"LEVEL_UNIQUE_NAME\"),\n        childrenCardinality: getPropertyValue(row, \"CHILDREN_CARDINALITY\")\n    }));\n    return rows;\n}\n","import { __awaiter } from \"tslib\";\nimport { createRequestBody } from \"./requestBuilder\";\nimport { parseResponse } from \"../responses/responseParser\";\nimport { createDiscoverBody } from './discover';\nimport { parseMeasures, parseMembers, parseLevels, parseKPIs, parseHierarchies, parseDimensions, parseCubes, parseCatalogs } from '../responses/discoverParser';\nconst discoverParser = {\n    schemaCatalogs: parseCatalogs,\n    schemaCubes: parseCubes,\n    schemaDimensions: parseDimensions,\n    schemaHierarchies: parseHierarchies,\n    schemaKPIs: parseKPIs,\n    schemaLevels: parseLevels,\n    schemaMeasures: parseMeasures,\n    schemaMembers: parseMembers\n};\n/**\n * Fetches the data.\n *\n * @param options RequestOptions\n * @returns Promise<ResponseData>\n *\n * @example\n * const options: RequestOptions = { ... };\n *\n * fetchData(options).then(createDataState).then((dataState: DataState) => {\n *  // Update the UI\n * });\n */\n/**\n * @hidden\n */\nexport const fetchData = (fetchOptions, options) => __awaiter(void 0, void 0, void 0, function* () {\n    const init = Object.assign({ body: createRequestBody(options), headers: { 'Content-Type': 'text/xml' }, method: 'POST' }, fetchOptions.init);\n    const response = yield fetch(fetchOptions.url, init);\n    const stringResponse = yield response.text();\n    return parseResponse(stringResponse);\n});\n/**\n * @hidden\n */\nexport const fetchDiscover = (fetchOptions, options) => __awaiter(void 0, void 0, void 0, function* () {\n    const init = Object.assign({ body: createDiscoverBody(options), headers: { 'Content-Type': 'text/xml' }, method: 'POST' }, fetchOptions.init);\n    const response = yield fetch(fetchOptions.url, init);\n    const stringResponse = yield response.text();\n    return discoverParser[options.command](stringResponse);\n});\n","const isMeasure = (member) => member.hierarchy === '[Measures]';\n// A typical tree depth count won't work for the Pivot,\n// as each branch can have lower number of nodes than the total number of levels\n/**\n * @hidden\n */\nexport const getMaxNesting = (node, set = new Set()) => {\n    (node.children || []).forEach((child) => {\n        set.add(child.levelName);\n        getMaxNesting(child, set);\n    });\n    return set.size;\n};\n/**\n * @hidden\n */\nexport const getMaxExpansion = (node) => {\n    let expanded = 0;\n    (node.children || []).forEach((child) => {\n        expanded += (getMaxExpansion(child) || 1);\n    });\n    return expanded;\n};\n/**\n * @hidden\n */\nexport const generateNormalizedPath = (node, parent) => {\n    return (parent && (parent.hierarchy === node.hierarchy)\n        ? [...(parent.normalizedPath || []).slice(0, -1), node.name || null]\n        : [...((parent && parent.normalizedPath) ? parent.normalizedPath : []), node.name]).filter(Boolean);\n};\n/**\n * @hidden\n */\nexport const generatePath = (node, parent) => {\n    return (parent && (parent.hierarchy === node.hierarchy)\n        ? [...(parent.path || []).slice(0, -1), ((node.levelNum === 0 ? node.hierarchy : node.name) || null)]\n        : [...((parent && parent.path) ? parent.path : []), node.levelNum === 0 ? node.hierarchy : node.name]).filter(Boolean);\n};\n/**\n * @hidden\n */\nexport const toMatrix = (node, rowIndex = -1, colIndex = 0, maxDepth = undefined, maxBreadth = undefined, matrix = undefined, leafs = undefined, parent = undefined) => {\n    const branchDepth = getMaxNesting(node);\n    const branchBreadth = getMaxExpansion(node);\n    const depth = maxDepth || branchDepth;\n    const breadth = maxBreadth || branchBreadth;\n    let matrixResult = matrix ? matrix.slice() : [];\n    let leafsResult = leafs ? leafs.slice() : new Array(breadth);\n    const index = matrixResult.findIndex((l) => l && l.name === node.levelName && l.level === node.levelNum);\n    const level = matrixResult[index];\n    const row = {\n        name: node.levelName,\n        level: node.levelNum,\n        index: rowIndex,\n        cells: new Array(breadth).fill(null)\n    };\n    const inject = rowIndex !== -1 && colIndex !== -1;\n    const cell = {\n        caption: node.caption,\n        name: node.name,\n        levelName: node.levelName,\n        levelNum: node.levelNum,\n        hasChildren: node.hasChildren,\n        parentName: node.parentName,\n        hierarchy: node.hierarchy,\n        total: (node.total !== undefined ? node.total : false) || (parent && parent.children.length <= 1 && parent.total),\n        parent,\n        rowIndex,\n        colIndex,\n        depth: 1,\n        breadth: 1,\n        path: node.path || [],\n        normalizedPath: node.normalizedPath || [],\n        children: node.children.filter(c => c.hierarchy === node.hierarchy)\n    };\n    if (inject) {\n        if (level) {\n            level.cells[colIndex] = cell;\n            if (level.index >= rowIndex) {\n                rowIndex = level.index;\n            }\n        }\n        else {\n            if (matrixResult[rowIndex] && matrixResult[rowIndex].cells.length) {\n                for (let idx = rowIndex; idx < matrixResult.length; idx++) {\n                    const shiftedRow = matrixResult[idx];\n                    shiftedRow.index++;\n                }\n                matrixResult.splice(rowIndex, 0, row);\n                matrixResult[rowIndex].cells[colIndex] = cell;\n            }\n            else {\n                matrixResult[rowIndex] = row;\n                matrixResult[rowIndex].cells[colIndex] = cell;\n            }\n        }\n    }\n    let collOffset = 0;\n    if (node.children && node.children.length) {\n        node.children.forEach((child) => {\n            const [newMatrix, newLeafs, , childBreadth] = toMatrix(child, rowIndex + 1, colIndex + collOffset, depth, breadth, matrixResult, leafsResult, cell);\n            collOffset += (childBreadth || 1);\n            matrixResult = newMatrix.slice();\n            leafsResult = newLeafs.slice();\n        });\n    }\n    else if (node.normalizedPath) {\n        leafsResult[colIndex] = { total: cell.total, path: node.normalizedPath };\n    }\n    cell.depth = branchDepth;\n    cell.breadth = branchBreadth;\n    return [\n        matrixResult,\n        leafsResult,\n        branchDepth,\n        branchBreadth\n    ];\n};\nconst withTotal = (root, parent = null, index = 0) => {\n    let hierarchy;\n    const alt = Object.assign(Object.assign({}, root), { total: true, hasChildren: false, children: [] });\n    for (let childIndex = 0; childIndex < root.children.length; childIndex++) {\n        const child = withTotal(root.children[childIndex], root, childIndex);\n        hierarchy = hierarchy || child.hierarchy;\n        if (child.hierarchy !== hierarchy\n            && parent\n            && !parent.children.some(c => c.total && c.name === alt.name)\n            && !root.total) {\n            alt.children.push(child);\n            root.children.splice(childIndex, 1);\n            childIndex--;\n        }\n    }\n    if (root.children.filter(c => !c.total).length >= 1\n        && parent\n        && !parent.children.some(c => c.total && c.name === alt.name)\n        && !root.total) {\n        const childHierarchy = root.children[0].hierarchy;\n        if (root.hierarchy === childHierarchy) {\n            parent.children.splice(index + 1, 0, alt);\n        }\n    }\n    return root;\n};\n/**\n * @hidden\n */\nexport const toTree = (tuples) => {\n    const root = { children: [] };\n    const map = {};\n    if (tuples.every(t => t.members.length === 1 && isMeasure(t.members[0]))) {\n        // toTree(columnsTuples) - The case where there are only measure(s) and no columns.\n        return {\n            children: tuples.map(t => {\n                const member = t.members[0];\n                return Object.assign(Object.assign({}, member), { normalizedPath: [member.name], parentName: member.name, path: [member.hierarchy] });\n            })\n        };\n    }\n    for (let tupleIndex = 0; tupleIndex < tuples.length; tupleIndex++) {\n        const tuple = copy(tuples[tupleIndex]);\n        let key = \"\";\n        for (let memberIndex = 0; memberIndex < tuple.members.length; memberIndex++) {\n            const member = tuple.members[memberIndex];\n            let parent;\n            if (root.children && root.children.length === 0) {\n                parent = root;\n            }\n            else if (map[key] && !map[key + member.name] && member.levelNum === 0) {\n                parent = map[key];\n            }\n            else if (map[key + member.parentName] && member.levelNum > 0 && !map[key + member.parentName + member.name]) {\n                parent = map[key + member.parentName];\n            }\n            else if (!map[key + member.parentName] && member.levelNum > 0 && !map[key + member.parentName + member.name]) {\n                const parentKey = Object.keys(map).find(e => member.parentName === map[e].name);\n                if (parentKey) {\n                    parent = map[parentKey];\n                }\n            }\n            if (parent) {\n                member.path = generatePath(member, parent);\n                member.normalizedPath = generateNormalizedPath(member, parent);\n                const intruderIndex = parent.children.findIndex(c => c.hierarchy !== parent.hierarchy);\n                if (intruderIndex !== -1) {\n                    parent.children.splice(intruderIndex, 0, member);\n                }\n                else {\n                    parent.children.push(member);\n                }\n            }\n            member.parentName += member.name;\n            key += member.parentName;\n            if (!map[key]) {\n                map[key] = member;\n            }\n        }\n    }\n    return copy(withTotal(root));\n};\n/**\n * @hidden\n */\nexport const toData = (data, columns, rows, breadth, depth) => {\n    const result = Array.from(new Array(depth), () => ({ cells: Array.from(new Array(breadth), () => null) }));\n    const hash = (names) => names.join('|');\n    const membersNames = (tuple) => tuple.members.map(m => m.name);\n    const columnsIndexes = new Map();\n    const rowsIndexes = new Map();\n    columns.forEach((colMembers, idx) => { columnsIndexes.set(hash(colMembers.path), idx); });\n    rows.forEach((rowMembers, idx) => { rowsIndexes.set(hash(rowMembers.path), idx); });\n    data.forEach((item) => {\n        const colIndex = columnsIndexes.get(hash(membersNames(item.columnTuple)));\n        const rowIndex = rowsIndexes.get(hash(membersNames(item.rowTuple)));\n        if (colIndex !== undefined && rowIndex !== undefined) {\n            if (!result[rowIndex].cells[colIndex]) {\n                result[rowIndex].row = rows[rowIndex].path;\n                result[rowIndex].cells[colIndex] = item;\n            }\n        }\n    });\n    return result;\n};\nconst rotateMatrix = (matrix, leafs, depth, breadth) => {\n    const result = new Array(breadth);\n    for (let colIndex = 0; colIndex < breadth; colIndex++) {\n        for (let rowIndex = 0; rowIndex < depth; rowIndex++) {\n            if (matrix[rowIndex] && matrix[rowIndex].cells[colIndex]) {\n                const cell = matrix[rowIndex].cells[colIndex];\n                if (!result[colIndex]) {\n                    result[colIndex] = {\n                        cells: new Array(depth).fill(null)\n                    };\n                }\n                result[colIndex].cells[rowIndex] = Object.assign(Object.assign({}, cell), { rowSpan: cell.colSpan, colSpan: cell.rowSpan });\n            }\n        }\n    }\n    return [result, leafs, breadth, depth];\n};\n/**\n * @hidden\n */\nexport const toColumns = (root) => {\n    const [matrix, leafs, depth, breadth] = toMatrix(root);\n    for (let colIndex = 0; colIndex < breadth; colIndex++) {\n        let cell = null;\n        for (let rowIndex = 0; rowIndex < depth; rowIndex++) {\n            if (matrix[rowIndex]) {\n                const next = matrix[rowIndex].cells[colIndex];\n                if (!next && cell) {\n                    cell.rowSpan = (cell.rowSpan || 1) + 1;\n                }\n                if (cell) {\n                    cell.colSpan = cell.breadth || 1;\n                }\n                if (next) {\n                    cell = next;\n                }\n            }\n        }\n    }\n    return [matrix, leafs, depth, breadth];\n};\n/**\n * @hidden\n */\nexport const toRows = (root) => {\n    const [matrix, leafs, depth, breadth] = toMatrix(root);\n    for (let colIndex = 0; colIndex < breadth; colIndex++) {\n        let cell = null;\n        for (let rowIndex = 0; rowIndex < depth; rowIndex++) {\n            if (matrix[rowIndex]) {\n                const next = matrix[rowIndex].cells[colIndex];\n                if (!next && cell) {\n                    cell.rowSpan = (cell.rowSpan || 1) + 1;\n                }\n                if (cell) {\n                    cell.colSpan = cell.breadth;\n                }\n                if (next) {\n                    cell = next;\n                }\n            }\n        }\n    }\n    return rotateMatrix(matrix, leafs, depth, breadth);\n};\n/**\n * @hidden\n */\nexport const cloneDate = (date) => date ? new Date(date.getTime()) : null;\n/**\n * @hidden\n */\nexport function clone(obj) {\n    const result = {};\n    cloneObject(obj, result);\n    return result;\n}\n/**\n * @hidden\n */\nexport function cloneObject(obj, result) {\n    for (const field in obj) {\n        if (obj.hasOwnProperty(field)) {\n            const value = obj[field];\n            result[field] = cloneValue(value, result[field]);\n        }\n    }\n}\n/**\n * @hidden\n */\nexport function cloneValue(value, nextValue) {\n    if (Array.isArray(value)) {\n        return cloneArray(value);\n    }\n    else if (value instanceof Date) {\n        return cloneDate(value);\n    }\n    else if (value && typeof value === 'object') {\n        const newNextValue = nextValue || {};\n        cloneObject(value, newNextValue);\n        return newNextValue;\n    }\n    else {\n        return value;\n    }\n}\n/**\n * @hidden\n */\nexport function copy(obj) {\n    return JSON.parse(JSON.stringify(obj));\n}\n/**\n * @hidden\n */\nexport function cloneArray(array) {\n    return array.map(value => cloneValue(value, undefined));\n}\nconst kpiMeasure = (name, measure, type) => {\n    return {\n        hierarchyUniqueName: name,\n        uniqueName: measure,\n        caption: measure,\n        measure: measure,\n        name: measure,\n        type: type,\n        kpi: true\n    };\n};\n/**\n * @hidden\n */\nexport function buildKPIMeasures(node) {\n    const name = node.name;\n    return [\n        kpiMeasure(name, node.value, \"value\"),\n        kpiMeasure(name, node.goal, \"goal\"),\n        kpiMeasure(name, node.status, \"status\"),\n        kpiMeasure(name, node.trend, \"trend\")\n    ];\n}\n/**\n * @hidden\n */\nexport const addKPI = (data) => {\n    let found;\n    let idx = 0;\n    for (; idx < data.length; idx++) {\n        if (data[idx].type === 2) {\n            found = true;\n            break;\n        }\n    }\n    if (found) {\n        data.splice(idx + 1, 0, {\n            caption: \"KPIs\",\n            defaultHierarchy: \"[KPIs]\",\n            name: \"KPIs\",\n            uniqueName: \"[KPIs]\"\n        });\n    }\n};\n/**\n * @hidden\n */\nexport const compareAxisWithField = (a, b) => String(a.name) === String([(b.defaultHierarchy\n        ? b.defaultHierarchy\n        : b.uniqueName)]);\n/**\n * @hidden\n */\nexport const compareAxes = (a, b) => String(a.name) === String(b.name);\n/**\n * @hidden\n */\nexport const filterField = (axes, out) => {\n    for (let i = axes.length - 1; i >= 0; i--) {\n        const axis = axes[i];\n        const index = axis.name.findIndex(name => compareAxisWithField({ name: [name] }, out) || String(name).startsWith(out.uniqueName));\n        if (index !== -1) {\n            if (index === axis.name.length - 1 || axis.name.length === 1) {\n                axes.splice(i, 1);\n            }\n            else {\n                axis.name.splice(index, 1);\n                const duplicatedAxisIndex = axes.findIndex(ax => ax !== axis && String(ax.name) === String(axis.name));\n                if (duplicatedAxisIndex !== -1) {\n                    axes[duplicatedAxisIndex] = Object.assign(Object.assign(Object.assign({}, axes[duplicatedAxisIndex]), axis), ((axes[duplicatedAxisIndex].expand || axis.expand) ? { expand: true } : {}));\n                    axes.splice(i, 1);\n                }\n            }\n        }\n    }\n};\n/**\n * @hidden\n */\nexport const insertAxis = (axes, toInsert, state) => {\n    let index = -1;\n    if (state.dropTarget && state.dropDirection) {\n        const offset = state.dropDirection\n            ? (state.dropDirection === 'before'\n                ? 0\n                : 1)\n            : 0;\n        index = axes.findIndex((c) => compareAxes(c, state.dropTarget)) + offset;\n    }\n    if (index !== -1) {\n        axes.forEach(axis => {\n            if (axis.expand && axis.name.length > 1 && axis.name.length > index) {\n                axis.name.splice(index, 0, ...toInsert.name);\n            }\n        });\n        axes.splice(index, 0, toInsert);\n    }\n    else {\n        axes.push(toInsert);\n    }\n};\n/**\n * @hidden\n */\nexport const reverseColumnsByMeasures = (columns) => {\n    const firstColumn = columns.length && columns[0];\n    const lastMember = firstColumn && firstColumn.members[firstColumn.members.length - 1];\n    if (lastMember && isMeasure(lastMember)) {\n        const columnsArr = [];\n        const measuresCount = new Set(columns.map(col => col.members[col.members.length - 1].caption)).size;\n        for (let i = 0; i < columns.length; i += measuresCount) {\n            columnsArr.push(columns.slice(i, i + measuresCount));\n        }\n        const result = [];\n        columnsArr.forEach(arr => {\n            result.push(...arr.reverse());\n        });\n        return result;\n    }\n    return columns;\n};\n","import { reverseColumnsByMeasures } from \"../utils\";\n/**\n * Creates the state object. See `fetchData`.\n *\n * @param response - ResponseData\n * @returns DataState\n */\n/**\n * @hidden\n */\nexport const createDataState = (response) => {\n    const state = {\n        columns: reverseColumnsByMeasures(response.columns.tuples),\n        data: response.data,\n        rows: response.rows.tuples\n    };\n    return state;\n};\n","/**\n * Creates a collection of AxisDescriptor base on the expandTree.\n * @param expandTree - { [key: string]: boolean }\n * @returns AxisDescriptor[]\n *\n * @example\n * See `setRowExpand` or `setColumnExpand` functions.\n */\n/**\n * @hidden\n */\nexport function createAxisDescriptors(expandTree) {\n    const descriptors = [];\n    for (const key of Object.keys(expandTree)) {\n        descriptors.push({ name: JSON.parse(key), expand: expandTree[key] });\n    }\n    return descriptors;\n}\n","/**\n * Sets sort descriptors to request options.\n *\n * @param options - RequestOptions\n * @param sort - SortDescriptor[]\n *\n * @example\n * const options: RequestOptions = { ... };\n * const sort: SortDescriptor[] = [{ ... }, { ... }];\n * setSort(options, sort);\n * // skip the sort parameter to clear current filter - setSort(options);\n *\n * fetchData(options).then(createDataState).then((dataState: DataState) => {\n *  // Update the UI\n * });\n */\n/**\n * @hidden\n */\nexport const setSort = (options, sort = []) => {\n    options.sort = sort;\n};\n","/**\n * Sets filter descriptors to request options.\n *\n * @param options - RequestOptions\n * @param filter - FilterDescriptor[]\n *\n * @example\n * const options: RequestOptions = { ... };\n * const filter: FilterDescriptor[] = [{ ... }, { ... }];\n * setFilter(options, filter);\n * // skip the filter parameter to clear current filter - setFilter(options);\n *\n * fetchData(options).then(createDataState).then((dataState: DataState) => {\n *  // Update the UI\n * });\n */\n/**\n * @hidden\n */\nexport const setFilter = (options, filter = []) => {\n    options.filter = filter;\n};\n","/**\n * @hidden\n */\nexport var HEADERS_ACTION;\n(function (HEADERS_ACTION) {\n    HEADERS_ACTION[\"toggle\"] = \"HEADERS_ACTION_TOGGLE\";\n    HEADERS_ACTION[\"expand\"] = \"HEADERS_ACTION_EXPAND\";\n    HEADERS_ACTION[\"collapse\"] = \"HEADERS_ACTION_COLLAPSE\";\n})(HEADERS_ACTION || (HEADERS_ACTION = {}));\nconst findPath = (node, matchFn, matched) => {\n    const result = new Set();\n    node.children.forEach((child) => {\n        const match = matchFn(child);\n        if (matched) {\n            result.add(String(child.path));\n        }\n        findPath(child, matchFn, (matched || match)).map((h) => {\n            result.add(h);\n        });\n    });\n    return Array.from(result.values());\n};\n/**\n * @hidden\n */\nexport const headersReducer = (state, action) => {\n    switch (action.type) {\n        case HEADERS_ACTION.toggle: {\n            const existing = state.find((s => String(s.name) === String(action.payload)));\n            return headersReducer(state, Object.assign(Object.assign({}, action), { type: existing && (existing.expand)\n                    ? HEADERS_ACTION.collapse\n                    : HEADERS_ACTION.expand }));\n        }\n        case HEADERS_ACTION.expand: {\n            const existing = state.find((s => String(s.name) === String(action.payload)));\n            if (existing && existing.expand === true) {\n                return state;\n            }\n            else if (existing && (existing.expand === false || existing.expand === undefined)) {\n                return state.map((s) => s === existing ? (Object.assign(Object.assign({}, existing), { expand: true })) : s);\n            }\n            else {\n                const nextState = state.slice();\n                nextState.push({ name: action.payload, expand: true });\n                return nextState;\n            }\n        }\n        case HEADERS_ACTION.collapse: {\n            const filtered = findPath(action.tree, (node) => !node.total && String(node.path) === String(action.payload));\n            const newState = state.slice()\n                .filter(h => !filtered.some((f) => f === String(h.name)))\n                .map(h => (Object.assign(Object.assign({}, h), { expand: Boolean(h.expand) })))\n                .map(h => (String(h.name) === String(action.payload))\n                ? action.payload.length > 1 ? undefined : { name: action.payload, expand: false }\n                : h)\n                .filter(Boolean);\n            return newState;\n        }\n        default: {\n            return state;\n        }\n    }\n};\n","import { compareAxisWithField, compareAxes, buildKPIMeasures, filterField, insertAxis } from '../utils';\n/**\n * @hidden\n */\nexport var PIVOT_CONFIGURATOR_ACTION;\n(function (PIVOT_CONFIGURATOR_ACTION) {\n    // Selection\n    PIVOT_CONFIGURATOR_ACTION[\"toggleSelection\"] = \"PIVOT_CONFIGURATOR_ACTION_TOGGLE_SELECTION\";\n    PIVOT_CONFIGURATOR_ACTION[\"addColumnAxis\"] = \"PIVOT_CONFIGURATOR_ACTION_ADD_COLUMN_AXIS\";\n    PIVOT_CONFIGURATOR_ACTION[\"addColumnAxes\"] = \"PIVOT_CONFIGURATOR_ACTION_ADD_COLUMN_AXES\";\n    PIVOT_CONFIGURATOR_ACTION[\"removeColumnAxis\"] = \"PIVOT_CONFIGURATOR_ACTION_REMOVE_COLUMN_AXIS\";\n    PIVOT_CONFIGURATOR_ACTION[\"removeColumnAxes\"] = \"PIVOT_CONFIGURATOR_ACTION_REMOVE_COLUMN_AXES\";\n    PIVOT_CONFIGURATOR_ACTION[\"addRowAxis\"] = \"PIVOT_CONFIGURATOR_ACTION_ADD_ROW_AXIS\";\n    PIVOT_CONFIGURATOR_ACTION[\"addRowAxes\"] = \"PIVOT_CONFIGURATOR_ACTION_ADD_ROW_AXES\";\n    PIVOT_CONFIGURATOR_ACTION[\"removeRowAxis\"] = \"PIVOT_CONFIGURATOR_ACTION_REMOVE_ROW_AXIS\";\n    PIVOT_CONFIGURATOR_ACTION[\"removeRowAxes\"] = \"PIVOT_CONFIGURATOR_ACTION_REMOVE_ROW_AXES\";\n    PIVOT_CONFIGURATOR_ACTION[\"addMeasureAxis\"] = \"PIVOT_CONFIGURATOR_ACTION_ADD_MEASURE_AXIS\";\n    PIVOT_CONFIGURATOR_ACTION[\"addMeasureAxes\"] = \"PIVOT_CONFIGURATOR_ACTION_ADD_MEASURE_AXES\";\n    PIVOT_CONFIGURATOR_ACTION[\"removeMeasureAxis\"] = \"PIVOT_CONFIGURATOR_ACTION_REMOVE_MEASURE_AXIS\";\n    PIVOT_CONFIGURATOR_ACTION[\"removeMeasureAxes\"] = \"PIVOT_CONFIGURATOR_ACTION_REMOVE_MEASURE_AXES\";\n    // Removal\n    PIVOT_CONFIGURATOR_ACTION[\"remove\"] = \"PIVOT_CONFIGURATOR_ACTION_REMOVE\";\n    // Sort\n    PIVOT_CONFIGURATOR_ACTION[\"setSort\"] = \"PIVOT_CONFIGURATOR_ACTION_SET_SORT\";\n    // Filter\n    PIVOT_CONFIGURATOR_ACTION[\"setFilter\"] = \"PIVOT_CONFIGURATOR_ACTION_SET_FILTER\";\n    PIVOT_CONFIGURATOR_ACTION[\"addFilter\"] = \"PIVOT_CONFIGURATOR_ACTION_ADD_FILTER\";\n    PIVOT_CONFIGURATOR_ACTION[\"changeFilter\"] = \"PIVOT_CONFIGURATOR_ACTION_CHANGE_FILTER\";\n    PIVOT_CONFIGURATOR_ACTION[\"removeFilter\"] = \"PIVOT_CONFIGURATOR_ACTION_REMOVE_FILTER\";\n    // Drag\n    PIVOT_CONFIGURATOR_ACTION[\"setDragItem\"] = \"PIVOT_CONFIGURATOR_ACTION_SET_DRAGITEM\";\n    PIVOT_CONFIGURATOR_ACTION[\"drop\"] = \"PIVOT_CONFIGURATOR_ACTION_DROP\";\n    PIVOT_CONFIGURATOR_ACTION[\"setDropZone\"] = \"PIVOT_CONFIGURATOR_ACTION_SET_DROP_ZONE\";\n    PIVOT_CONFIGURATOR_ACTION[\"setDropTarget\"] = \"PIVOT_CONFIGURATOR_ACTION_SET_DROP_TARGET\";\n    PIVOT_CONFIGURATOR_ACTION[\"setDropDirection\"] = \"PIVOT_CONFIGURATOR_ACTION_SET_DROP_DIRECTION\";\n})(PIVOT_CONFIGURATOR_ACTION || (PIVOT_CONFIGURATOR_ACTION = {}));\n/**\n * @hidden\n */\nexport const configuratorReducer = (state, action) => {\n    let newRows;\n    let newColumns;\n    let newMeasures;\n    let newSort;\n    let newFilter;\n    let newDragitem;\n    let newDropZone;\n    let newDropDirection;\n    let newDropTarget;\n    switch (action.type) {\n        case PIVOT_CONFIGURATOR_ACTION.toggleSelection: {\n            if (Array.isArray(action.payload)) {\n                // TODO;\n            }\n            else {\n                const payload = action.payload;\n                if (payload.type === 2 || 'aggregator' in payload) {\n                    if (state.measureAxes.some((s) => compareAxisWithField(s, payload))) {\n                        return configuratorReducer(state, Object.assign(Object.assign({}, action), { type: PIVOT_CONFIGURATOR_ACTION.removeMeasureAxis }));\n                    }\n                    else {\n                        return configuratorReducer(state, Object.assign(Object.assign({}, action), { type: PIVOT_CONFIGURATOR_ACTION.addMeasureAxis }));\n                    }\n                }\n                else if (payload.type === 'kpi') {\n                    const measures = buildKPIMeasures(payload);\n                    if (measures.every((m) => state.measureAxes.some((s) => compareAxisWithField(s, m)))) {\n                        return configuratorReducer(state, Object.assign(Object.assign({}, action), { type: PIVOT_CONFIGURATOR_ACTION.removeMeasureAxes, payload: measures }));\n                    }\n                    else {\n                        return configuratorReducer(state, Object.assign(Object.assign({}, action), { type: PIVOT_CONFIGURATOR_ACTION.addMeasureAxes, payload: measures.filter((m) => !state.measureAxes.some((s) => compareAxisWithField(s, m))) }));\n                    }\n                }\n                else if (action.payload.kpi) {\n                    if (state.measureAxes.some((s) => compareAxisWithField(s, payload))) {\n                        return configuratorReducer(state, Object.assign(Object.assign({}, action), { type: PIVOT_CONFIGURATOR_ACTION.removeMeasureAxis }));\n                    }\n                    else {\n                        return configuratorReducer(state, Object.assign(Object.assign({}, action), { type: PIVOT_CONFIGURATOR_ACTION.addMeasureAxis }));\n                    }\n                }\n                else {\n                    if (state.columnAxes.some((s) => compareAxisWithField(s, payload))) {\n                        return configuratorReducer(state, Object.assign(Object.assign({}, action), { type: PIVOT_CONFIGURATOR_ACTION.removeColumnAxis }));\n                    }\n                    else if (state.rowAxes.some((s) => compareAxisWithField(s, payload))) {\n                        return configuratorReducer(state, Object.assign(Object.assign({}, action), { type: PIVOT_CONFIGURATOR_ACTION.removeRowAxis }));\n                    }\n                    else if ((state.columnAxes && state.columnAxes.length) && (!state.rowAxes || !state.rowAxes.length)) {\n                        return configuratorReducer(state, Object.assign(Object.assign({}, action), { type: PIVOT_CONFIGURATOR_ACTION.addRowAxis }));\n                    }\n                    else {\n                        return configuratorReducer(state, Object.assign(Object.assign({}, action), { type: PIVOT_CONFIGURATOR_ACTION.addColumnAxis }));\n                    }\n                }\n            }\n            break;\n        }\n        case PIVOT_CONFIGURATOR_ACTION.addColumnAxis: {\n            newColumns = [\n                ...(state.columnAxes || []),\n                { name: [action.payload.defaultHierarchy || action.payload.uniqueName] }\n            ];\n            break;\n        }\n        case PIVOT_CONFIGURATOR_ACTION.addColumnAxes: {\n            // TODO;\n            break;\n        }\n        case PIVOT_CONFIGURATOR_ACTION.removeColumnAxis: {\n            newColumns = [...(state.columnAxes || []).filter((s) => !compareAxisWithField(s, action.payload))];\n            filterField(newColumns, action.payload);\n            break;\n        }\n        case PIVOT_CONFIGURATOR_ACTION.removeColumnAxes: {\n            // TODO;\n            break;\n        }\n        case PIVOT_CONFIGURATOR_ACTION.addRowAxis: {\n            newRows = [\n                ...(state.rowAxes || []),\n                { name: [action.payload.defaultHierarchy || action.payload.uniqueName] }\n            ];\n            break;\n        }\n        case PIVOT_CONFIGURATOR_ACTION.addRowAxes: {\n            // TODO;\n            break;\n        }\n        case PIVOT_CONFIGURATOR_ACTION.removeRowAxis: {\n            newRows = [...(state.rowAxes || []).filter((s) => !compareAxisWithField(s, action.payload))];\n            filterField(newRows, action.payload);\n            break;\n        }\n        case PIVOT_CONFIGURATOR_ACTION.removeRowAxes: {\n            // TODO;\n            break;\n        }\n        case PIVOT_CONFIGURATOR_ACTION.addMeasureAxis: {\n            newMeasures = [\n                ...(state.measureAxes || []),\n                { name: [action.payload.defaultHierarchy || action.payload.uniqueName] }\n            ];\n            break;\n        }\n        case PIVOT_CONFIGURATOR_ACTION.removeMeasureAxis: {\n            newMeasures = [...(state.measureAxes || []).filter((s) => !compareAxisWithField(s, action.payload))];\n            break;\n        }\n        case PIVOT_CONFIGURATOR_ACTION.addMeasureAxes: {\n            newMeasures = [\n                ...(state.measureAxes || []),\n                ...(action.payload || []).map((p) => ({ name: [p.defaultHierarchy || p.uniqueName] }))\n            ];\n            break;\n        }\n        case PIVOT_CONFIGURATOR_ACTION.removeMeasureAxes: {\n            newMeasures = [...(state.measureAxes || []).filter((s) => !action.payload.some((p) => compareAxisWithField(s, p)))];\n            break;\n        }\n        case PIVOT_CONFIGURATOR_ACTION.remove: {\n            if (state.columnAxes.some((s) => compareAxes(s, action.payload))) {\n                newColumns = [...state.columnAxes.filter((s) => !compareAxes(s, action.payload))];\n                filterField(newColumns, { uniqueName: action.payload.name });\n            }\n            if (state.rowAxes.some((s) => compareAxes(s, action.payload))) {\n                newRows = [...state.rowAxes.filter((s) => !compareAxes(s, action.payload))];\n                filterField(newRows, { uniqueName: action.payload.name });\n            }\n            if (state.measureAxes.some((s) => compareAxes(s, action.payload))) {\n                newMeasures = [...state.measureAxes.filter((s) => !compareAxes(s, action.payload))];\n            }\n            break;\n        }\n        case PIVOT_CONFIGURATOR_ACTION.setDragItem:\n            newDragitem = action.payload;\n            break;\n        case PIVOT_CONFIGURATOR_ACTION.setDropZone:\n            newDropZone = action.payload;\n            break;\n        case PIVOT_CONFIGURATOR_ACTION.setDropTarget:\n            newDropTarget = action.payload;\n            break;\n        case PIVOT_CONFIGURATOR_ACTION.setDropDirection:\n            newDropDirection = action.payload;\n            break;\n        case PIVOT_CONFIGURATOR_ACTION.drop:\n            if (state.dragItem && state.dropZone) {\n                const currentColumn = state.columnAxes.find((s) => compareAxes(s, action.payload));\n                const currentRow = state.rowAxes.find((s) => compareAxes(s, action.payload));\n                const currentMeasure = state.measureAxes.find((s) => compareAxes(s, action.payload));\n                let current;\n                if (currentColumn) {\n                    current = currentColumn;\n                    newColumns = [...state.columnAxes.filter((s) => !compareAxes(s, action.payload))];\n                    filterField(newColumns, { uniqueName: action.payload.name });\n                }\n                if (currentRow) {\n                    current = currentRow;\n                    newRows = [...state.rowAxes.filter((s) => !compareAxes(s, action.payload))];\n                    filterField(newRows, { uniqueName: action.payload.name });\n                }\n                if (currentMeasure) {\n                    current = currentMeasure;\n                    newMeasures = [...state.measureAxes.filter((s) => !compareAxes(s, action.payload))];\n                }\n                switch (state.dropZone) {\n                    case 'columnAxes': {\n                        newColumns = newColumns || state.columnAxes.slice();\n                        insertAxis(newColumns, current, state);\n                        break;\n                    }\n                    case 'rowAxes': {\n                        newRows = newRows || state.rowAxes.slice();\n                        insertAxis(newRows, current, state);\n                        break;\n                    }\n                    case 'measureAxes': {\n                        newMeasures = newMeasures || state.measureAxes.slice();\n                        insertAxis(newMeasures, current, state);\n                        break;\n                    }\n                    default:\n                        break;\n                }\n            }\n            newDragitem = null;\n            newDropZone = null;\n            newDropTarget = null;\n            break;\n        case PIVOT_CONFIGURATOR_ACTION.setSort:\n            newSort = action.payload;\n            break;\n        case PIVOT_CONFIGURATOR_ACTION.setFilter:\n            if (Array.isArray(action.payload)) {\n                newFilter = action.payload;\n            }\n            else {\n                newFilter = [action.payload];\n            }\n            break;\n        case PIVOT_CONFIGURATOR_ACTION.addFilter:\n            newFilter = (state.filter || []).slice();\n            if (Array.isArray(action.payload)) {\n                newFilter.push(...action.payload);\n            }\n            else {\n                newFilter.push(action.payload);\n            }\n            break;\n        case PIVOT_CONFIGURATOR_ACTION.changeFilter:\n            newFilter = (Array.isArray(action.payload)\n                ? (state.filter || []).map(f => action.payload.some((a) => a.field === f.field)\n                    ? action.payload.find((a) => a.field === f.field)\n                    : f)\n                : (state.filter || []).map(f => f.field === action.payload.field\n                    ? action.payload\n                    : f));\n            break;\n        case PIVOT_CONFIGURATOR_ACTION.removeFilter:\n            newFilter = (state.filter || []).slice();\n            if (Array.isArray(action.payload)) {\n                newFilter = newFilter.filter((f) => !action.payload.some((p) => p.field === f.field &&\n                    p.operator === f.operator));\n            }\n            else {\n                newFilter = newFilter.filter((f) => !(f.field === action.payload.field\n                    && f.operator === action.payload.operator));\n            }\n            break;\n        default:\n            break;\n    }\n    return {\n        dragItem: newDragitem,\n        dropTarget: newDropTarget,\n        dropDirection: newDropDirection,\n        dropZone: newDropZone,\n        columnAxes: newColumns,\n        rowAxes: newRows,\n        measureAxes: newMeasures,\n        filter: newFilter,\n        sort: newSort\n    };\n};\n","// tslint:disable:object-literal-sort-keys\n/**\n * The available built-in types of local-data aggregates.\n */\nexport var AggregateType;\n(function (AggregateType) {\n    AggregateType[AggregateType[\"Sum\"] = 0] = \"Sum\";\n    AggregateType[AggregateType[\"Count\"] = 1] = \"Count\";\n    AggregateType[AggregateType[\"Min\"] = 2] = \"Min\";\n    AggregateType[AggregateType[\"Max\"] = 3] = \"Max\";\n    AggregateType[AggregateType[\"Average\"] = 4] = \"Average\";\n})(AggregateType || (AggregateType = {}));\nlet count = 0;\n/**\n * Creates a new `Aggregate` object of the specified type.\n * This is typically used for generating aggregate objects required for each measure column in the pivot grid.\n *\n * @param type - The type of aggregate to create (e.g., Sum, Count, Min, Max, Average).\n * @returns The generated aggregate object.\n */\nexport const createAggregate = (type) => {\n    const key = `${AggregateType[type]}_${count++}`;\n    switch (type) {\n        case AggregateType.Sum:\n            return {\n                init: (data) => {\n                    if ((key in data) === false) {\n                        data[key] = 0;\n                    }\n                },\n                merge: (src, dest) => {\n                    dest[key] += src[key];\n                },\n                accumulate: (acc, value) => {\n                    acc[key] += value;\n                },\n                result: data => data[key],\n                format: (value) => value.toFixed(2)\n            };\n        case AggregateType.Count:\n            return {\n                init: (data) => {\n                    if ((key in data) === false) {\n                        data[key] = 0;\n                    }\n                },\n                merge: (src, dest) => {\n                    dest[key] += src[key];\n                },\n                accumulate: (acc, _value) => {\n                    acc[key] += 1;\n                },\n                result: data => data[key],\n                format: (value) => value.toFixed()\n            };\n        case AggregateType.Min:\n            return {\n                init: (data) => {\n                    if (key in data === false) {\n                        data[key] = Number.POSITIVE_INFINITY;\n                    }\n                },\n                merge: (src, dest) => {\n                    dest[key] = Math.min(src[key], dest[key]);\n                },\n                accumulate: (acc, value) => {\n                    acc[key] = Math.min(value, acc[key]);\n                },\n                result: (data) => (Number.isFinite(data[key]) ? data[key] : NaN),\n                format: (value) => value.toFixed(2)\n            };\n        case AggregateType.Max:\n            return {\n                init: (data) => {\n                    if ((key in data) === false) {\n                        data[key] = Number.NEGATIVE_INFINITY;\n                    }\n                },\n                merge: (src, dest) => {\n                    dest[key] = Math.max(src[key], dest[key]);\n                },\n                accumulate: (acc, value) => {\n                    acc[key] = Math.max(value, acc[key]);\n                },\n                result: data => Number.isFinite(data[key]) ? data[key] : NaN,\n                format: (value) => value.toFixed(2)\n            };\n        case AggregateType.Average:\n            const sumProp = `${key}_sum`;\n            const countProp = `${key}_count`;\n            return {\n                init: (data) => {\n                    if ((countProp in data) === false) {\n                        data[sumProp] = 0;\n                        data[countProp] = 0;\n                    }\n                },\n                merge: (src, dest) => {\n                    dest[sumProp] += src[sumProp];\n                    dest[countProp] += src[countProp];\n                },\n                accumulate: (acc, value) => {\n                    acc[sumProp] += value;\n                    acc[countProp] += 1;\n                },\n                result: data => data[sumProp] / data[countProp],\n                format: (value) => value.toFixed(2)\n            };\n        default:\n            throw new Error('Invalid aggregate type provided');\n    }\n};\n/**\n * Represents the aggregate object which calculates the total value. Applicable for local data binding.\n */\nexport const sumAggregate = createAggregate(AggregateType.Sum);\n/**\n * Represents the aggregate object which calculates the count value. Applicable for local data binding.\n */\nexport const countAggregate = createAggregate(AggregateType.Count);\n/**\n * Represents the aggregate object which calculates the minimum value. Applicable for local data binding.\n */\nexport const minAggregate = createAggregate(AggregateType.Min);\n/**\n * Represents the aggregate object which calculates the maximum value. Applicable for local data binding.\n */\nexport const maxAggregate = createAggregate(AggregateType.Max);\n/**\n * Represents the aggregate object which calculates the average value. Applicable for local data binding.\n */\nexport const averageAggregate = createAggregate(AggregateType.Average);\n","/**\n * @hidden\n */\nexport const isPresent = (value) => value !== null && value !== undefined;\n/**\n * @hidden\n */\nexport const isBlank = (value) => value === null || value === undefined;\n/**\n * @hidden\n */\nexport const isArray = (value) => Array.isArray(value);\n/**\n * @hidden\n */\nexport const isFunction = (value) => typeof value === 'function';\n/**\n * @hidden\n */\nexport const isString = (value) => typeof value === 'string';\n/**\n * @hidden\n */\nexport const isTruthy = (value) => !!value;\n/**\n * @hidden\n */\nexport const isNullOrEmptyString = (value) => isBlank(value) || value.trim().length === 0;\n/**\n * @hidden\n */\nexport const isNotNullOrEmptyString = (value) => !isNullOrEmptyString(value);\n/**\n * @hidden\n */\nexport const isNumeric = (value) => !isNaN(value - parseFloat(value));\n/**\n * @hidden\n */\nexport const isDate = (value) => value && value.getTime;\n","import { isPresent } from '../utils';\n// tslint:enable:max-line-length\n/**\n * @hidden\n * Type guard for `CompositeFilterDescriptor`.\n */\nexport const isCompositeFilterDescriptor = (source) => {\n    return isPresent(source.filters);\n};\n","/**\n * @hidden\n */\nexport const ifElse = (predicate, right, left) => value => predicate(value) ? right(value) : left(value);\n/**\n * @hidden\n * Performs the right-to-left function composition. Functions should have a unary.\n */\nexport const compose = (...args) => (data) => args.reduceRight((acc, curr) => curr(acc), data);\n/**\n * @hidden\n */\nexport const constant = x => () => x;\n/**\n * @hidden\n */\nexport const identity = x => x;\n","import { isString, isDate } from './utils';\n/**\n * @hidden\n * Creates a single arity function which wraps the value based on the provided predicate.\n * @example\n * ```\n * wrapIf(() => ignoreCase) `tolower(${field})`\n * //ignoreCase=true -> tolower(${field})`\n * //ignoreCase=false -> ${field}`\n * ```\n */\nexport const wrapIf = predicate => (str, ...args) => predicate() ? `${str[0]}${args[0]}${str[1]}` : args[0];\n/**\n * @hidden\n */\nexport const toUTC = (date) => new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate(), date.getHours(), date.getMinutes(), date.getSeconds(), date.getMilliseconds()));\n/**\n * @hidden\n */\nexport const quote = ({ field, value, ignoreCase, operator }) => ({\n    value: `'${value.replace(/'/g, \"''\")}'`,\n    field,\n    ignoreCase,\n    operator\n});\n/**\n * @hidden\n */\nexport const encodeValue = ({ field, value, ignoreCase, operator }) => ({\n    value: `${encodeURIComponent(value)}`,\n    field,\n    ignoreCase,\n    operator\n});\n/**\n * @hidden\n */\nexport const toLower = ({ field, value, ignoreCase, operator }) => ({\n    field: wrapIf(() => ignoreCase) `tolower(${field})`,\n    value,\n    ignoreCase,\n    operator\n});\n/**\n * @hidden\n */\nexport const normalizeField = ({ field, value, ignoreCase, operator }) => ({\n    value,\n    field: field.replace(/\\./g, \"/\"),\n    ignoreCase,\n    operator\n});\n/**\n * @hidden\n */\nexport const isStringValue = x => isString(x.value);\n/**\n * @hidden\n */\nexport const isDateValue = x => isDate(x.value);\n/**\n * @hidden\n */\nexport const serializeFilters = (map, join) => (filter) => {\n    const brackets = wrapIf(() => filter.filters.length > 1);\n    return brackets `(${filter.filters\n        .map(map)\n        .join(join(filter))})`;\n};\n","import { isPresent, isString, isArray } from '../utils';\nimport { isCompositeFilterDescriptor } from './filter-descriptor.interface';\nconst operatorMap = (key) => ({\n    \"!=\": \"neq\",\n    \"<\": \"lt\",\n    \"<=\": \"lte\",\n    \"==\": \"eq\",\n    \">\": \"gt\",\n    \">=\": \"gte\",\n    equal: \"eq\",\n    equals: \"eq\",\n    equalto: \"eq\",\n    ge: \"gte\",\n    greater: \"gt\",\n    greaterthan: \"gt\",\n    greaterthanequal: \"gte\",\n    isempty: \"isempty\",\n    isequalto: \"eq\",\n    isgreaterthan: \"gt\",\n    isgreaterthanorequalto: \"gte\",\n    islessthan: \"lt\",\n    islessthanorequalto: \"lte\",\n    isnotempty: \"isnotempty\",\n    isnotequalto: \"neq\",\n    isnull: \"isnull\",\n    le: \"lte\",\n    less: \"lt\",\n    lessthan: \"lt\",\n    lessthanequal: \"lte\",\n    ne: \"neq\",\n    notequal: \"neq\",\n    notequals: \"neq\",\n    notequalto: \"neq\",\n    notsubstringof: \"doesnotcontain\"\n}[key.toLowerCase()] || key);\nconst normalizeOperator = (descriptor) => {\n    if (descriptor.filters) {\n        descriptor.filters = descriptor.filters.map(filter => {\n            const result = Object.assign({}, filter);\n            if (!isCompositeFilterDescriptor(filter) && isString(filter.operator)) {\n                result.operator = operatorMap(filter.operator);\n            }\n            if (isCompositeFilterDescriptor(filter)) {\n                normalizeOperator(result);\n            }\n            return result;\n        });\n    }\n};\nconst normalizeDescriptor = (descriptor) => {\n    if (!isCompositeFilterDescriptor(descriptor)) {\n        return {\n            filters: isArray(descriptor) ? descriptor : [descriptor],\n            logic: \"and\"\n        };\n    }\n    return Object.assign({}, descriptor);\n};\n// tslint:disable:max-line-length\n/**\n * Converts a [`FilterDescriptor`]({% slug api_kendo-data-query_filterdescriptor %}) into a [`CompositeFilterDescriptor`]({% slug api_kendo-data-query_compositefilterdescriptor %}). If a `CompositeFilterDescriptor` is passed, no modifications will be made.\n *\n * @param {CompositeFilterDescriptor | FilterDescriptor} descriptor - The descriptor that will be normalized.\n * @returns {CompositeFilterDescriptor} - The normalized descriptor.\n */\n// tslint:enable:max-line-length\nexport const normalizeFilters = (descriptor) => {\n    if (isPresent(descriptor)) {\n        descriptor = normalizeDescriptor(descriptor);\n        normalizeOperator(descriptor);\n    }\n    return descriptor;\n};\n","import { isCompositeFilterDescriptor } from './filtering/filter-descriptor.interface';\nimport { compose, ifElse } from './funcs';\nimport { normalizeField, quote, toLower, isDateValue, isStringValue, serializeFilters, encodeValue, toUTC } from './filter-serialization.common';\nimport { normalizeFilters } from './filtering/filter.operators';\nconst formatDate = ({ utcDates }) => ({ field, value, ignoreCase, operator }) => ({\n    value: (!utcDates ? toUTC(value) : value).toISOString(),\n    field,\n    ignoreCase,\n    operator\n});\nconst fnFormatter = ({ operator }) => ({ field, value }) => `${operator}(${field},${value})`;\nconst singleOperatorFormatter = ({ operator }) => ({ field, value }) => `${field} ${operator} ${value}`;\nconst stringFormat = formatter => compose(formatter, encodeValue, quote, toLower, normalizeField);\nconst stringFnOperator = settings => stringFormat(fnFormatter(settings));\nconst stringOperator = settings => stringFormat(singleOperatorFormatter(settings));\nconst numericOperator = settings => compose(singleOperatorFormatter(settings), normalizeField);\nconst dateOperator = settings => compose(singleOperatorFormatter(settings), normalizeField, formatDate(settings));\nconst ifDate = settings => ifElse(isDateValue, dateOperator(settings), numericOperator(settings));\nconst typedOperator = settings => ifElse(isStringValue, stringOperator(settings), ifDate(settings));\nconst appendEqual = str => `${str} eq -1`;\nconst nonValueExpression = formatter => compose(formatter, normalizeField);\nconst filterOperators = (operator, settings) => ({\n    contains: stringFnOperator(Object.assign(Object.assign({}, settings), { operator: \"contains\" })),\n    doesnotcontain: compose(appendEqual, stringFnOperator(Object.assign(Object.assign({}, settings), { operator: \"indexof\" }))),\n    endswith: stringFnOperator(Object.assign(Object.assign({}, settings), { operator: \"endswith\" })),\n    eq: typedOperator(Object.assign(Object.assign({}, settings), { operator: \"eq\" })),\n    gt: typedOperator(Object.assign(Object.assign({}, settings), { operator: \"gt\" })),\n    gte: typedOperator(Object.assign(Object.assign({}, settings), { operator: \"ge\" })),\n    isempty: nonValueExpression(({ field }) => `${field} eq ''`),\n    isnotempty: nonValueExpression(({ field }) => `${field} ne ''`),\n    isnotnull: nonValueExpression(({ field }) => `${field} ne null`),\n    isnull: nonValueExpression(({ field }) => `${field} eq null`),\n    lt: typedOperator(Object.assign(Object.assign({}, settings), { operator: \"lt\" })),\n    lte: typedOperator(Object.assign(Object.assign({}, settings), { operator: \"le\" })),\n    neq: typedOperator(Object.assign(Object.assign({}, settings), { operator: \"ne\" })),\n    startswith: stringFnOperator(Object.assign(Object.assign({}, settings), { operator: \"startswith\" }))\n}[operator]);\nconst join = x => ` ${x.logic} `;\nconst serialize = settings => x => filterOperators(x.operator, settings)(x);\nconst serializeAll = settings => serializeFilters(filter => ifElse(isCompositeFilterDescriptor, serializeAll(settings), serialize(settings))(filter), join);\n/**\n * @hidden\n */\nexport const serializeFilter = (filter, settings = {}) => {\n    if (filter.filters && filter.filters.length) {\n        return \"$filter=\" + serializeAll(settings)(normalizeFilters(filter));\n    }\n    return \"\";\n};\n","import { isPresent, isNotNullOrEmptyString } from './utils';\nimport { serializeFilter } from './odata-filtering.operators';\nimport { ifElse, constant } from './funcs';\nconst serializeSort = (orderby) => {\n    const str = orderby\n        .filter(sort => isPresent(sort.dir))\n        .map(sort => {\n        const order = sort.field.replace(/\\./g, \"/\");\n        return sort.dir === \"desc\" ? order + \" desc\" : order;\n    }).join(\",\");\n    return str ? `$orderby=${str}` : str;\n};\nconst emptyString = constant('');\nconst concat = a => b => a + b;\nconst serializeKey = (strings, val) => ifElse(isPresent, concat(strings[0]), emptyString)(val);\nconst rules = (settings, state) => (key) => ({\n    \"filter\": serializeFilter(state.filter || {}, settings),\n    \"skip\": serializeKey `$skip=${state.skip}`,\n    \"sort\": serializeSort(state.sort || []),\n    \"take\": serializeKey `$top=${state.take}`\n}[key]);\n// tslint:enable:max-line-length\n/**\n * Converts a [State]({% slug api_kendo-data-query_state %}) into an OData v4 compatible string.\n *\n * @param {State} state - The state that will be serialized.\n * @param {ODataSettings} settings - The settings that are used during the serialization.\n * @returns {string} - The serialized state.\n */\nexport const toODataString = (state, settings = {}) => (Object.keys(state)\n    .map(rules(settings, state))\n    .filter(isNotNullOrEmptyString)\n    .join('&'));\n","import { isPresent } from './utils';\nconst getterCache = {};\nconst FIELD_REGEX = /\\[(?:(\\d+)|['\"](.*?)['\"])\\]|((?:(?!\\[.*?\\]|\\.).)+)/g;\n// tslint:disable-next-line:no-string-literal\ngetterCache['undefined'] = obj => obj;\n/**\n * @hidden\n */\nexport const getter = (field, safe) => {\n    const key = field + safe;\n    if (getterCache[key]) {\n        return getterCache[key];\n    }\n    const fields = [];\n    field.replace(FIELD_REGEX, (_, index, indexAccessor, field) => {\n        fields.push(isPresent(index) ? index : (indexAccessor || field));\n        return undefined;\n    });\n    getterCache[key] = obj => {\n        let result = obj;\n        for (let idx = 0; idx < fields.length; idx++) {\n            result = result[fields[idx]];\n            if (!isPresent(result) && safe) {\n                return result;\n            }\n        }\n        return result;\n    };\n    return getterCache[key];\n};\n","import { isCompositeFilterDescriptor } from '../filtering/filter-descriptor.interface';\nimport { isPresent, isNotNullOrEmptyString, isArray } from '../utils';\nimport { getter } from '../accessor';\nimport { compose, ifElse, identity } from '../funcs';\nimport { isStringValue, isDateValue, quote, serializeFilters, toUTC, encodeValue } from '../filter-serialization.common';\nconst toQueryString = values => values.reduce((acc, [key, value]) => [...acc, `${key}=${value}`], []);\nconst toObject = values => values.reduce((acc, [key, value]) => (Object.assign(Object.assign({}, acc), { [key]: value })), {});\nconst pairwise = key => value => [key, value];\nconst empty = () => null;\nconst isNotEmptyArray = value => isPresent(value) && isArray(value) && value.length > 0;\nconst has = accessor => value => isPresent(accessor(value));\nconst isNotEmpty = accessor => value => isNotEmptyArray(accessor(value));\nconst runOrEmpty = (predicate, fn) => ifElse(predicate, fn, empty);\nconst calcPage = ({ skip, take }) => Math.floor((skip || 0) / take) + 1;\nconst formatDescriptors = (accessor, formatter) => state => (accessor(state).map(formatter).join(\"~\"));\nconst removeAfter = (what) => (str) => str.slice(0, str.indexOf(what));\nconst replace = (patterns) => compose(...patterns.map(([left, right]) => (s) => s.replace(new RegExp(left, \"g\"), right)));\nconst sanitizeDateLiterals = replace([[\"\\\"\", \"\"], [\":\", \"-\"]]);\nconst removeAfterDot = removeAfter(\".\");\nconst directionFormatter = ({ field, dir = \"asc\" }) => `${field}-${dir}`;\nconst aggregateFormatter = ({ field, aggregate }) => `${field}-${aggregate}`;\nconst take = getter(\"take\");\nconst aggregates = getter(\"aggregates\");\nconst skip = getter(\"skip\");\nconst group = getter(\"group\");\nconst sort = getter(\"sort\", true);\nconst formatSort = formatDescriptors(sort, directionFormatter);\nconst formatGroup = formatDescriptors(group, directionFormatter);\nconst formatAggregates = formatDescriptors(aggregates, aggregateFormatter);\nconst prefixDateValue = value => `datetime'${value}'`;\nconst formatDateValue = compose(prefixDateValue, removeAfterDot, sanitizeDateLiterals, JSON.stringify, toUTC);\nconst formatDate = ({ field, value, ignoreCase, operator }) => ({\n    value: formatDateValue(value),\n    field,\n    ignoreCase,\n    operator\n});\nconst normalizeSort = (state) => Object.assign({}, state, {\n    sort: (sort(state) || []).filter(({ dir }) => isNotNullOrEmptyString(dir))\n});\nconst transformSkip = compose(pairwise('page'), calcPage);\nconst transformTake = compose(pairwise('pageSize'), take);\nconst transformGroup = compose(pairwise('group'), formatGroup);\nconst transformSort = compose(pairwise('sort'), formatSort);\nconst transformAggregates = compose(pairwise('aggregate'), formatAggregates);\nconst serializePage = runOrEmpty(has(skip), transformSkip);\nconst serializePageSize = runOrEmpty(has(take), transformTake);\nconst serializeGroup = runOrEmpty(isNotEmpty(group), transformGroup);\nconst serializeAggregates = runOrEmpty(has(aggregates), transformAggregates);\nconst serializeSort = compose(runOrEmpty(isNotEmpty(sort), transformSort), normalizeSort);\nconst hasField = ({ field }) => isNotNullOrEmptyString(field);\nconst filterFormatter = ({ field, operator, value }) => `${field}~${operator}~${value}`;\nconst dateFormatter = ifElse(isDateValue, compose(filterFormatter, formatDate), filterFormatter);\nconst typedFormatter = encode => runOrEmpty(hasField, ifElse(isStringValue, compose(filterFormatter, quote, encode ? encodeValue : identity), dateFormatter));\nconst join = ({ logic }) => `~${logic}~`;\nconst serialize = encode => serializeFilters(filter => ifElse(isCompositeFilterDescriptor, serialize(encode), typedFormatter(encode))(filter), join);\nconst serializeFilter = ({ filter }, encode) => {\n    if (filter && filter.filters) {\n        const filters = serialize(encode)(filter);\n        if (filters.length) {\n            return ['filter', filters];\n        }\n    }\n    return null;\n};\nconst rules = (state, encode = true) => key => ({\n    \"aggregates\": serializeAggregates(state),\n    \"filter\": serializeFilter(state, encode),\n    \"group\": serializeGroup(state),\n    \"skip\": serializePage(state),\n    \"sort\": serializeSort(state),\n    \"take\": serializePageSize(state)\n}[key]);\n/**\n * Converts a [`DataSourceRequestState`]({% slug api_kendo-data-query_datasourcerequeststate %}) into a string\n * that is comparable with the `DataSourceRequest` format in UI for ASP.NET MVC.\n *\n * @param {DataSourceRequestState} state The state that will be serialized.\n * @returns {string} The serialized state.\n *\n * The following code snippet demonstrates how to use the `toDataSourceRequestString` method.\n *\n * {% platform_content angular %}\n * ```ts\n * import { HttpClient } from '@angular/common/http';\n * import { Observable } from 'rxjs';\n * import { map } from 'rxjs/operators';\n * import {\n *     DataSourceRequestState,\n *     toDataSourceRequestString,\n *     translateDataSourceResultGroups,\n *     translateAggregateResults\n * } from '@progress/kendo-data-query';\n *\n * export class ProductService {\n *     private BASE_URL = 'https://api.example.com/products';\n *\n *     constructor(private http: HttpClient) { }\n *\n *     public fetch(state: DataSourceRequestState): Observable<GridDataResult> {\n *\n *         // DataSourceRequestState includes:\n *         // - State properties: skip, take, sort, filter, group\n *         // - Additional property: aggregates\n *         const queryString = toDataSourceRequestString(state);\n *\n *         const hasGroups = state.group && state.group.length;\n *\n *         return this.http\n *             .get<ServerResponse>(`${this.BASE_URL}?${queryString}`)\n *             .pipe(\n *                 map(({ Data, Total, AggregateResults }) => ({\n *                     data: hasGroups ? translateDataSourceResultGroups(Data) : Data,\n *                     total: Total,\n *                     aggregateResult: translateAggregateResults(AggregateResults)\n *                 }))\n *             );\n *     }\n * }\n * ```\n * {% endplatform_content %}\n *\n * {% platform_content react %}\n * ```jsx\n * import React from 'react';\n * import { toDataSourceRequestString, translateDataSourceResultGroups } from '@progress/kendo-data-query';\n *\n * export function withState(WrappedGrid) {\n *     return class StatefullGrid extends React.Component {\n *         constructor(props) {\n *             super(props);\n *             // DataSourceRequestState includes:\n *             // - State properties: skip, take, sort, filter, group\n *             // - Additional property: aggregates\n *             this.state = { dataState: { skip: 0, take: 20 } };\n *         }\n *\n *         render() {\n *             return (\n *                 <WrappedGrid\n *                     filterable={true}\n *                     sortable={true}\n *                     pageable={{ pageSizes: true }}\n *                     {...this.props}\n *                     total={this.state.total}\n *                     data={this.state.data}\n *                     skip={this.state.dataState.skip}\n *                     pageSize={this.state.dataState.take}\n *                     filter={this.state.dataState.filter}\n *                     sort={this.state.dataState.sort}\n *                     dataStateChange={this.dataStateChange}\n *                 />\n *             );\n *         }\n *\n *         componentDidMount() {\n *             this.fetchData(this.state.dataState);\n *         }\n *\n *         dataStateChange = (changeEvent) => {\n *             this.setState({ dataState: changeEvent.data });\n *             this.fetchData(changeEvent.data);\n *         }\n *\n *         fetchData(dataState) {\n *             // DataSourceRequestState includes:\n *             // - State properties: skip, take, sort, filter, group\n *             // - Additional property: aggregates\n *             const queryStr = `${toDataSourceRequestString(dataState)}`; // Serialize the state\n *             const hasGroups = dataState.group && dataState.group.length;\n *\n *             const base_url = 'api/Products';\n *             const init = { method: 'GET', accept: 'application/json', headers: {} };\n *\n *             fetch(`${base_url}?${queryStr}`, init)\n *                 .then(response => response.json())\n *                 .then(({ data, total }) => {\n *                     this.setState({\n *                         data: hasGroups ? translateDataSourceResultGroups(data) : data,\n *                         total,\n *                         dataState\n *                     });\n *                 });\n *         }\n *     }\n * }\n * ```\n * {% endplatform_content %}\n */\nexport const toDataSourceRequestString = (state) => (toQueryString(Object.keys(state)\n    .map(rules(state))\n    .filter(isPresent)).join('&'));\n/**\n * Converts a [`DataSourceRequestState`]({% slug api_kendo-data-query_datasourcerequeststate %}) into an object\n * that is compatible with the `DataSourceRequest` format in UI for ASP.NET MVC.\n *\n * @param {DataSourceRequestState} state The state that will be serialized.\n * @returns {any} The serialized state.\n *\n * The following code snippet demonstrates how to use the `toDataSourceRequest` method.\n *\n * {% platform_content angular %}\n * ```ts\n * import { HttpClient } from '@angular/common/http';\n * import { Observable } from 'rxjs';\n * import { map } from 'rxjs/operators';\n * import {\n *     DataSourceRequestState,\n *     toDataSourceRequest,\n *     translateDataSourceResultGroups,\n *     translateAggregateResults\n * } from '@progress/kendo-data-query';\n *\n * export class ProductService {\n *     private BASE_URL = 'https://api.example.com/products';\n *\n *     constructor(private http: HttpClient) { }\n *\n *     public fetch(state: DataSourceRequestState): Observable<GridDataResult> {\n *\n *         // DataSourceRequestState includes:\n *         // - State properties: skip, take, sort, filter, group\n *         // - Additional property: aggregates\n *         const dataSourceRequest = toDataSourceRequest(state);\n *\n *         const hasGroups = state.group && state.group.length;\n *\n *         return this.http\n *             .post<ServerResponse>(this.BASE_URL, dataSourceRequest)\n *             .pipe(\n *                 map(({ Data, Total, AggregateResults }) => ({\n *                     data: hasGroups ? translateDataSourceResultGroups(Data) : Data,\n *                     total: Total,\n *                     aggregateResult: translateAggregateResults(AggregateResults)\n *                 }))\n *             );\n *     }\n * }\n * ```\n * {% endplatform_content %}\n */\nexport const toDataSourceRequest = (state) => (toObject(Object.keys(state)\n    .map(rules(state, false))\n    .filter(isPresent)));\n","import { isPresent } from '../utils';\nimport { compose } from '../funcs';\n// tslint:enable:max-line-length\nconst set = (field, target, value) => {\n    target[field] = value;\n    return target;\n};\nconst toCamelCase = str => str.replace(/(^[A-Z])/g, (_, g1) => g1.toLowerCase());\nconst prop = (fieldName) => (obj) => {\n    const value = obj[fieldName];\n    if (isPresent(value)) {\n        return value;\n    }\n    return obj[toCamelCase(fieldName)];\n};\nconst member = prop(\"Member\");\nconst aggregateMethodName = prop(\"AggregateMethodName\");\nconst value = prop(\"Value\");\nconst convert = mapper => values => Object.keys(values).reduce(mapper.bind(null, values), {});\nconst translateAggregate = convert((source, acc, field) => set(field.toLowerCase(), acc, source[field]));\nconst translateAggregates = convert((source, acc, field) => set(field, acc, translateAggregate(source[field])));\nconst valueOrDefault = (value, defaultValue) => isPresent(value) ? value : defaultValue;\nconst normalizeGroup = group => ({\n    aggregates: group.Aggregates || group.aggregates,\n    field: group.Member || group.member || group.field,\n    hasSubgroups: group.HasSubgroups || group.hasSubgroups || false,\n    items: group.Items || group.items,\n    value: valueOrDefault(group.Key, valueOrDefault(group.key, group.value))\n});\nconst translateGroup = compose(({ field, hasSubgroups, value, aggregates, items }) => ({\n    aggregates: translateAggregates(aggregates),\n    field,\n    items: hasSubgroups ? items.map(translateGroup) : items,\n    value\n}), normalizeGroup);\n// tslint:disable:max-line-length\n/**\n * Converts the grouped result, which is returned into the `Data` field of the UI for ASP.NET MVC `ToDataSourceResult` method, to a comparable format.\n * @param data The value of the `Data` field of the response.\n * @returns {GroupResult[]} The converted result.\n */\nexport const translateDataSourceResultGroups = (data) => data.map(translateGroup);\n/**\n * Converts the `AggregateResults` field content, which is returned by the UI for ASP.NET MVC `ToDataSourceResult` method, to a comparable format.\n * @param data The value of the `AggregateResults` field of the response.\n * @returns {AggregateResult} The converted result.\n */\n// tslint:enable:max-line-length\nexport const translateAggregateResults = (data) => ((data || []).reduce((acc, x) => set(member(x), acc, set(aggregateMethodName(x).toLowerCase(), acc[member(x)] || {}, value(x))), {}));\n","import { isPresent, isBlank } from '../utils';\nimport { getter } from '../accessor';\nconst compare = (a, b) => {\n    if (isBlank(a)) {\n        return a === b ? 0 : -1;\n    }\n    if (isBlank(b)) {\n        return 1;\n    }\n    if (a.localeCompare) {\n        return a.localeCompare(b);\n    }\n    return a > b ? 1 : (a < b ? -1 : 0);\n};\nconst compareDesc = (a, b) => compare(b, a);\nconst descriptorAsFunc = (descriptor) => {\n    if (typeof descriptor.compare === 'function') {\n        return descriptor.compare;\n    }\n    const prop = getter(descriptor.field, true);\n    return (a, b) => (descriptor.dir === 'asc' ? compare : compareDesc)(prop(a), prop(b));\n};\nconst initial = (_a, _b) => 0;\n// tslint:disable:max-line-length\n/**\n * Converts the `SortDescriptors` into a [Comparer]({% slug api_kendo-data-query_comparer %}) function that can be used through `Array.sort`. If multiple descriptors are provided, sorting is applied in a right-to-left order.\n * @param {SortDescriptor[]} descriptors - The descriptors which will be converted.\n * @returns {Comparer} - The produced function.\n *\n * @example\n * ```ts\n * import { composeSortDescriptors } from '@progress/kendo-data-query';\n *\n * const data = [{ name: \"Pork\" }, { name: \"Pepper\" }, { name: \"Beef\" } ];\n * const comparer = composeSortDescriptors([{ field: \"name\", dir: \"asc\" }]);\n * const result = data.sort(comparer);\n * // output: [{ name: \"Beef\" }, { name: \"Pepper\" }, { name: \"Pork\" }];\n * ```\n */\n// tslint:enable:max-line-length\nexport const composeSortDescriptors = (descriptors) => (descriptors\n    .filter(x => isPresent(x.dir) || isPresent(x.compare))\n    .map((descriptor) => descriptorAsFunc(descriptor))\n    .reduce((acc, curr) => (a, b) => acc(a, b) || curr(a, b), initial));\n","import { isPresent, isNumeric, isDate } from './utils';\nimport { getter } from './accessor';\nconst valueToString = (value) => {\n    value = isPresent(value) && value.getTime ? value.getTime() : value;\n    return value + \"\";\n};\n/**\n * @hidden\n */\nexport const groupCombinator = (field) => {\n    const prop = getter(field, true);\n    let position = 0;\n    return (agg, value) => {\n        agg[field] = agg[field] || {};\n        const groupValue = prop(value);\n        const key = valueToString(groupValue);\n        const values = agg[field][key] || { __position: position++, aggregates: {}, items: [], value: groupValue };\n        values.items.push(value);\n        agg[field][key] = values;\n        return agg;\n    };\n};\n/**\n * @hidden\n */\nexport const expandAggregates = (result = {}) => {\n    Object.keys(result).forEach(field => {\n        const aggregates = result[field];\n        Object.keys(aggregates).forEach(aggregate => {\n            aggregates[aggregate] = aggregates[aggregate].result();\n        });\n    });\n    return result;\n};\nconst aggregatesFuncs = (name) => ({\n    average: () => {\n        let value = 0;\n        let count = 0;\n        let hasValue = false;\n        let firstNonNumeric = null;\n        return {\n            calc: (curr) => {\n                if (isNumeric(curr)) {\n                    value += curr;\n                    count++;\n                    hasValue = true;\n                }\n                else if (!hasValue && firstNonNumeric === null) {\n                    firstNonNumeric = curr;\n                }\n            },\n            result: () => hasValue ? value / count : firstNonNumeric\n        };\n    },\n    count: () => {\n        let state = 0;\n        return {\n            calc: () => state++,\n            result: () => state\n        };\n    },\n    max: () => {\n        let state = Number.NEGATIVE_INFINITY;\n        return {\n            calc: (value) => {\n                state = isNumeric(state) || isDate(state) ? state : value;\n                if (state < value && (isNumeric(value) || isDate(value))) {\n                    state = value;\n                }\n            },\n            result: () => state\n        };\n    },\n    min: () => {\n        let state = Number.POSITIVE_INFINITY;\n        return {\n            calc: (value) => {\n                state = isNumeric(state) || isDate(state) ? state : value;\n                if (state > value && (isNumeric(value) || isDate(value))) {\n                    state = value;\n                }\n            },\n            result: () => state\n        };\n    },\n    sum: () => {\n        let state = 0;\n        return {\n            calc: (value) => {\n                value = isPresent(value) ? value : 0;\n                state += value;\n            },\n            result: () => state\n        };\n    }\n}[name]());\n/**\n * @hidden\n */\nexport const aggregatesCombinator = (descriptors) => {\n    const functions = descriptors.map(descriptor => {\n        const fieldAccessor = getter(descriptor.field, true);\n        const aggregateName = (descriptor.aggregate || \"\").toLowerCase();\n        const aggregateAccessor = getter(aggregateName, true);\n        return (state, value) => {\n            const fieldAggregates = state[descriptor.field] || {};\n            const aggregateFunction = aggregateAccessor(fieldAggregates)\n                || aggregatesFuncs(aggregateName);\n            aggregateFunction.calc(fieldAccessor(value));\n            fieldAggregates[descriptor.aggregate] = aggregateFunction;\n            state[descriptor.field] = fieldAggregates;\n            return state;\n        };\n    });\n    return (state, value) => functions.reduce((agg, calc) => calc(agg, value), state);\n};\n/**\n * @hidden\n * Adds the value to the `arr` and produces a new array.\n *\n * > The original array will be modified.\n */\nexport const concat = (arr, value) => {\n    arr.push(value);\n    return arr;\n};\n/**\n * @hidden\n * Returns a reducer that will apply the specified transformation to the value.\n */\nexport const map = (transform) => ((reduce) => ((acc, curr, index) => reduce(acc, transform(curr, index))));\n/**\n * @hidden\n * Returns a reducer that will filter out items which do not match the `Predicate`.\n */\nexport const filter = (predicate) => ((reduce) => ((acc, curr) => predicate(curr) ? reduce(acc, curr) : acc));\n/**\n * @hidden\n */\nexport const isTransformerResult = (source) => {\n    return isPresent(source.__value);\n};\nconst reduced = (x) => {\n    if (isTransformerResult(x)) {\n        return x;\n    }\n    return {\n        __value: x,\n        reduced: true\n    };\n};\n/**\n * @hidden\n * Returns a reducer that will take the specified number of items.\n */\nexport const take = (count) => ((reduce) => ((acc, curr) => count-- > 0 ? reduce(acc, curr) : reduced(acc)));\n/**\n * @hidden\n * Returns a reducer that will take the specified number of items.\n */\nexport const takeWhile = (predicate) => ((reduce) => ((acc, curr) => predicate(curr) ? reduce(acc, curr) : reduced(acc)));\n/**\n * @hidden\n * Returns a reducer that will skip the specified number of items.\n */\nexport const skip = (count) => ((reduce) => ((acc, curr) => count-- <= 0 ? reduce(acc, curr) : acc));\n/**\n * @hidden\n * Transforms the data by applying the supplied transformer.\n */\nexport const exec = (transform, initialValue, data) => {\n    let result = initialValue;\n    for (let idx = 0, length = data.length; idx < length; idx++) {\n        result = transform(result, data[idx], idx);\n        if (isTransformerResult(result)) {\n            result = result.__value;\n            break;\n        }\n    }\n    return result;\n};\n","import { exec, map, aggregatesCombinator, expandAggregates } from '../transducers';\nconst identity = map(x => x);\n// tslint:disable:max-line-length\n/**\n * Applies the specified [`AggregateDescriptors`]({% slug api_kendo-data-query_aggregatedescriptor %}) to the data. Returns an [`AggregateResult`]({% slug api_kendo-data-query_aggregateresult %}) instance.\n *\n * @example\n * ```ts\n * const data = [\n *    { unitPrice: 23, unitsInStock: 21 },\n *    { unitPrice: 10, unitsInStock: 12 },\n *    { unitPrice: 20, unitsInStock: 33 }\n * ];\n *\n * const result = aggregateBy(data, [\n *   { aggregate: \"sum\", field: \"unitPrice\" },\n *   { aggregate: \"sum\", field: \"unitsInStock\" }\n * ]);\n *\n * //output:\n * // {\n * //     \"unitPrice\": { \"sum\": 53 },\n * //     \"unitsInStock\": { \"sum\": 66 }\n * // }\n * ```\n * @param {T[]} data - The data on which the calculation will be executed.\n * @param {AggregateDescriptor[]} descriptors - The aggregate operations that will be executed.\n * @param {any} transformers - For internal use.\n * @returns {AggregateResult} - The aggregated result.\n *\n */\n// tslint:enable:max-line-length\nexport const aggregateBy = (data, descriptors = [], transformers = identity) => {\n    const initialValue = {};\n    if (!descriptors.length) {\n        return initialValue;\n    }\n    const result = exec(transformers(aggregatesCombinator(descriptors)), initialValue, data);\n    return expandAggregates(result);\n};\n","import { isCompositeFilterDescriptor } from \"./filter-descriptor.interface\";\nimport { getter } from \"../accessor\";\nimport { isFunction, isPresent, isDate, isString, isBlank, isArray } from \"../utils\";\nconst logic = {\n    \"or\": {\n        concat: (acc, fn) => a => acc(a) || fn(a),\n        identity: () => false\n    },\n    \"and\": {\n        concat: (acc, fn) => a => acc(a) && fn(a),\n        identity: () => true\n    }\n};\nconst operatorsMap = {\n    contains: (a, b) => (a || \"\").indexOf(b) >= 0,\n    doesnotcontain: (a, b) => (a || \"\").indexOf(b) === -1,\n    doesnotendwith: (a, b) => (a || \"\").indexOf(b, (a || \"\").length - (b || \"\").length) < 0,\n    doesnotstartwith: (a, b) => (a || \"\").lastIndexOf(b, 0) === -1,\n    endswith: (a, b) => (a || \"\").indexOf(b, (a || \"\").length - (b || \"\").length) >= 0,\n    eq: (a, b) => a === b,\n    gt: (a, b) => a > b,\n    gte: (a, b) => a >= b,\n    isempty: (a) => a === '',\n    isnotempty: (a) => a !== '',\n    isnotnull: (a) => isPresent(a),\n    isnull: (a) => isBlank(a),\n    lt: (a, b) => a < b,\n    lte: (a, b) => a <= b,\n    neq: (a, b) => a != b,\n    startswith: (a, b) => (a || \"\").lastIndexOf(b, 0) === 0\n};\nconst dateRegExp = /^\\/Date\\((.*?)\\)\\/$/;\nconst convertValue = (value, ignoreCase) => {\n    if (value != null && isString(value)) {\n        const date = dateRegExp.exec(value);\n        if (date) {\n            return new Date(+date[1]).getTime();\n        }\n        else if (ignoreCase) {\n            return value.toLowerCase();\n        }\n    }\n    else if (value != null && isDate(value)) {\n        return value.getTime();\n    }\n    return value;\n};\nconst typedGetter = (prop, value, ignoreCase, operator) => {\n    if (!isPresent(value)) {\n        return prop;\n    }\n    let acc = prop;\n    if (isString(value)) {\n        const date = dateRegExp.exec(value);\n        if (date) {\n            value = new Date(+date[1]);\n        }\n        else {\n            // For custom operators (functions), we should not transform the field value\n            // This allows custom operators to receive the original data type (e.g., arrays)\n            const isCustomOperator = isFunction(operator);\n            acc = a => {\n                const x = prop(a);\n                if (x === null) {\n                    return x;\n                }\n                // Don't convert arrays to strings when using custom operators\n                if (isCustomOperator && isArray(x)) {\n                    return x;\n                }\n                const stringValue = typeof x === 'string' ? x : x + \"\";\n                return ignoreCase ? stringValue.toLowerCase() : stringValue;\n            };\n        }\n    }\n    if (isDate(value)) {\n        return a => {\n            const x = acc(a);\n            return isDate(x) ? x.getTime() : x;\n        };\n    }\n    return acc;\n};\nconst transformFilter = ({ field, ignoreCase, value, operator }) => {\n    field = !isPresent(field) ? a => a : field;\n    ignoreCase = isPresent(ignoreCase) ? ignoreCase : true;\n    const itemProp = typedGetter(isFunction(field) ? field : getter(field, true), value, ignoreCase, operator);\n    value = convertValue(value, ignoreCase);\n    const op = isFunction(operator) ? operator : operatorsMap[operator];\n    return a => op(itemProp(a), value, ignoreCase);\n};\n/**\n * @hidden\n */\nexport const transformCompositeFilter = (filter) => {\n    const combiner = logic[filter.logic];\n    return filter.filters\n        .filter(isPresent)\n        .map(x => isCompositeFilterDescriptor(x) ? transformCompositeFilter(x) : transformFilter(x))\n        .reduce(combiner.concat, combiner.identity);\n};\n","import { isPresent } from '../utils';\nimport { isCompositeFilterDescriptor } from './filter-descriptor.interface';\nimport { normalizeFilters } from './filter.operators';\nimport { transformCompositeFilter } from \"./filter-no-eval\";\n// tslint:disable:max-line-length\n/**\n * Creates a [Predicate]({% slug api_kendo-data-query_predicate %}) function for the specified [CompositeFilterDescriptor]({% slug api_kendo-data-query_compositefilterdescriptor %}).\n *\n * @param {CompositeFilterDescriptor} descriptor - The descriptor for which the predicate is created.\n * @returns {Predicate} - The created function instance.\n *\n * @example\n * ```ts\n * import { compileFilter } from '@progress/kendo-data-query';\n *\n * const data = [{ name: \"Pork\" }, { name: \"Pepper\" }, { name: \"Beef\" } ];\n * const predicate = compileFilter({ logic: \"and\", filters: [{ field: \"name\", operator: \"startswith\", value: \"P\" }] });\n * const result = data.filter(predicate);\n *\n * ```\n */\n// tslint:enable:max-line-length\nexport const compileFilter = (descriptor) => {\n    if (!descriptor || descriptor.filters.length === 0) {\n        return () => true;\n    }\n    return transformCompositeFilter(descriptor);\n};\n// tslint:disable:max-line-length\n/**\n * Filters the provided array according to the specified [CompositeFilterDescriptor]({% slug api_kendo-data-query_compositefilterdescriptor %}).\n *\n * @param {T[]} data - The data that will be filtered.\n * @param {(CompositeFilterDescriptor | FilterDescriptor)} descriptor - The filter criteria that will be applied.\n * @returns {T[]} - The filtered data.\n *\n * @example\n * ```ts\n * import { filterBy } from '@progress/kendo-data-query';\n *\n * const data = [\n *  { name: \"Pork\", category: \"Food\", subcategory: \"Meat\" },\n *  { name: \"Pepper\", category: \"Food\", subcategory: \"Vegetables\" },\n *  { name: \"Beef\", category: \"Food\", subcategory: \"Meat\" }\n * ];\n *\n * const result = filterBy(data, {\n *     logic: 'and',\n *     filters: [\n *           { field: \"name\", operator: \"startswith\", value: \"p\", ignoreCase: true },\n *           { field: \"subcategory\", operator: \"eq\", value: \"Meat\" },\n *     ]\n * });\n *\n * // output:\n * // [{ \"name\": \"Pork\", \"category\": \"Food\", \"subcategory\": \"Meat\" }]\n * ```\n */\n// tslint:enable:max-line-length\nexport const filterBy = (data, descriptor) => {\n    if (!isPresent(descriptor) || (isCompositeFilterDescriptor(descriptor) && descriptor.filters.length === 0)) {\n        return data;\n    }\n    return data.filter(compileFilter(normalizeFilters(descriptor)));\n};\n","import { exec, map, groupCombinator } from '../transducers';\nimport { isArray, isPresent } from '../utils';\nimport { aggregateBy } from './aggregate.operators';\nimport { filterBy } from '../filtering/filter-expression.factory';\nimport { composeSortDescriptors } from '../sorting/sort-array.operator';\n/**\n * @hidden\n */\nexport const normalizeGroups = (descriptors) => {\n    descriptors = isArray(descriptors) ? descriptors : [descriptors];\n    return descriptors.map(x => Object.assign({ dir: \"asc\" }, x));\n};\nconst identity = map(x => x);\n/**\n * Groups the provided data according to the specified descriptors.\n *\n * @param {Array} data - The data that will be grouped.\n * @param {GroupDescriptor[]} descriptors - The descriptors.\n * @param {any} transformers - For internal use.\n * @param {Array} originalData - For internal use.\n * @returns {(Array<GroupResult<T>> | T[])} - The grouped data.\n *\n * @example\n * ```ts\n *\n * import { groupBy } from '@progress/kendo-data-query';\n *\n * const data = [\n *     { name: \"Pork\", category: \"Food\", subcategory: \"Meat\" },\n *     { name: \"Pepper\", category: \"Food\", subcategory: \"Vegetables\" },\n *     { name: \"Beef\", category: \"Food\", subcategory: \"Meat\" }\n * ];\n *\n * const result = groupBy(data, [{ field: \"subcategory\" }]);\n * ```\n */\nexport const groupBy = (data, descriptors = [], transformers = identity, originalData = data) => {\n    descriptors = normalizeGroups(descriptors);\n    if (!descriptors.length) {\n        return data;\n    }\n    const descriptor = descriptors[0];\n    const initialValue = {};\n    const view = exec(transformers(groupCombinator(descriptor.field)), initialValue, data);\n    const result = [];\n    Object.keys(view).forEach(field => {\n        Object.keys(view[field]).forEach(value => {\n            const group = view[field][value];\n            let aggregateResult = {};\n            let filteredData = originalData;\n            if (isPresent(descriptor.aggregates)) {\n                filteredData = filterBy(originalData, {\n                    field: descriptor.field,\n                    ignoreCase: false,\n                    operator: 'eq',\n                    value: group.value\n                });\n                aggregateResult = aggregateBy(filteredData, descriptor.aggregates);\n            }\n            result[group.__position] = {\n                aggregates: aggregateResult,\n                field: field,\n                items: descriptors.length > 1 ?\n                    groupBy(group.items, descriptors.slice(1), identity, filteredData)\n                    : group.items,\n                value: group.value\n            };\n        });\n    });\n    // Sort the result according to the descriptor's dir and compare options\n    if (isPresent(descriptor.dir) || isPresent(descriptor.compare)) {\n        const comparer = composeSortDescriptors([{\n                field: 'value',\n                dir: descriptor.dir,\n                compare: descriptor.compare\n            }]);\n        result.sort(comparer);\n    }\n    return result;\n};\n","import { isPresent, isString } from './utils';\nimport { composeSortDescriptors } from './sorting/sort-array.operator';\nimport { groupBy, normalizeGroups } from './grouping/group.operators';\nimport { normalizeFilters } from './filtering/filter.operators';\nimport { compileFilter } from './filtering/filter-expression.factory';\nimport { exec, skip, take, filter, concat } from './transducers';\nimport { getter } from './accessor';\nimport { compose } from './funcs';\n/**\n * Orders the specified array according to the provided sort descriptors.\n *\n * @param {T[]} data - The data to be sorted.\n * @param {SortDescriptor[]} descriptors - The descriptors by which the data will be sorted.\n * @returns {T[]} - The sorted data.\n *\n * @example\n * ```ts\n * import { orderBy } from '@progress/kendo-data-query';\n *\n * const data = [\n *     { name: \"Pork\", category: \"Food\", subcategory: \"Meat\" },\n *     { name: \"Pepper\", category: \"Food\", subcategory: \"Vegetables\" },\n *     { name: \"Beef\", category: \"Food\", subcategory: \"Meat\" }\n * ];\n *\n * const sortDesc: SortDescriptor[] = [{ field: \"name\", dir: \"asc\" }];\n *\n * const result = orderBy(data, sortDesc);\n * ```\n */\nexport const orderBy = (data, descriptors) => {\n    if (descriptors.some(x => isPresent(x.dir) || isPresent(x.compare))) {\n        data = data.slice(0);\n        const comparer = composeSortDescriptors(descriptors);\n        data.sort(comparer);\n    }\n    return data;\n};\nconst defaultComparer = (a, b) => a === b;\nconst normalizeComparer = (comparer) => {\n    if (isString(comparer)) {\n        const accessor = getter(comparer);\n        comparer = (a, b) => accessor(a) === accessor(b);\n    }\n    return comparer;\n};\nconst _distinct = (data, comparer) => data.filter((x, idx, xs) => xs.findIndex(comparer.bind(null, x)) === idx);\n/**\n * Reduces the provided array so it contains only unique values.\n *\n * @param {T[]} data - The array that will be reduced.\n * @param {(Comparer | string)} comparer - An optional custom comparer function or the field name that will be used for comparison.\n * @returns {T[]} - The reduced data.\n *\n * @example\n * ```ts\n * import { distinct } from '@progress/kendo-data-query';\n *\n * const data = [\n *     { name: \"Pork\", category: \"Food\", subcategory: \"Meat\" },\n *     { name: \"Pepper\", category: \"Food\", subcategory: \"Vegetables\" },\n *     { name: \"Beef\", category: \"Food\", subcategory: \"Meat\" }\n * ];\n *\n * const result = distinct(data, \"subcategory\");\n *\n * // output:\n * // result => [\n * //     { name: \"Pork\", category: \"Food\", subcategory: \"Meat\" },\n * //     { name: \"Pepper\", category: \"Food\", subcategory: \"Vegetables\" }\n * // ];\n * ```\n */\nexport const distinct = (data, comparer = defaultComparer) => _distinct(data, normalizeComparer(comparer));\n/**\n * @hidden\n */\nexport const count = (data, predicate) => {\n    let counter = 0;\n    for (let idx = 0, length = data.length; idx < length; idx++) {\n        if (predicate(data[idx])) {\n            counter++;\n        }\n    }\n    return counter;\n};\n/**\n * @hidden\n */\nexport const limit = (data, predicate) => {\n    if (predicate) {\n        return data.filter(predicate);\n    }\n    return data;\n};\n/**\n * Applies the specified operation descriptors to the data.\n *\n * @param {T[]} data - The data to be processed.\n * @param {State} state - The operation descriptors that will be applied to the data.\n * @returns {DataResult} - The processed data.\n *\n * @example\n * ```ts\n *\n * const result = process(data, {\n *     skip: 10,\n *     take: 20,\n *     group: [{\n *       field: 'category.categoryName',\n *             aggregates: [\n *                   { aggregate: \"sum\", field: \"unitPrice\" },\n *                   { aggregate: \"sum\", field: \"unitsInStock\" }\n *             ]\n *       }],\n *     sort: [{ field: 'productName', dir: 'desc' }],\n *     filter: {\n *         logic: \"or\",\n *         filters: [\n *           { field: \"discontinued\", operator: \"eq\", value: true },\n *           { field: \"unitPrice\", operator: \"lt\", value: 22 }\n *         ]\n *     }\n * });\n *\n * ```\n */\nexport const process = (data, state) => {\n    const { skip: skipCount, take: takeCount, filter: filterDescriptor, sort, group } = state;\n    const sortDescriptors = [...normalizeGroups(group || []), ...sort || []];\n    if (sortDescriptors.length) {\n        data = orderBy(data, sortDescriptors);\n    }\n    const hasFilters = isPresent(filterDescriptor) && filter.length;\n    const hasGroups = isPresent(group) && group.length;\n    if (!hasFilters && !hasGroups) {\n        return {\n            data: takeCount ? data.slice(skipCount, skipCount + takeCount) : data,\n            total: data.length\n        };\n    }\n    let total;\n    const transformers = [];\n    let predicate;\n    if (hasFilters) {\n        predicate = compileFilter(normalizeFilters(filterDescriptor));\n        total = count(data, predicate);\n        transformers.push(filter(predicate));\n    }\n    else {\n        total = data.length;\n    }\n    if (isPresent(skipCount) && isPresent(takeCount)) {\n        transformers.push(skip(skipCount));\n        transformers.push(take(takeCount));\n    }\n    if (transformers.length) {\n        const transform = compose(...transformers);\n        const result = hasGroups ?\n            groupBy(data, group, transform, limit(data, predicate)) :\n            exec(transform(concat), [], data);\n        return { data: result, total: total };\n    }\n    return {\n        data: hasGroups ? groupBy(data, group) : data,\n        total: total\n    };\n};\n","/**\n * Represents the list of supported [`FilterDescriptor`]({% slug api_kendo-data-query_filterdescriptor %}) operators.\n * Allows restricting `FilterDescriptor.operator` definition to available values only.\n */\nexport var FilterOperator;\n(function (FilterOperator) {\n    /**\n     * The `contains` operator.\n     */\n    FilterOperator[\"Contains\"] = \"contains\";\n    /**\n     * The `doesnotcontain` operator.\n     */\n    FilterOperator[\"DoesNotContain\"] = \"doesnotcontain\";\n    /**\n     * The `doesnotendwith` operator.\n     */\n    FilterOperator[\"DoesNotEndWith\"] = \"doesnotendwith\";\n    /**\n     * The `doesnotstartwith` operator.\n     */\n    FilterOperator[\"DoesNotStartWith\"] = \"doesnotstartwith\";\n    /**\n     * The `endswith` operator.\n     */\n    FilterOperator[\"EndsWith\"] = \"endswith\";\n    /**\n     * The `eq` operator.\n     */\n    FilterOperator[\"EqualTo\"] = \"eq\";\n    /**\n     * The `gt` operator.\n     */\n    FilterOperator[\"GreaterThan\"] = \"gt\";\n    /**\n     * The `gte` operator.\n     */\n    FilterOperator[\"GreaterThanOrEqual\"] = \"gte\";\n    /**\n     * The `isempty` operator.\n     */\n    FilterOperator[\"IsEmpty\"] = \"isempty\";\n    /**\n     * The `isnotempty` operator.\n     */\n    FilterOperator[\"IsNotEmpty\"] = \"isnotempty\";\n    /**\n     * The `isnotnull` operator.\n     */\n    FilterOperator[\"IsNotNull\"] = \"isnotnull\";\n    /**\n     * The `isnull` operator.\n     */\n    FilterOperator[\"IsNull\"] = \"isnull\";\n    /**\n     * The `lt` operator.\n     */\n    FilterOperator[\"LessThan\"] = \"lt\";\n    /**\n     * The `lte` operator.\n     */\n    FilterOperator[\"LessThanOrEqual\"] = \"lte\";\n    /**\n     * The `neq` operator.\n     */\n    FilterOperator[\"NotEqualTo\"] = \"neq\";\n    /**\n     * The `startswith` operator.\n     */\n    FilterOperator[\"StartsWith\"] = \"startswith\";\n})(FilterOperator || (FilterOperator = {}));\n","import { compileFilter } from '@progress/kendo-data-query';\nfunction forEachDesc(desc, callbackfn) {\n    if ('filters' in desc) {\n        desc.filters.map(child => forEachDesc(child, callbackfn));\n    }\n    else {\n        callbackfn(desc);\n    }\n}\nconst filterFields = (filter, callback) => {\n    const descriptors = Array.isArray(filter) ? filter : filter.filters;\n    descriptors.forEach(desc => forEachDesc(desc, callback));\n};\n/** @hidden */\nexport const initializeFiltering = (rows, columns, filter) => {\n    const compositeFilter = filter ?\n        (Array.isArray(filter) ? { logic: 'and', filters: filter } : filter) : undefined;\n    const predicate = compositeFilter ? compileFilter(compositeFilter) : () => true;\n    const axes = rows.concat(columns);\n    const fieldValues = [];\n    filterFields(filter || [], (desc) => {\n        if ('field' in desc && desc.field) {\n            fieldValues.push(desc.field);\n        }\n    });\n    const result = { hasFilter: false, predicate, filteringAxes: [] };\n    if (fieldValues.some(f => typeof f === 'function')) {\n        result.filteringAxes = axes.slice();\n    }\n    else if (fieldValues.length > 0) {\n        const filteringFields = Array.from(new Set(fieldValues).values());\n        const filteringAxes = axes.filter(a => filteringFields.indexOf(a.key) >= 0);\n        result.filteringAxes = filteringAxes;\n    }\n    result.hasFilter = result.filteringAxes.length > 0;\n    return result;\n};\n","/** @hidden */\nexport const subNode = (node, field, initialNode) => {\n    let childNode = node.get(field);\n    if (!childNode) {\n        childNode = initialNode || new Map();\n        node.set(field, childNode);\n    }\n    return childNode;\n};\nconst separator = '&';\n/** @hidden */\nexport const createKey = (key, value) => key + separator + value;\n/** @hidden */\nexport const splitKeyValue = (keyValue) => {\n    const separatorIndex = keyValue.indexOf(separator);\n    if (separatorIndex !== -1) {\n        const key = keyValue.substring(0, separatorIndex);\n        const value = keyValue.substring(separatorIndex + 1);\n        return [key, value];\n    }\n    else {\n        return [keyValue, undefined];\n    }\n};\n","import { initializeFiltering } from './filtering';\nimport { subNode, createKey } from './utils';\nconst calculateColumnData = (node, measures, dataField) => {\n    node.forEach((childNode, k) => {\n        if (k !== dataField) {\n            if (childNode.size > 0) {\n                calculateColumnData(childNode, measures, dataField);\n            }\n            const childData = childNode.get(dataField);\n            const parentData = subNode(node, dataField, {});\n            measures.forEach(m => {\n                m.aggregate.init(parentData);\n                m.aggregate.merge(childData, parentData);\n            });\n        }\n    });\n};\n/** @hidden */\nexport const mergeTrees = (src, dest, measures, dataField) => {\n    src.forEach((srcChild, k) => {\n        let destChild;\n        if (k !== dataField) {\n            destChild = subNode(dest, k);\n            mergeTrees(srcChild, destChild, measures, dataField);\n        }\n        else {\n            destChild = subNode(dest, k, {});\n            measures.forEach(m => {\n                m.aggregate.init(destChild);\n                m.aggregate.merge(srcChild, destChild);\n            });\n        }\n    });\n};\nconst calculateColumns = (node, measures, columnsData, dataField) => {\n    node.forEach((childNode, k) => {\n        if (k !== columnsData) {\n            if (childNode.size > 0) {\n                calculateColumns(childNode, measures, columnsData, dataField);\n            }\n            const srcColumns = subNode(childNode, columnsData);\n            const destColumns = subNode(node, columnsData);\n            mergeTrees(srcColumns, destColumns, measures, dataField);\n        }\n    });\n};\n/** @hidden */\nexport const createDataTree = (data, rows, columns, measures, fields, filter) => {\n    const result = new Map();\n    const cache = new Map();\n    const axes = rows.concat(columns);\n    const leafNodes = new Set();\n    const { dataField, columnsData } = fields;\n    const { hasFilter, predicate, filteringAxes } = initializeFiltering(rows, columns, filter);\n    const empty = '';\n    data.forEach(dataItem => {\n        if (hasFilter) {\n            const filteringDataItem = {};\n            filteringAxes.forEach((axis) => { filteringDataItem[axis.key] = axis.displayValue(dataItem); });\n            if (!predicate(filteringDataItem)) {\n                return;\n            }\n        }\n        const values = axes.map(a => a.displayValue(dataItem));\n        const dataKey = empty.concat(...values);\n        let nodeData = cache.get(dataKey);\n        if (!nodeData) {\n            let node = result;\n            const eachAxis = (axis) => {\n                node = subNode(node, createKey(axis.key, axis.displayValue(dataItem)));\n            };\n            rows.forEach(eachAxis);\n            node = subNode(node, columnsData);\n            leafNodes.add(node);\n            columns.forEach(eachAxis);\n            nodeData = {};\n            node.set(dataField, nodeData);\n            cache.set(dataKey, nodeData);\n            measures.forEach(m => {\n                m.aggregate.init(nodeData);\n            });\n        }\n        measures.forEach(m => {\n            m.aggregate.accumulate(nodeData, m.value(dataItem));\n        });\n    });\n    leafNodes.forEach(leaf => calculateColumnData(leaf, measures, dataField));\n    calculateColumns(result, measures, columnsData, dataField);\n    return result;\n};\n/** @hidden */\nexport const cloneDataTree = (dataTree, dataField, measures) => {\n    const result = new Map();\n    mergeTrees(dataTree, result, measures, dataField);\n    return result;\n};\n","import { mergeTrees } from './dataTree';\nimport { splitKeyValue } from './utils';\nconst createPath = (name, axes, path) => {\n    const [key, value] = splitKeyValue(name);\n    const result = path.slice();\n    if (key && value) {\n        const axis = axes.find(a => a.key === key);\n        const caption = axis ? axis.caption : '';\n        return result.map(p => p === caption ? name : p);\n    }\n    return result;\n};\nconst membersNode = (tree, members, field, axisSettings, measures, dataField, cache) => {\n    const cacheData = cache || new Map();\n    let path = axisSettings.map(a => a.caption);\n    while (members.length > 1 && axisSettings.some(a => a.caption === members[members.length - 1].caption)) {\n        members.pop();\n        path.pop();\n    }\n    let node = tree;\n    members.forEach((m, i) => {\n        path = createPath(m.name, axisSettings, path);\n        if (node && !axisSettings.some(a => a.caption === m.name)) {\n            if (!node.has(m.name) && !cacheData.has(path.slice(0, path.indexOf(m.name) + 1).join('-'))) {\n                const currentLevel = Array.from(node).find(n => n[0] !== field);\n                const currentLevelNode = currentLevel && currentLevel[0];\n                const levelField = currentLevelNode && splitKeyValue(currentLevelNode)[0];\n                const depth = levelField ? i - axisSettings.findIndex(a => a.key === levelField) : 0;\n                for (let t = 0; t < depth; t++) {\n                    const data = [];\n                    node.forEach((value, key) => {\n                        if (key !== field) {\n                            data.push(...Array.from(value).filter(d => d[0] !== field));\n                        }\n                    });\n                    const next = new Map();\n                    data.forEach(item => {\n                        if (next.has(item[0])) {\n                            const dest = next.get(item[0]);\n                            const src = item[1];\n                            const newDest = new Map();\n                            mergeTrees(dest, newDest, measures, dataField);\n                            mergeTrees(src, newDest, measures, dataField);\n                            next.set(item[0], newDest);\n                        }\n                        else {\n                            next.set(item[0], new Map(item[1]));\n                        }\n                    });\n                    const currentPath = path.slice(0, path.indexOf(m.name));\n                    next.forEach((value, key) => {\n                        cacheData.set(createPath(key, axisSettings, currentPath.concat([key])).join('-'), value);\n                    });\n                    next.set(field, node.get(field));\n                    node = next;\n                }\n            }\n            node = node.get(m.name) || cacheData.get(path.slice(0, path.indexOf(m.name) + 1).join('-'));\n        }\n    });\n    return node;\n};\n/** @hidden */\nexport const readData = (dataTree, rowTuples, columnTuples, fields, columnSettings, rowSettings, measures) => {\n    const data = [];\n    const { dataField, columnsData } = fields;\n    const rowsCache = new Map();\n    rowTuples.forEach(row => {\n        const rowNode = membersNode(dataTree, row.members.slice(), columnsData, rowSettings, measures, dataField, rowsCache);\n        const rowColumnsNode = rowNode && rowNode.get(columnsData);\n        columnTuples.forEach(col => {\n            const members = col.members.slice();\n            let measure = measures[0];\n            if (members[members.length - 1].levelName === \"[Measures].[MeasuresLevel]\") {\n                const measuresMember = members.pop();\n                measure = measures.find(m => String(m.name) === measuresMember.caption) || measure;\n            }\n            const colNode = rowColumnsNode && membersNode(rowColumnsNode, members, dataField, columnSettings, measures, dataField);\n            let value = '', fmtValue = '';\n            const ordinal = 0;\n            if (colNode && measure) {\n                const result = measure.aggregate.result(colNode.get(dataField));\n                value = String(result);\n                fmtValue = measure.aggregate.format(result);\n            }\n            data.push({\n                columnTuple: col,\n                data: { fmtValue, ordinal, value },\n                rowTuple: row\n            });\n        });\n    });\n    return data;\n};\n","import { copy, reverseColumnsByMeasures } from '../utils';\nimport { splitKeyValue, subNode } from './utils';\nimport { readData } from './dataReader';\nconst getTopMembersTuple = (parentFields, axesSettings) => {\n    const allTuple = { members: [] };\n    parentFields.forEach((topField) => {\n        const axis = axesSettings.find(a => a.key === topField);\n        const caption = axis ? axis.caption : \"\";\n        const member = {\n            caption: caption,\n            children: [],\n            hasChildren: true,\n            parentName: \"\",\n            levelNum: 0,\n            levelName: caption,\n            hierarchy: topField,\n            name: caption\n        };\n        allTuple.members.push(member);\n    });\n    return allTuple;\n};\nconst sortFunc = (descriptor, axe) => (a, b) => {\n    const order = descriptor.dir;\n    const sortableA = axe.sortValue(splitKeyValue(a[0])[1]);\n    const sortableB = axe.sortValue(splitKeyValue(b[0])[1]);\n    if (sortableA < sortableB) {\n        return order === \"asc\" ? -1 : 1;\n    }\n    if (sortableA > sortableB) {\n        return order === \"asc\" ? 1 : -1;\n    }\n    return 0;\n};\nconst mergeData = (src, dest, exclude) => {\n    src.forEach((srcChild, k) => {\n        if (!exclude[k]) {\n            const destChild = subNode(dest, k);\n            mergeData(srcChild, destChild, exclude);\n        }\n    });\n};\nconst childrenByKeys = (dataTree, keys, exclude) => {\n    const result = [];\n    const nodeData = (node) => Array.from(node).filter(n => !exclude[n[0]]);\n    let element = new Map(dataTree);\n    let next;\n    for (let i = 0; i < keys.length; i++) {\n        next = element.get(keys[i]);\n        if (next) {\n            element = new Map(next);\n        }\n        else if (i < keys.length - 1 && Array.from(element).some(e => splitKeyValue(e[0])[0] === keys[i])) {\n            const curLevel = [];\n            element.forEach((child, key) => {\n                if (!exclude[key]) {\n                    curLevel.push(...nodeData(new Map(child)));\n                }\n            });\n            element = new Map();\n            curLevel.forEach(item => {\n                if (element.has(item[0])) {\n                    const dest = element.get(item[0]);\n                    const src = item[1];\n                    const newDest = new Map();\n                    mergeData(dest, newDest, exclude);\n                    mergeData(src, newDest, exclude);\n                    element.set(item[0], newDest);\n                }\n                else {\n                    element.set(item[0], new Map(item[1]));\n                }\n            });\n        }\n        else if (i === 0 || i === keys.length - 1) {\n            if (Array.from(element).some(e => splitKeyValue(e[0])[0] === keys[i])) {\n                result.push(...nodeData(element));\n            }\n        }\n    }\n    return result;\n};\n/** @hidden */\nexport const rootFields = (definitions) => {\n    const fields = new Set();\n    definitions.forEach((item) => {\n        if (item.name.length === 1 && !splitKeyValue(item.name[0])[1]) {\n            fields.add(item.name[0]);\n        }\n    });\n    return fields;\n};\n/** @hidden */\nexport const createTuples = (axesSettings, definitions, dataTree, sortDescriptors, excludeFields) => {\n    const parentFields = rootFields(definitions);\n    const flatMembers = [];\n    const topTuple = getTopMembersTuple(parentFields, axesSettings);\n    flatMembers.push(topTuple);\n    for (let i = 0; i < definitions.length; i++) {\n        const currDef = definitions[i];\n        if (currDef.name.length === 1 && !currDef.expand && parentFields.has(currDef.name[0])) {\n            continue;\n        }\n        const keysToAdd = new Set(parentFields.keys());\n        const currDefMembers = [];\n        const keys = [];\n        const tuples = [];\n        let axe;\n        currDef.name.forEach((element, index) => {\n            const [field, value] = splitKeyValue(element);\n            axe = axesSettings.find(a => a.key === field);\n            if (value) {\n                keysToAdd.delete(field);\n                keys.push(element);\n                const member = {\n                    children: [],\n                    caption: value,\n                    hierarchy: field,\n                    levelNum: 1,\n                    levelName: field + \" \" + field,\n                    name: element,\n                    parentName: axe ? axe.caption : \"\"\n                };\n                currDefMembers.push(member);\n            }\n            else if (currDef.expand && currDef.name.length - 1 === index) {\n                keysToAdd.delete(element);\n                keys.push(element);\n                const children = childrenByKeys(dataTree, keys, excludeFields);\n                const descriptor = sortDescriptors.find(desc => desc.field === field);\n                if (descriptor && descriptor.dir) {\n                    children.sort(sortFunc(descriptor, axe));\n                }\n                for (let c = 0; c < children.length; c++) {\n                    const leafValue = children[c][0];\n                    const leafTuple = { members: [] };\n                    tuples.push(leafTuple);\n                    const caption = splitKeyValue(leafValue)[1];\n                    axe = axesSettings.find(a => a.key === element);\n                    const member = {\n                        caption: caption,\n                        children: [],\n                        levelName: element + \" \" + element,\n                        levelNum: 1,\n                        parentName: axe ? axe.caption : \"\",\n                        hierarchy: element,\n                        name: leafValue\n                    };\n                    leafTuple.members.push(...currDefMembers);\n                    leafTuple.members.push(member);\n                }\n            }\n            else if (currDef.expand) {\n                axe = axesSettings.find(a => a.key === element);\n                const axisCaption = axe ? axe.caption : \"\";\n                keysToAdd.delete(element);\n                keys.push(element);\n                const member = {\n                    children: [],\n                    caption: axisCaption,\n                    hierarchy: element,\n                    levelName: axisCaption,\n                    levelNum: 0,\n                    name: axisCaption,\n                    parentName: \"\"\n                };\n                currDefMembers.push(member);\n            }\n            keysToAdd.forEach(key => {\n                tuples.forEach((tuple) => {\n                    axe = axesSettings.find(a => a.key === key);\n                    const curCaption = axe ? axe.caption : \"\";\n                    const member = {\n                        children: [],\n                        hasChildren: true,\n                        caption: curCaption,\n                        hierarchy: key,\n                        levelName: curCaption,\n                        levelNum: 0,\n                        name: curCaption,\n                        parentName: \"\"\n                    };\n                    tuple.members.push(member);\n                });\n            });\n            flatMembers.push(...tuples);\n        });\n    }\n    return flatMembers;\n};\nconst measureToMember = (measure) => {\n    return {\n        caption: String(measure.name),\n        children: [],\n        hasChildren: false,\n        hierarchy: \"[Measures]\",\n        levelName: \"[Measures].[MeasuresLevel]\",\n        levelNum: 0,\n        name: \"[Measures].[\" + measure.name + \"]\",\n        parentName: \"\"\n    };\n};\nconst addMeasure = (tuple, measure) => {\n    const measureMember = measureToMember(measure);\n    const tupleCopy = copy(tuple);\n    tupleCopy.members.push(measureMember);\n    return tupleCopy;\n};\n/** @hidden */\nexport const addMultipleMeasures = (tuples, measures) => {\n    if (measures.length < 2) {\n        return tuples;\n    }\n    const result = tuples.slice();\n    for (let i = result.length - 1; i >= 0; i--) {\n        const tuple = result[i];\n        result[i] = addMeasure(result[i], measures[0]);\n        for (let m = 1; m < measures.length; m++) {\n            const tupleWithMeasure = addMeasure(tuple, measures[m]);\n            result.splice(i + m, 0, tupleWithMeasure);\n        }\n    }\n    return reverseColumnsByMeasures(result);\n};\n/** @hidden */\nexport const createLocalDataState = (args) => {\n    const { dataTree, rowSettings, columnSettings, rowAxes, columnAxes, measures, sort, fields } = args;\n    const exclude = { [fields.columnsData]: fields.columnsData, [fields.dataField]: fields.dataField };\n    const colTuples = columnAxes.length ?\n        createTuples(columnSettings, columnAxes, dataTree.get(fields.columnsData), sort, exclude) :\n        measures.map(m => ({ members: [measureToMember(m)] }));\n    const columnTuples = columnAxes.length > 0 ? addMultipleMeasures(colTuples, measures) : colTuples;\n    const rowTuples = rowAxes.length ? createTuples(rowSettings, rowAxes, dataTree, sort, exclude) : [{ members: [] }];\n    const resultData = readData(dataTree, rowTuples, columnTuples, fields, columnSettings, rowSettings, measures);\n    return {\n        columns: columnTuples,\n        data: resultData,\n        rows: rowTuples\n    };\n};\n","/** @hidden */\nexport const createFlatSchemaDimensions = (dimensions, measures) => {\n    const result = Object.keys(dimensions).map(dim => ({\n        caption: dim,\n        defaultHierarchy: dim,\n        description: '',\n        name: dim,\n        uniqueName: dim,\n        hierarchyUniqueName: dim,\n        measure: true,\n        type: 1 // https://github.com/telerik/kendo-pivotgrid-common/blob/develop/src/models/responseDiscover.ts#L12-L14\n    }));\n    if (measures.length) {\n        result.push({\n            caption: 'Measures',\n            children: measures.map(m => ({\n                aggregator: '1',\n                caption: String(m.name),\n                defaultFormat: '',\n                description: '',\n                displayFolder: '',\n                groupName: String(m.name),\n                name: String(m.name),\n                uniqueName: String(m.name)\n            })),\n            type: 2,\n            description: '',\n            name: 'Measures',\n            uniqueName: '[Measures]'\n        });\n    }\n    return result;\n};\n","export class Navigation {\n    get elements() {\n        return this.root ? Array.from(this.root.querySelectorAll(this.selectors.join(','))) : [];\n    }\n    get first() {\n        return (this.root && this.root.querySelector(this.selectors.join(','))) || null;\n    }\n    get last() {\n        const all = this.elements;\n        return all[all.length - 1] || null;\n    }\n    get current() {\n        return this.elements.find(el => el.matches(':focus'));\n    }\n    constructor(options) {\n        this.tabIndex = 0;\n        this.root = null;\n        this.eventHandlers = {};\n        this.update = () => { };\n        this.tabIndex = options.tabIndex;\n    }\n    start(root) {\n        this.root = root;\n        for (const eventType in this.mouseEvents) {\n            if (this.mouseEvents[eventType]) {\n                this.eventHandlers[eventType] = (ev => {\n                    const target = ev.target instanceof Element && ev.target.closest(this.selectors.join(','));\n                    if (target) {\n                        this.mouseEvents[eventType].call(undefined, target, this, ev);\n                    }\n                });\n                root.addEventListener(eventType, this.eventHandlers[eventType]);\n            }\n        }\n        for (const eventType in this.keyboardEvents) {\n            if (this.keyboardEvents[eventType]) {\n                this.eventHandlers[eventType] = (ev => {\n                    const target = ev.target instanceof Element && ev.target.closest(this.selectors.join(','));\n                    const key = ev.key === ' ' ? 'Space' : ev.key;\n                    if (target && this.keyboardEvents[eventType][key]) {\n                        this.keyboardEvents[eventType][key].call(undefined, target, this, ev);\n                    }\n                });\n                root.addEventListener(eventType, this.eventHandlers[eventType]);\n            }\n        }\n    }\n    stop() {\n        if (this.root) {\n            for (const eventType in this.eventHandlers) {\n                if (this.eventHandlers[eventType]) {\n                    this.root.removeEventListener(eventType, this.eventHandlers[eventType]);\n                }\n            }\n        }\n        this.root = null;\n    }\n    focusElement(element, previous) {\n        if (element) {\n            if (previous) {\n                previous.removeAttribute('tabindex');\n                previous.classList.remove('k-focus');\n            }\n            element.setAttribute('tabindex', String(this.tabIndex));\n            element.focus({ preventScroll: true });\n        }\n    }\n}\n","import { Navigation } from './navigation';\nconst scrollableValuesSel = '.k-pivotgrid .k-pivotgrid-values';\nconst scrollableColumnHeaderSel = '.k-pivotgrid .k-pivotgrid-column-headers';\nconst scrollableRowHeaderSel = '.k-pivotgrid .k-pivotgrid-row-headers';\nconst emptyCellSel = '.k-pivotgrid > .k-pivotgrid-empty-cell';\nconst tableSel = 'table.k-pivotgrid-table';\nconst cellSel = '.k-pivotgrid-cell';\nconst scrollables = [scrollableValuesSel, scrollableColumnHeaderSel, scrollableRowHeaderSel].join(',');\nconst selectors = [\n    emptyCellSel,\n    [scrollableColumnHeaderSel, tableSel, cellSel].join(' '),\n    [scrollableRowHeaderSel, tableSel, cellSel].join(' '),\n    [scrollableValuesSel, tableSel, cellSel].join(' ')\n];\nconst onEnter = (target, nav, ev) => {\n    const icon = target.querySelector('.k-icon, .k-svg-icon');\n    if (icon) {\n        const index = nav.elements.indexOf(target);\n        nav.update = () => {\n            nav.focusElement(nav.elements[index], null);\n            nav.update = () => { };\n        };\n        icon.click();\n        ev.preventDefault();\n    }\n};\nconst tryScrollLeft = (target, scrollable, elToScroll) => {\n    if (target.offsetLeft < scrollable.scrollLeft) {\n        elToScroll.scrollLeft = target.offsetLeft;\n    }\n};\nconst tryScrollRight = (target, scrollable, elToScroll) => {\n    if (target.offsetLeft + target.offsetWidth > scrollable.scrollLeft + scrollable.offsetWidth &&\n        target.offsetWidth < scrollable.offsetWidth) {\n        elToScroll.scrollLeft = target.offsetLeft + target.offsetWidth - scrollable.offsetWidth;\n    }\n};\nconst tryScrollUp = (target, scrollable, elToScroll) => {\n    if (scrollable.scrollTop && target.offsetTop < scrollable.scrollTop) {\n        elToScroll.scrollTop = target.offsetTop;\n    }\n};\nconst tryScrollDown = (target, scrollable, elToScroll) => {\n    if (target.offsetTop + target.offsetHeight > scrollable.scrollTop + scrollable.offsetHeight &&\n        target.offsetHeight < scrollable.offsetHeight) {\n        elToScroll.scrollTop = target.offsetTop + target.offsetHeight - scrollable.offsetHeight;\n    }\n};\nconst scrollTo = (target, root, scrollFunc) => {\n    const elToScroll = root.querySelector(scrollableValuesSel);\n    const scrollable = target && target.closest(scrollables);\n    if (!elToScroll || !scrollable || !target) {\n        return;\n    }\n    scrollFunc.forEach(scroll => scroll(target, scrollable, elToScroll));\n};\nconst tableMap = (table) => {\n    const rows = Array.from(table.rows);\n    const colsCount = Array.from((rows && rows[0] && rows[0].cells) || [])\n        .map(c => c.colSpan)\n        .reduce((prev, cur) => prev + cur, 0);\n    const map = rows.map(() => new Array(colsCount));\n    rows.forEach((row, r) => {\n        let curColSpan = 0;\n        Array.from(row.cells).forEach((c) => {\n            for (let colSp = 0; colSp < c.colSpan; colSp++) {\n                for (let rowSp = 0; rowSp < c.rowSpan; rowSp++) {\n                    const ind = map[r + rowSp].findIndex((val, curInd) => curInd >= curColSpan && !val);\n                    map[r + rowSp][ind] = c;\n                }\n                curColSpan++;\n            }\n        });\n    });\n    return map;\n};\nconst navigationMap = (root) => {\n    const columnHeader = tableMap(root.querySelector([scrollableColumnHeaderSel, tableSel].join(' ')));\n    const rowHeader = tableMap(root.querySelector([scrollableRowHeaderSel, tableSel].join(' ')));\n    const values = tableMap(root.querySelector([scrollableValuesSel, tableSel].join(' ')));\n    const emptyCell = root.querySelector(emptyCellSel);\n    const emptyCellRow = new Array(rowHeader[0].length).fill(emptyCell);\n    const map = [];\n    for (let i = 0; i < columnHeader.length; i++) {\n        map.push(emptyCellRow.concat(columnHeader[i]));\n    }\n    for (let i = 0; i < rowHeader.length; i++) {\n        map.push(rowHeader[i].concat(values[i]));\n    }\n    return map;\n};\nconst getTargetPos = (map, target) => {\n    for (let r = 0; r < map.length; r++) {\n        for (let c = 0; c < map[r].length; c++) {\n            if (map[r][c] === target) {\n                return [r, c];\n            }\n        }\n    }\n    return [-1, -1];\n};\nconst ctrlKey = (ev) => ev.ctrlKey || ev.metaKey;\nconst cellAt = (root, target, pos) => {\n    const map = navigationMap(root);\n    const targetPos = getTargetPos(map, target);\n    let nextPos = [targetPos[0] + pos[0], targetPos[1] + pos[1]];\n    let next = map[nextPos[0]] && map[nextPos[0]][nextPos[1]];\n    while (next && next === target) {\n        nextPos = [nextPos[0] + pos[0], nextPos[1] + pos[1]];\n        next = map[nextPos[0]] && map[nextPos[0]][nextPos[1]];\n    }\n    return next;\n};\nconst keyboardEvents = {\n    keydown: {\n        ArrowLeft: (target, nav, ev) => {\n            ev.preventDefault();\n            const next = cellAt(nav.root, target, [0, -1]);\n            nav.focusElement(next, target);\n            scrollTo(next, nav.root, [tryScrollRight, tryScrollLeft, tryScrollDown, tryScrollUp]);\n        },\n        ArrowRight: (target, nav, ev) => {\n            ev.preventDefault();\n            const next = cellAt(nav.root, target, [0, 1]);\n            nav.focusElement(next, target);\n            scrollTo(next, nav.root, [tryScrollLeft, tryScrollRight, tryScrollDown, tryScrollUp]);\n        },\n        ArrowUp: (target, nav, ev) => {\n            ev.preventDefault();\n            const next = cellAt(nav.root, target, [-1, 0]);\n            nav.focusElement(next, target);\n            scrollTo(next, nav.root, [tryScrollRight, tryScrollLeft, tryScrollDown, tryScrollUp]);\n        },\n        ArrowDown: (target, nav, ev) => {\n            ev.preventDefault();\n            const next = cellAt(nav.root, target, [1, 0]);\n            nav.focusElement(next, target);\n            scrollTo(next, nav.root, [tryScrollRight, tryScrollLeft, tryScrollUp, tryScrollDown]);\n        },\n        o: (_target, nav, _ev) => {\n            if (!nav.root) {\n                return;\n            }\n            const next = nav.root.nextElementSibling;\n            if (next && next instanceof HTMLElement && next.matches('div.k-pivotgrid-configurator-button')) {\n                next.click();\n                setTimeout(() => {\n                    if (nav.root.parentNode) {\n                        const confHeader = nav.root.parentNode.querySelector('.k-pivotgrid-configurator-content .k-form-field .k-fields-list-wrapper .k-treeview');\n                        if (confHeader instanceof HTMLElement) {\n                            confHeader.setAttribute('tabindex', String(nav.tabIndex));\n                            confHeader.focus();\n                        }\n                    }\n                }, 0);\n            }\n        },\n        Enter: onEnter,\n        Space: onEnter,\n        Home: (target, nav, ev) => {\n            const map = navigationMap(nav.root);\n            const ctrl = ctrlKey(ev);\n            const row = ctrl ? map[0] : (map.find(ro => Boolean(ro.find(x => x === target))) || []);\n            const next = row[0];\n            if (next) {\n                nav.focusElement(next, target);\n                scrollTo(next, nav.root, [tryScrollRight, tryScrollLeft, tryScrollDown, tryScrollUp]);\n                ev.preventDefault();\n            }\n        },\n        End: (target, nav, ev) => {\n            const map = navigationMap(nav.root);\n            const ctrl = ctrlKey(ev);\n            const row = ctrl ? map[map.length - 1] : (map.find(ro => Boolean(ro.find(x => x === target))) || []);\n            const next = row && row[row.length - 1] || null;\n            if (next) {\n                nav.focusElement(next, target);\n                scrollTo(next, nav.root, [tryScrollLeft, tryScrollRight, tryScrollUp, tryScrollDown]);\n                ev.preventDefault();\n            }\n        }\n    }\n};\nconst mouseEvents = {\n    click: (target, nav) => {\n        if (target && target instanceof HTMLElement) {\n            const prev = nav.elements.find(c => c.hasAttribute('tabindex')) || null;\n            nav.focusElement(target, prev);\n        }\n    }\n};\n/**\n * The PivotGrid keyboard navigation functionality.\n *\n * Usage:\n *\n * On Initialize\n * const navigation = new PivotGridNavigation({ tabindex: 0 });\n *\n * Turn on\n * navigation.start(rootDomElement);\n *\n * On After Update\n * navigation.update();\n *\n * On Destroy / Turn off\n * navigation.stop();\n */\nexport class PivotGridNavigation extends Navigation {\n    constructor() {\n        super(...arguments);\n        this.selectors = selectors;\n        this.mouseEvents = mouseEvents;\n        this.keyboardEvents = keyboardEvents;\n    }\n}\n","import { Navigation } from './navigation';\nconst selectors = [\n    '.k-pivotgrid-configurator-content .k-form-field .k-fields-list-wrapper .k-treeview',\n    '.k-pivotgrid-configurator-content .k-chip',\n    '.k-pivotgrid-configurator-actions button'\n];\nconst onEscape = (_target, nav, ev) => {\n    if (ev.target instanceof HTMLElement) {\n        if (nav.root) {\n            const pivot = nav.root.previousElementSibling;\n            const confButton = nav.root.nextElementSibling;\n            const pivotCell = Array.from(pivot instanceof HTMLElement ? pivot.querySelectorAll('[tabindex]') : []).find((c) => c.tabIndex >= 0);\n            if (pivotCell instanceof HTMLElement) {\n                pivotCell.focus();\n                if (confButton instanceof HTMLElement) {\n                    confButton.click();\n                }\n            }\n        }\n    }\n};\nconst navigate = (target, nav, ev, dir) => {\n    ev.preventDefault();\n    const all = nav.elements;\n    let index = all.indexOf(target) + dir;\n    if (index < 0) {\n        index = all.length - 1;\n    }\n    nav.focusElement(all[index % all.length], target);\n};\nconst onDelete = (target, nav, ev) => {\n    if (ev.target instanceof HTMLElement) {\n        const deleteButton = ev.target.querySelector('.k-icon.k-i-x-circle, .k-svg-icon.k-svg-i-x-circle');\n        if (deleteButton instanceof HTMLElement) {\n            ev.preventDefault();\n            navigate(target, nav, ev, -1);\n        }\n    }\n};\nconst keyboardEvents = {\n    keydown: {\n        Tab: (target, nav, ev) => {\n            navigate(target, nav, ev, ev.shiftKey ? -1 : 1);\n        },\n        Escape: onEscape,\n        Delete: onDelete,\n        Backspace: onDelete\n    }\n};\nconst mouseEvents = {\n    click: (target, nav) => {\n        if (target && target instanceof HTMLElement) {\n            const prev = nav.elements.find((c) => c.hasAttribute('tabindex')) || null;\n            nav.focusElement(target, prev);\n        }\n    }\n};\n/**\n * The PivotGrid Configurator keyboard navigation functionality.\n *\n * Usage:\n *\n * On Initialize\n * const navigation = new ConfiguratorNavigation({ tabindex: 0 });\n *\n * Turn on\n * navigation.start(rootDomElement);\n *\n * On After Update\n * navigation.update();\n *\n * On Destroy / Turn off\n * navigation.stop();\n */\nexport class ConfiguratorNavigation extends Navigation {\n    constructor() {\n        super(...arguments);\n        this.selectors = selectors;\n        this.mouseEvents = mouseEvents;\n        this.keyboardEvents = keyboardEvents;\n    }\n}\n","import '../kendo.core.js';\n\nlet $ = kendo.jQuery;\n\nexport function useLoaderContainer(toggle, options) {\n    var that = this,\n        wrapper = that.wrapper;\n\n    if (toggle && that.loader) {\n        if (!that.wrapper.find(\".k-loader-container\").length) {\n\n            var defaultOptions = {\n                message: \"Loading...\",\n                overlayColor: \"dark\",\n                themeColor: \"primary\",\n            };\n            defaultOptions = $.extend({}, defaultOptions, options);\n\n            const loaderOverlay = kendo.html.renderLoaderContainer($(\"<div></div>\"), defaultOptions);\n            const wrapperWidth = that.wrapper.width();\n\n            const mask = $(\"<div class='k-loading-pdf-mask'></div>\");\n            const wrapperClone = that.wrapper.clone().removeAttr(\"id\").addClass('k-loading-pdf-progress').width(wrapperWidth);\n            mask.append(wrapperClone);\n            mask.append(loaderOverlay);\n            that.mask = mask;\n\n            wrapper.append(mask);\n\n            that.wrapperClone = mask.find(\".k-pivotgrid\");\n            that.loaderOverlay = mask.find(\".k-loader-container\");\n\n            that.loader.element.insertBefore(mask.find(\".k-loader-container-label\"));\n        }\n    } else {\n        if (that.loaderOverlay.length) {\n            kendo.destroy(that.loaderOverlay);\n            that.mask.remove();\n        }\n    }\n}","import \"./kendo.dom.js\";\nimport \"./kendo.data.js\";\nimport \"./kendo.icons.js\";\nimport \"./kendo.loader.js\";\nimport \"./kendo.html.loadercontainer.js\";\nimport \"./kendo.sortable.js\";\nimport {\n    PivotGridNavigation,\n    fetchDiscover,\n    fetchData,\n    createLocalDataState,\n    createDataTree,\n    addMultipleMeasures,\n    buildKPIMeasures,\n    cloneDataTree,\n    compareAxes,\n    configuratorReducer,\n    createAxisDescriptors,\n    createDiscoverBody,\n    createFlatSchemaDimensions,\n    createRequestBody,\n    createTuples,\n    discoverCommands,\n    mergeTrees,\n    parseResponse,\n    readData,\n    rootFields,\n    setFilter,\n    setSort,\n    sumAggregate,\n    averageAggregate,\n    minAggregate,\n    maxAggregate,\n    countAggregate,\n    createDataState,\n    toColumns,\n    toRows,\n    toTree,\n    toData,\n    headersReducer,\n    addKPI\n} from \"@progress/kendo-pivotgrid-common\";\n\nimport { useLoaderContainer } from \"./utils/loaderContainer.js\";\n\nexport const __meta__ = {\n    id: \"pivotgrid\",\n    name: \"PivotGrid\",\n    category: \"web\",\n    description: \"The PivotGrid widget is a data summarization tool.\",\n    depends: [ \"dom\", \"data\", \"data.xml\", \"sortable\", \"icons\", \"loader\", \"html.loadercontainer\" ],\n    features: [{\n        id: \"pivotgrid-configurator\",\n        name: \"Configurator\",\n        description: \"The PivotConfigurator widget allows the user to select data slices displayed in PivotGrid\",\n        depends: [ \"pivot.configurator\" ]\n    }, {\n        id: \"pivotgrid-filtering\",\n        name: \"Filtering\",\n        description: \"Support for filtering\",\n        depends: [ \"pivot.fieldmenu\" ]\n    }, {\n        id: \"pivotgrid-excel-export\",\n        name: \"Excel export\",\n        description: \"Export pivot grid data as Excel spreadsheet\",\n        depends: [ \"ooxml\" ]\n    }, {\n        id: \"pivotgrid-pdf-export\",\n        name: \"PDF export\",\n        description: \"Export pivot grid data as PDF\",\n        depends: [ \"pdf\", \"drawing\" ]\n    }, {\n        id: \"mobile-scroller\",\n        name: \"Mobile scroller\",\n        description: \"Support for kinetic scrolling in mobile device\",\n        depends: [ \"mobile.scroller\" ]\n    }]\n};\n\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        encode = kendo.htmlEncode,\n        Class = kendo.Class,\n        Comparer = kendo.data.Comparer,\n        Widget = ui.Widget,\n        DataSource = kendo.data.DataSource,\n        outerWidth = kendo._outerWidth,\n        outerHeight = kendo._outerHeight,\n        normalizeFilter = kendo.data.Query.normalizeFilter,\n        normalizeSort = kendo.data.Query.normalizeSort,\n        toString = {}.toString,\n        identity = function(o) { return o; },\n        map = $.map,\n        extend = $.extend,\n        keys = kendo.keys,\n        isFunction = kendo.isFunction,\n        RESIZE = \"resize\",\n        READ = \"read\",\n        CHANGE = \"change\",\n        ERROR = \"error\",\n        REQUESTSTART = \"requestStart\",\n        PROGRESS = \"progress\",\n        REQUESTEND = \"requestEnd\",\n        MEASURES = \"Measures\",\n        STATERESET = \"stateReset\",\n        AUTO = \"auto\",\n        DIV = \"<div></div>\",\n        NS = \".kendoPivotGrid\",\n        ROW_TOTAL_KEY = \"__row_total__\",\n        DATABINDING = \"dataBinding\",\n        DATABOUND = \"dataBound\",\n        EXPANDMEMBER = \"expandMember\",\n        HEADERTEMPLATE = ({ id, key, headerClass, colspan, rowspan, expandable, iconClass, role, expanded }) => `<th id=\"${id}\" role=\"${role}\" ${expandable ? `aria-expanded=\"${expanded}\"` : ''}  data-key=\"${encode(key)}\" class=\"${encode(headerClass)}\" ${colspan ? 'colspan=\"' + encode(colspan) + '\"' : ''} ${rowspan ? 'rowspan=\"' + encode(rowspan) + '\"' : ''}>` +\n                                    `${expandable ? kendo.ui.icon($('<span role=\"presentation\" class=\"k-pivotgrid-toggle\"></span>'), { icon: `chevron-${encode(iconClass)}` }) : ''}` +\n                                '</th>',\n        COLLAPSEMEMBER = \"collapseMember\",\n        STATE_EXPANDED_ICONNAME = \"caret-alt-down\",\n        STATE_EXPANDED_SELECTOR = `.k-i-${STATE_EXPANDED_ICONNAME},.k-svg-i-${STATE_EXPANDED_ICONNAME}`,\n        STATE_COLLAPSED_ICONNAME = \"caret-alt-right\",\n        HEADER_TEMPLATE = ({ member }) => `<span>${encode(member.caption || member.name)}</span>`,\n        PIVOTGRID_TREND_ICONS_MAP = {\n            \"kpi-trend-decrease\": \"caret-alt-down\",\n            \"kpi-trend-increase\": \"caret-alt-up\",\n            \"kpi-trend-equal\": \"minus\",\n        },\n        KPISTATUS_TEMPLATE = ({ dataItem }) => kendo.ui.icon($(`<span title=\"${encode(dataItem.value)}\"></span>`), { icon: `kpi-status-${dataItem.value > 0 ? \"open\" : dataItem.value < 0 ? \"deny\" : \"hold\"}` }),\n        KPITREND_TEMPLATE = ({ dataItem }) => kendo.ui.icon($(`<span title=\"${encode(dataItem.value)}\"></span>`), { icon: PIVOTGRID_TREND_ICONS_MAP[`kpi-trend-${dataItem.value > 0 ? \"increase\" : dataItem.value < 0 ? \"decrease\" : \"equal\"}`] }),\n        DATACELL_TEMPLATE = ({ dataItem }) => (dataItem ? dataItem.fmtValue || dataItem.value ? `<span class=\"k-pivotgrid-content\">${encode(dataItem.fmtValue || dataItem.value)}</span>` : \"&nbsp;\" : \"&nbsp;\"),\n        LAYOUT_TABLE = '<table class=\"k-pivot-layout\">' +\n                            '<tr>' +\n                                '<td>' +\n                                    '<div class=\"k-pivot-rowheaders\"></div>' +\n                                '</td>' +\n                                '<td>' +\n                                    '<div class=\"k-pivot-table\"></div>' +\n                                '</td>' +\n                            '</tr>' +\n                        '</table>';\n        var AXIS_ROWS = \"rows\";\n        var AXIS_COLUMNS = \"columns\";\n        const SEPARATOR = \"&\";\n\n        var tableStyles = {\n            tableRow: \"k-table-row\",\n            header: \"k-header k-table-th\",\n            headerTable: \"k-grid-header-table k-table\",\n            table: \"k-table\",\n            contentTable: \"k-grid-table k-table\",\n            tbody: \"k-table-tbody\",\n            tableCell: \"k-table-td\"\n        };\n\n    function normalizeMeasures(measure) {\n        var descriptor = typeof measure === \"string\" ? [{ name: measure }] : measure;\n        var descriptors = toString.call(descriptor) === \"[object Array]\" ? descriptor : (descriptor !== undefined ? [descriptor] : []);\n\n        return map(descriptors, function(d) {\n            if (typeof d === \"string\") {\n                return { name: d };\n            }\n            return $.extend(true, d, { name: d.name, type: d.type });\n        });\n    }\n\n    function normalizeMembers(member) {\n        var descriptor = typeof member === \"string\" ? [{ name: [member], expand: false }] : member;\n        var descriptors = toString.call(descriptor) === \"[object Array]\" ? descriptor : (descriptor !== undefined ? [descriptor] : []);\n\n        return map(descriptors, function(d) {\n            if (typeof d === \"string\") {\n                return { name: [d], expand: false };\n            }\n            return { name: (toString.call(d.name) === \"[object Array]\" ? d.name.slice() : [d.name]), expand: d.expand };\n        });\n    }\n\n    function normalizeName(name) {\n        if (name.indexOf(\" \") !== -1) {\n            name = '[\"' + name + '\"]';\n        }\n\n        return name;\n    }\n\n    function accumulateMembers(accumulator, rootTuple, tuple, level) {\n        var idx, length;\n        var children;\n        var member;\n\n        if (!tuple) {\n            tuple = rootTuple;\n        }\n\n        if (!level) {\n            level = 0;\n        }\n\n        member = tuple.members[level];\n\n        if (!member || member.measure) { //return if no member or measure\n            return;\n        }\n\n        children = member.children;\n        length = children.length;\n\n        if (tuple === rootTuple) {\n            accumulator[kendo.stringify([member.name])] = !!length;\n        } else if (length) {\n            accumulator[kendo.stringify(buildPath(tuple, level))] = true;\n        }\n\n        if (length) {\n            for (idx = 0; idx < length; idx++) {\n                accumulateMembers(accumulator, rootTuple, children[idx], level);\n            }\n        }\n\n        accumulateMembers(accumulator, rootTuple, tuple, level + 1);\n    }\n\n    function descriptorsForAxes(tuples) {\n        var result = {};\n\n        if (tuples.length) {\n            accumulateMembers(result, tuples[0]);\n        }\n\n        var descriptors = [];\n        for (var k in result) {\n            descriptors.push({ name: JSON.parse(k), expand: result[k] });\n        }\n\n        return descriptors;\n    }\n\n    function addMissingPathMembers(members, axis) {\n        var tuples = axis.tuples || [];\n        var firstTuple = tuples[0];\n\n        if (firstTuple && members.length < firstTuple.members.length) {\n            var tupleMembers = firstTuple.members;\n\n            for (var idx = 0; idx < tupleMembers.length; idx++) {\n                if (tupleMembers[idx].measure) {\n                    continue;\n                }\n\n                var found = false;\n                for (var j = 0; j < members.length; j++) {\n                    if (getName(members[j]).indexOf(tupleMembers[idx].hierarchy) === 0) {\n                        found = true;\n                        break;\n                    }\n                }\n\n                if (!found) {\n                    members.push({ name: [tupleMembers[idx].name], expand: false }); //calling normalize here to make name from string to array\n                }\n            }\n        }\n    }\n\n    function tupleToDescriptors(tuple) {\n        var result = [];\n        var members = tuple.members;\n\n        for (var idx = 0; idx < members.length; idx++) {\n            if (members[idx].measure) {\n                continue;\n            }\n\n            //make tuple name an array\n            result.push({ name: [members[idx].name], expand: members[idx].children.length > 0 });\n        }\n\n        return result;\n    }\n\n    function descriptorsForMembers(axis, members, measures) {\n        axis = axis || {};\n\n        addMissingPathMembers(members, axis);\n\n        if (measures.length > 1) {\n            members.push({\n                name: MEASURES,\n                measure: true,\n                children: normalizeMembers(measures)\n            });\n        }\n\n        var tupletoSearch = {\n            members: members\n        };\n\n        if (axis.tuples) {\n            var result = findExistingTuple(axis.tuples, tupletoSearch);\n            if (result.tuple) {\n                members = tupleToDescriptors(result.tuple);\n            }\n        }\n\n        return members;\n    }\n\n    function createAggregateGetter(m) {\n        var measureGetter = kendo.getter(m.field, true);\n        return function(aggregatorContext, state) {\n            return m.aggregate(measureGetter(aggregatorContext.dataItem), state, aggregatorContext);\n        };\n    }\n\n    function isNumber(val) {\n        return typeof val === \"number\" && !isNaN(val);\n    }\n\n    function isDate(val) {\n        return val && val.getTime;\n    }\n\n    function getScollWidth() {\n        var scrollbar = 0;\n        var div;\n        if (document && document.createElement) {\n            div = document.createElement('div');\n\n            div.style.cssText = 'overflow:scroll;overflow-x:hidden;zoom:1;clear:both;display:block';\n            div.innerHTML = '&nbsp;';\n            document.body.appendChild(div);\n\n            scrollbar = div.offsetWidth - div.scrollWidth;\n\n            document.body.removeChild(div);\n        }\n\n        return scrollbar;\n    }\n\n    function loadLocalData(data, params, deferred) {\n        const that = this;\n        const originalData = (that.reader.data(data) || []).slice(0);\n        if (originalData && !that._pristineData) {\n            that._pristineData = originalData;\n        }\n        const columnSettings = that._createSettings(params.columnAxes);\n        const rowSettings = that._createSettings(params.rowAxes);\n        const measures = that.measures();\n        const dataTree = createDataTree(originalData, rowSettings, columnSettings, measures, { dataField: \"aggregate\", columnsData: \"columns\" }, that.filter() || []);\n\n        const stateArgs = {\n            dataTree: dataTree,\n            columnSettings: columnSettings,\n            rowSettings: rowSettings,\n            columnAxes: params.columnAxes,\n            rowAxes: params.rowAxes,\n            measures: measures.map(function(item) { return item; }),\n            fields: { dataField: \"aggregate\", columnsData: \"columns\" },\n            sort: flattenSortDescriptors(params.sort || [])\n        };\n\n        that._saveState(createLocalDataState(stateArgs));\n        that.trigger(CHANGE);\n        deferred.resolve();\n    }\n\n    function flattenSortDescriptors(descriptors) {\n        var result = [];\n        for (var i = 0; i < descriptors.length; i++) {\n            result.push({\n                dir: descriptors[i].dir,\n                field: descriptors[i].field.split(\".\").pop()\n            });\n        }\n        return result;\n    }\n\n    function createLocalMeasure(field, key, format, aggregate) {\n        var formatFunc = function(value) { return kendo.format(this.format, value); };\n        var measureMap = {\n            \"sum\": sumAggregate,\n            \"average\": averageAggregate,\n            \"min\": minAggregate,\n            \"max\": maxAggregate,\n            \"count\": countAggregate,\n        };\n        var valueFunc = function(item) { return item[this.field]; };\n        var measure = {\n                value: valueFunc.bind({ field: field }),\n                aggregate: measureMap[aggregate],\n                caption: key,\n                uniqueName: key,\n                type: 2,\n                name: [key]\n            };\n        if (format) {\n            measure.aggregate.format = formatFunc.bind({ format: format });\n        }\n\n        return measure;\n    }\n\n    function getIcons(sortIcon, options, pivotOptions) {\n        var sortable = options.sortable,\n            filterable = options.filterable,\n            reorderable = pivotOptions.reorderable,\n            result = \"\";\n\n        if (sortable) {\n            result += sortIcon ? `<span class=\"k-chip-action\">${kendo.ui.icon(sortIcon + \"-sm\")}</span>` : '';\n        }\n\n        if (filterable || sortable) {\n            result += `<span class=\"k-setting-fieldmenu k-chip-action\">${kendo.ui.icon(\"more-vertical\")}</span>`;\n        }\n        if (reorderable) {\n            result += `<span class=\"k-setting-delete k-chip-action\">${kendo.ui.icon(\"x\")}</span>`;\n        }\n\n        return result;\n    }\n\n    var functions = {\n        sum: function(value, state) {\n            var accumulator = state.accumulator;\n\n            if (!isNumber(accumulator)) {\n                accumulator = value;\n            } else if (isNumber(value)) {\n                accumulator += value;\n            }\n\n            return accumulator;\n        },\n        count: function(value, state) {\n            return (state.accumulator || 0) + 1;\n        },\n        average: {\n            aggregate: function(value, state) {\n                var accumulator = state.accumulator;\n\n                if (state.count === undefined) {\n                    state.count = 0;\n                }\n\n                if (!isNumber(accumulator)) {\n                    accumulator = value;\n                } else if (isNumber(value)) {\n                    accumulator += value;\n                }\n\n                if (isNumber(value)) {\n                    state.count++;\n                }\n\n                return accumulator;\n            },\n            result: function(state) {\n                var accumulator = state.accumulator;\n\n                if (isNumber(accumulator)) {\n                    accumulator = accumulator / state.count;\n                }\n\n                return accumulator;\n            }\n        },\n        max: function(value, state) {\n            var accumulator = state.accumulator;\n\n            if (!isNumber(accumulator) && !isDate(accumulator)) {\n                accumulator = value;\n            }\n\n            if (accumulator < value && (isNumber(value) || isDate(value))) {\n                accumulator = value;\n            }\n            return accumulator;\n        },\n        min: function(value, state) {\n            var accumulator = state.accumulator;\n\n            if (!isNumber(accumulator) && !isDate(accumulator)) {\n                accumulator = value;\n            }\n\n            if (accumulator > value && (isNumber(value) || isDate(value))) {\n                accumulator = value;\n            }\n            return accumulator;\n        }\n    };\n\n    var PivotCubeBuilder = Class.extend({\n        init: function(options) {\n            this.options = extend({}, this.options, options);\n            this.dimensions = this._normalizeDescriptors(\"field\", this.options.dimensions);\n            this.measures = this._normalizeDescriptors(\"name\", this.options.measures);\n        },\n\n        _normalizeDescriptors: function(keyField, descriptors) {\n            descriptors = descriptors || {};\n            var fields = {};\n            var field;\n\n            if (toString.call(descriptors) === \"[object Array]\") {\n                for (var idx = 0, length = descriptors.length; idx < length; idx++) {\n                    field = descriptors[idx];\n                    if (typeof field === \"string\") {\n                        fields[field] = {};\n                    } else if (field[keyField]) {\n                        fields[field[keyField]] = field;\n                    }\n                }\n                descriptors = fields;\n            }\n\n            return descriptors;\n        },\n\n        _rootTuples: function(rootNames, measureAggregators) {\n            var aggregatorsLength = measureAggregators.length || 1;\n            var dimensionsSchema = this.dimensions || [];\n            var root, name, parts;\n            var measureIdx = 0;\n            var idx;\n\n            var rootNamesLength = rootNames.length;\n            var result = [];\n            var keys = [];\n\n            if (rootNamesLength || measureAggregators.length) {\n                for (measureIdx = 0; measureIdx < aggregatorsLength; measureIdx++) {\n\n                    root = { members: [] };\n\n                    for (idx = 0; idx < rootNamesLength; idx++) {\n                        name = rootNames[idx];\n                        parts = name.split(\"&\");\n\n                        root.members[root.members.length] = {\n                            children: [],\n                            caption: (dimensionsSchema[name] || {}).caption || \"All\",\n                            name: name,\n                            levelName: name,\n                            levelNum: \"0\",\n                            hasChildren: true,\n                            parentName: parts.length > 1 ? parts[0] : undefined,\n                            hierarchy: name\n                        };\n                    }\n\n                    if (aggregatorsLength > 1) {\n                        root.members[root.members.length] = {\n                            children: [],\n                            caption: (measureAggregators[measureIdx]).caption,\n                            name: measureAggregators[measureIdx].descriptor.name,\n                            levelName: \"MEASURES\",\n                            levelNum: \"0\",\n                            hasChildren: false,\n                            parentName: undefined,\n                            hierarchy: \"MEASURES\"\n                        };\n                    }\n\n                    result[result.length] = root;\n                }\n\n                keys.push(ROW_TOTAL_KEY);\n            }\n\n            return {\n                keys: keys,\n                tuples: result\n            };\n        },\n\n        _sortMap: function(map, sortDescriptors) {\n            var sortedMaps = [];\n            var sortTree = [];\n            var flattenTree = [];\n            var mapItem;\n            var key;\n\n            for (key in map) {\n                if (!map[key].directParentName) {\n                    sortTree.push($.extend({}, { name: key, parentName: map[key].parentName }));\n                }\n            }\n\n            //if there are no root this means that something is expanding\n            //and we should only sort that part of the tree\n            if (!sortTree.length) {\n                for (key in map) {\n                    sortTree.push($.extend({}, { name: key, parentName: map[key].parentName }));\n                }\n            }\n\n            fillSortTree(sortTree, map);\n\n            // fill tree recursive\n            for (var i = 0; i < sortDescriptors.length; i++) {\n                sortItemsTree(sortDescriptors[i].field.split(\".\").pop(), sortTree, Comparer.create({ field: \"name\", dir: sortDescriptors[i].dir }));\n            }\n\n            flattenTree = flatColumns(sortTree);\n\n            //we need to flatten the structure so the tuples can build correctly\n            for (var j = 0; j < flattenTree.length; j++) {\n                mapItem = map[flattenTree[j].name];\n                mapItem.index = j;\n                sortedMaps[j] = mapItem;\n            }\n\n            return sortedMaps;\n        },\n\n        _expandedTuples: function(map, expanded, measureAggregators, sortDescriptors) {\n            var aggregatorsLength = measureAggregators.length || 1;\n            var dimensionsSchema = this.dimensions || [];\n            var measureIdx;\n            var tuple;\n\n            var key;\n            var mapItem;\n            var current;\n            var currentKeys;\n            var accumulator = [];\n            var accumulatorKeys = [];\n            var memberInfo;\n\n            var expandedNames;\n            var parts;\n            var name;\n            var idx;\n\n            if (sortDescriptors && sortDescriptors.length && !$.isEmptyObject(map)) {\n                map = this._sortMap(map, sortDescriptors);\n            }\n\n            for (key in map) {\n                mapItem = map[key];\n                memberInfo = this._findExpandedMember(expanded, mapItem.uniquePath);\n\n                current = accumulator[memberInfo.index] || [];\n                currentKeys = accumulatorKeys[memberInfo.index] || [];\n\n                expandedNames = memberInfo.member.names;\n\n                for (measureIdx = 0; measureIdx < aggregatorsLength; measureIdx++) {\n                    tuple = { members: [] };\n                    for (idx = 0; idx < expandedNames.length; idx++) {\n                        if (idx === memberInfo.member.expandedIdx) {\n                            tuple.members[tuple.members.length] = {\n                                children: [],\n                                caption: mapItem.value,\n                                name: mapItem.name,\n                                hasChildren: false,\n                                levelNum: 1,\n                                levelName: mapItem.parentName + mapItem.name,\n                                parentName: mapItem.parentName,\n                                hierarchy: mapItem.parentName + mapItem.name\n                            };\n\n                            if (measureIdx === 0) {\n                                currentKeys.push(buildPath(tuple, idx).join(\"\"));\n                            }\n                        } else {\n                            name = expandedNames[idx];\n                            parts = name.split(\"&\");\n                            tuple.members[tuple.members.length] = {\n                                children: [],\n                                caption: (dimensionsSchema[name] || {}).caption || \"All\",\n                                name: name,\n                                levelName: name,\n                                levelNum: \"0\",\n                                hasChildren: true,\n                                parentName: parts.length > 1 ? parts[0] : undefined,\n                                hierarchy: name\n                            };\n                        }\n                    }\n\n                    if (aggregatorsLength > 1) {\n                        tuple.members[tuple.members.length] = {\n                            children: [],\n                            caption: measureAggregators[measureIdx].caption,\n                            name: measureAggregators[measureIdx].descriptor.name,\n                            levelName: \"MEASURES\",\n                            levelNum: \"0\",\n                            hasChildren: true,\n                            parentName: undefined,\n                            hierarchy: \"MEASURES\"\n                        };\n                    }\n\n                    current[current.length] = tuple;\n                }\n\n                accumulator[memberInfo.index] = current;\n                accumulatorKeys[memberInfo.index] = currentKeys;\n            }\n\n            return {\n                keys: accumulatorKeys,\n                tuples: accumulator\n            };\n        },\n\n        _findExpandedMember: function(members, parentName) {\n            for (var idx = 0; idx < members.length; idx++) {\n                if (members[idx].uniquePath === parentName) {\n                    return {\n                        member: members[idx],\n                        index: idx\n                    };\n                }\n            }\n        },\n\n        _asTuples: function(map, descriptor, measureAggregators, sortDescriptors) {\n            measureAggregators = measureAggregators || [];\n\n            var rootInfo = this._rootTuples(descriptor.root, measureAggregators);\n            var expandedInfo = this._expandedTuples(map, descriptor.expanded, measureAggregators, sortDescriptors);\n\n            return {\n                keys: [].concat.apply(rootInfo.keys, expandedInfo.keys),\n                tuples: [].concat.apply(rootInfo.tuples, expandedInfo.tuples)\n            };\n        },\n\n        _measuresInfo: function(measures, rowAxis) {\n            var idx = 0;\n            var length = measures && measures.length;\n\n            var aggregateNames = [];\n            var resultFuncs = {};\n            var formats = {};\n\n            var descriptors = (this.measures || {});\n            var measure;\n            var name;\n\n            for (; idx < length; idx++) {\n                name = measures[idx].descriptor.name;\n                measure = descriptors[name] || {};\n\n                aggregateNames.push(name);\n\n                if (measure.result) {\n                    resultFuncs[name] = measure.result;\n                }\n\n                if (measure.format) {\n                    formats[name] = measure.format;\n                }\n            }\n\n            return {\n                names: aggregateNames,\n                formats: formats,\n                resultFuncs: resultFuncs,\n                rowAxis: rowAxis\n            };\n        },\n\n        _toDataArray: function(map, measuresInfo, rowKeys, columnKeys) {\n            var result = [];\n\n            var aggregates;\n            var name, i, j, k, n;\n            var row, column, columnKey;\n\n            var rowMeasureNamesLength = 1;\n            var rowMeasureNames = [];\n            var columnMeasureNames;\n\n            var rowLength = rowKeys.length || 1;\n            var columnLength = columnKeys.length || 1;\n\n            if (measuresInfo.rowAxis) {\n                rowMeasureNames = measuresInfo.names;\n                rowMeasureNamesLength = rowMeasureNames.length;\n            } else {\n                columnMeasureNames = measuresInfo.names;\n            }\n\n            for (i = 0; i < rowLength; i++) {\n                row = map[rowKeys[i] || ROW_TOTAL_KEY];\n\n                for (n = 0; n < rowMeasureNamesLength; n++) {\n                    if (measuresInfo.rowAxis) {\n                        columnMeasureNames = [rowMeasureNames[n]];\n                    }\n\n                    for (j = 0; j < columnLength; j++) {\n                        columnKey = columnKeys[j] || ROW_TOTAL_KEY;\n                        column = row.items[columnKey];\n\n                        if (columnKey === ROW_TOTAL_KEY) {\n                            aggregates = row.aggregates;\n                        } else {\n                            aggregates = column ? column.aggregates : {};\n                        }\n\n                        for (k = 0; k < columnMeasureNames.length; k++) {\n                            name = columnMeasureNames[k];\n                            this._addData(result, aggregates[name], measuresInfo.formats[name], measuresInfo.resultFuncs[name]);\n                        }\n                    }\n                }\n            }\n\n            return result;\n        },\n\n        _addData: function(result, value, format, resultFunc) {\n            var fmtValue = \"\";\n            var ordinal;\n\n            if (value) {\n                value = resultFunc ? resultFunc(value) : value.accumulator;\n                fmtValue = format ? kendo.format(format, value) : value;\n            }\n\n            ordinal = result.length;\n\n            result[ordinal] = {\n                ordinal: ordinal,\n                value: value || \"\",\n                fmtValue: fmtValue\n            };\n        },\n\n        _matchDescriptors: function(dataItem, descriptor, getters) {\n            var parts;\n            var parentField;\n            var expectedValue;\n\n            var names = descriptor.names;\n            var idx = descriptor.expandedIdx;\n            var value;\n\n            while (idx > 0) {\n                parts = names[--idx].split(\"&\");\n                if (parts.length > 1) {\n                    parentField = parts[0];\n                    expectedValue = parts[1];\n\n                    value = getters[parentField](dataItem);\n                    value = (value !== undefined && value !== null) ? value.toString() : value;\n\n                    if (value != expectedValue) {\n                        return false;\n                    }\n                }\n            }\n            return true;\n        },\n\n        _calculateAggregate: function(measureAggregators, aggregatorContext, totalItem) {\n            var result = {};\n            var state;\n            var name;\n\n            for (var measureIdx = 0; measureIdx < measureAggregators.length; measureIdx++) {\n                name = measureAggregators[measureIdx].descriptor.name;\n                state = totalItem.aggregates[name] || { };\n                state.accumulator = measureAggregators[measureIdx].aggregator(aggregatorContext, state);\n                result[name] = state;\n            }\n\n            return result;\n        },\n\n        _processColumns: function(measureAggregators, descriptors, getters, columns, aggregatorContext, rowTotal, state, updateColumn) {\n            var value;\n            var descriptor;\n            var column;\n            var totalItem;\n            var key, name, parentName, path;\n            var dataItem = aggregatorContext.dataItem;\n            var idx = 0;\n\n            for (; idx < descriptors.length; idx++) {\n                descriptor = descriptors[idx];\n\n                //checks whether the dataItem is relevant to the descriptors\n                if (!this._matchDescriptors(dataItem, descriptor, getters)) {\n                    continue;\n                }\n\n                path = descriptor.names.slice(0, descriptor.expandedIdx).join(\"\");\n                name = descriptor.names[descriptor.expandedIdx];\n\n\n                value = getters[name](dataItem);\n                value = (value !== undefined && value !== null) ? value.toString() : value;\n\n                parentName = name;\n                name = name + \"&\" + value;\n                key = path + name;\n\n                column = columns[key] || {\n                    index: state.columnIndex,\n                    parentName: parentName,\n                    name: name,\n                    directParentName: path.indexOf(\"&\") !== -1 ? path : \"\",\n                    uniquePath: path + parentName,\n                    childrenMap: {},\n                    value: value\n                };\n\n                if (path && columns[path] && !columns[path].childrenMap[path + parentName + \"&\" + value]) {\n                    columns[path].childrenMap[path + parentName + \"&\" + value] = true;\n                }\n\n                totalItem = rowTotal.items[key] || {\n                    aggregates: {}\n                };\n\n                rowTotal.items[key] = {\n                    index: column.index,\n                    aggregates: this._calculateAggregate(measureAggregators, aggregatorContext, totalItem)\n                };\n\n                if (updateColumn) {\n                    if (!columns[key]) {\n                        state.columnIndex++;\n                    }\n                    columns[key] = column;\n                }\n            }\n        },\n\n        _measureAggregators: function(options) {\n            var measureDescriptors = options.measures || [];\n            var measures = this.measures || {};\n            var aggregators = [];\n            var descriptor, measure, idx, length;\n            var defaultAggregate, aggregate;\n\n            if (measureDescriptors.length) {\n                for (idx = 0, length = measureDescriptors.length; idx < length; idx++) {\n                    descriptor = measureDescriptors[idx];\n                    measure = measures[descriptor.name];\n                    defaultAggregate = null;\n\n                    if (measure) {\n                        aggregate = measure.aggregate;\n                        if (typeof aggregate === \"string\") {\n                            defaultAggregate = functions[aggregate.toLowerCase()];\n\n                            if (!defaultAggregate) {\n                                throw new Error(\"There is no such aggregate function\");\n                            }\n\n                            measure.aggregate = defaultAggregate.aggregate || defaultAggregate;\n                            measure.result = defaultAggregate.result;\n                        }\n\n\n                        aggregators.push({\n                            descriptor: descriptor,\n                            caption: measure.caption,\n                            result: measure.result,\n                            aggregator: createAggregateGetter(measure)\n                        });\n                    }\n                }\n            } else {\n                aggregators.push({\n                    descriptor: { name: \"default\" },\n                    caption: \"default\",\n                    aggregator: function() { return 1; }\n                });\n            }\n\n            return aggregators;\n        },\n\n        _buildGetters: function(names) {\n            var result = {};\n            var parts;\n            var name;\n\n            for (var idx = 0; idx < names.length; idx++) {\n                name = names[idx];\n                parts = name.split(\"&\");\n\n                if (parts.length > 1) {\n                    result[parts[0]] = kendo.getter(parts[0], true);\n                } else {\n                    result[name] = kendo.getter(normalizeName(name), true);\n                }\n            }\n\n            return result;\n        },\n\n        _parseDescriptors: function(descriptors) {\n            var parsedDescriptors = parseDescriptors(descriptors);\n            var rootNames = getRootNames(parsedDescriptors.root);\n            var expanded = parsedDescriptors.expanded;\n            var result = [];\n\n            for (var idx = 0; idx < expanded.length; idx++) {\n                result.push(mapNames(expanded[idx].name, rootNames));\n            }\n\n            return {\n                root: rootNames,\n                expanded: result\n            };\n        },\n\n        _filter: function(data, filter) {\n            if (!filter) {\n                return data;\n            }\n\n            var expr;\n            var idx = 0;\n            var filters = filter.filters;\n\n            for (; idx < filters.length; idx++) {\n                expr = filters[idx];\n\n                if (expr.operator === \"in\") {\n                    filters[idx] = this._normalizeFilter(expr);\n                }\n            }\n\n            return new kendo.data.Query(data).filter(filter).data;\n        },\n\n        _normalizeFilter: function(filter) {\n            var value = filter.value.split(\",\");\n            var result = [];\n\n            if (!value.length) {\n                return value;\n            }\n\n            for (var idx = 0; idx < value.length; idx++) {\n                result.push({\n                    field: filter.field,\n                    operator: \"eq\",\n                    value: value[idx]\n                });\n            }\n\n            return {\n                logic: \"or\",\n                filters: result\n            };\n        },\n\n        process: function(data, options) {\n            data = data || [];\n            options = options || {};\n\n            data = this._filter(data, options.filter);\n\n            var measures = options.measures || [];\n\n            var measuresRowAxis = options.measuresAxis === \"rows\";\n\n            var columnDescriptors = options.columns || [];\n            var rowDescriptors = options.rows || [];\n\n            if (!columnDescriptors.length && rowDescriptors.length && (!measures.length || (measures.length && measuresRowAxis))) {\n                columnDescriptors = rowDescriptors;\n                rowDescriptors = [];\n                measuresRowAxis = false;\n            }\n\n            if (!columnDescriptors.length && !rowDescriptors.length) {\n                measuresRowAxis = false;\n            }\n\n            if (!columnDescriptors.length && measures.length) {\n                columnDescriptors = normalizeMembers(options.measures);\n            }\n\n            columnDescriptors = this._parseDescriptors(columnDescriptors);\n            rowDescriptors = this._parseDescriptors(rowDescriptors);\n\n            var aggregatedData = {};\n            var columns = {};\n            var rows = {};\n\n            var rowValue;\n            var state = { columnIndex: 0 };\n\n            var measureAggregators = this._measureAggregators(options);\n\n            var columnGetters = this._buildGetters(columnDescriptors.root);\n            var rowGetters = this._buildGetters(rowDescriptors.root);\n\n            var processed = false;\n\n            var expandedColumns = columnDescriptors.expanded;\n            var expandedRows = rowDescriptors.expanded;\n\n            var dataItem;\n            var aggregatorContext;\n            var hasExpandedRows = expandedRows.length !== 0;\n\n            var rowIdx, rowDescriptor, rowName, rowTotal;\n            var key, path, parentName, value;\n            var columnsInfo, rowsInfo;\n            var length = data.length;\n            var idx = 0;\n\n            if (columnDescriptors.root.length || rowDescriptors.root.length) {\n                processed = true;\n\n                for (idx = 0; idx < length; idx++) {\n                    dataItem = data[idx];\n\n                    aggregatorContext = {\n                        dataItem: dataItem,\n                        index: idx\n                    };\n\n                    rowTotal = aggregatedData[ROW_TOTAL_KEY] || {\n                        items: {},\n                        aggregates: {}\n                    };\n\n                    this._processColumns(measureAggregators, expandedColumns, columnGetters, columns, aggregatorContext, rowTotal, state, !hasExpandedRows);\n\n                    rowTotal.aggregates = this._calculateAggregate(measureAggregators, aggregatorContext, rowTotal);\n                    aggregatedData[ROW_TOTAL_KEY] = rowTotal;\n\n                    for (rowIdx = 0; rowIdx < expandedRows.length; rowIdx++) {\n                        rowDescriptor = expandedRows[rowIdx];\n\n                        if (!this._matchDescriptors(dataItem, rowDescriptor, rowGetters)) {\n                            this._processColumns(measureAggregators, expandedColumns, columnGetters, columns, aggregatorContext, { items: {}, aggregates: {} }, state, true);\n                            continue;\n                        }\n\n                        path = rowDescriptor.names.slice(0, rowDescriptor.expandedIdx).join(\"\");\n                        rowName = rowDescriptor.names[rowDescriptor.expandedIdx];\n\n                        parentName = rowName;\n\n                        rowValue = rowGetters[rowName](dataItem);\n                        rowValue = rowValue !== undefined ? rowValue.toString() : rowValue;\n\n                        rowName = rowName + \"&\" + rowValue;\n                        key = path + rowName;\n\n                        rows[key] = {\n                            uniquePath: path + parentName,\n                            parentName: parentName,\n                            name: rowName,\n                            value: rowValue\n                        };\n\n                        value = aggregatedData[key] || {\n                            items: {},\n                            aggregates: {}\n                        };\n\n                        this._processColumns(measureAggregators, expandedColumns, columnGetters, columns, aggregatorContext, value, state, true);\n\n                        value.aggregates = this._calculateAggregate(measureAggregators, aggregatorContext, value);\n                        aggregatedData[key] = value;\n                    }\n                }\n            }\n\n            if (processed && length) {\n                if (measureAggregators.length > 1 && (!options.columns || !options.columns.length)) {\n                    columnDescriptors = {\n                        root: [],\n                        expanded: []\n                    };\n                }\n\n                columnsInfo = this._asTuples(columns, columnDescriptors, measuresRowAxis ? [] : measureAggregators, options.sort ? options.sort : []);\n                rowsInfo = this._asTuples(rows, rowDescriptors, measuresRowAxis ? measureAggregators : [], options.sort ? options.sort : []);\n\n                columns = columnsInfo.tuples;\n                rows = rowsInfo.tuples;\n\n                aggregatedData = this._toDataArray(aggregatedData, this._measuresInfo(measureAggregators, measuresRowAxis), rowsInfo.keys, columnsInfo.keys);\n            } else {\n                aggregatedData = columns = rows = [];\n            }\n\n            return {\n                axes: {\n                    columns: { tuples: columns },\n                    rows: { tuples: rows }\n                },\n                data: aggregatedData\n            };\n        }\n    });\n\n    var PivotTransport = Class.extend({\n        init: function(options, transport) {\n            this.transport = transport;\n            this.options = transport.options || {};\n\n            if (!this.transport.discover) {\n                if (isFunction(options.discover)) {\n                    this.discover = options.discover;\n                }\n            }\n        },\n        read: function(options) {\n            return this.transport.read(options);\n        },\n        update: function(options) {\n            return this.transport.update(options);\n        },\n        create: function(options) {\n            return this.transport.create(options);\n        },\n        destroy: function(options) {\n            return this.transport.destroy(options);\n        },\n        discover: function(options) {\n            if (this.transport.discover) {\n                return this.transport.discover(options);\n            }\n            options.success({});\n        },\n        catalog: function(val) {\n            var options = this.options || {};\n\n            if (val === undefined) {\n                return (options.connection || {}).catalog;\n\n            }\n\n            var connection = options.connection || {};\n            connection.catalog = val;\n\n            this.options.connection = connection;\n            $.extend(this.transport.options, { connection: connection });\n        },\n        cube: function(val) {\n            var options = this.options || {};\n\n            if (val === undefined) {\n                return (options.connection || {}).cube;\n            }\n\n            var connection = options.connection || {};\n            connection.cube = val;\n\n            this.options.connection = connection;\n            extend(true, this.transport.options, { connection: connection });\n        }\n    });\n\n    var PivotDataSourceV2 = DataSource.extend({\n        init: function(options) {\n\n            var cube = ((options || {}).schema || {}).cube;\n\n            var schema = {\n                axes: identity,\n                cubes: identity,\n                catalogs: identity,\n                measures: identity,\n                dimensions: identity,\n                hierarchies: identity,\n                levels: identity,\n                members: identity\n            };\n\n            if (cube) {\n                this.cubeSchema = $.extend(schema, this._cubeSchema(cube));\n            }\n\n            DataSource.fn.init.call(this, extend(true, {}, {\n                schema: this.cubeSchema\n            }, options));\n\n            var transportOptions = this.options.transport || {};\n\n            if ((this.options.type || \"xmla\").toLowerCase() === \"xmla\") {\n                this._online = true;\n                this.transport = new XmlaTransportV2(transportOptions);\n            } else {\n                this.transport = new PivotTransport(this.options.transport || {}, this.transport);\n            }\n\n            this._columns = normalizeMembers(this.options.columns);\n            this._rows = normalizeMembers(this.options.rows);\n\n            var measures = this.cubeSchema ? this.cubeSchema.measures() : this.options.measures || [];\n\n            if (toString.call(measures) === \"[object Object]\") {\n                this._measuresAxis = measures.axis || \"columns\";\n                measures = measures.values || [];\n            }\n\n            this._measures = normalizeMeasures(measures);\n        },\n\n        options: {\n            serverSorting: true,\n            serverPaging: true,\n            serverFiltering: true,\n            serverGrouping: true,\n            serverAggregates: true\n        },\n\n        axes: function() {\n            return {\n                columns: normalizeAxis(this.columns()),\n                rows: normalizeAxis(this.rows())\n            };\n        },\n\n        catalog: function(val) {\n            if (val === undefined) {\n                return this.transport.catalog();\n            }\n\n            this.transport.catalog(val);\n            this._mergeState({});// clears current state\n            this.read();\n        },\n\n        cube: function(val) {\n            if (val === undefined) {\n                return this.transport.cube();\n            }\n\n            this.transport.cube(val);\n            this._mergeState({});// clears current state\n            this.read();\n        },\n\n        measuresAxis: function() {\n            return this._measuresAxis || \"columns\";\n        },\n\n        fetch: function(callback) {\n            var that = this;\n            if (this._data === undefined || this._data.length === 0) {\n                var fn = function() {\n                    if (isFunction(callback)) {\n                        callback.call(that);\n                    }\n                };\n\n                return this._query().done(fn);\n            }\n        },\n\n        _createSettings: function(axes) {\n            var settings = [];\n            var key;\n            var dimensions = this.cubeSchema.dimensionsSettings();\n            var displayValueFunc = function(item) { return item[this.key]; };\n            var sortValueFunc = function(value) { return value; };\n            for (var i = 0; i < axes.length; i++) {\n                key = axes[i].name[0];\n                // Do not include hierarchy levels. E.g. Poland&Finance (country&sector)\n                // https://github.com/telerik/kendo-ui-core/issues/8386\n                if (key.indexOf(SEPARATOR) > -1) {\n                    continue;\n                }\n                settings.push({\n                    key: key,\n                    displayValue: displayValueFunc.bind({ key: key }),\n                    sortValue: sortValueFunc,\n                    caption: (dimensions[key] || {}).caption || key\n                });\n            }\n            return settings;\n        },\n\n        _cubeSchema: function(cube) {\n            return {\n                dimensionsSettings: function() {\n                    return cube.dimensions;\n                },\n                dimensions: function() {\n                    var result = [];\n                    var dimensions = cube.dimensions;\n\n                    for (var key in dimensions) {\n                        result.push({\n                            name: key,\n                            caption: dimensions[key].caption || key,\n                            uniqueName: key,\n                            defaultHierarchy: key,\n                            type: 1\n                        });\n                    }\n\n                    if (cube.measures) {\n                        result.push({\n                            name: MEASURES,\n                            caption: MEASURES,\n                            uniqueName: MEASURES,\n                            type: 2\n                        });\n                    }\n\n                    return result;\n                },\n                restoreMeasure: function(measures, measure) {\n                    for (var i = 0; i < measures.length; i++) {\n                        if (!measures[i].aggregate) {\n                            measures[i].aggregate = measure.aggregate;\n                            measures[i].value = measure.value;\n                            measures[i].caption = measure.caption;\n                            measures[i].uniqueName = measure.uniqueName;\n                            measures[i].type = 2;\n                        }\n                    }\n                },\n                measures: function() {\n                    var result = [];\n                    var measures = cube.measures;\n\n                    for (var key in measures) {\n                        result.push(createLocalMeasure(measures[key].field, key, measures[key].format, measures[key].aggregate));\n                    }\n\n                    return result;\n                },\n                memberType: function(name) {\n                    var getter = kendo.getter(normalizeName(name), true);\n                    var data = this.options.data || this._pristineData || [];\n                    if (!data.length) {\n                        return null;\n                    }\n\n                    return typeof getter(data[0]);\n                }.bind(this),\n                members: function(name) {\n                    var data = this.options.data || this._pristineData || [];\n                    var result = [];\n                    var distinct = {};\n                    var getter;\n                    var value;\n                    var idx = 0;\n\n                    if (name.indexOf(\"[(ALL)]\") !== -1) {\n                        return [\n                            {\n                                caption: cube.dimensions[name.split(\".\")[0]].caption || name,\n                                levelUniqueName: name,\n                                name: name,\n                                childrenCardinality: 1,\n                                uniqueName: name\n                            }\n                        ];\n                    }\n\n                    getter = kendo.getter(normalizeName(name), true);\n\n                    for (; idx < data.length; idx++) {\n                        value = getter(data[idx]);\n                        if ((value || value === 0 || value === false) && !distinct[value]) {\n                            distinct[value] = true;\n\n                            result.push({\n                                caption: value + \"\",\n                                name: value + \"\",\n                                childrenCardinality: 0,\n                                uniqueName: value\n                            });\n                        }\n                    }\n\n                    return result;\n                }.bind(this)\n            };\n        },\n\n        read: function(data) {\n            const that = this;\n            const isPrevented = that.trigger(REQUESTSTART, { type: READ });\n            const params = that._params(data);\n            const deferred = $.Deferred();\n            if (!isPrevented) {\n                that.trigger(PROGRESS);\n\n                if (that.options.data) {\n                    loadLocalData.call(that, that.options.data, params, deferred);\n                } else if ((this.options.type || \"xmla\").toLowerCase() === \"xmla\") {\n                    that.transport.read({\n                        data: params,\n                        success: function(newDataState) {\n                            that._saveState(newDataState);\n                            that.trigger(REQUESTEND, { response: newDataState, type: READ });\n                            that.trigger(CHANGE);\n                            if (that._preventRefresh) {\n                                that._preventRefresh = false;\n                            }\n                            deferred.resolve();\n                        },\n                        error: function(err) {\n                            that.trigger(ERROR, { error: err });\n                        }\n                    });\n                } else {\n                    that.transport.read({\n                        success: function(data) {\n                            loadLocalData.call(that, data, params, deferred);\n                        },\n                        error: function(err) {\n                            that.trigger(ERROR, { error: err });\n                        }\n                    });\n                }\n            }\n            return deferred.promise();\n        },\n\n        _params: function(data) {\n            var that = this;\n            var options = DataSource.fn._params.call(that, data);\n\n            options = extend({\n                columnAxes: JSON.parse(JSON.stringify(that._columns)),\n                rowAxes: JSON.parse(JSON.stringify(that._rows)),\n                measuresAxis: that.measuresAxis(),\n                measureAxes: that._measures\n            }, options);\n\n            if ((this.options.type || \"\").toLowerCase() === \"xmla\") {\n                options.connection = that.options.transport.connection;\n            }\n\n            if (options.filter) {\n                options.filter = normalizeFilter(options.filter);\n                options.filter = (options.filter || {}).filters;\n            }\n\n            if (options.sort) {\n                options.sort = normalizeSort(options.sort);\n            }\n\n            return options;\n        },\n\n        discover: function(options) {\n            const that = this;\n            const transport = that.transport;\n            const isOdata = that.options.type === \"odata\";\n\n            const converters = {\n                \"schemaMeasures\": that.reader.measures,\n                \"schemaKPIs\": that.reader.kpis,\n                \"schemaDimensions\": that.reader.dimensions,\n                \"schemaHierarchies\": that.reader.hierarchies,\n                \"schemaLevels\": that.reader.levels,\n                \"schemaCubes\": that.reader.cubes,\n                \"schemaCatalogs\": that.reader.catalogs,\n                \"schemaMembers\": that.reader.members\n            };\n\n            if (transport.discover && !isOdata) {\n                return transport.discover(options);\n            }\n\n            return $.Deferred(function(deferred) {\n                transport.discover(extend({\n                    success: function(response) {\n                       response = that.reader.parse(response);\n\n                        if (that._handleCustomErrors(response)) {\n                            return;\n                        }\n\n                        if (converters[options.command]) {\n                            response = converters[options.command](response);\n                        }\n                        deferred.resolve(response);\n                    },\n                    error: function(response, status, error) {\n                        deferred.reject(response);\n                        that.error(response, status, error);\n                    }\n                }, options));\n            }).promise().done(function() {\n                that.trigger(\"schemaChange\");\n            });\n        },\n\n        schemaMeasures: function() {\n            const that = this;\n            return that.discover(\n                {\n                    command: \"schemaMeasures\",\n                    restrictions: {\n                        catalogName: that.transport.catalog(),\n                        cubeName: that.transport.cube()\n                    }\n                });\n        },\n\n        schemaKPIs: function() {\n            const that = this;\n            return that.discover(\n                {\n                    command: \"schemaKPIs\",\n                    restrictions: {\n                        catalogName: that.transport.catalog(),\n                        cubeName: that.transport.cube()\n                    }\n                });\n            },\n\n        schemaDimensions: function() {\n            const that = this;\n            return that.discover(\n                {\n                    command: \"schemaDimensions\",\n                    restrictions: {\n                        catalogName: that.transport.catalog(),\n                        cubeName: that.transport.cube()\n                    }\n                });\n            },\n\n        schemaHierarchies: function(dimensionName) {\n            const that = this;\n            return that.discover({\n                command: \"schemaHierarchies\",\n                restrictions: {\n                    catalogName: that.transport.catalog(),\n                    cubeName: that.transport.cube(),\n                    dimensionUniqueName: dimensionName\n                }\n             });\n         },\n\n        schemaLevels: function(hierarchyName) {\n            const that = this;\n            return that.discover({\n                command: \"schemaLevels\",\n                restrictions: {\n                    catalogName: that.transport.catalog(),\n                    cubeName: that.transport.cube(),\n                    hierarchyUniqueName: hierarchyName\n                }\n            });\n        },\n\n        schemaCubes: function() {\n            const that = this;\n            return that.discover({\n                command: \"schemaCubes\",\n                restrictions: {\n                    catalogName: that.transport.catalog()\n                }\n            });\n        },\n\n\n        schemaCatalogs: function() {\n            const that = this;\n            return that.discover({\n                command: \"schemaCatalogs\"\n            });\n        },\n\n\n        schemaMembers: function(restrictions) {\n            const that = this;\n            return that.discover({\n                command: \"schemaMembers\",\n                restrictions: extend({\n                   catalogName: that.transport.catalog(),\n                   cubeName: that.transport.cube()\n                }, restrictions)\n            });\n        },\n\n        _saveState: function(state) {\n            var that = this;\n\n            that._columnTuples = state.columns;\n            that._rowTuples = state.rows;\n            that._view = that._data = state.data;\n        },\n\n        columns: function(val) {\n            if (val === undefined) {\n                return this._columns;\n            }\n\n            this._columns = normalizeMembers(val);\n            this.read();\n        },\n\n        rows: function(val) {\n            if (val === undefined) {\n                return this._rows;\n            }\n\n            this._rows = normalizeMembers(val);\n\n            this.read();\n        },\n\n        measures: function(val) {\n            if (val === undefined) {\n                return this._measures;\n            }\n\n            this._measures = normalizeMeasures(val);\n\n            this.read();\n        },\n\n        _mergeState: function(options) {\n            options = DataSource.fn._mergeState.call(this, options);\n\n            return options;\n        },\n\n        _query: function(options) {\n            var that = this;\n            var params = extend({}, {\n                sort: that.sort(),\n                measuresAxis: that.measuresAxis(),\n                filter: that.filter()\n            }, options);\n            this._mergeState(params);\n\n            return this.read();\n        },\n    });\n\n    var PivotDataSource = DataSource.extend({\n        init: function(options) {\n            var cube = ((options || {}).schema || {}).cube;\n            var measuresAxis = \"columns\";\n            var measures;\n\n            var schema = {\n                axes: identity,\n                cubes: identity,\n                catalogs: identity,\n                measures: identity,\n                dimensions: identity,\n                hierarchies: identity,\n                levels: identity,\n                members: identity\n            };\n\n            if (cube) {\n                schema = $.extend(schema, this._cubeSchema(cube));\n                this.cubeBuilder = new PivotCubeBuilder(cube);\n            }\n\n            DataSource.fn.init.call(this, extend(true, {}, {\n                schema: schema\n            }, options));\n\n            this.transport = new PivotTransport(this.options.transport || {}, this.transport);\n\n            this._columns = normalizeMembers(this.options.columns);\n            this._rows = normalizeMembers(this.options.rows);\n\n            measures = this.options.measures || [];\n\n            if (toString.call(measures) === \"[object Object]\") {\n                measuresAxis = measures.axis || \"columns\";\n                measures = measures.values || [];\n            }\n\n            this._measures = normalizeMeasures(measures);\n            this._measuresAxis = measuresAxis;\n\n            this._skipNormalize = 0;\n            this._axes = {};\n        },\n\n        _cubeSchema: function(cube) {\n            return {\n                dimensions: function() {\n                    var result = [];\n                    var dimensions = cube.dimensions;\n\n                    for (var key in dimensions) {\n                        result.push({\n                            name: key,\n                            caption: dimensions[key].caption || key,\n                            uniqueName: key,\n                            defaultHierarchy: key,\n                            type: 1\n                        });\n                    }\n\n                    if (cube.measures) {\n                        result.push({\n                            name: MEASURES,\n                            caption: MEASURES,\n                            uniqueName: MEASURES,\n                            type: 2\n                        });\n                    }\n\n                    return result;\n                },\n                hierarchies: function() {\n                    return [];\n                },\n                measures: function() {\n                    var result = [];\n                    var measures = cube.measures;\n\n                    for (var key in measures) {\n                        result.push({\n                            name: key,\n                            caption: key,\n                            uniqueName: key,\n                            aggregator: key\n                        });\n                    }\n\n                    return result;\n                },\n                members: function(response, restrictions) {\n                    var name = restrictions.levelUniqueName || restrictions.memberUniqueName;\n                    var schemaData = this.options.schema.data;\n                    var dataGetter = isFunction(schemaData) ? schemaData : kendo.getter(schemaData, true);\n                    var data = (this.options.data && dataGetter(this.options.data)) || this._rawData || [];\n                    var result = [];\n                    var getter;\n                    var value;\n                    var idx = 0;\n                    var distinct = {};\n\n                    if (name) {\n                        name = name.split(\".\")[0];\n                    }\n\n                    if (!restrictions.treeOp) {\n                        result.push({\n                            caption: cube.dimensions[name].caption || name,\n                            childrenCardinality: \"1\",\n                            dimensionUniqueName: name,\n                            hierarchyUniqueName: name,\n                            levelUniqueName: name,\n                            name: name,\n                            uniqueName: name\n                        });\n\n                        return result;\n                    }\n\n                    getter = kendo.getter(normalizeName(name), true);\n\n                    for (; idx < data.length; idx++) {\n                        value = getter(data[idx]);\n                        if ((value || value === 0) && !distinct[value]) {\n                            distinct[value] = true;\n\n                            result.push({\n                                caption: value,\n                                childrenCardinality: \"0\",\n                                dimensionUniqueName: name,\n                                hierarchyUniqueName: name,\n                                levelUniqueName: name,\n                                name: value,\n                                uniqueName: value\n                            });\n                        }\n                    }\n\n                    return result;\n                }.bind(this)\n            };\n        },\n\n        options: {\n            serverSorting: true,\n            serverPaging: true,\n            serverFiltering: true,\n            serverGrouping: true,\n            serverAggregates: true\n        },\n\n        catalog: function(val) {\n            if (val === undefined) {\n                return this.transport.catalog();\n            }\n\n            this.transport.catalog(val);\n            this._mergeState({});// clears current state\n            this._axes = {};\n            this.data([]);\n        },\n\n        cube: function(val) {\n            if (val === undefined) {\n                return this.transport.cube();\n            }\n\n            this.transport.cube(val);\n            this._axes = {};\n            this._mergeState({});// clears current state\n            this.data([]);\n        },\n\n        axes: function() {\n            return this._axes;\n        },\n\n        columns: function(val) {\n            if (val === undefined) {\n                return this._columns;\n            }\n\n            this._skipNormalize += 1;\n            this._clearAxesData = true;\n\n            this._columns = normalizeMembers(val);\n            this.query({\n                columns: val,\n                rows: this.rowsAxisDescriptors(),\n                measures: this.measures(),\n                sort: this.sort(),\n                filter: this.filter()\n            });\n        },\n\n        rows: function(val) {\n            if (val === undefined) {\n                return this._rows;\n            }\n\n            this._skipNormalize += 1;\n            this._clearAxesData = true;\n\n            this._rows = normalizeMembers(val);\n\n            this.query({\n                columns: this.columnsAxisDescriptors(),\n                rows: val,\n                measures: this.measures(),\n                sort: this.sort(),\n                filter: this.filter()\n            });\n        },\n\n        measures: function(val) {\n            if (val === undefined) {\n                return this._measures;\n            }\n\n            this._skipNormalize += 1;\n            this._clearAxesData = true;\n\n            this.query({\n                columns: this.columnsAxisDescriptors(),\n                rows: this.rowsAxisDescriptors(),\n                measures: normalizeMeasures(val),\n                sort: this.sort(),\n                filter: this.filter()\n            });\n        },\n\n        measuresAxis: function() {\n            return this._measuresAxis || \"columns\";\n        },\n\n        _expandPath: function(path, axis) {\n            var origin = axis === \"columns\" ? \"columns\" : \"rows\";\n            var other = axis === \"columns\" ? \"rows\" : \"columns\";\n\n            var members = normalizeMembers(path);\n            var memberToExpand = getName(members[members.length - 1]);\n\n            this._lastExpanded = origin;\n\n            members = descriptorsForMembers(this.axes()[origin], members, this.measures());\n\n            for (var idx = 0; idx < members.length; idx++) {\n                var memberName = getName(members[idx]);\n\n                if (memberName === memberToExpand) {\n                    if (members[idx].expand) {\n                        return;\n                    }\n                    members[idx].expand = true;\n                } else {\n                    members[idx].expand = false;\n                }\n            }\n\n            var descriptors = {};\n            descriptors[origin] = members;\n            descriptors[other] = this._descriptorsForAxis(other);\n\n            this._query(descriptors);\n        },\n\n        _descriptorsForAxis: function(axis) {\n            var axes = this.axes();\n            var descriptors = this[axis]() || [];\n\n            if (axes && axes[axis] && axes[axis].tuples && axes[axis].tuples[0]) {\n                descriptors = descriptorsForAxes(axes[axis].tuples || []);\n            }\n            return descriptors;\n        },\n\n        columnsAxisDescriptors: function() {\n            return this._descriptorsForAxis(\"columns\");\n        },\n\n        rowsAxisDescriptors: function() {\n            return this._descriptorsForAxis(\"rows\");\n        },\n\n        _process: function(data, e) {\n            this._view = data;\n\n            e = e || {};\n            e.items = e.items || this._view;\n\n            this.trigger(CHANGE, e);\n        },\n\n        _query: function(options) {\n            var that = this;\n\n            if (!options) {\n                this._skipNormalize += 1;\n                this._clearAxesData = true;\n            }\n\n            return that.query(extend({}, {\n                page: that.page(),\n                pageSize: that.pageSize(),\n                sort: that.sort(),\n                filter: that.filter(),\n                group: that.group(),\n                aggregate: that.aggregate(),\n                columns: this.columnsAxisDescriptors(),\n                rows: this.rowsAxisDescriptors(),\n                measures: this.measures()\n            }, options));\n        },\n\n        query: function(options) {\n            var state = this._mergeState(options);\n\n            if (this._data.length && this.cubeBuilder) {\n                this._params(state);\n                this._updateLocalData(this._pristineData);\n\n                return $.Deferred().resolve().promise();\n            }\n\n            return this.read(state);\n        },\n\n        _mergeState: function(options) {\n            options = DataSource.fn._mergeState.call(this, options);\n\n            if (options !== undefined) {\n                this._measures = normalizeMeasures(options.measures);\n\n                if (options.columns) {\n                    options.columns = normalizeMembers(options.columns);\n                } else if (!options.columns) {\n                    this._columns = [];\n                }\n\n                if (options.rows) {\n                    options.rows = normalizeMembers(options.rows);\n                } else if (!options.rows) {\n                    this._rows = [];\n                }\n            }\n            return options;\n        },\n\n        filter: function(val) {\n            if (val === undefined) {\n                return this._filter;\n            }\n\n            this._skipNormalize += 1;\n            this._clearAxesData = true;\n            this._query({ filter: val, page: 1 });\n        },\n\n        expandColumn: function(path) {\n            this._expandPath(path, \"columns\");\n        },\n\n        expandRow: function(path) {\n            this._expandPath(path, \"rows\");\n        },\n\n        success: function(data) {\n            var originalData;\n            if (this.cubeBuilder) {\n                originalData = (this.reader.data(data) || []).slice(0);\n            }\n            DataSource.fn.success.call(this, data);\n            if (originalData) {\n                this._pristineData = originalData;\n            }\n        },\n\n        _processResult: function(data, axes) {\n            if (this.cubeBuilder) {\n                var processedData = this.cubeBuilder.process(data, this._requestData);\n\n                data = processedData.data;\n                axes = processedData.axes;\n            }\n\n            var columnIndexes, rowIndexes;\n            var tuples, resultAxis, measures, axisToSkip;\n            var columnDescriptors = this.columns();\n            var rowDescriptors = this.rows();\n            var hasColumnTuples = axes.columns && axes.columns.tuples;\n\n            if (!columnDescriptors.length && rowDescriptors.length && hasColumnTuples && (this._rowMeasures().length || !this.measures().length)) {\n                axes = {\n                    columns: {},\n                    rows: axes.columns\n                };\n            }\n\n            if (!columnDescriptors.length && !rowDescriptors.length && this.measuresAxis() === \"rows\" && hasColumnTuples) {\n                axes = {\n                    columns: {},\n                    rows: axes.columns\n                };\n            }\n\n            this._axes = {\n                columns: normalizeAxis(this._axes.columns),\n                rows: normalizeAxis(this._axes.rows)\n            };\n\n            axes = {\n                columns: normalizeAxis(axes.columns),\n                rows: normalizeAxis(axes.rows)\n            };\n\n            columnIndexes = this._normalizeTuples(axes.columns.tuples, this._axes.columns.tuples, columnDescriptors, this._columnMeasures());\n            rowIndexes = this._normalizeTuples(axes.rows.tuples, this._axes.rows.tuples, rowDescriptors, this._rowMeasures());\n\n            if (this._skipNormalize > 0) {\n                this._skipNormalize -= 1;\n            }\n\n            if (!this.cubeBuilder) {\n                data = this._normalizeData({\n                    columnsLength: axes.columns.tuples.length,\n                    rowsLength: axes.rows.tuples.length,\n                    columnIndexes: columnIndexes,\n                    rowIndexes: rowIndexes,\n                    data: data\n                });\n            }\n\n            if (this._lastExpanded == \"rows\") {\n                tuples = axes.columns.tuples;\n                measures = this._columnMeasures();\n                resultAxis = validateAxis(axes.columns, this._axes.columns, measures);\n\n                if (resultAxis) {\n                    axisToSkip = \"columns\";\n                    axes.columns = resultAxis;\n                    adjustDataByColumn(tuples, resultAxis.tuples, axes.rows.tuples.length, measures, data);\n                    if (!this.cubeBuilder) {\n                        data = this._normalizeData({\n                            columnsLength: membersCount(axes.columns.tuples, measures),\n                            rowsLength: axes.rows.tuples.length,\n                            data: data\n                        });\n                    }\n                }\n            } else if (this._lastExpanded == \"columns\") {\n                tuples = axes.rows.tuples;\n                measures = this._rowMeasures();\n                resultAxis = validateAxis(axes.rows, this._axes.rows, measures);\n\n                if (resultAxis) {\n                    axisToSkip = \"rows\";\n                    axes.rows = resultAxis;\n                    adjustDataByRow(tuples, resultAxis.tuples, axes.columns.tuples.length, measures, data);\n\n                    if (!this.cubeBuilder) {\n                        data = this._normalizeData({\n                            columnsLength: membersCount(axes.rows.tuples, measures),\n                            rowsLength: axes.columns.tuples.length,\n                            data: data\n                        });\n                    }\n                }\n            }\n\n            this._lastExpanded = null;\n\n            var result = this._mergeAxes(axes, data, axisToSkip);\n            this._axes = result.axes;\n\n            return result.data;\n        },\n\n        _readData: function(data) {\n            var axes = this.reader.axes(data);\n            var newData = this.reader.data(data);\n\n            if (this.cubeBuilder) {\n                this._rawData = newData;\n            }\n\n            return this._processResult(newData, axes);\n        },\n\n        _createTuple: function(tuple, measure, buildRoot) {\n            var members = tuple.members;\n            var length = members.length;\n            var root = { members: [] };\n            var levelName, levelNum;\n            var name, parentName;\n            var hasChildren;\n            var hierarchy;\n            var caption;\n            var member;\n            var idx = 0;\n\n            if (measure) {\n                length -= 1;\n            }\n\n            for (; idx < length; idx++) {\n                member = members[idx];\n                levelNum = Number(member.levelNum);\n\n                name = member.name;\n                parentName = member.parentName;\n                caption = member.caption || name;\n                hasChildren = member.hasChildren;\n                hierarchy = member.hierarchy;\n                levelName = member.levelName;\n\n                if (buildRoot) {\n                    caption = \"All\";\n                    if (levelNum === 0) {\n                        parentName = member.name;\n                    } else {\n                        levelNum -= 1;\n                    }\n\n                    hasChildren = true;\n                    name = hierarchy = levelName = parentName;\n                }\n\n                root.members.push({\n                    name: name,\n                    children: [],\n                    caption: caption,\n                    levelName: levelName,\n                    levelNum: levelNum.toString(),\n                    hasChildren: hasChildren,\n                    hierarchy: hierarchy,\n                    parentName: !buildRoot ? parentName : \"\"\n                });\n            }\n\n            if (measure) {\n                root.members.push({\n                    name: measure.name,\n                    children: []\n                });\n            }\n\n            return root;\n        },\n\n        _hasRoot: function(target, source, descriptors) {\n            if (source.length) {\n                return findExistingTuple(source, target).tuple;\n            }\n\n            var members = target.members;\n            var member;\n            var descriptor;\n\n            var isRoot = true;\n            var levelNum;\n\n            for (var idx = 0, length = members.length; idx < length; idx++) {\n                member = members[idx];\n                levelNum = Number(member.levelNum) || 0;\n                descriptor = descriptors[idx];\n\n                if (!(levelNum === 0 || (descriptor && member.name === getName(descriptor)))) {\n                    isRoot = false;\n                    break;\n                }\n            }\n\n            return isRoot;\n        },\n\n        _mergeAxes: function(sourceAxes, data, axisToSkip) {\n            var columnMeasures = this._columnMeasures();\n            var rowMeasures = this._rowMeasures();\n            var axes = this.axes();\n            var startIndex, tuples;\n\n            var oldRowsLength = membersCount(axes.rows.tuples, rowMeasures);\n            var newRowsLength = sourceAxes.rows.tuples.length;\n\n            var oldColumnsLength = membersCount(axes.columns.tuples, columnMeasures);\n            var newColumnsLength = sourceAxes.columns.tuples.length;\n\n            if (axisToSkip == \"columns\") {\n                newColumnsLength = oldColumnsLength;\n                tuples = sourceAxes.columns.tuples;\n            } else {\n                tuples = parseSource(sourceAxes.columns.tuples, columnMeasures);\n                data = prepareDataOnColumns(tuples, data);\n            }\n\n            var mergedColumns = mergeTuples(axes.columns.tuples, tuples, columnMeasures);\n\n            if (axisToSkip == \"rows\") {\n                newRowsLength = membersCount(sourceAxes.rows.tuples, rowMeasures);\n                tuples = sourceAxes.rows.tuples;\n            } else {\n                tuples = parseSource(sourceAxes.rows.tuples, rowMeasures);\n                data = prepareDataOnRows(tuples, data);\n            }\n            var mergedRows = mergeTuples(axes.rows.tuples, tuples, rowMeasures);\n\n            axes.columns.tuples = mergedColumns.tuples;\n            axes.rows.tuples = mergedRows.tuples;\n\n            if (oldColumnsLength !== membersCount(axes.columns.tuples, columnMeasures)) {\n                //columns are expanded\n                startIndex = mergedColumns.index + findDataIndex(mergedColumns.parsedRoot, mergedColumns.memberIndex, columnMeasures);\n                var offset = oldColumnsLength + newColumnsLength;\n                data = this._mergeColumnData(data, startIndex, newRowsLength, newColumnsLength, offset);\n            } else if (oldRowsLength !== membersCount(axes.rows.tuples, rowMeasures)) {\n                //rows are expanded\n                startIndex = mergedRows.index + findDataIndex(mergedRows.parsedRoot, mergedRows.memberIndex, rowMeasures);\n                data = this._mergeRowData(data, startIndex, newRowsLength, newColumnsLength);\n            }\n\n            if (axes.columns.tuples.length === 0 && axes.rows.tuples.length === 0) {\n                data = [];\n            }\n\n            return {\n                axes: axes,\n                data: data\n            };\n        },\n\n        _mergeColumnData: function(newData, columnIndex, rowsLength, columnsLength, offset) {\n            var data = this.data().toJSON();\n            var rowIndex, index, drop = 0, toAdd;\n            var columnMeasures = Math.max(this._columnMeasures().length, 1);\n\n            rowsLength = Math.max(rowsLength, 1);\n\n            if (data.length > 0) {\n                //if there is already data, drop the first new data item\n                drop = columnMeasures;\n                offset -= columnMeasures;\n            }\n\n            for (rowIndex = 0; rowIndex < rowsLength; rowIndex++) {\n                index = columnIndex + (rowIndex * offset);\n                toAdd = newData.splice(0, columnsLength);\n                toAdd.splice(0, drop);\n                [].splice.apply(data, [index, 0].concat(toAdd));\n            }\n\n            return data;\n        },\n\n        _mergeRowData: function(newData, rowIndex, rowsLength, columnsLength) {\n            var data = this.data().toJSON();\n            var idx, dataIndex, toAdd;\n            var rowMeasures = Math.max(this._rowMeasures().length, 1);\n\n            columnsLength = Math.max(columnsLength, 1);\n            if (data.length > 0) {\n                //if there is already data, drop the first new data item\n                rowsLength -= rowMeasures;\n                newData.splice(0, columnsLength * rowMeasures);\n            }\n\n            for (idx = 0; idx < rowsLength; idx++) {\n                toAdd = newData.splice(0, columnsLength);\n                dataIndex = (rowIndex * columnsLength) + (idx * columnsLength);\n                [].splice.apply(data, [dataIndex, 0].concat(toAdd));\n            }\n\n            return data;\n        },\n\n        _columnMeasures: function() {\n            var measures = this.measures();\n            var columnMeasures = [];\n\n            if (this.measuresAxis() === \"columns\") {\n                if (this.columns().length === 0) {\n                    columnMeasures = measures;\n                } else if (measures.length > 1) {\n                    columnMeasures = measures;\n                }\n            }\n\n            return columnMeasures;\n        },\n\n        _rowMeasures: function() {\n            var measures = this.measures();\n            var rowMeasures = [];\n\n            if (this.measuresAxis() === \"rows\") {\n                if (this.rows().length === 0) {\n                    rowMeasures = measures;\n                } else if (measures.length > 1) {\n                    rowMeasures = measures;\n                }\n            }\n\n            return rowMeasures;\n        },\n\n        _updateLocalData: function(data, state) {\n            if (this.cubeBuilder) {\n                if (state) {\n                    this._requestData = state;\n                }\n                data = this._processResult(data);\n            }\n\n            this._data = this._observe(data);\n\n            this._ranges = [];\n            this._addRange(this._data);\n\n            this._total = this._data.length;\n            this._pristineTotal = this._total;\n            this._process(this._data);\n        },\n\n        data: function(value) {\n            var that = this;\n            if (value !== undefined) {\n                this._pristineData = value.slice(0);\n                this._updateLocalData(value, {\n                        columns: this.columns(),\n                        rows: this.rows(),\n                        measures: this.measures()\n                    });\n            } else {\n                return that._data;\n            }\n        },\n\n        _normalizeTuples: function(tuples, source, descriptors, measures) {\n            var length = measures.length || 1;\n            var idx = 0;\n\n            var roots = [];\n            var indexes = {};\n            var measureIdx = 0;\n            var tuple, memberIdx, last;\n\n            if (!tuples.length) {\n                return;\n            }\n\n            if (this._skipNormalize <= 0 && !this._hasRoot(tuples[0], source, descriptors)) {\n                this._skipNormalize = 0;\n                for (; idx < length; idx++) {\n                    roots.push(this._createTuple(tuples[0], measures[idx], true));\n                    indexes[idx] = idx;\n                }\n\n                tuples.splice.apply(tuples, [0, tuples.length].concat(roots).concat(tuples));\n                idx = length;\n            }\n\n            if (measures.length) {\n                last = tuple = tuples[idx];\n                memberIdx = tuple.members.length - 1;\n\n                while (tuple) {\n                    if (measureIdx >= length) {\n                        measureIdx = 0;\n                    }\n\n                    if (tuple.members[memberIdx].name !== measures[measureIdx].name) {\n                        tuples.splice(idx, 0, this._createTuple(tuple, measures[measureIdx]));\n                        indexes[idx] = idx;\n                    }\n\n                    idx += 1;\n                    measureIdx += 1;\n                    tuple = tuples[idx];\n\n                    if (length > measureIdx && (!tuple || tupleName(last, memberIdx - 1) !== tupleName(tuple, memberIdx - 1))) {\n                        for (; measureIdx < length; measureIdx++) {\n                            tuples.splice(idx, 0, this._createTuple(last, measures[measureIdx]));\n                            indexes[idx] = idx;\n                            idx += 1;\n                        }\n                        tuple = tuples[idx];\n                    }\n                    last = tuple;\n                }\n            }\n\n            return indexes;\n        },\n\n        _addMissingDataItems: function(result, metadata) {\n            while (metadata.rowIndexes[parseInt(result.length / metadata.columnsLength, 10)] !== undefined) {\n                for (var idx = 0; idx < metadata.columnsLength; idx++) {\n                    result = addEmptyDataItem(result);\n                }\n            }\n\n            while (metadata.columnIndexes[result.length % metadata.columnsLength] !== undefined) {\n                result = addEmptyDataItem(result);\n            }\n\n            return result;\n        },\n\n        _normalizeOrdinals: function(result, dataItem, metadata) {\n            var lastOrdinal = metadata.lastOrdinal;\n\n            if (!dataItem) {\n                return addEmptyDataItem(result);\n            }\n\n            if ((dataItem.ordinal - lastOrdinal) > 1) {\n                lastOrdinal += 1;\n\n                while (lastOrdinal < dataItem.ordinal && result.length < metadata.length) {\n                    result = this._addMissingDataItems(addEmptyDataItem(result), metadata);\n                    lastOrdinal += 1;\n                }\n            }\n\n            dataItem.ordinal = result.length;\n            result[result.length] = dataItem;\n\n            return result;\n        },\n\n        _normalizeData: function(options) {\n            var data = options.data;\n            var dataIdx = 0;\n            var dataItem;\n            var result = [];\n            var lastOrdinal;\n            var length;\n\n            options.lastOrdinal = 0;\n            options.columnIndexes = options.columnIndexes || {};\n            options.rowIndexes = options.rowIndexes || {};\n            options.columnsLength = options.columnsLength || 1;\n            options.rowsLength = options.rowsLength || 1;\n            options.length = options.columnsLength * options.rowsLength;\n            length = options.length;\n\n            if (data.length === length) {\n                return data;\n            }\n\n            while (result.length < length) {\n                dataItem = data[dataIdx++];\n                if (dataItem) {\n                    lastOrdinal = dataItem.ordinal;\n                }\n\n                result = this._normalizeOrdinals(this._addMissingDataItems(result, options), dataItem, options);\n\n                options.lastOrdinal = lastOrdinal;\n            }\n\n            return result;\n        },\n\n        discover: function(options, converter) {\n            var that = this,\n                transport = that.transport;\n\n            return $.Deferred(function(deferred) {\n                transport.discover(extend({\n                    success: function(response) {\n                       response = that.reader.parse(response);\n\n                        if (that._handleCustomErrors(response)) {\n                            return;\n                        }\n\n                        if (converter) {\n                            response = converter(response);\n                        }\n                        deferred.resolve(response);\n                    },\n                    error: function(response, status, error) {\n                        deferred.reject(response);\n                        that.error(response, status, error);\n                    }\n                }, options));\n            }).promise().done(function() {\n                that.trigger(\"schemaChange\");\n            });\n        },\n\n        schemaMeasures: function() {\n            var that = this;\n\n            return that.discover({\n                data: {\n                    command: \"schemaMeasures\",\n                    restrictions: {\n                        catalogName: that.transport.catalog(),\n                        cubeName: that.transport.cube()\n                    }\n                }\n            }, function(response) {\n                return that.reader.measures(response);\n            });\n        },\n\n        schemaKPIs: function() {\n            var that = this;\n\n            return that.discover({\n                data: {\n                    command: \"schemaKPIs\",\n                    restrictions: {\n                        catalogName: that.transport.catalog(),\n                        cubeName: that.transport.cube()\n                    }\n                }\n            }, function(response) {\n                return that.reader.kpis(response);\n            });\n        },\n\n        schemaDimensions: function() {\n            var that = this;\n\n            return that.discover({\n                data: {\n                    command: \"schemaDimensions\",\n                    restrictions: {\n                        catalogName: that.transport.catalog(),\n                        cubeName: that.transport.cube()\n                    }\n                }\n            }, function(response) {\n                return that.reader.dimensions(response);\n            });\n        },\n\n        schemaHierarchies: function(dimensionName) {\n            var that = this;\n\n            return that.discover({\n                data: {\n                    command: \"schemaHierarchies\",\n                    restrictions: {\n                        catalogName: that.transport.catalog(),\n                        cubeName: that.transport.cube(),\n                        dimensionUniqueName: dimensionName\n                    }\n                }\n            }, function(response) {\n                return that.reader.hierarchies(response);\n            });\n        },\n\n        schemaLevels: function(hierarchyName) {\n            var that = this;\n\n            return that.discover({\n                data: {\n                    command: \"schemaLevels\",\n                    restrictions: {\n                        catalogName: that.transport.catalog(),\n                        cubeName: that.transport.cube(),\n                        hierarchyUniqueName: hierarchyName\n                    }\n                }\n            }, function(response) {\n                return that.reader.levels(response);\n            });\n        },\n\n        schemaCubes: function() {\n            var that = this;\n\n            return that.discover({\n                data: {\n                    command: \"schemaCubes\",\n                    restrictions: {\n                        catalogName: that.transport.catalog()\n                    }\n                }\n            }, function(response) {\n                return that.reader.cubes(response);\n            });\n        },\n\n        schemaCatalogs: function() {\n            var that = this;\n\n            return that.discover({\n                data: {\n                    command: \"schemaCatalogs\"\n                }\n            }, function(response) {\n                return that.reader.catalogs(response);\n            });\n        },\n\n        schemaMembers: function(restrictions) {\n            var that = this;\n            var success = (function(restrictions) {\n                return function(response) {\n                    return that.reader.members(response, restrictions);\n                };\n            }(restrictions));\n\n            return that.discover({\n                data: {\n                    command: \"schemaMembers\",\n                    restrictions: extend({\n                       catalogName: that.transport.catalog(),\n                       cubeName: that.transport.cube()\n                   }, restrictions)\n                }\n            }, success);\n        },\n\n        _params: function(data) {\n            if (this._clearAxesData) {\n                this._axes = {};\n                this._data = this._observe([]);\n                this._clearAxesData = false;\n                this.trigger(STATERESET);\n            }\n\n            var options = DataSource.fn._params.call(this, data);\n\n            options = extend({\n                measures: this.measures(),\n                measuresAxis: this.measuresAxis(),\n                columns: this.columns(),\n                rows: this.rows()\n            }, options);\n\n            if (this.cubeBuilder) {\n                this._requestData = options;\n            }\n\n            return options;\n        }\n    });\n\n    function flatColumns(columns) {\n        var result = [];\n        for (var idx = 0; idx < columns.length; idx++) {\n            result.push(columns[idx]);\n            if (columns[idx].children) {\n                result = result.concat(flatColumns(columns[idx].children));\n            }\n        }\n\n        return result;\n    }\n\n    function sortItemsTree(field, items, sortFunction) {\n        for (var i = 0; i < items.length; i++) {\n            if (items[i].children && items[i].children.length) {\n                sortItemsTree(field, items[i].children, sortFunction);\n            }\n        }\n        if (items[0].parentName != field) {\n            return;\n        }\n        items = items.sort(sortFunction);\n    }\n\n    function fillSortTree(items, map) {\n        for (var i = 0; i < items.length; i++) {\n            var currentItem = map[items[i].name];\n\n            if (!$.isEmptyObject(currentItem.childrenMap)) {\n                items[i].children = [];\n                for (var name in currentItem.childrenMap) {\n                    items[i].children.push($.extend({}, { name: name, parentName: map[name].parentName }));\n                }\n\n                fillSortTree(items[i].children, map);\n            }\n        }\n    }\n\n    function addEmptyDataItem(result) {\n        result[result.length] = { value: \"\", fmtValue: \"\", ordinal: result.length };\n        return result;\n    }\n\n    function validateAxis(newAxis, axis, measures) {\n        if (newAxis.tuples.length < membersCount(axis.tuples, measures)) {\n\n            return axis;\n        }\n\n        return;\n    }\n\n    function adjustDataByColumn(sourceTuples, targetTuples, rowsLength, measures, data) {\n        var columnIdx, rowIdx, dataIdx;\n        var columnsLength = sourceTuples.length;\n        var targetColumnsLength = membersCount(targetTuples, measures);\n        var measuresLength = measures.length || 1;\n\n        for (rowIdx = 0; rowIdx < rowsLength; rowIdx++) {\n            for (columnIdx = 0; columnIdx < columnsLength; columnIdx++) {\n                dataIdx = tupleIndex(sourceTuples[columnIdx], targetTuples) * measuresLength;\n                dataIdx += columnIdx % measuresLength;\n\n                data[rowIdx * columnsLength + columnIdx].ordinal = rowIdx * targetColumnsLength + dataIdx;\n            }\n        }\n    }\n\n    function adjustDataByRow(sourceTuples, targetTuples, columnsLength, measures, data) {\n        var columnIdx, rowIdx, dataIdx;\n        var rowsLength = sourceTuples.length;\n        var measuresLength = measures.length || 1;\n\n        for (rowIdx = 0; rowIdx < rowsLength; rowIdx++) {\n            dataIdx = tupleIndex(sourceTuples[rowIdx], targetTuples);\n            dataIdx *= measuresLength;\n            dataIdx += rowIdx % measuresLength;\n\n            for (columnIdx = 0; columnIdx < columnsLength; columnIdx++) {\n                data[rowIdx * columnsLength + columnIdx].ordinal = dataIdx * columnsLength + columnIdx;\n            }\n        }\n    }\n\n    function tupleIndex(tuple, collection) {\n        return findExistingTuple(collection, tuple).index;\n    }\n\n    function membersCount(tuples, measures) {\n        if (!tuples.length) {\n            return 0;\n        }\n\n        var queue = tuples.slice();\n        var current = queue.shift();\n        var result = 1;\n\n        while (current) {\n            if (current.members) {\n                [].push.apply(queue, current.members);\n            } else if (current.children) {\n                if (!current.measure) {\n                    result += current.children.length;\n                }\n                [].push.apply(queue, current.children);\n            }\n\n            current = queue.shift();\n        }\n\n        if (measures.length) {\n            result = result * measures.length;\n        }\n\n        return result;\n    }\n\n    function normalizeAxis(axis) {\n        if (!axis) {\n            axis = {\n                tuples: []\n            };\n        }\n\n        if (!axis.tuples) {\n            axis.tuples = [];\n        }\n\n        return axis;\n    }\n\n    function findDataIndex(tuple, memberIndex, measures) {\n        if (!tuple) {\n            return 0;\n        }\n\n        var measuresLength = Math.max(measures.length, 1);\n        var tuples = tuple.members.slice(0, memberIndex);\n        var current = tuples.shift();\n\n        //the initial value is equal to the total number of measures\n        //as the measures member is not extracted from the members of the starting tuple\n        //but should be calculated in the final result\n        var counter = measuresLength;\n\n        while (current) {\n            if (current.name === MEASURES) {\n                //subtract 1 as the measures member has been already counted as a single standard member\n                //but we are interested in the total number of measures instead\n                counter += (measuresLength - 1);\n            } else if (current.children) {\n                //is member\n                [].push.apply(tuples, current.children);\n            } else {\n                //is tuple\n                counter ++;\n                [].push.apply(tuples, current.members);\n            }\n\n            current = tuples.shift();\n        }\n\n        return counter;\n    }\n\n    function mergeTuples(target, source, measures) {\n        if (!source[0]) {\n            return {\n                parsedRoot: null,\n                tuples: target,\n                memberIndex: 0,\n                index: 0\n            };\n        }\n\n        var result = findExistingTuple(target, source[0]);\n\n        if (!result.tuple) {\n            return {\n                parsedRoot: null,\n                tuples: source,\n                memberIndex: 0,\n                index: 0\n            };\n        }\n\n        var targetMembers = result.tuple.members;\n        var sourceMembers = source[0].members;\n        var memberIndex = -1;\n\n        if (targetMembers.length !== sourceMembers.length) {\n            return {\n                parsedRoot: null,\n                tuples: source,\n                memberIndex: 0,\n                index: 0\n            };\n        }\n\n        for (var idx = 0, length = targetMembers.length; idx < length; idx++) {\n            if (!targetMembers[idx].measure && sourceMembers[idx].children[0]) {\n                if (memberIndex == -1 && sourceMembers[idx].children.length) {\n                    memberIndex = idx;\n                }\n\n                targetMembers[idx].children = sourceMembers[idx].children;\n            }\n        }\n\n        measures = Math.max(measures.length, 1);\n\n        return {\n            parsedRoot: result.tuple,\n            index: result.index * measures,\n            memberIndex: memberIndex,\n            tuples: target\n        };\n    }\n\n    function equalTuples(first, second) {\n        var equal = true;\n        var idx, length;\n\n        first = first.members;\n        second = second.members;\n\n        for (idx = 0, length = first.length; idx < length; idx++) {\n            if (first[idx].measure || second[idx].measure) {\n                continue;\n            }\n\n            equal = equal && (getName(first[idx]) === getName(second[idx]));\n        }\n\n        return equal;\n    }\n\n    function findExistingTuple(tuples, toFind) {\n        var idx, length, tuple, found, counter = 0;\n        var memberIndex, membersLength, member;\n\n        for (idx = 0, length = tuples.length; idx < length; idx++) {\n            tuple = tuples[idx];\n            if (equalTuples(tuple, toFind)) {\n                return {\n                    tuple: tuple,\n                    index: counter\n                };\n            }\n\n            counter ++;\n\n            for (memberIndex = 0, membersLength = tuple.members.length; memberIndex < membersLength; memberIndex++) {\n                member = tuple.members[memberIndex];\n                if (member.measure) {\n                    //counter += member.children.length;\n                    continue;\n                }\n                found = findExistingTuple(member.children, toFind);\n                counter += found.index;\n                if (found.tuple) {\n                    return {\n                        tuple: found.tuple,\n                        index: counter\n                    };\n                }\n            }\n        }\n\n        return {\n            index: counter\n        };\n    }\n\n    function addMembers(members, map) {\n        var member, i, len, path = \"\";\n        for (i = 0, len = members.length; i < len; i++) {\n            member = members[i];\n            path += member.name;\n            if (!map[path]) {\n                map[path] = member;\n            }\n        }\n    }\n\n\n    function findParentMember(tuple, map) {\n        var members = tuple.members;\n        var i, len, member, path = \"\";\n        var parentPath = \"\";\n        var parentMember;\n\n        for (i = 0, len = members.length; i < len; i++) {\n            member = members[i];\n            if (parentMember) {\n                if (map[path + member.name]) {\n                    path += member.name;\n                    parentMember = map[path];\n                    continue;\n                } else if (map[path + member.parentName]) {\n                    return map[path + member.parentName];\n                } else if (map[parentPath + member.parentName]) {\n                    return map[parentPath + member.parentName];\n                } else {\n                    return map[parentPath];\n                }\n            }\n\n            path += member.name;\n            parentMember = map[member.parentName];\n\n            if (!parentMember) {\n                parentMember = map[path];\n                if (!parentMember) {\n                    return null;\n                }\n            }\n\n            if (parentMember) {\n                parentPath += parentMember.name;\n            }\n        }\n\n        return parentMember;\n    }\n\n    function measurePosition(tuple, measures) {\n        if (measures.length === 0) {\n            return -1;\n        }\n\n        var measure = measures[0];\n        var members = tuple.members;\n        for (var idx = 0, len = members.length; idx < len; idx ++) {\n            if (members[idx].name == measure.name) {\n                return idx;\n            }\n        }\n    }\n\n    function normalizeTupleMeasures(tuple, index) {\n        if (index < 0) {\n            return;\n        }\n        var member = {\n            name: MEASURES,\n            measure: true,\n            children: [\n                $.extend({ members: [], dataIndex: tuple.dataIndex }, tuple.members[index])\n            ]\n        };\n        tuple.members.splice(index, 1, member);\n        tuple.dataIndex = undefined;\n    }\n\n    function parseSource(tuples, measures) {\n        if (tuples.length < 1) {\n            return [];\n        }\n        var result = [];\n        var map = { };\n        var measureIndex = measurePosition(tuples[0], measures);\n\n        for (var i = 0; i < tuples.length; i++) {\n            var tuple = tuples[i];\n\n            //keep the old data index of the tuple\n            tuple.dataIndex = i;\n\n            normalizeTupleMeasures(tuple, measureIndex);\n            var parentMember = findParentMember(tuple, map);\n\n            if (parentMember) {\n                if (measureIndex < 0 || !parentMember.measure) {\n                    parentMember.children.push(tuple);\n                } else {\n                    parentMember.children.push(tuple.members[measureIndex].children[0]);\n                }\n            } else {\n                result.push(tuple);\n            }\n\n            addMembers(tuple.members, map);\n        }\n\n        return result;\n    }\n\n    function prepareDataOnRows(tuples, data) {\n        if (!tuples || !tuples.length) {\n            return data;\n        }\n\n        var result = [];\n        var indices = buildDataIndices(tuples);\n        var rowsLength = indices.length;\n        var columnsLength = Math.max(data.length / rowsLength, 1);\n        var rowIndex, columnIndex, targetIndex, sourceIndex;\n        var calcIndex;\n\n        for (rowIndex = 0; rowIndex < rowsLength; rowIndex++) {\n            targetIndex = columnsLength * rowIndex;\n            sourceIndex = columnsLength * indices[rowIndex];\n            for (columnIndex = 0; columnIndex < columnsLength; columnIndex++) {\n                calcIndex = parseInt(sourceIndex + columnIndex, 10);\n                result[parseInt(targetIndex + columnIndex, 10)] = data[calcIndex] || { value: \"\", fmtValue: \"\", ordinal: calcIndex };\n            }\n        }\n\n        return result;\n    }\n\n    function prepareDataOnColumns(tuples, data) {\n        if (!tuples || !tuples.length) {\n            return data;\n        }\n\n        var result = [];\n        var indices = buildDataIndices(tuples);\n        var columnsLength = indices.length;\n        var rowsLength = Math.max(data.length / columnsLength, 1);\n        var columnIndex, rowIndex, dataIndex, calcIndex;\n\n        for (rowIndex = 0; rowIndex < rowsLength; rowIndex++) {\n            dataIndex = columnsLength * rowIndex;\n            for (columnIndex = 0; columnIndex < columnsLength; columnIndex++) {\n                calcIndex = indices[columnIndex] + dataIndex;\n                result[dataIndex + columnIndex] = data[calcIndex] || { value: \"\", fmtValue: \"\", ordinal: calcIndex };\n            }\n        }\n\n        return result;\n    }\n\n    function buildDataIndices(tuples) {\n        tuples = tuples.slice();\n        var result = [];\n        var tuple = tuples.shift();\n        var idx, length, spliceIndex, children, member;\n\n        while (tuple) {\n            //required for multiple measures\n            if (tuple.dataIndex !== undefined) {\n                result.push(tuple.dataIndex);\n            }\n\n            spliceIndex = 0;\n            for (idx = 0, length = tuple.members.length; idx < length; idx++) {\n                member = tuple.members[idx];\n                children = member.children;\n                if (member.measure) {\n                    [].splice.apply(tuples, [0, 0].concat(children));\n                } else {\n                    [].splice.apply(tuples, [spliceIndex, 0].concat(children));\n                }\n                spliceIndex += children.length;\n            }\n\n            tuple = tuples.shift();\n        }\n\n        return result;\n    }\n\n    PivotDataSourceV2.create = function(options) {\n        options = options && options.push ? { data: options } : options;\n\n        var dataSource = options || {},\n            data = dataSource.data;\n\n        dataSource.data = data;\n\n        if (!(dataSource instanceof PivotDataSourceV2) && dataSource instanceof kendo.data.DataSource) {\n            throw new Error(\"Incorrect DataSource type. Only PivotDataSource instances are supported\");\n        }\n\n        return dataSource instanceof PivotDataSourceV2 ? dataSource : new PivotDataSourceV2(dataSource);\n    };\n\n    PivotDataSource.create = function(options) {\n        options = options && options.push ? { data: options } : options;\n\n        var dataSource = options || {},\n            data = dataSource.data;\n\n        dataSource.data = data;\n\n        if (!(dataSource instanceof PivotDataSource) && dataSource instanceof kendo.data.DataSource) {\n            throw new Error(\"Incorrect DataSource type. Only PivotDataSource instances are supported\");\n        }\n\n        return dataSource instanceof PivotDataSource ? dataSource : new PivotDataSource(dataSource);\n    };\n\n    function baseHierarchyPath(memberName) {\n        var parts = memberName.split(\".\");\n        if (parts.length > 2) {\n            return parts[0] + \".\" + parts[1];\n        }\n        return memberName;\n    }\n\n    function expandMemberDescriptor(names, sort) {\n        var idx = names.length - 1;\n        var name = names[idx];\n        var sortDescriptor;\n\n        sortDescriptor = sortDescriptorForMember(sort, name);\n\n        if (sortDescriptor && sortDescriptor.dir) {\n            name = \"ORDER(\" + name + \".Children,\" + sortDescriptor.field + \".CurrentMember.MEMBER_CAPTION,\" + sortDescriptor.dir + \")\";\n        } else {\n            name += \".Children\";\n        }\n\n        names[idx] = name;\n\n        return names;\n    }\n\n    function sortDescriptorForMember(sort, member) {\n        for (var idx = 0, length = sort.length; idx < length; idx++) {\n            if (member.indexOf(sort[idx].field) === 0) {\n                return sort[idx];\n            }\n        }\n        return null;\n    }\n\n    function crossJoin(names) {\n        var result = \"CROSSJOIN({\";\n        var r;\n\n        if (names.length > 2) {\n            r = names.pop();\n            result += crossJoin(names);\n        } else {\n            result += names.shift();\n            r = names.pop();\n        }\n\n        result += \"},{\";\n        result += r;\n        result += \"})\";\n        return result;\n    }\n\n    function crossJoinCommand(members, measures) {\n        var tmp = members.slice(0);\n\n        if (measures.length > 1) {\n            tmp.push(\"{\" + measureNames(measures).join(\",\") + \"}\");\n        }\n\n        return crossJoin(tmp);\n    }\n\n    function measureNames(measures) {\n        var idx = 0;\n        var length = measures.length;\n        var result = [];\n        var measure;\n\n        for (; idx < length; idx++) {\n            measure = measures[idx];\n            result.push(measure.name !== undefined ? measure.name : measure);\n        }\n\n        return result;\n    }\n\n    function indexOf(name, items) {\n        var idx, length, index = -1;\n\n        for (idx = 0, length = items.length; idx < length; idx++) {\n            if (getName(items[idx]) === name) {\n                index = idx;\n                break;\n            }\n        }\n        return index;\n    }\n\n    function getName(name) {\n        name = name.name || name;\n\n        if (toString.call(name) === \"[object Array]\") {\n            name = name[name.length - 1];\n        }\n\n        return name;\n    }\n\n    function getRootNames(members) {\n        var length = members.length;\n        var names = [];\n        var idx = 0;\n\n        for (; idx < length; idx++) {\n            names.push(members[idx].name[0]);\n        }\n\n        return names;\n    }\n\n    function mapNames(names, rootNames) {\n        var name;\n        var rootName;\n\n        var j;\n        var idx = 0;\n        var length = names.length;\n        var rootLength = rootNames.length;\n\n        rootNames = rootNames.slice(0);\n\n        for (; idx < length; idx++) {\n            name = names[idx];\n\n            for (j = 0; j < rootLength; j++) {\n                rootName = baseHierarchyPath(rootNames[j]);\n\n                if (name.indexOf(rootName) !== -1) {\n                    rootNames[j] = name;\n                    break;\n                }\n            }\n        }\n\n        return {\n            names: rootNames,\n            expandedIdx: j,\n            uniquePath: rootNames.slice(0, j + 1).join(\"\")\n        };\n    }\n\n    function parseDescriptors(members) {\n        var expanded = [];\n        var child = [];\n        var root = [];\n        var member;\n\n        var j, l;\n        var idx = 0;\n        var length = members.length;\n\n        var name;\n        var hierarchyName;\n\n        var found;\n\n        for (; idx < length; idx++) {\n            member = members[idx];\n            name = member.name;\n            found = false;\n\n            if (toString.call(name) !== \"[object Array]\") {\n                member.name = name = [name];\n            }\n\n            if (name.length > 1) {\n                child.push(member);\n            } else {\n                hierarchyName = baseHierarchyPath(name[0]);\n\n                for (j = 0, l = root.length; j < l; j++) {\n                    if (root[j].name[0].indexOf(hierarchyName) === 0) {\n                        found = true;\n                        break;\n                    }\n                }\n\n                if (!found) {\n                    root.push(member);\n                }\n\n                if (member.expand) {\n                    expanded.push(member);\n                }\n            }\n        }\n\n        expanded = expanded.concat(child);\n\n        return {\n            root: root,\n            expanded: expanded\n        };\n    }\n\n    function serializeMembers(members, measures, sort) {\n        var command = \"\";\n\n        members = members || [];\n\n        var expanded = parseDescriptors(members);\n        var root = expanded.root;\n\n        var rootNames = getRootNames(root);\n        var crossJoinCommands = [];\n\n        expanded = expanded.expanded;\n\n        var length = expanded.length;\n        var idx = 0;\n\n        var memberName;\n        var names = [];\n\n        if (rootNames.length > 1 || measures.length > 1) {\n            crossJoinCommands.push(crossJoinCommand(rootNames, measures));\n\n            for (; idx < length; idx++) {\n                memberName = expandMemberDescriptor(expanded[idx].name, sort);\n                names = mapNames(memberName, rootNames).names;\n\n                crossJoinCommands.push(crossJoinCommand(names, measures));\n            }\n\n            command += crossJoinCommands.join(\",\");\n        } else {\n            for (; idx < length; idx++) {\n                memberName = expandMemberDescriptor(expanded[idx].name, sort);\n                names.push(memberName[0]); //check if this is ok\n            }\n\n            command += rootNames.concat(names).join(\",\");\n        }\n\n        return command;\n    }\n\n    var filterFunctionFormats = {\n        contains: \", InStr({0}.CurrentMember.MEMBER_CAPTION,\\\"{1}\\\") > 0\",\n        doesnotcontain: \", InStr({0}.CurrentMember.MEMBER_CAPTION,\\\"{1}\\\")\",\n        startswith: \", Left({0}.CurrentMember.MEMBER_CAPTION,Len(\\\"{1}\\\"))=\\\"{1}\\\"\",\n        endswith: \", Right({0}.CurrentMember.MEMBER_CAPTION,Len(\\\"{1}\\\"))=\\\"{1}\\\"\",\n        eq: \", {0}.CurrentMember.MEMBER_CAPTION = \\\"{1}\\\"\",\n        neq: \", {0}.CurrentMember.MEMBER_CAPTION = \\\"{1}\\\"\"\n    };\n\n    function serializeExpression(expression) {\n        var command = \"\";\n        var value = expression.value;\n        var field = expression.field;\n        var operator = expression.operator;\n\n        if (operator == \"in\") {\n            command += \"{\";\n            command += value;\n            command += \"}\";\n        } else {\n            command += operator == \"neq\" || operator == \"doesnotcontain\" ? \"-\" : \"\";\n            command += \"Filter(\";\n            command += field + \".MEMBERS\";\n            command += kendo.format(filterFunctionFormats[operator], field, value);\n            command += \")\";\n        }\n\n        return command;\n    }\n\n    function serializeFilters(filter, cube) {\n        var command = \"\", current;\n        var filters = filter.filters;\n        var length = filters.length;\n        var idx;\n\n        for (idx = length - 1; idx >= 0; idx--) {\n\n            current = \"SELECT (\";\n            current += serializeExpression(filters[idx]);\n            current += \") ON 0\";\n\n            if (idx == length - 1) {\n                current += \" FROM [\" + cube + \"]\";\n                command = current;\n            } else {\n                command = current + \" FROM ( \" + command + \" )\";\n            }\n        }\n\n        return command;\n    }\n\n    function serializeOptions(parentTagName, options, capitalize) {\n        var result = \"\";\n\n        if (options) {\n            result += \"<\" + parentTagName + \">\";\n            var value;\n            for (var key in options) {\n                value = options[key];\n                let keyToUse = key;\n                if (capitalize) {\n                    keyToUse = keyToUse.replace(/([A-Z]+(?=$|[A-Z][a-z])|[A-Z]?[a-z]+)/g, \"$1_\").toUpperCase().replace(/_$/, \"\");\n                }\n                result += \"<\" + keyToUse + \">\" + value + \"</\" + keyToUse + \">\";\n            }\n            result += \"</\" + parentTagName + \">\";\n        } else {\n            result += \"<\" + parentTagName + \"/>\";\n        }\n        return result;\n    }\n\n    var xmlaDiscoverCommands = {\n        schemaCubes: \"MDSCHEMA_CUBES\",\n        schemaCatalogs: \"DBSCHEMA_CATALOGS\",\n        schemaMeasures: \"MDSCHEMA_MEASURES\",\n        schemaDimensions: \"MDSCHEMA_DIMENSIONS\",\n        schemaHierarchies: \"MDSCHEMA_HIERARCHIES\",\n        schemaLevels: \"MDSCHEMA_LEVELS\",\n        schemaMembers: \"MDSCHEMA_MEMBERS\",\n        schemaKPIs: \"MDSCHEMA_KPIS\"\n    };\n\n    var convertersMap = {\n        read: function(options) {\n            var command = '<Envelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\"><Header/><Body><Execute xmlns=\"urn:schemas-microsoft-com:xml-analysis\"><Command><Statement>';\n\n            command += \"SELECT NON EMPTY {\";\n\n            var columns = options.columns || [];\n            var rows = options.rows || [];\n\n            var measures = options.measures || [];\n            var measuresRowAxis = options.measuresAxis === \"rows\";\n            var sort = options.sort || [];\n\n            if (!columns.length && rows.length && (!measures.length || (measures.length && measuresRowAxis))) {\n                columns = rows;\n                rows = [];\n                measuresRowAxis = false;\n            }\n\n            if (!columns.length && !rows.length) {\n                measuresRowAxis = false;\n            }\n\n            if (columns.length) {\n                command += serializeMembers(columns, !measuresRowAxis ? measures : [], sort);\n            } else if (measures.length && !measuresRowAxis) {\n                command += measureNames(measures).join(\",\");\n            }\n\n            command += \"} DIMENSION PROPERTIES CHILDREN_CARDINALITY, PARENT_UNIQUE_NAME ON COLUMNS\";\n\n            if (rows.length || (measuresRowAxis && measures.length > 1)) {\n                command += \", NON EMPTY {\";\n\n                if (rows.length) {\n                    command += serializeMembers(rows, measuresRowAxis ? measures : [], sort);\n                } else {\n                    command += measureNames(measures).join(\",\");\n                }\n\n                command += \"} DIMENSION PROPERTIES CHILDREN_CARDINALITY, PARENT_UNIQUE_NAME ON ROWS\";\n            }\n\n            if (options.filter) {\n                command += \" FROM \";\n                command += \"(\";\n                command += serializeFilters(options.filter, options.connection.cube);\n                command += \")\";\n            } else {\n                command += \" FROM [\" + options.connection.cube + \"]\";\n            }\n\n            if (measures.length == 1 && columns.length) {\n                command += \" WHERE (\" + measureNames(measures).join(\",\") + \")\";\n            }\n\n            command += '</Statement></Command><Properties><PropertyList><Catalog>' + options.connection.catalog + '</Catalog><Format>Multidimensional</Format></PropertyList></Properties></Execute></Body></Envelope>';\n            return command.replace(/\\&/g, \"&amp;\");\n        },\n        discover: function(options) {\n            options = options || {};\n\n            var command = '<Envelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\"><Header/><Body><Discover xmlns=\"urn:schemas-microsoft-com:xml-analysis\">';\n            command += \"<RequestType>\" + (xmlaDiscoverCommands[options.command] || options.command) + \"</RequestType>\";\n\n            command += \"<Restrictions>\" + serializeOptions(\"RestrictionList\", options.restrictions, true) + \"</Restrictions>\";\n\n            if (options.connection && options.connection.catalog) {\n                options.properties = $.extend({}, {\n                    Catalog: options.connection.catalog\n                }, options.properties);\n            }\n\n            command += \"<Properties>\" + serializeOptions(\"PropertyList\", options.properties) + \"</Properties>\";\n\n            command += '</Discover></Body></Envelope>';\n            return command;\n        }\n    };\n\n    var XmlaTransport = kendo.data.RemoteTransport.extend({\n        init: function(options) {\n            var originalOptions = options;\n\n            options = this.options = extend(true, {}, this.options, options);\n\n            kendo.data.RemoteTransport.call(this, options);\n\n            if (isFunction(originalOptions.discover)) {\n                this.discover = originalOptions.discover;\n            } else if (typeof originalOptions.discover === \"string\") {\n                this.options.discover = {\n                    url: originalOptions.discover\n                };\n            } else if (!originalOptions.discover) {\n                this.options.discover = this.options.read;\n            }\n        },\n        setup: function(options, type) {\n            options.data = options.data || {};\n            $.extend(true, options.data, { connection: this.options.connection });\n\n            return kendo.data.RemoteTransport.fn.setup.call(this, options, type);\n        },\n        options: {\n            read: {\n                dataType: \"text\",\n                contentType: \"text/xml\",\n                type: \"POST\"\n            },\n            discover: {\n                dataType: \"text\",\n                contentType: \"text/xml\",\n                type: \"POST\"\n            },\n            parameterMap: function(options, type) {\n                return convertersMap[type](options,type);\n            }\n        },\n\n        discover: function(options) {\n            return $.ajax(this.setup(options, \"discover\"));\n        }\n    });\n\n    var XmlaTransportV2 = Class.extend({\n        init: function(options) {\n            options = this.options = extend(true, {}, this.options, options);\n        },\n        setup: function(options) {\n            return $.extend(true, options || {}, { connection: this.options.connection });\n        },\n        read: function(options) {\n            var that = this,\n                success,\n                error;\n\n            var fetchOptions = that.setup(options.data, READ);\n\n            success = options.success || $.noop;\n            error = options.error || $.noop;\n\n            if (options.parameterMap) {\n                fetchOptions = that.parameterMap(fetchOptions, READ);\n            }\n            const requestOptions = typeof that.options.read === \"object\" && that.options.read.url ? that.options.read : { url: that.options.read };\n\n            fetchData(requestOptions, fetchOptions)\n            .then(createDataState)\n            .then(function(newDataState) {\n                success(newDataState);\n            })\n            .catch(function(err) { error(err); });\n        },\n\n        catalog: function(val) {\n            var options = this.options || {};\n\n            if (val === undefined) {\n                return (options.connection || {}).catalog;\n\n            }\n\n            var connection = options.connection || {};\n            connection.catalog = val;\n\n            this.options.connection = connection;\n            $.extend(this.transport.options, { connection: connection });\n        },\n        cube: function(val) {\n            var options = this.options || {};\n\n            if (val === undefined) {\n                return (options.connection || {}).cube;\n            }\n\n            var connection = options.connection || {};\n            connection.cube = val;\n\n            this.options.connection = connection;\n            extend(true, this.transport.options, { connection: connection });\n        },\n\n        discover: function(options) {\n            return fetchDiscover({ url: this.options.read }, options);\n        }\n    });\n\n    function asArray(object) {\n        if (object == null) {\n            return [];\n        }\n\n        var type = toString.call(object);\n        if (type !== \"[object Array]\") {\n            return [object];\n        }\n\n        return object;\n    }\n\n    function translateAxis(axis) {\n        var result = { tuples: [] };\n        var tuples = asArray(kendo.getter(\"Tuples.Tuple\", true)(axis));\n        var captionGetter = kendo.getter(\"Caption['#text']\");\n        var unameGetter = kendo.getter(\"UName['#text']\");\n        var levelNameGetter = kendo.getter(\"LName['#text']\");\n        var levelNumGetter = kendo.getter(\"LNum['#text']\");\n        var childrenGetter = kendo.getter(\"CHILDREN_CARDINALITY['#text']\", true);\n        var hierarchyGetter = kendo.getter(\"['@Hierarchy']\");\n        var parentNameGetter = kendo.getter(\"PARENT_UNIQUE_NAME['#text']\", true);\n\n        for (var idx = 0; idx < tuples.length; idx++) {\n            var members = [];\n            var member = asArray(tuples[idx].Member);\n            for (var memberIdx = 0; memberIdx < member.length; memberIdx++) {\n                members.push({\n                    children: [],\n                    caption: captionGetter(member[memberIdx]),\n                    name: unameGetter(member[memberIdx]),\n                    levelName: levelNameGetter(member[memberIdx]),\n                    levelNum: levelNumGetter(member[memberIdx]),\n                    hasChildren: parseInt(childrenGetter(member[memberIdx]), 10) > 0,\n                    parentName: parentNameGetter(member[memberIdx]),\n                    hierarchy: hierarchyGetter(member[memberIdx])\n                });\n            }\n\n            result.tuples.push({ members: members });\n        }\n        return result;\n    }\n\n    var schemaDataReaderMap = {\n        cubes: {\n            name: kendo.getter(\"CUBE_NAME['#text']\", true),\n            caption: kendo.getter(\"CUBE_CAPTION['#text']\", true),\n            description: kendo.getter(\"DESCRIPTION['#text']\", true),\n            type: kendo.getter(\"CUBE_TYPE['#text']\", true)\n        },\n        catalogs: {\n            name: kendo.getter(\"CATALOG_NAME['#text']\", true),\n            description: kendo.getter(\"DESCRIPTION['#text']\", true)\n        },\n        measures: {\n            name: kendo.getter(\"MEASURE_NAME['#text']\", true),\n            caption: kendo.getter(\"MEASURE_CAPTION['#text']\", true),\n            uniqueName: kendo.getter(\"MEASURE_UNIQUE_NAME['#text']\", true),\n            description: kendo.getter(\"DESCRIPTION['#text']\", true),\n            aggregator: kendo.getter(\"MEASURE_AGGREGATOR['#text']\", true),\n            groupName: kendo.getter(\"MEASUREGROUP_NAME['#text']\", true),\n            displayFolder: kendo.getter(\"MEASURE_DISPLAY_FOLDER['#text']\", true),\n            defaultFormat: kendo.getter(\"DEFAULT_FORMAT_STRING['#text']\", true)\n        },\n        kpis: {\n            name: kendo.getter(\"KPI_NAME['#text']\", true),\n            caption: kendo.getter(\"KPI_CAPTION['#text']\", true),\n            value: kendo.getter(\"KPI_VALUE['#text']\", true),\n            goal: kendo.getter(\"KPI_GOAL['#text']\", true),\n            status: kendo.getter(\"KPI_STATUS['#text']\", true),\n            trend: kendo.getter(\"KPI_TREND['#text']\", true),\n            statusGraphic: kendo.getter(\"KPI_STATUS_GRAPHIC['#text']\", true),\n            trendGraphic: kendo.getter(\"KPI_TREND_GRAPHIC['#text']\", true),\n            description: kendo.getter(\"KPI_DESCRIPTION['#text']\", true),\n            groupName: kendo.getter(\"MEASUREGROUP_NAME['#text']\", true)\n        },\n        dimensions: {\n            name: kendo.getter(\"DIMENSION_NAME['#text']\", true),\n            caption: kendo.getter(\"DIMENSION_CAPTION['#text']\", true),\n            description: kendo.getter(\"DESCRIPTION['#text']\", true),\n            uniqueName: kendo.getter(\"DIMENSION_UNIQUE_NAME['#text']\", true),\n            defaultHierarchy: kendo.getter(\"DEFAULT_HIERARCHY['#text']\", true),\n            type: kendo.getter(\"DIMENSION_TYPE['#text']\", true)\n//unknown = 0; time = 1; measure = 2; other = 3; quantitative = 5; accounts = 6; customers = 7; products = 8; scenario = 9; utility = 10; currency = 11; rates = 12; channel = 13; promotion = 14; organization = 15; billOfMaterials = 16; geography = 17;\n\n        },\n        hierarchies: {\n            name: kendo.getter(\"HIERARCHY_NAME['#text']\", true),\n            caption: kendo.getter(\"HIERARCHY_CAPTION['#text']\", true),\n            description: kendo.getter(\"DESCRIPTION['#text']\", true),\n            uniqueName: kendo.getter(\"HIERARCHY_UNIQUE_NAME['#text']\", true),\n            dimensionUniqueName: kendo.getter(\"DIMENSION_UNIQUE_NAME['#text']\", true),\n            displayFolder: kendo.getter(\"HIERARCHY_DISPLAY_FOLDER['#text']\", true),\n            origin: kendo.getter(\"HIERARCHY_ORIGIN['#text']\", true),\n            defaultMember: kendo.getter(\"DEFAULT_MEMBER['#text']\", true)\n        },\n        levels: {\n            name: kendo.getter(\"LEVEL_NAME['#text']\", true),\n            caption: kendo.getter(\"LEVEL_CAPTION['#text']\", true),\n            description: kendo.getter(\"DESCRIPTION['#text']\", true),\n            uniqueName: kendo.getter(\"LEVEL_UNIQUE_NAME['#text']\", true),\n            dimensionUniqueName: kendo.getter(\"DIMENSION_UNIQUE_NAME['#text']\", true),\n            displayFolder: kendo.getter(\"LEVEL_DISPLAY_FOLDER['#text']\", true),\n            orderingProperty: kendo.getter(\"LEVEL_ORDERING_PROPERTY['#text']\", true),\n            origin: kendo.getter(\"LEVEL_ORIGIN['#text']\", true),\n            hierarchyUniqueName: kendo.getter(\"HIERARCHY_UNIQUE_NAME['#text']\", true)\n        },\n        members: {\n            name: kendo.getter(\"MEMBER_NAME['#text']\", true),\n            caption: kendo.getter(\"MEMBER_CAPTION['#text']\", true),\n            uniqueName: kendo.getter(\"MEMBER_UNIQUE_NAME['#text']\", true),\n            dimensionUniqueName: kendo.getter(\"DIMENSION_UNIQUE_NAME['#text']\", true),\n            hierarchyUniqueName: kendo.getter(\"HIERARCHY_UNIQUE_NAME['#text']\", true),\n            levelUniqueName: kendo.getter(\"LEVEL_UNIQUE_NAME['#text']\", true),\n            childrenCardinality: kendo.getter(\"CHILDREN_CARDINALITY['#text']\", true)\n        }\n    };\n\n    var xmlaReaderMethods = [\"axes\", \"catalogs\", \"cubes\", \"dimensions\", \"hierarchies\", \"levels\", \"measures\"];\n\n    var XmlaDataReader = kendo.data.XmlDataReader.extend({\n        init: function(options) {\n            kendo.data.XmlDataReader.call(this, options);\n\n            this._extend(options);\n        },\n        _extend: function(options) {\n            var idx = 0;\n            var length = xmlaReaderMethods.length;\n            var methodName;\n            var option;\n\n            for (; idx < length; idx++) {\n                methodName = xmlaReaderMethods[idx];\n                option = options[methodName];\n\n                if (option && option !== identity) {\n                    this[methodName] = option;\n                }\n            }\n        },\n        parse: function(xml) {\n            var result = kendo.data.XmlDataReader.fn.parse(xml.replace(/<(\\/?)(\\w|-)+:/g, \"<$1\"));\n            return kendo.getter(\"['Envelope']['Body']\", true)(result);\n        },\n        errors: function(root) {\n            var fault = kendo.getter(\"['Fault']\", true)(root);\n            if (fault) {\n                return [{\n                    faultstring: kendo.getter(\"faultstring['#text']\", true)(fault),\n                    faultcode: kendo.getter(\"faultcode['#text']\", true)(fault)\n                }];\n            }\n            return null;\n        },\n        axes: function(root) {\n            root = kendo.getter(\"ExecuteResponse[\\\"return\\\"].root\", true)(root);\n\n            var axes = asArray(kendo.getter(\"Axes.Axis\", true)(root));\n            var axis;\n\n            var result = {\n                columns: {},\n                rows: {}\n            };\n\n            for (var idx = 0; idx < axes.length; idx++) {\n                axis = axes[idx];\n\n                if (axis[\"@name\"].toLowerCase() !== \"sliceraxis\") {\n                    if (!result.columns.tuples) {\n                        result.columns = translateAxis(axis);\n                    } else {\n                        result.rows = translateAxis(axis);\n                    }\n                }\n            }\n\n            return result;\n        },\n        data: function(root) {\n            root = kendo.getter(\"ExecuteResponse[\\\"return\\\"].root\", true)(root);\n\n            var cells = asArray(kendo.getter(\"CellData.Cell\", true)(root));\n\n            var result = [];\n            var ordinalGetter = kendo.getter(\"['@CellOrdinal']\");\n            var valueGetter = kendo.getter(\"Value['#text']\");\n            var fmtValueGetter = kendo.getter(\"FmtValue['#text']\");\n\n            for (var idx = 0; idx < cells.length; idx++) {\n                result.push({\n                    value: valueGetter(cells[idx]),\n                    fmtValue: fmtValueGetter(cells[idx]),\n                    ordinal: parseInt(ordinalGetter(cells[idx]), 10)\n                });\n            }\n\n            return result;\n        },\n        _mapSchema: function(root, getters) {\n            root = kendo.getter(\"DiscoverResponse[\\\"return\\\"].root\", true)(root);\n            var rows = asArray(kendo.getter(\"row\", true)(root));\n\n            var result = [];\n\n            for (var idx = 0; idx < rows.length; idx++) {\n                var obj = {};\n                for (var key in getters) {\n                    obj[key] = getters[key](rows[idx]);\n                }\n                result.push(obj);\n            }\n\n            return result;\n        },\n        measures: function(root) {\n            return this._mapSchema(root, schemaDataReaderMap.measures);\n        },\n        kpis: function(root) {\n            return this._mapSchema(root, schemaDataReaderMap.kpis);\n        },\n        hierarchies: function(root) {\n            return this._mapSchema(root, schemaDataReaderMap.hierarchies);\n        },\n        levels: function(root) {\n            return this._mapSchema(root, schemaDataReaderMap.levels);\n        },\n        dimensions: function(root) {\n            return this._mapSchema(root, schemaDataReaderMap.dimensions);\n        },\n        cubes: function(root) {\n            return this._mapSchema(root, schemaDataReaderMap.cubes);\n        },\n        catalogs: function(root) {\n            return this._mapSchema(root, schemaDataReaderMap.catalogs);\n        },\n        members: function(root) {\n            return this._mapSchema(root, schemaDataReaderMap.members);\n        }\n    });\n\n    extend(true, kendo.data, {\n       PivotDataSource: PivotDataSource,\n       PivotDataSourceV2: PivotDataSourceV2,\n       XmlaTransport: XmlaTransport,\n       XmlaDataReader: XmlaDataReader,\n       PivotCubeBuilder: PivotCubeBuilder,\n       transports: {\n           xmla: XmlaTransport\n       },\n       readers: {\n           xmla: XmlaDataReader\n       }\n    });\n\n    var sortExpr = function(expressions, name) {\n        if (!expressions) {\n            return null;\n        }\n\n        for (var idx = 0, length = expressions.length; idx < length; idx++) {\n            if (expressions[idx].field === name) {\n                return expressions[idx];\n            }\n        }\n\n        return null;\n    };\n\n    var removeExpr = function(expressions, name) {\n        var result = [];\n\n        for (var idx = 0, length = expressions.length; idx < length; idx++) {\n            if (expressions[idx].field !== name) {\n                result.push(expressions[idx]);\n            }\n        }\n\n        return result;\n    };\n\n    kendo.ui.PivotSettingTarget = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            Widget.fn.init.call(that, element, options);\n\n            that.element.addClass(\"k-pivot-setting\");\n\n            that.dataSource = kendo.data.PivotDataSource.create(options.dataSource);\n\n            that._refreshHandler = that.refresh.bind(that);\n            that.dataSource.first(CHANGE, that._refreshHandler);\n\n            if (!options.template) {\n                var actions = '';\n\n                if (that.options.enabled) {\n                    actions = `<span class=\"k-setting-delete k-chip-action\">${kendo.ui.icon(\"x\")}</span>`;\n                }\n\n                that.options.template = (data) => ''\n                    + `<span class=\"k-chip\" data-${kendo.ns}name=\"${data.name || data}\">`\n                        + '<span class=\"k-chip-content\">'\n                            + `<span class=\"k-chip-text\">${data.name || data}</span>`\n                        + '</span>'\n                        + '<span class=\"k-chip-actions\">' + actions + '</span>'\n                    + '</span>';\n            }\n\n            that.template = kendo.template(that.options.template);\n            that.emptyTemplate = kendo.template(that.options.emptyTemplate);\n\n            that._sortable();\n\n            that.element.on(\"click\" + NS, '.k-chip, .k-button' , function(e) {\n                var target = $(e.target).closest(\":not(path,svg)\");\n                var action = target.closest('.k-chip-action');\n                var name = target.closest(\"[\" + kendo.attr(\"name\") + \"]\")\n                                 .attr(kendo.attr(\"name\"));\n\n                if (!name) {\n                    return;\n                }\n\n                if (action.hasClass(\"k-setting-delete\")) {\n                    that.remove(name);\n                    return;\n                }\n\n                if (target.closest('.k-chip-actions').length > 0) {\n                    return;\n                }\n\n                if (that.options.sortable) {\n                    var sortDirection = $(e.currentTarget).closest(\":not(path,svg)\").find('.k-i-sort-asc-small,.k-svg-i-sort-asc-small').length ? 'desc' : 'asc';\n\n                    that.sort({\n                        field: name,\n                        dir: sortDirection\n                    });\n                }\n            });\n\n            if (options.filterable || options.sortable) {\n                that.fieldMenu = new ui.PivotFieldMenu(that.element, {\n                    messages: that.options.messages.fieldMenu,\n                    filter: \".k-setting-fieldmenu\",\n                    filterable: options.filterable,\n                    sortable: options.sortable,\n                    dataSource: that.dataSource\n                });\n            }\n\n            that.refresh();\n        },\n\n        options: {\n            name: \"PivotSettingTarget\",\n            template: null,\n            filterable: false,\n            sortable: false,\n            emptyTemplate: (data) => `<div class='k-empty'>${data}</div>`,\n            setting: \"columns\",\n            enabled: true,\n            messages: {\n                empty: \"Drop Fields Here\"\n            }\n        },\n        setDataSource: function(dataSource) {\n            this.dataSource.unbind(CHANGE, this._refreshHandler);\n            this.dataSource = this.options.dataSource = dataSource;\n\n            if (this.fieldMenu) {\n                this.fieldMenu.setDataSource(dataSource);\n            }\n            dataSource.first(CHANGE, this._refreshHandler);\n\n            this.refresh();\n        },\n\n        _sortable: function() {\n            var that = this;\n\n            if (that.options.enabled) {\n                this.sortable = this.element.kendoSortable({\n                    connectWith: this.options.connectWith,\n                    hint: that.options.hint,\n                    filter: \">*:not(.k-empty)\",\n                    cursor: \"move\",\n                    start: function(e) {\n                        e.item.trigger(\"focus\").trigger(\"blur\");\n                    },\n                    change: function(e) {\n                        var name = e.item.attr(kendo.attr(\"name\"));\n\n                        if (e.action == \"receive\") {\n                            that.add(name);\n                        } else if (e.action == \"remove\") {\n                            that.remove(name);\n                        } else if (e.action == \"sort\") {\n                            that.move(name, e.newIndex);\n                        }\n                    }\n                }).data(\"kendoSortable\");\n            }\n        },\n\n        _isKPI: function(data) {\n            return data.type === \"kpi\" || data.measure;\n        },\n\n        validate: function(data) {\n            var isMeasure = (data.type == 2 || \"aggregator\" in data || this._isKPI(data));\n\n            if (isMeasure) {\n                return this.options.setting === \"measures\";\n            }\n\n            if (this.options.setting === \"measures\") {\n                return isMeasure;\n            }\n\n            var items = this.dataSource[this.options.setting]();\n            var name = data.defaultHierarchy || data.uniqueName;\n            if (indexOf(name, items) > -1) {\n                return false;\n            }\n\n            items = this.dataSource[this.options.setting === \"columns\" ? \"rows\" : \"columns\"]();\n            if (indexOf(name, items) > -1) {\n                return false;\n            }\n\n            return true;\n        },\n\n        add: function(name) {\n            let items = this.dataSource[this.options.setting]();\n            let i = 0;\n\n            name = Array.isArray(name) ? name.slice(0) : [name];\n\n            let l = name.length;\n\n            while (i < l) {\n                if (indexOf(name[i], items) !== -1) {\n                    name.splice(i, 1);\n                    i -= 1;\n                    l -= 1;\n                }\n                i++;\n            }\n\n            if (name.length) {\n                items = items.concat(name);\n                this.dataSource[this.options.setting](items);\n            }\n        },\n\n        move: function(name, index) {\n            var items = this.dataSource[this.options.setting]();\n            var idx = indexOf(name, items);\n\n            if (idx > -1) {\n                name = items.splice(idx, 1)[0];\n\n                items.splice(index, 0, name);\n\n                this.dataSource[this.options.setting](items);\n            }\n        },\n\n        remove: function(name) {\n            var items = this.dataSource[this.options.setting]();\n            var idx = indexOf(name, items);\n            var sortExpressions = this.dataSource.sort();\n            var filter = this.dataSource.filter();\n\n            if (idx > -1) {\n                if (filter) {\n                    filter.filters = removeExpr(filter.filters, name);\n                    this.dataSource._filter.filters = filter.filters;\n                    if (!filter.filters.length) {\n                        this.dataSource._filter = null;\n                    }\n                }\n                if (sortExpressions) {\n                    sortExpressions = removeExpr(sortExpressions, name);\n                    this.dataSource._sort = sortExpressions;\n                }\n                items.splice(idx, 1);\n                this.dataSource[this.options.setting](items);\n            }\n        },\n\n        sort: function(expr) {\n            var sortable = this.options.sortable;\n            var allowUnsort = sortable === true || sortable.allowUnsort;\n            var skipExpr = allowUnsort && expr.dir === \"asc\";\n\n            var expressions = (this.dataSource.sort() || []);\n            var result = removeExpr(expressions, expr.field);\n\n            if (skipExpr && expressions.length !== result.length) {\n                expr = null;\n            }\n\n            if (expr) {\n                result.push(expr);\n            }\n\n            this.dataSource.sort(result);\n        },\n\n        refresh: function() {\n            var html = \"\";\n            var items = this.dataSource[this.options.setting]();\n            var length = items.length;\n            var idx = 0;\n            var item;\n\n            if (length) {\n                for (; idx < length; idx++) {\n                    item = items[idx];\n                    item = item.name === undefined ? { name: item } : item;\n\n                    html += this.template(extend({ sortIcon: this._sortIcon(item.name) }, item));\n                }\n            } else {\n                html = this.emptyTemplate(this.options.messages.empty);\n            }\n\n            this.element.html(html);\n        },\n\n        destroy: function() {\n            Widget.fn.destroy.call(this);\n\n            this.dataSource.unbind(CHANGE, this._refreshHandler);\n            this.element.off(NS);\n\n            if (this.sortable) {\n                this.sortable.destroy();\n            }\n\n            if (this.fieldMenu) {\n                this.fieldMenu.destroy();\n            }\n\n            this.element = null;\n            this._refreshHandler = null;\n        },\n\n        _sortIcon: function(name) {\n            var expressions = this.dataSource.sort();\n            var expr = sortExpr(expressions, getName(name));\n            var icon = \"\";\n\n            if (expr) {\n                icon = \"sort-\" + expr.dir;\n            }\n\n            return icon;\n        }\n    });\n\n    kendo.ui.PivotSettingTargetV2 = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            Widget.fn.init.call(that, element, options);\n\n            that.dataSource = kendo.data.PivotDataSourceV2.create(options.dataSource);\n\n            that._refreshHandler = that.refresh.bind(that);\n            that.dataSource.first(CHANGE, that._refreshHandler);\n\n            that.template = kendo.template(that.options.template);\n\n            that._sortable();\n\n            that.element.on(\"click\" + NS, \".k-i-x-circle,.k-svg-i-x-circle\", function(e) {\n                var target = $(e.target).closest(\":not(path,svg)\");\n                var parent = target.closest(\".k-chip\");\n                var name = parent.find(\".k-chip-label\").text();\n\n                if (!name) {\n                    return;\n                }\n\n                that.remove(name);\n                parent.remove();\n                that.trigger(\"remove\", { name: name });\n            });\n\n            if (that.options.navigatable) {\n                that.element.on(\"keydown\" + NS, \".k-chip\", function(ev) {\n                    var chip = $(ev.target),\n                        key = ev.keyCode,\n                        name = chip.find(\".k-chip-label\").text();\n\n                    if (key === keys.DELETE || key === keys.BACKSPACE) {\n                        const targetIndex = that.options.configuratorNavigation ? that.options.configuratorNavigation.elements.indexOf(chip[0]) : -1;\n                        chip.find(\".k-i-x-circle,.k-svg-i-x-circle\").trigger(\"click\");\n                        if (!that.options.configuratorNavigation) {\n                            return;\n                        }\n\n                        that.options.configuratorNavigation.focusElement(\n                            that.options.configuratorNavigation.elements[targetIndex - 1],\n                        );\n                    } else if (key === keys.DOWN && ev.altKey) {\n                        chip.find(\".k-i-more-vertical,.k-svg-i-more-vertical\").trigger(\"click\");\n                    } else if (ev.ctrlKey && ev.shiftKey) {\n                        if (key == keys.LEFT) {\n                            that.move(name, Math.max(0, chip.index() - 1));\n\n                            if (!that.options.configuratorNavigation) {\n                                return;\n                            }\n\n                            that.options.configuratorNavigation.focusElement(\n                                that.element.find(\".k-chip .k-chip-label\")\n                                    .filter((ind, el) => $(el).text() == name)\n                                    .closest(\".k-chip\")[0]\n                            );\n                        } else if (key == keys.RIGHT) {\n                            that.move(name, Math.min(chip.index() + 1, chip.parent().find(\"> .k-chip\").length - 1));\n\n                            if (!that.options.configuratorNavigation) {\n                                return;\n                            }\n\n                            that.options.configuratorNavigation.focusElement(\n                                that.element.find(\".k-chip .k-chip-label\")\n                                    .filter((ind, el) => $(el).text() == name)\n                                    .closest(\".k-chip\")[0]\n                            );\n                        } else if ((key == keys.UP && that.options.setting == \"rows\") ||\n                            (key == keys.DOWN && that.options.setting == \"columns\")) {\n\n                            let otherTarget = that.sortable.options.connectWith.data(\"kendoPivotSettingTargetV2\");\n                            if (!otherTarget) {\n                                return;\n                            }\n\n                            that.remove(name);\n                            otherTarget.add(name);\n                            if (!that.options.configuratorNavigation) {\n                                return;\n                            }\n\n                            that.options.configuratorNavigation.focusElement(\n                                otherTarget.element.find(\".k-chip\").last()[0]\n                            );\n                        }\n                    }\n                });\n            }\n\n            that.fieldMenu = new ui.PivotFieldMenuV2(that.element, {\n                messages: that.options.messages.fieldMenu,\n                filterable: options.filterable,\n                filter: \".k-i-more-vertical,.k-svg-i-more-vertical\",\n                sortable: options.sortable,\n                dataSource: that.dataSource,\n                setting: options.setting\n            });\n\n            that.refresh();\n        },\n\n        events: [\"remove\"],\n\n        options: {\n            name: \"PivotSettingTargetV2\",\n            template: null,\n            filterable: false,\n            sortable: false,\n            setting: \"columns\",\n            enabled: true,\n            messages: {\n                empty: \"Drop Fields Here\"\n            }\n        },\n        setDataSource: function(dataSource) {\n            this.dataSource.unbind(CHANGE, this._refreshHandler);\n            this.dataSource = this.options.dataSource = dataSource;\n\n            if (this.fieldMenu) {\n                this.fieldMenu.setDataSource(dataSource);\n            }\n            dataSource.first(CHANGE, this._refreshHandler);\n\n            this.refresh();\n        },\n\n        _applyState: function() {\n            if (this._sortState !== undefined) {\n                this.dataSource._sort = this._sortState;\n                this._sortState = undefined;\n            }\n\n            if (this._stateFilter !== undefined) {\n                this.dataSource._filter = this._stateFilter;\n                this._stateFilter = undefined;\n            }\n\n            this.dataSource[\"_\" + this.options.setting] = this.options.setting === \"measures\" ? normalizeMeasures(this._savedState) : normalizeMembers(this._savedState);\n        },\n\n        _cancelChanges: function() {\n            this._sortState = undefined;\n            this._stateFilter = undefined;\n            this._savedState = kendo.deepExtend([], this._initialState);\n            this._redraw();\n        },\n\n        _state: function(newState, modifyInit) {\n            var that = this;\n\n            if (!newState) {\n                return that._savedState || [];\n            } else {\n                if (!that._savedState || modifyInit) {\n                    that._initialState = kendo.deepExtend([], newState);\n                }\n                that._savedState = kendo.deepExtend([], newState);\n            }\n        },\n\n        _sortable: function() {\n            var that = this;\n\n            this.sortable = this.element.kendoSortable({\n                connectWith: this.options.connectWith,\n                hint: that.options.hint,\n                filter: \">*:not(.k-empty)\",\n                cursor: \"move\",\n                start: function(e) {\n                    e.item.trigger(\"focus\").blur();\n                },\n                change: function(e) {\n                    var name = e.item.find(\".k-chip-label\").text();\n\n                    if (e.action == \"receive\") {\n                        that.add(name);\n                    } else if (e.action == \"remove\") {\n                        that.remove(name);\n                    } else if (e.action == \"sort\") {\n                        that.move(name, e.newIndex);\n                    }\n                }\n            }).data(\"kendoSortable\");\n        },\n\n        add: function(name) {\n            let items = this._state();\n            let i = 0;\n\n            name = Array.isArray(name) ? name.slice(0) : [name];\n\n            let l = name.length;\n            while (i < l) {\n                if (indexOf(name[i], items) !== -1) {\n                    name.splice(i, 1);\n                    i -= 1;\n                    l -= 1;\n                }\n                i++;\n            }\n\n            if (name.length) {\n                items = items.concat(name);\n                this._state(items);\n                this._redraw();\n            }\n        },\n\n        move: function(name, index) {\n            var items = this._state();\n            var idx = indexOf(name, items);\n\n            if (idx > -1) {\n                name = items.splice(idx, 1)[0];\n\n                items.splice(index, 0, name);\n\n                this._state(items);\n                this._redraw();\n            }\n        },\n\n        remove: function(name) {\n            var items = this._state();\n            var idx = indexOf(name, items);\n            var sortExpressions = this.dataSource.sort();\n            var filter = this.dataSource.filter();\n\n            if (idx > -1) {\n                if (filter) {\n                    filter.filters = removeExpr(filter.filters, name);\n                    this._savedFilter = this.dataSource._filter;\n                    this._savedFilter.filters = filter.filters;\n                    if (!filter.filters.length) {\n                        this._savedFilter = null;\n                    }\n                }\n                if (sortExpressions) {\n                    sortExpressions = removeExpr(sortExpressions, name);\n                    this._sortState = sortExpressions;\n                }\n                items.splice(idx, 1);\n                this._state(items);\n                this._redraw();\n            }\n        },\n\n        _emptyState: function(enable) {\n            var that = this;\n            if (enable) {\n                that.element.html(this.options.messages.empty)\n                    .addClass(\"k-settings-description\")\n                    .removeClass(\"k-chip-list\");\n            } else {\n                that.element\n                    .removeClass(\"k-settings-description\")\n                    .addClass(\"k-chip-list\");\n            }\n        },\n\n        _redraw: function() {\n            var items = this._state() || [];\n            this._emptyState(!items.length);\n            if (items.length) {\n                this.element.html(this._targetsHTML(items));\n            }\n        },\n\n        _targetsHTML: function(items) {\n            var item;\n            var html = \"\";\n            var idx = 0;\n            var enabled = true;\n\n            if (items.length) {\n                for (; idx < items.length; idx++) {\n                    item = items[idx];\n                    item = item.name === undefined ? { name: item } : item;\n\n                    html += this.template({ name: item.name, menuenabled: enabled });\n                }\n            }\n            return html;\n        },\n\n        refresh: function() {\n            if (this.dataSource._preventRefresh) {\n                return;\n            }\n            var items = this.dataSource[this.options.setting]();\n            this._state(items, true);\n            this._emptyState(!this._state().length);\n            if (items.length) {\n                this.element.html(this._targetsHTML(items));\n            }\n        },\n\n        destroy: function() {\n            Widget.fn.destroy.call(this);\n\n            this.dataSource.unbind(CHANGE, this._refreshHandler);\n            this.element.off(NS);\n\n            if (this.sortable) {\n                this.sortable.destroy();\n            }\n\n            if (this.fieldMenu) {\n                this.fieldMenu.destroy();\n            }\n\n            this.element = null;\n            this._refreshHandler = null;\n        }\n    });\n\n    var PivotConfiguratorButton = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n            Widget.fn.init.call(that, element, options);\n            that.element = $(element);\n\n            that._element();\n            that._attachEvents();\n        },\n\n        options: {\n            name: \"PivotConfiguratorButton\",\n            text: \"Change settings\",\n            configurator: \"\"\n        },\n\n        destroy: function() {\n            this.element.off(NS);\n        },\n\n        setOptions: function(options) {\n            var that = this;\n            kendo.deepExtend(that.options, options);\n            this.init(this.element, this.options);\n        },\n\n        toggle: function() {\n            var attr = kendo.attr(\"role\");\n            var pivotEl = this.element\n                .closest(\"[\" + attr + \"=pivotcontainer]\")\n                .find(\"[\" + attr + \"=pivotgridv2]\");\n            var pivot;\n\n            $(\"#\" + this.options.configurator).toggleClass(\"k-hidden\");\n\n            if (pivotEl.length) {\n                pivot = pivotEl.getKendoPivotGridV2();\n                pivot._setContentWidth();\n                pivot._updateDimensions();\n            }\n        },\n\n        _attachEvents: function() {\n            this.element.on(\"click\" + NS, this.toggle.bind(this));\n        },\n\n        _element: function() {\n            var options = this.options;\n            this.element.addClass(\"k-pivotgrid-configurator-button\");\n            this.element.html(kendo.format(\"<span>{0}{1}</span>\",options.text, kendo.ui.icon('gear')));\n        }\n    });\n\n    var PivotContainer = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n            Widget.fn.init.call(that, element, options);\n            that.element = $(element);\n            that.options = options;\n\n\n            that._addClasses();\n        },\n\n        options: {\n            name: \"PivotContainer\",\n            configuratorPosition: \"left\"\n        },\n\n        setOptions: function(options) {\n            var that = this;\n            kendo.deepExtend(that.options, options);\n            this.init(this.element, this.options);\n        },\n\n        _addClasses: function() {\n            var options = this.options;\n            var className;\n            this.element.removeClass(\"k-flex-row k-flex-row-reverse k-flex-column k-flex-column-reverse\");\n\n            switch (options.configuratorPosition) {\n                case \"right\":\n                    className = \"k-flex-row\";\n                    break;\n                case \"left\":\n                    className = \"k-flex-row-reverse\";\n                    break;\n                case \"bottom\":\n                    className = \"k-flex-column\";\n                    break;\n                case \"top\":\n                    className = \"k-flex-column-reverse\";\n                    break;\n                default:\n                    className = \"k-flex-row\";\n            }\n\n            this.element\n                .addClass(\"k-d-flex k-pos-relative\")\n                .addClass(className);\n        }\n    });\n\n    var PivotGridV2 = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            Widget.fn.init.call(that, element, options);\n\n            that._dataSource();\n\n            that._bindConfigurator();\n\n            that._ariaId = that.element.attr(\"id\") || kendo.guid();\n            that._wrapper();\n\n            that._columnHeadersWrapper = $('<div class=\"k-pivotgrid-column-headers\"></div>');\n            that._rowHeadersWrapper = $('<div class=\"k-pivotgrid-row-headers\"></div>');\n            that._contentWrapper = $('<div class=\"k-pivotgrid-values\"></div>');\n\n            that.wrapper.append(that._columnHeadersWrapper);\n            that.wrapper.append(that._rowHeadersWrapper);\n            that.wrapper.append(that._contentWrapper);\n\n            that._columnBuilder = new ColumnRowBuilder( { template: this.options.columnHeaderTemplate, axes: \"columns\", ariaId: that._ariaId });\n            that._rowBuilder = new ColumnRowBuilder( { template: this.options.rowHeaderTemplate, axes: \"rows\", ariaId: that._ariaId });\n            that._contentBuilder = new ContentBuilderV2( {\n                dataCellTemplate: this.options.dataCellTemplate || DATACELL_TEMPLATE,\n                kpiStatusTemplate: this.options.kpiStatusTemplate || KPISTATUS_TEMPLATE,\n                kpiTrendTemplate: this.options.kpiTrendTemplate || KPITREND_TEMPLATE,\n                measures: this.dataSource._measures,\n                ariaId: that._ariaId\n            });\n\n            that._scrollable();\n            that._rowHeadersWrapper\n                .add(that._columnHeadersWrapper)\n                .on(\"click\", \"span.k-icon,span.k-svg-icon\", function() {\n                    var button = $(this);\n                    var path = button.parent().attr(kendo.attr(\"key\"));\n                    var expanded = button.is(\".k-i-chevron-up,.k-svg-i-chevron-up\");\n                    var isRow = button.closest(\".k-pivotgrid-row-headers\").length !== 0;\n                    var paths = path.split(\",\");\n                    var eventName = expanded ? COLLAPSEMEMBER : EXPANDMEMBER;\n\n                    if (that.trigger(eventName, { path: paths, axis: isRow ? \"rows\" : \"columns\" })) {\n                        return;\n                    }\n\n                    var reducerPayLoad = {\n                        type: \"HEADERS_ACTION_TOGGLE\",\n                        payload: paths,\n                        tree: isRow ? that._rowBuilder.getTree() : that._columnBuilder.getTree()\n                    };\n                    var currentAxes = isRow ? that.dataSource._rows : that.dataSource._columns;\n                    var newHeaders = headersReducer(currentAxes, reducerPayLoad);\n\n                    that.dataSource._preventRefresh = true;\n                    that._columnBuilder._exportData = {};\n                    that._rowBuilder._exportData = {};\n\n                    if (isRow) {\n                        that.dataSource.rows(newHeaders);\n                    } else {\n                        that.dataSource.columns(newHeaders);\n                    }\n                 });\n\n            if (that.options.autoBind) {\n                that.dataSource.fetch();\n            }\n\n            that._aria();\n\n            if (that.options.navigatable) {\n                that._initPivotGridNavigation();\n            }\n\n            that._initLoader();\n\n            kendo.notify(that);\n        },\n\n        events: [\n            DATABINDING,\n            DATABOUND,\n            EXPANDMEMBER,\n            COLLAPSEMEMBER\n        ],\n\n        options: {\n            name: \"PivotGridV2\",\n            autoBind: true,\n            height: null,\n            columnWidth: null,\n            configurator: \"\",\n            columnHeaderTemplate: null,\n            rowHeaderTemplate: null,\n            dataCellTemplate: null,\n            kpiStatusTemplate: null,\n            kpiTrendTemplate: null,\n            messages: {\n                emptyCellLabel: \"PivotGrid Empty Cell\"\n            }\n        },\n\n        destroy: function() {\n            var that = this;\n            Widget.fn.destroy.call(that);\n\n            if (that.loader) {\n                that.loader.destroy();\n            }\n\n            if (that._windowResizeHandler) {\n                $(window).off(RESIZE + NS, that._windowResizeHandler);\n                that._windowResizeHandler = null;\n            }\n        },\n\n        _aria: function() {\n            var that = this;\n            that.element.attr(\"role\", \"grid\");\n        },\n\n        setDataSource: function(dataSource) {\n            this.options.dataSource = dataSource;\n\n            this._dataSource();\n\n            this._bindConfigurator();\n\n            if (this.options.autoBind) {\n                dataSource.fetch();\n            }\n        },\n\n        _initLoader: function(options) {\n            var that = this,\n                defaultOptions = {\n                    messages: { exporting: 'Exporting...' }\n            };\n            defaultOptions = $.extend({}, defaultOptions, options);\n\n            const loader = $(\"<div></div>\").kendoLoader(defaultOptions).data(\"kendoLoader\");\n\n            that.loader = loader;\n            that._loaderContainer = useLoaderContainer.bind(that);\n        },\n\n\n        _initPivotGridNavigation: function() {\n            var that = this;\n\n            that.navigation = new PivotGridNavigation({ tabIndex: 0 });\n            that.navigation.keyboardEvents.keydown.o = function(_target, nav, _ev) {\n                if (!nav.root) {\n                    return;\n                }\n                // FIX: ADDED manually to fix an issue where depending on the order of the config element and button\n                // you either can open the configurator with O, or you can close the configurator with ESC\n                let next = nav.root.nextElementSibling;\n                if (!(next && next instanceof HTMLElement)) {\n                    return;\n                }\n                if (!next.matches('div.k-pivotgrid-configurator-button')) {\n                    next = next.nextElementSibling;\n                }\n                if (next && next instanceof HTMLElement && next.matches('div.k-pivotgrid-configurator-button')) {\n                    if (!nav.root.parentNode || nav.root.parentNode.querySelector(\".k-pivotgrid-configurator.k-hidden\")) {\n                        next.click();\n                    }\n                    setTimeout(() => {\n                        if (nav.root.parentNode) {\n                            const confHeader = nav.root.parentNode.querySelector('.k-pivotgrid-configurator-content .k-form-field .k-fields-list-wrapper .k-treeview');\n                            if (confHeader instanceof HTMLElement) {\n                                confHeader.setAttribute('tabindex', String(nav.tabIndex));\n                                confHeader.focus();\n                            }\n                        }\n                    }, 0);\n                }\n            };\n            that.navigation.start(that.element[0]);\n\n            const firstCell = that.navigation.first;\n\n            if (firstCell) {\n                firstCell.setAttribute('tabindex', '0');\n            }\n        },\n\n        _matchAriaAttributes: function(wrapper) {\n            var that = this;\n            const rowHeaderRows = wrapper.querySelectorAll(\n                \".k-pivotgrid-row-headers .k-pivotgrid-row\"\n            );\n            const rowHeaderCols = !rowHeaderRows[0] ? [] : Array.from(rowHeaderRows[0].children).reduce(\n                (acc, curr) => (acc += curr.getAttribute(\"colspan\") !== null ? +curr.getAttribute(\"colspan\") : 1),\n                0\n            );\n            const colHeaderRows = wrapper.querySelectorAll(\n                \".k-pivotgrid-column-headers tr\"\n            );\n            const colHeaderCells = wrapper.querySelectorAll(\n                \".k-pivotgrid-column-headers th\"\n            );\n            const valueTableCells = wrapper.querySelectorAll(\".k-pivotgrid-values td\");\n            const emptyCell = wrapper.querySelector(\".k-pivotgrid-empty-cell\");\n\n            emptyCell.setAttribute(\"aria-rowspan\", colHeaderRows.length.toString());\n            emptyCell.setAttribute(\"aria-colspan\", rowHeaderCols.toString());\n\n            const firstColHeadersRow = colHeaderRows[0];\n            const firstColHeaderRowCellsIds = !firstColHeadersRow ? [] : Array.from(firstColHeadersRow.children)\n                .map(el => el.getAttribute(\"id\"))\n                .join(\" \");\n            if (firstColHeadersRow) {\n                firstColHeadersRow.setAttribute(\n                    \"aria-owns\",\n                    `${emptyCell.getAttribute(\"id\")} ${firstColHeaderRowCellsIds}`\n                );\n            }\n\n            rowHeaderRows.forEach((row, index) => {\n                const valueCellsIds = that.filterAndMap(\n                    Array.from(valueTableCells),\n                    c => {\n                        const idParts = c.getAttribute(\"id\").split(\"-\");\n                        return idParts[idParts.length - 2] === (index + 1).toString();\n                    },\n                    c => c.getAttribute(\"id\")\n                );\n\n                row.setAttribute(\"aria-owns\", valueCellsIds.join(\" \"));\n            });\n\n            valueTableCells.forEach(cell => {\n                const idParts = cell.getAttribute(\"id\").split(\"-\");\n                const cellColIndex = +idParts[idParts.length - 1];\n                const colHeaderCellsIds = that.filterAndMap(\n                    Array.from(colHeaderCells),\n                    c => {\n                        const idParts = c.getAttribute(\"id\").split(\"-\");\n                        const headerCellColIndex = +idParts[idParts.length - 1];\n                        const headerCellColspan = +c.getAttribute(\"colspan\");\n                        const colIndexIsEqual = cellColIndex === headerCellColIndex;\n                        const cellColIndexIsWithinHeaderCellRange =\n                            headerCellColspan > 1 &&\n                            headerCellColIndex < cellColIndex &&\n                            headerCellColIndex + headerCellColspan - 1 >= cellColIndex;\n\n                        return colIndexIsEqual || cellColIndexIsWithinHeaderCellRange;\n                    },\n                    c => c.getAttribute(\"id\")\n                );\n\n                cell.setAttribute(\"aria-describedby\", colHeaderCellsIds.join(\" \"));\n            });\n        },\n\n        filterAndMap: function(arr, predicate, mapper) {\n            return arr.reduce(\n                (acc, curr) => (predicate(curr) ? [...acc, mapper(curr)] : acc),\n                []\n            );\n        },\n\n        _dataSource: function() {\n            var that = this;\n            var dataSource = that.options.dataSource;\n\n            dataSource = Array.isArray(dataSource) ? { data: dataSource } : dataSource;\n\n            if (that.dataSource && this._refreshHandler) {\n                that.dataSource.unbind(CHANGE, that._refreshHandler)\n                               .unbind(PROGRESS, that._progressHandler)\n                               .unbind(ERROR, that._errorHandler);\n            } else {\n                that._refreshHandler = that.refresh.bind(that);\n                that._progressHandler = that._requestStart.bind(that);\n                that._errorHandler = that._error.bind(that);\n            }\n\n            that.dataSource = kendo.data.PivotDataSourceV2.create(dataSource)\n                                   .bind(CHANGE, that._refreshHandler)\n                                   .bind(PROGRESS, that._progressHandler)\n                                   .bind(ERROR, that._errorHandler);\n        },\n\n        _resize: function() {\n            var that = this;\n            that.wrapper[0].style.setProperty('--kendo-scrollbar-width', kendo.format(\"{0}px\", getScollWidth()));\n        },\n\n        _scrollable: function() {\n            var that = this;\n            var columnsHeader = that._columnHeadersWrapper;\n            var rowsHeader = that._rowHeadersWrapper;\n\n            that._resize();\n            that._windowResizeHandler = that._resize.bind(that);\n\n            that._contentWrapper.scroll(function() {\n                kendo.scrollLeft(columnsHeader, this.scrollLeft);\n                rowsHeader.scrollTop(this.scrollTop);\n            });\n\n            rowsHeader.bind(\"DOMMouseScroll\" + NS + \" mousewheel\" + NS, that._wheelScroll.bind(that));\n            $(window).on(RESIZE + NS, that._windowResizeHandler);\n        },\n\n        _wheelScroll: function(e) {\n            if (e.ctrlKey) {\n                return;\n            }\n\n            var delta = kendo.wheelDeltaY(e);\n            var scrollTop = this._contentWrapper.scrollTop();\n\n            if (delta) {\n                e.preventDefault();\n                $(e.currentTarget).one(\"wheel\" + NS, false);\n\n                this._rowHeadersWrapper.scrollTop(scrollTop + (-delta));\n                this._contentWrapper.scrollTop(scrollTop + (-delta));\n            }\n        },\n\n        _wrapper: function() {\n            var height = this.options.height;\n\n            this.wrapper = this.element.addClass(\"k-pivotgrid\");\n            var emptyCell = $(`<span class=\"k-pivotgrid-empty-cell\" id=\"${this._ariaId}-empty-cell\" role=\"columnheader\"><span class=\"k-sr-only\">${this.options.messages.emptyCellLabel}</span></span>`);\n            this.wrapper.append(emptyCell);\n\n            if (height) {\n                this.wrapper.css(\"height\", height);\n            }\n        },\n\n        _progress: function(toggle) {\n            if (this._isExport) {\n                this._loaderContainer(toggle, { message: \"Exporting...\" });\n            } else {\n                kendo.ui.progress(this.wrapper, toggle);\n            }\n        },\n\n        _error: function() {\n            this._progress(false);\n        },\n\n        _requestStart: function() {\n            this._progress(true);\n        },\n\n        _updateDimensions: function() {\n            var that = this;\n            that.wrapper.css({\n                \"grid-template-columns\": kendo.format(\"{0}px 1fr\", that._rowHeadersWrapper.find(\".k-pivotgrid-table\")[0].offsetWidth),\n                \"grid-template-rows\": kendo.format(\"{0}px 1fr\", that._columnHeadersWrapper.find(\".k-pivotgrid-table\")[0].offsetHeight),\n            });\n        },\n\n        _setContentWidth: function() {\n            if (!this.options.columnWidth) {\n                return;\n            }\n            var contentTable = this._contentWrapper.find(\"table\");\n            var columnTable = this._columnHeadersWrapper.children(\"table\");\n            var rowTable = this._rowHeadersWrapper.children(\"table\");\n\n            contentTable.add(columnTable).add(rowTable).find(\"col\").width(this.options.columnWidth);\n        },\n\n        _bindConfigurator: function() {\n            var configurator = this.options.configurator;\n            if (configurator) {\n                $(configurator).kendoPivotConfiguratorV2(\"setDataSource\", this.dataSource);\n            }\n        },\n\n        cellInfoByElement: function(element) {\n            element = $(element);\n\n            return this.cellInfo(element.index(), element.parent(\"tr\").index());\n        },\n\n        cellInfo: function(columnIndex, rowIndex) {\n            var contentBuilder = this._contentBuilder;\n            var dataIndex;\n            var dataItem;\n\n            if (columnIndex >= contentBuilder.columnsCount || columnIndex < 0 ||\n                rowIndex >= contentBuilder.rowsCount || rowIndex < 0) {\n                return null;\n            }\n\n            dataIndex = rowIndex * contentBuilder.columnsCount + columnIndex;\n            dataItem = contentBuilder.hash[dataIndex < 0 ? 0 : dataIndex];\n\n            return {\n                columnTuple: dataItem.columnTuple,\n                rowTuple: dataItem.rowTuple,\n                dataItem: dataItem.data\n            };\n        },\n\n        refresh: function() {\n            var that = this;\n\n            var dataSource = that.dataSource;\n            if (that.trigger(DATABINDING, { action: \"rebind\" } )) {\n                return;\n            }\n\n            var lastFocusedCellID = kendo._activeElement() ? kendo._activeElement().id : null;\n            var lastCellIdWithTabIndex = that.wrapper.find(\"[tabindex=0]\").attr(\"id\");\n            that._columnBuilder.setTuples(dataSource._columnTuples);\n            that._columnHeadersWrapper.html(that._columnBuilder.build());\n\n            that._rowBuilder.setTuples(dataSource._rowTuples);\n            that._rowHeadersWrapper.html(that._rowBuilder.build());\n\n            that._contentBuilder.setRowColumnInfo({\n                columnHeaderLeafs: that._columnBuilder.getHeaderLeafs(),\n                rowHeaderLeafs: that._rowBuilder.getHeaderLeafs(),\n                columnHeaderBreadth: that._columnBuilder.getBreadth(),\n                rowHeaderDepth: that._rowBuilder.getBreadth(),\n                data: dataSource._view\n            });\n\n            that._contentWrapper.html(that._contentBuilder.build());\n\n\n            that._setContentWidth();\n            that._updateDimensions();\n\n            that._progress(false);\n\n            that.trigger(DATABOUND);\n            that._matchAriaAttributes(that.wrapper[0]);\n\n            if (!that.navigation) {\n                return;\n            }\n\n            if (lastCellIdWithTabIndex && that.element.find(`#${lastCellIdWithTabIndex}`).length > 0) {\n                that.element.find(`#${lastCellIdWithTabIndex}`).attr('tabindex', '0');\n            } else {\n                const firstCell = that.navigation.first;\n\n                if (firstCell) {\n                    firstCell.setAttribute('tabindex', '0');\n                }\n            }\n\n            if (lastFocusedCellID && lastFocusedCellID.indexOf(that._ariaId) == 0) {\n                that.navigation.focusElement(that.element.find(`#${lastFocusedCellID}`)[0]);\n            }\n        }\n    });\n\n    ui.plugin(PivotConfiguratorButton);\n    ui.plugin(PivotContainer);\n    ui.plugin(PivotGridV2);\n\n    var PivotGrid = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n            var columnBuilder;\n            var rowBuilder;\n\n            Widget.fn.init.call(that, element, options);\n\n            STATE_COLLAPSED_ICONNAME = kendo.support.isRtl(that.element) ? \"caret-alt-left\" : \"caret-alt-right\";\n\n            that._dataSource();\n\n            that._bindConfigurator();\n\n            that._wrapper();\n            that._createLayout();\n\n            that._columnBuilder = columnBuilder = new ColumnBuilder();\n            that._rowBuilder = rowBuilder = new RowBuilder();\n            that._contentBuilder = new ContentBuilder();\n\n            that._templates();\n\n            that.columnsHeader\n                .add(that.rowsHeader)\n                .on(\"click\", \"span.k-icon,span.k-svg-icon\", function() {\n                    var button = $(this);\n                    var builder = columnBuilder;\n                    var action = \"expandColumn\";\n                    var eventName;\n                    var path = button.attr(kendo.attr(\"path\"));\n                    var eventArgs = {\n                        axis: \"columns\",\n                        path: JSON.parse(path)\n                    };\n\n                    if (button.parent().is(\"td\")) {\n                        builder = rowBuilder;\n                        action = \"expandRow\";\n                        eventArgs.axis = \"rows\";\n                    }\n\n                    var expanded = button.is(STATE_EXPANDED_SELECTOR);\n                    var metadata = builder.metadata[path];\n                    var request = metadata.expanded === undefined;\n\n                    eventName = expanded ? COLLAPSEMEMBER : EXPANDMEMBER;\n                    eventArgs.childrenLoaded = metadata.maxChildren > metadata.children;\n\n                    if (that.trigger(eventName, eventArgs)) {\n                        return;\n                    }\n\n                    builder.metadata[path].expanded = !expanded;\n                    kendo.ui.icon(button,{ icon: !expanded ? STATE_EXPANDED_ICONNAME : STATE_COLLAPSED_ICONNAME });\n\n                    if (!expanded && request) {\n                        that.dataSource[action](eventArgs.path);\n                    } else {\n                        that.refresh();\n                    }\n                });\n\n            that._scrollable();\n\n            if (that.options.autoBind) {\n                that.dataSource.fetch();\n            }\n\n            kendo.notify(that);\n        },\n\n        events: [\n            DATABINDING,\n            DATABOUND,\n            EXPANDMEMBER,\n            COLLAPSEMEMBER\n        ],\n\n        options: {\n            name: \"PivotGrid\",\n            autoBind: true,\n            reorderable: true,\n            filterable: false,\n            sortable: false,\n            navigatable: false,\n            height: null,\n            columnWidth: 100,\n            configurator: \"\",\n            columnHeaderTemplate: null,\n            rowHeaderTemplate: null,\n            dataCellTemplate: null,\n            kpiStatusTemplate: null,\n            kpiTrendTemplate: null,\n            messages: {\n                measureFields: \"Drop Data Fields Here\",\n                columnFields: \"Drop Column Fields Here\",\n                rowFields: \"Drop Rows Fields Here\"\n            }\n        },\n\n        _templates: function() {\n            var columnTemplate = this.options.columnHeaderTemplate;\n            var rowTemplate = this.options.rowHeaderTemplate;\n            var dataTemplate = this.options.dataCellTemplate;\n            var kpiStatusTemplate = this.options.kpiStatusTemplate;\n            var kpiTrendTemplate = this.options.kpiTrendTemplate;\n\n            this._columnBuilder.template = kendo.template(columnTemplate || HEADER_TEMPLATE, { useWithBlock: !!columnTemplate });\n            this._contentBuilder.dataTemplate = kendo.template(dataTemplate || DATACELL_TEMPLATE, { useWithBlock: !!dataTemplate });\n            this._contentBuilder.kpiStatusTemplate = kendo.template(kpiStatusTemplate || KPISTATUS_TEMPLATE, { useWithBlock: !!kpiStatusTemplate });\n            this._contentBuilder.kpiTrendTemplate = kendo.template(kpiTrendTemplate || KPITREND_TEMPLATE, { useWithBlock: !!kpiTrendTemplate });\n            this._rowBuilder.template = kendo.template(rowTemplate || HEADER_TEMPLATE, { useWithBlock: !!rowTemplate });\n        },\n\n        _bindConfigurator: function() {\n            var configurator = this.options.configurator;\n            if (configurator) {\n                $(configurator).kendoPivotConfigurator(\"setDataSource\", this.dataSource);\n            }\n        },\n\n        cellInfoByElement: function(element) {\n            element = $(element);\n\n            return this.cellInfo(element.index(), element.parent(\"tr\").index());\n        },\n\n        cellInfo: function(columnIndex, rowIndex) {\n            var contentBuilder = this._contentBuilder;\n            var columnInfo = contentBuilder.columnIndexes[columnIndex || 0];\n            var rowInfo = contentBuilder.rowIndexes[rowIndex || 0];\n            var dataIndex;\n\n            if (!columnInfo || !rowInfo) {\n                return null;\n            }\n\n            dataIndex = (rowInfo.index * contentBuilder.rowLength) + columnInfo.index;\n\n            return {\n                columnTuple: columnInfo.tuple,\n                rowTuple: rowInfo.tuple,\n                measure: columnInfo.measure || rowInfo.measure,\n                dataItem: this.dataSource.view()[dataIndex]\n            };\n        },\n\n        setDataSource: function(dataSource) {\n            this.options.dataSource = dataSource;\n\n            this._dataSource();\n\n            if (this.measuresTarget) {\n                this.measuresTarget.setDataSource(dataSource);\n            }\n\n            if (this.rowsTarget) {\n                this.rowsTarget.setDataSource(dataSource);\n            }\n\n            if (this.columnsTarget) {\n                this.columnsTarget.setDataSource(dataSource);\n            }\n\n            this._bindConfigurator();\n\n            if (this.options.autoBind) {\n                dataSource.fetch();\n            }\n        },\n\n        setOptions: function(options) {\n            Widget.fn.setOptions.call(this, options);\n\n            this._templates();\n        },\n\n        destroy: function() {\n            Widget.fn.destroy.call(this);\n\n            clearTimeout(this._headerReflowTimeout);\n        },\n\n        _dataSource: function() {\n            var that = this;\n            var dataSource = that.options.dataSource;\n\n            dataSource = Array.isArray(dataSource) ? { data: dataSource } : dataSource;\n\n            if (that.dataSource && this._refreshHandler) {\n                that.dataSource.unbind(CHANGE, that._refreshHandler)\n                               .unbind(STATERESET, that._stateResetHandler)\n                               .unbind(PROGRESS, that._progressHandler)\n                               .unbind(ERROR, that._errorHandler);\n            } else {\n                that._refreshHandler = that.refresh.bind(that);\n                that._progressHandler = that._requestStart.bind(that);\n                that._stateResetHandler = that._stateReset.bind(that);\n                that._errorHandler = that._error.bind(that);\n            }\n\n            that.dataSource = kendo.data.PivotDataSource.create(dataSource)\n                                   .bind(CHANGE, that._refreshHandler)\n                                   .bind(PROGRESS, that._progressHandler)\n                                   .bind(STATERESET, that._stateResetHandler)\n                                   .bind(ERROR, that._errorHandler);\n        },\n\n        _error: function() {\n            this._progress(false);\n        },\n\n        _requestStart: function() {\n            this._progress(true);\n        },\n\n        _stateReset: function() {\n            this._columnBuilder.reset();\n            this._rowBuilder.reset();\n        },\n\n        _wrapper: function() {\n            var height = this.options.height;\n\n            this.wrapper = this.element.addClass(\"k-pivot\");\n\n            if (height) {\n                this.wrapper.css(\"height\", height);\n            }\n        },\n\n        _measureFields: function() {\n            this.measureFields = $(DIV).addClass(\"k-pivot-toolbar k-toolbar k-settings-measures\");\n\n            this.measuresTarget = this._createSettingTarget(this.measureFields, {\n                setting: \"measures\",\n                messages: {\n                    empty: this.options.messages.measureFields\n                }\n            });\n        },\n\n        _createSettingTarget: function(element, options) {\n            var template,\n                pivotOptions = this.options;\n\n            template = ({ sortIcon, name }) => ''\n                + `<span class=\"k-chip\" tabindex=\"0\" data-${kendo.ns}name=\"${name}\">`\n                    + '<span class=\"k-chip-content\">'\n                        + `<span class=\"k-chip-text\">${name}</span>`\n                    + '</span>'\n                    + '<span class=\"k-chip-actions k-field-actions\">'\n                        + getIcons(sortIcon, options, pivotOptions)\n                    + '</span>'\n                + '</span>';\n\n            return new kendo.ui.PivotSettingTarget(element, $.extend({\n                dataSource: this.dataSource,\n                template: template,\n                emptyTemplate: (data) => `<span class=\"k-empty\">${data}</span>`,\n                enabled: this.options.reorderable\n            }, options));\n        },\n\n        _initSettingTargets: function() {\n            this.columnsTarget = this._createSettingTarget(this.columnFields, {\n                connectWith: this.rowFields,\n                setting: \"columns\",\n                filterable: this.options.filterable,\n                sortable: this.options.sortable,\n                messages: {\n                    empty: this.options.messages.columnFields,\n                    fieldMenu: this.options.messages.fieldMenu\n                }\n            });\n\n            this.rowsTarget = this._createSettingTarget(this.rowFields, {\n                connectWith: this.columnFields,\n                setting: \"rows\",\n                filterable: this.options.filterable,\n                sortable: this.options.sortable,\n                messages: {\n                    empty: this.options.messages.rowFields,\n                    fieldMenu: this.options.messages.fieldMenu\n                }\n            });\n        },\n\n        _createLayout: function() {\n            var that = this;\n            var layoutTable = $(LAYOUT_TABLE);\n            var leftContainer = layoutTable.find(\".k-pivot-rowheaders\");\n            var rightContainer = layoutTable.find(\".k-pivot-table\");\n            var gridWrapper = $(DIV).addClass(\"k-grid\");\n\n            that._measureFields();\n            that.columnFields = $(DIV).addClass(\"k-pivot-toolbar k-toolbar k-settings-columns\");\n\n            that.rowFields = $(DIV).addClass(\"k-pivot-toolbar k-toolbar k-settings-rows\");\n            that.columnsHeader = $('<div class=\"k-grid-header-wrap\" />')\n                                    .wrap('<div class=\"k-grid-header\" />');\n\n            that.columnsHeader.parent().css(\"padding-right\", kendo.support.scrollbar());\n\n            that.rowsHeader = $('<div class=\"k-grid k-alt\"/>');\n            that.content = $('<div class=\"k-grid-content\" />');\n\n            leftContainer.append(that.measureFields);\n            leftContainer.append(that.rowFields);\n            leftContainer.append(that.rowsHeader);\n\n            gridWrapper.append(that.columnsHeader.parent());\n            gridWrapper.append(that.content);\n\n            rightContainer.append(that.columnFields);\n            rightContainer.append(gridWrapper);\n\n            that.wrapper.append(layoutTable);\n\n            that.columnsHeaderTree = new kendo.dom.Tree(that.columnsHeader[0]);\n            that.rowsHeaderTree = new kendo.dom.Tree(that.rowsHeader[0]);\n            that.contentTree = new kendo.dom.Tree(that.content[0]);\n\n            that._initSettingTargets();\n        },\n\n        _progress: function(toggle) {\n            kendo.ui.progress(this.wrapper, toggle);\n        },\n\n        _resize: function() {\n            if (this.content[0].firstChild) {\n                this._setSectionsWidth();\n                this._setSectionsHeight();\n                this._setContentWidth();\n                this._setContentHeight();\n                this._columnHeaderReflow();\n            }\n        },\n\n        _columnHeaderReflow: function() {\n            var columnTable = this.columnsHeader.children(\"table\");\n\n            if (!kendo.support.browser.mozilla) {\n                return;\n            }\n\n            clearTimeout(this._headerReflowTimeout);\n\n            columnTable.css(\"table-layout\", \"auto\");\n\n            this._headerReflowTimeout = setTimeout(function() {\n                columnTable.css(\"table-layout\", \"\");\n            });\n        },\n\n        _setSectionsWidth: function() {\n            var rowsHeader = this.rowsHeader;\n            var leftColumn = rowsHeader.parent(\".k-pivot-rowheaders\").width(AUTO);\n            var width;\n\n            width = Math.max(outerWidth(this.measureFields), outerWidth(this.rowFields));\n            width = Math.max(rowsHeader.children(\"table\").width(), width);\n\n            leftColumn.width(width);\n        },\n\n        _setSectionsHeight: function() {\n            var measureFieldsHeight = this.measureFields.height(AUTO).height();\n            var columnFieldsHeight = this.columnFields.height(AUTO).height();\n            var rowFieldsHeight = this.rowFields.height(AUTO).innerHeight();\n            var columnsHeight = this.columnsHeader.height(AUTO).innerHeight();\n\n            var padding = rowFieldsHeight - this.rowFields.height();\n\n            var firstRowHeight = columnFieldsHeight > measureFieldsHeight ? columnFieldsHeight : measureFieldsHeight;\n            var secondRowHeight = columnsHeight > rowFieldsHeight ? columnsHeight : rowFieldsHeight;\n\n            this.measureFields.height(firstRowHeight);\n            this.columnFields.height(firstRowHeight);\n            this.rowFields.height(secondRowHeight - padding);\n            this.columnsHeader.height(secondRowHeight);\n        },\n\n        _setContentWidth: function() {\n            var contentTable = this.content.find(\"table\");\n            var columnTable = this.columnsHeader.children(\"table\");\n\n            var rowLength = contentTable.children(\"colgroup\").children().length;\n\n            var calculatedWidth = rowLength * this.options.columnWidth;\n            var minWidth = Math.ceil((calculatedWidth / this.content.width()) * 100);\n\n            if (minWidth < 100) {\n                minWidth = 100;\n            }\n\n            contentTable.add(columnTable).css(\"width\", minWidth + \"%\");\n\n            this._resetColspan(columnTable);\n        },\n\n        _setContentHeight: function() {\n            var that = this;\n            var content = that.content;\n            var rowsHeader = that.rowsHeader;\n            var innerHeight = that.wrapper.innerHeight();\n            var scrollbar = kendo.support.scrollbar();\n            var skipScrollbar = content[0].offsetHeight === content[0].clientHeight;\n            var height = that.options.height;\n\n            if (that.wrapper.is(\":visible\")) {\n                if (!innerHeight || !height) {\n                    if (skipScrollbar) {\n                        scrollbar = 0;\n                    }\n\n                    content.height(\"auto\");\n                    rowsHeader.height(content.height() - scrollbar);\n                    return;\n                }\n\n                innerHeight -= outerHeight(that.columnFields);\n                innerHeight -= outerHeight(that.columnsHeader.parent());\n\n                if (innerHeight <= scrollbar * 2) { // do not set height if proper scrollbar cannot be displayed\n                    innerHeight = scrollbar * 2 + 1;\n                    if (!skipScrollbar) {\n                        innerHeight += scrollbar;\n                    }\n                }\n\n                content.height(innerHeight);\n\n                if (skipScrollbar) {\n                    scrollbar = 0;\n                }\n\n                rowsHeader.height(innerHeight - scrollbar);\n            }\n        },\n\n        _resetColspan: function(columnTable) {\n            var that = this;\n            var cell = columnTable.children(\"tbody\").children().first().children().first();\n\n            if (that._colspan === undefined) {\n                that._colspan = cell.attr(\"colspan\");\n            }\n\n            cell.attr(\"colspan\", 1);\n\n            clearTimeout(that._layoutTimeout);\n\n            that._layoutTimeout = setTimeout(function() {\n                cell.attr(\"colspan\", that._colspan);\n                that._colspan = undefined;\n            });\n        },\n\n        _axisMeasures: function(axis) {\n            var result = [];\n            var dataSource = this.dataSource;\n            var measures = dataSource.measures();\n            var hasMeasure = measures.length > 1 || (measures[0] && measures[0].type);\n\n            if (dataSource.measuresAxis() === axis) {\n                if (dataSource[axis]().length === 0 || hasMeasure) {\n                    result = measures;\n                }\n            }\n\n            return result;\n        },\n\n        items: function() {\n            return [];\n        },\n\n        refresh: function() {\n            var that = this;\n            var dataSource = that.dataSource;\n\n            var axes = dataSource.axes();\n            var columns = (axes.columns || {}).tuples || [];\n            var rows = (axes.rows || {}).tuples || [];\n\n            var columnBuilder = that._columnBuilder;\n            var rowBuilder = that._rowBuilder;\n\n            var columnAxis = {};\n            var rowAxis = {};\n\n            if (that.trigger(DATABINDING, { action: \"rebind\" } )) {\n                return;\n            }\n\n            columnBuilder.measures = that._axisMeasures(AXIS_COLUMNS);\n            rowBuilder.measures = that._axisMeasures(AXIS_ROWS);\n\n            that.columnsHeaderTree.render(columnBuilder.build(columns));\n            that.rowsHeaderTree.render(rowBuilder.build(rows));\n\n            columnAxis = {\n                indexes: columnBuilder._indexes,\n                measures: columnBuilder.measures,\n                metadata: columnBuilder.metadata\n            };\n\n            rowAxis = {\n                indexes: rowBuilder._indexes,\n                measures: rowBuilder.measures,\n                metadata: rowBuilder.metadata\n            };\n\n            that.contentTree.render(that._contentBuilder.build(dataSource.view(), columnAxis, rowAxis));\n\n            that._resize();\n\n            if (that.touchScroller) {\n                that.touchScroller.contentResized();\n            } else {\n                var touchScroller = kendo.touchScroller(that.content);\n\n                if (touchScroller && touchScroller.movable) {\n                    that.touchScroller = touchScroller;\n\n                    touchScroller.movable.bind(\"change\", function(e) {\n                        kendo.scrollLeft(that.columnsHeader, -e.sender.x);\n                        that.rowsHeader.scrollTop(-e.sender.y);\n                    });\n                }\n            }\n\n            that._progress(false);\n\n            that.trigger(DATABOUND);\n        },\n\n        _scrollable: function() {\n            var that = this;\n            var columnsHeader = that.columnsHeader;\n            var rowsHeader = that.rowsHeader;\n\n            that.content.on(\"scroll\", function() {\n                kendo.scrollLeft(columnsHeader, this.scrollLeft);\n                rowsHeader.scrollTop(this.scrollTop);\n            });\n\n            rowsHeader.on(\"DOMMouseScroll\" + NS + \" mousewheel\" + NS, that._wheelScroll.bind(that));\n        },\n\n        _wheelScroll: function(e) {\n            if (e.ctrlKey) {\n                return;\n            }\n\n            var delta = kendo.wheelDeltaY(e);\n            var scrollTop = this.content.scrollTop();\n\n            if (delta) {\n                e.preventDefault();\n                //In Firefox DOMMouseScroll event cannot be canceled\n                $(e.currentTarget).closest(\":not(path,svg)\").one(\"wheel\" + NS, false);\n\n                this.rowsHeader.scrollTop(scrollTop + (-delta));\n                this.content.scrollTop(scrollTop + (-delta));\n            }\n        }\n    });\n\n    var element = kendo.dom.element;\n    var htmlNode = kendo.dom.html;\n\n    var createMetadata = function(levelNum, memberIdx) {\n       return {\n            maxChildren: 0,\n            children: 0,\n            maxMembers: 0,\n            members: 0,\n            measures: 1,\n            levelNum: levelNum,\n            parentMember: memberIdx !== 0\n        };\n    };\n\n    var buildPath = function(tuple, index) {\n        var path = [];\n        var idx = 0;\n\n        for (; idx <= index; idx++) {\n            path.push(tuple.members[idx].name);\n        }\n\n        return path;\n    };\n\n    var tupleName = function(tuple, index) {\n        var name = \"\";\n        var idx = 0;\n\n        for (; idx <= index; idx++) {\n            name += tuple.members[idx].name;\n        }\n\n        return name;\n    };\n\n    var ContentBuilderV2 = Class.extend({\n        init: function(options) {\n            this.dataCellTemplate = kendo.template(options.dataCellTemplate);\n            this.kpiStatusTemplate = kendo.template(options.kpiStatusTemplate);\n            this.kpiTrendTemplate = kendo.template(options.kpiTrendTemplate);\n            this.measures = options.measures;\n            this.ariaId = options.ariaId;\n            this.hash = [];\n        },\n\n        setRowColumnInfo: function(options) {\n            this.data = options.data;\n            this.columnHeaderLeafs = options.columnHeaderLeafs;\n            this.rowHeaderLeafs = options.rowHeaderLeafs;\n            this.columnHeaderBreadth = options.columnHeaderBreadth;\n            this.rowHeaderDepth = options.rowHeaderDepth;\n            this.hash.length = 0;\n        },\n\n        addColElements: function(count) {\n            var html = \"\";\n\n            for (var index = 0; index < count; index++) {\n                html += \"<col>\";\n            }\n\n            this.table.find(\"colgroup\").append(html);\n        },\n\n        addRowElements: function(data) {\n            var that = this;\n            var body = that.table.find(\"tbody\");\n            var row;\n\n            for (var index = 0; index < data.length; index++) {\n                row = $(`<tr class=\"k-pivotgrid-row\" role='presentation'></tr>`);\n                body.append(row);\n                that.addColumCell(row, data[index], index);\n            }\n\n            this.rowsCount = data.length;\n        },\n\n        _getTemplate: function(cell, options) {\n            const that = this;\n            let measureType;\n\n            const cellMembers = cell.columnTuple.members;\n            const cellMeasure = cellMembers[cellMembers.length - 1];\n            const measure = that.measures && that.measures.find((measure) => measure.name === cellMeasure.name);\n            const cellValue = cell.data !== null ? cell.data.value : cell.data;\n\n            if (measure && measure.type) {\n                measureType = measure.type;\n            }\n\n            let template = this.dataCellTemplate;\n            if (this.measures && measureType && cellValue !== \"\") {\n                if (!options.dataItem) {\n                    options.dataItem = { value: isNaN(Number(cellValue)) ? cellValue : Number(cellValue) };\n                }\n                switch (measureType) {\n                    case \"status\":\n                      template = this.kpiStatusTemplate;\n                      break;\n                    case \"trend\":\n                      template = this.kpiTrendTemplate;\n                      break;\n                  }\n            }\n\n            return template(options);\n\n        },\n\n        addColumCell: function(rowEl, rowItem, rowIndex) {\n            var that = this;\n            for (var index = 0; index < rowItem.cells.length; index++) {\n                var cell = rowItem.cells[index];\n                if (cell) {\n                    var cellEl = $(`<td id=\"${that.ariaId}-cell-${rowIndex + 1}-${index + 1}\" class=\"k-pivotgrid-cell\" role=\"gridcell\"></td>`);\n                    if (this.rowHeaderLeafs[rowIndex].total || this.columnHeaderLeafs[index].total) {\n                        cellEl.addClass(\"k-pivotgrid-total\");\n                    }\n\n                    cellEl.append(that._getTemplate(cell, {\n                        dataItem: cell.data,\n                        rowTuple: cell.rowTuple,\n                        columnTuple: cell.columnTuple\n                    }));\n                    this.hash.push(cell);\n                    rowEl.append(cellEl);\n                }\n            }\n        },\n\n        build: function() {\n            var data = toData((this.data || []).slice(), this.columnHeaderLeafs, this.rowHeaderLeafs, this.columnHeaderBreadth, this.rowHeaderDepth);\n            var that = this;\n\n            var table = $(`<table class='k-pivotgrid-table' role='presentation'><colgroup></colgroup><tbody class='k-pivotgrid-tbody' role='presentation'></tbody></table>`);\n\n            that.table = table;\n            that.addColElements(this.columnHeaderLeafs.length);\n            that.addRowElements(data);\n            this.rowsCount = data.length;\n            this.columnsCount = this.columnHeaderLeafs.length;\n\n            return that.table;\n        }\n    });\n\n    var ColumnRowBuilder = Class.extend({\n        init: function(options) {\n            this.tuples = options.tuples;\n            this.axes = options.axes;\n            this.ariaId = options.ariaId;\n            this.headerTemplate = kendo.template(HEADERTEMPLATE);\n            this._exportData = {};\n            if (options.template) {\n                this.template = kendo.template(options.template);\n            }\n        },\n\n        setTuples: function(tuples) {\n            this.tuples = tuples;\n        },\n\n        addColElements: function(count) {\n            var html = \"\";\n\n            for (var index = 0; index < count; index++) {\n                html += \"<col>\";\n            }\n\n            this.table.find(\"colgroup\").append(html);\n        },\n\n        addRowElements: function(columnHeaderRows) {\n            var that = this;\n            var body = that.table.find(\"tbody\");\n            var row;\n\n            for (var index = 0; index < columnHeaderRows.length; index++) {\n                row = $('<tr class=\"k-pivotgrid-row\" role=\"row\"></tr>');\n                body.append(row);\n                that.addColumCell(row, columnHeaderRows[index], index);\n            }\n        },\n\n        _getExportData: function(rowIndex, cell, rowElement) {\n            const pattern = /\\[\\(All\\)\\]/;\n\n            if (cell.levelName.match(pattern)) {\n                cell.caption = cell.caption.toUpperCase();\n            }\n\n            if (!this._exportData[rowIndex]) {\n                this._exportData[rowIndex] = { children: [cell], element: rowElement };\n            } else {\n                this._exportData[rowIndex].children.push(cell);\n            }\n        },\n\n        addColumCell: function(rowEl, rowItem, rowIndex) {\n            var that = this;\n            var cellEl;\n            var cell;\n\n            for (var index = 0; index < rowItem.cells.length; index++) {\n                cell = rowItem.cells[index];\n                if (cell) {\n                    this._getExportData(rowIndex, cell, rowEl);\n                    const expanded = cell.children && cell.children.length > 0;\n                    cellEl = $(that.headerTemplate({\n                        id: `${that.ariaId}-${that.axes == \"columns\" ? \"ch\" : \"rh\"}-${rowIndex + 1}-${index + 1}`,\n                        rowspan: cell.rowSpan,\n                        colspan: cell.colSpan,\n                        key: cell.path.join(\",\") + (cell.total ? '|[TOTAL]' : ''),\n                        iconClass: (cell.children && cell.children.length) ? \"up\" : \"down\",\n                        expandable: cell.hasChildren && !cell.total,\n                        expanded: expanded ? \"true\" : \"false\",\n                        headerClass: kendo.format(\"k-pivotgrid-cell{0}{1}\", cell.total ? \" k-pivotgrid-header-total\" : \"\", cell.levelNum === 0 ? \" k-pivotgrid-header-root\" : \"\"),\n                        role: that.axes == \"columns\" ? \"columnheader\" : \"rowheader\"\n                    }));\n                    if (expanded) {\n                        cellEl.addClass(\"k-pivotgrid-expanded\");\n                    }\n\n                    const defaultCellTemplate = `<span class=\"k-pivotgrid-header-title\">${cell.caption}</span>`;\n\n                    cellEl.append(that.template ? that.template({ member: cell }) : defaultCellTemplate);\n                    rowEl.append(cellEl);\n                }\n            }\n        },\n\n        build: function() {\n            var tree = toTree((this.tuples || []).slice());\n            var treeData = this.axes == \"columns\" ? toColumns(tree) : toRows(tree);\n            var headerRows = treeData[0];\n            var headerLeafs = treeData[1];\n            var breadth = treeData[2];\n            var rowHeaderBreadth = treeData[3];\n            var that = this;\n            that._tree = tree;\n            that._breadth = breadth;\n            that._headerLeafs = headerLeafs;\n\n            var table = $(`<table class='k-pivotgrid-table' role='presentation'><colgroup></colgroup><tbody class='k-pivotgrid-tbody' role='rowgroup'></tbody></table>`);\n\n            that.table = table;\n            that.addColElements(this.axes == \"columns\" ? headerLeafs.length : rowHeaderBreadth);\n            that.addRowElements(headerRows);\n\n            return that.table;\n        },\n\n        getTree: function() {\n            return this._tree;\n        },\n\n        getBreadth: function() {\n            return this._breadth;\n        },\n\n        getHeaderLeafs: function() {\n            return this._headerLeafs;\n        }\n    });\n\n    var ColumnBuilder = Class.extend({\n        init: function() {\n            this.measures = 1;\n            this.metadata = {};\n        },\n\n        build: function(tuples) {\n            var tbody = this._tbody(tuples);\n            var colgroup = this._colGroup();\n\n            return [\n                element(\"table\", { className: tableStyles.headerTable }, [colgroup, tbody])\n            ];\n        },\n\n        reset: function() {\n            this.metadata = {};\n        },\n\n        _colGroup: function() {\n            var length = this._rowLength();\n            var children = [];\n            var idx = 0;\n\n            for (; idx < length; idx++) {\n                children.push(element(\"col\", null));\n            }\n\n            return element(\"colgroup\", null, children);\n        },\n\n        _tbody: function(tuples) {\n            var root = tuples[0];\n\n            this.map = {};\n            this.rows = [];\n            this.rootTuple = root;\n\n            this._indexes = [];\n\n            if (root) {\n                this._buildRows(root, 0);\n                this._normalize();\n            } else {\n                this.rows.push(element(\"tr\", { className: tableStyles.tableRow }, [ element(\"th\", { className: tableStyles.header } , [ htmlNode(\"&nbsp;\") ]) ]));\n            }\n\n            return element(\"tbody\", { className: tableStyles.tbody }, this.rows);\n        },\n\n        _normalize: function() {\n            var rows = this.rows;\n            var rowsLength = rows.length;\n            var rowIdx = 0;\n            var row;\n\n            var cellsLength;\n            var cellIdx;\n            var cells;\n            var cell;\n\n            for (; rowIdx < rowsLength; rowIdx++) {\n                row = rows[rowIdx];\n\n                if (row.rowSpan === 1) {\n                    continue;\n                }\n\n                cells = row.children;\n\n                cellIdx = 0;\n                cellsLength = cells.length;\n\n                for (; cellIdx < cellsLength; cellIdx++) {\n                    cell = cells[cellIdx];\n\n                    if (cell.tupleAll) {\n                        cell.attr.rowSpan = row.rowSpan;\n                    }\n                }\n            }\n        },\n\n        _rowIndex: function(row) {\n            var rows = this.rows;\n            var length = rows.length;\n            var idx = 0;\n\n            for (; idx < length; idx++) {\n                if (rows[idx] === row) {\n                    break;\n                }\n            }\n\n            return idx;\n        },\n\n        _rowLength: function() {\n            var cells = this.rows[0] ? this.rows[0].children : [];\n            var length = cells.length;\n            var rowLength = 0;\n            var idx = 0;\n\n            if (length) {\n                for (; idx < length; idx++) {\n                    rowLength += cells[idx].attr.colSpan || 1;\n                }\n            }\n\n            if (!rowLength) {\n                rowLength = this.measures;\n            }\n\n            return rowLength;\n        },\n\n        _row: function(tuple, memberIdx, parentMember) {\n            var rootName = this.rootTuple.members[memberIdx].name;\n            var levelNum = tuple.members[memberIdx].levelNum;\n            var rowKey = rootName + levelNum;\n            var map = this.map;\n            var parentRow;\n            var children;\n\n            var row = map[rowKey];\n\n            if (!row) {\n                row = element(\"tr\", { className: tableStyles.tableRow }, []);\n\n                row.parentMember = parentMember;\n                row.collapsed = 0;\n                row.colSpan = 0;\n                row.rowSpan = 1;\n\n                map[rowKey] = row;\n                parentRow = map[rootName + (Number(levelNum) - 1)];\n\n                if (parentRow) {\n                    children = parentRow.children;\n\n                    if (children[1] && children[1].attr.className.indexOf(\"k-alt\") === -1) {\n                        row.notFirst = true;\n                    } else {\n                        row.notFirst = parentRow.notFirst;\n                    }\n                }\n\n                this.rows.splice(this._rowIndex(parentRow) + 1, 0, row);\n            } else {\n                row.notFirst = false;\n\n                if (!row.parentMember || row.parentMember !== parentMember) {\n                    row.parentMember = parentMember;\n                    row.collapsed = 0;\n                    row.colSpan = 0;\n                }\n            }\n\n            return row;\n        },\n\n        _measures: function(measures, tuple, className) {\n            var map = this.map;\n            var row = map.measureRow;\n            var measure;\n\n            if (!row) {\n                row = element(\"tr\", { className: tableStyles.tableRow }, []);\n                map.measureRow = row;\n                this.rows.push(row);\n            }\n\n            for (var idx = 0, length = measures.length; idx < length; idx++) {\n                measure = measures[idx];\n                row.children.push(this._cell((className || \"\"), [this._content(measure, tuple)], measure));\n            }\n\n            return length;\n        },\n\n        _content: function(member, tuple) {\n            return htmlNode(this.template({\n                member: member,\n                tuple: tuple\n            }), true);\n        },\n\n        _cell: function(className, children, member) {\n            var cell = element(\"th\", { className: tableStyles.header + \" \" + className }, children);\n            cell.value = member.caption || member.name;\n            return cell;\n        },\n\n        _buildRows: function(tuple, memberIdx, parentMember) {\n            var members = tuple.members;\n            var member = members[memberIdx];\n            var nextMember = members[memberIdx + 1];\n\n            var row, childRow, children, childrenLength;\n            var cell, allCell, cellAttr;\n            var cellChildren = [];\n            var path;\n\n            var idx = 0;\n            var metadata;\n\n            var colSpan;\n            var collapsed = 0;\n            var memberCollapsed = 0;\n\n            if (member.measure) {\n                this._measures(member.children, tuple);\n                return;\n            }\n\n            path = kendo.stringify(buildPath(tuple, memberIdx));\n            row = this._row(tuple, memberIdx, parentMember);\n\n            children = member.children;\n            childrenLength = children.length;\n\n            metadata = this.metadata[path];\n            if (!metadata) {\n                this.metadata[path] = metadata = createMetadata(Number(member.levelNum), memberIdx);\n                metadata.rootLevelNum = Number(this.rootTuple.members[memberIdx].levelNum);\n            }\n\n            this._indexes.push({\n                path: path,\n                tuple: tuple\n            });\n\n            if (member.hasChildren) {\n                if (metadata.expanded === false) {\n                    collapsed = metadata.maxChildren;\n                    row.collapsed += collapsed;\n\n                    metadata.children = 0;\n                    childrenLength = 0;\n                }\n\n                let cellIconEl = $(\"<span></span>\");\n                cellIconEl.attr(kendo.attr(\"path\"), path);\n\n                cellChildren.push(kendo.dom.html(kendo.ui.icon(cellIconEl, { icon: childrenLength ? STATE_EXPANDED_ICONNAME : STATE_COLLAPSED_ICONNAME }), true));\n            }\n\n            cellChildren.push(this._content(member, tuple));\n            cell = this._cell((row.notFirst ? \" k-first\" : \"\"), cellChildren, member);\n\n            row.children.push(cell);\n            row.colSpan += 1;\n\n            if (childrenLength) {\n                allCell = this._cell(\" k-alt\", [this._content(member, tuple)], member);\n                row.children.push(allCell);\n\n                for (; idx < childrenLength; idx++) {\n                    childRow = this._buildRows(children[idx], memberIdx, member);\n                }\n\n                colSpan = childRow.colSpan;\n                collapsed = childRow.collapsed;\n\n                cell.attr.colSpan = colSpan;\n\n                metadata.children = colSpan;\n                metadata.members = 1;\n\n                row.colSpan += colSpan;\n                row.collapsed += collapsed;\n                row.rowSpan = childRow.rowSpan + 1;\n\n                if (nextMember) {\n                    if (nextMember.measure) {\n                        colSpan = this._measures(nextMember.children, tuple, \" k-alt\");\n                    } else {\n                        childRow = this._buildRows(tuple, memberIdx + 1);\n                        colSpan = childRow.colSpan;\n\n                        row.collapsed += childRow.collapsed;\n                        memberCollapsed = childRow.collapsed;\n                    }\n\n                    allCell.attr.colSpan = colSpan;\n                    colSpan -= 1;\n\n                    metadata.members += colSpan;\n                    row.colSpan += colSpan;\n                }\n            } else if (nextMember) {\n                if (nextMember.measure) {\n                    colSpan = this._measures(nextMember.children, tuple);\n                } else {\n                    childRow = this._buildRows(tuple, memberIdx + 1);\n                    colSpan = childRow.colSpan;\n\n                    row.collapsed += childRow.collapsed;\n                    memberCollapsed = childRow.collapsed;\n                }\n\n                metadata.members = colSpan;\n\n                if (colSpan > 1) {\n                    cell.attr.colSpan = colSpan;\n                    row.colSpan += colSpan - 1;\n                }\n            }\n\n            if (metadata.maxMembers < (metadata.members + memberCollapsed)) {\n                metadata.maxMembers = metadata.members + memberCollapsed;\n            }\n\n            children = metadata.children + collapsed;\n\n            if (metadata.maxChildren < children) {\n                metadata.maxChildren = children;\n            }\n\n            (allCell || cell).tupleAll = true;\n\n            return row;\n        }\n    });\n\n    var RowBuilder = Class.extend({\n        init: function() {\n            this.metadata = {};\n        },\n\n        build: function(tuples) {\n            var tbody = this._tbody(tuples);\n            var colgroup = this._colGroup();\n\n            return [\n                element(\"table\", { className: tableStyles.table }, [colgroup, tbody])\n            ];\n        },\n\n        reset: function() {\n            this.metadata = {};\n        },\n\n        _rowLength: function() {\n            var children = this.rows[0].children;\n            var length = 0;\n            var idx = 0;\n\n            var cell = children[idx];\n\n            while (cell) {\n                length += (cell.attr.colSpan || 1);\n                cell = children[++idx];\n            }\n\n            return length;\n        },\n\n        _colGroup: function() {\n            var length = this._rowLength();\n            var children = [];\n            var idx = 0;\n\n            for (; idx < length; idx++) {\n                children.push(element(\"col\", null));\n            }\n\n            return element(\"colgroup\", null, children);\n        },\n\n        _tbody: function(tuples) {\n            var root = tuples[0];\n\n            this.rootTuple = root;\n            this.rows = [];\n            this.map = {};\n\n            this._indexes = [];\n\n            if (root) {\n                this._buildRows(root, 0);\n                this._normalize();\n            } else {\n                this.rows.push(element(\"tr\", { className: tableStyles.tableRow }, [ element(\"td\", { className: tableStyles.tableCell }, [ htmlNode(\"&nbsp;\") ]) ]));\n            }\n\n            return element(\"tbody\", { className: tableStyles.tbody }, this.rows);\n        },\n\n        _normalize: function() {\n            var rows = this.rows;\n            var rowsLength = rows.length;\n            var rowIdx = 0;\n\n            var members = this.rootTuple.members;\n            var firstMemberName = members[0].name;\n            var membersLength = members.length;\n            var memberIdx = 0;\n\n            var row;\n            var cell;\n            var maxcolSpan;\n            var map = this.map;\n            var allRow;\n\n            for (; rowIdx < rowsLength; rowIdx++) {\n                row = rows[rowIdx];\n\n                for (memberIdx = 0; memberIdx < membersLength; memberIdx++) {\n                    maxcolSpan = this[members[memberIdx].name];\n                    cell = row.colSpan[\"dim\" + memberIdx];\n\n                    if (cell && cell.colSpan < maxcolSpan) {\n                        cell.attr.colSpan = (maxcolSpan - cell.colSpan) + 1;\n                    }\n                }\n            }\n\n            row = map[firstMemberName];\n            allRow = map[firstMemberName + \"all\"];\n\n            if (row) {\n                row.children[0].attr.className = tableStyles.tableCell + \" k-first\";\n            }\n\n            if (allRow) {\n                allRow.children[0].attr.className += \" k-first \" + tableStyles.tableCell;\n            }\n        },\n\n        _row: function(children) {\n            var row = element(\"tr\", { className: tableStyles.tableRow }, children);\n            row.rowSpan = 1;\n            row.colSpan = {};\n\n            this.rows.push(row);\n\n            return row;\n        },\n\n        _content: function(member, tuple) {\n            return htmlNode(this.template({\n                member: member,\n                tuple: tuple\n            }), true);\n        },\n\n        _cell: function(className, children, member) {\n            var cell = element(\"td\", { className: tableStyles.tableCell + \" \" + className }, children);\n            cell.value = member.caption || member.name;\n            return cell;\n        },\n\n        _buildRows: function(tuple, memberIdx) {\n            var map = this.map;\n            var path;\n\n            var members = tuple.members;\n            var member = members[memberIdx];\n            var nextMember = members[memberIdx + 1];\n\n            var children = member.children;\n            var childrenLength = children.length;\n\n            var levelNum = Number(member.levelNum);\n            var rootName = this.rootTuple.members[memberIdx].name;\n            var tuplePath = buildPath(tuple, memberIdx - 1).join(\"\");\n            var rootLevelNum = Number(this.rootTuple.members[memberIdx].levelNum);\n            var parentName = tuplePath + (rootLevelNum === levelNum ? \"\" : (member.parentName || \"\"));\n            var row = map[parentName + \"all\"] || map[parentName];\n            var colSpan = levelNum + 1;\n\n            var cell, allCell;\n            var childRow, allRow;\n            var metadata;\n            var className;\n            var cellChildren = [];\n            var expandIconAttr;\n            var idx;\n\n            if (!row || row.hasChild) {\n                row = this._row();\n            } else {\n                row.hasChild = true;\n            }\n\n            if (member.measure) {\n                className = row.allCell ? \"k-grid-footer\" : \"\";\n                row.children.push(this._cell(className, [ this._content(children[0], tuple) ], children[0]));\n\n                row.rowSpan = childrenLength;\n\n                for (idx = 1; idx < childrenLength; idx++) {\n                    this._row([ this._cell(className, [ this._content(children[idx], tuple) ], children[idx]) ]);\n                }\n\n                return row;\n            }\n\n            map[tuplePath + member.name] = row;\n\n            path = kendo.stringify(buildPath(tuple, memberIdx));\n\n            metadata = this.metadata[path];\n            if (!metadata) {\n                this.metadata[path] = metadata = createMetadata(levelNum, memberIdx);\n                metadata.rootLevelNum = rootLevelNum;\n            }\n\n            this._indexes.push({\n                path: path,\n                tuple: tuple\n            });\n\n            if (member.hasChildren) {\n                if (metadata.expanded === false) {\n                    childrenLength = 0;\n                    metadata.children = 0;\n                }\n\n                let cellIconEl = $(\"<span></span>\");\n                cellIconEl.attr(kendo.attr(\"path\"), path);\n\n                cellChildren.push(kendo.dom.html(kendo.ui.icon(cellIconEl, { icon: childrenLength ? STATE_EXPANDED_ICONNAME : STATE_COLLAPSED_ICONNAME }), true));\n            }\n\n            cellChildren.push(this._content(member, tuple));\n\n            className = row.allCell && !childrenLength ? \"k-grid-footer\" : \"\";\n            cell = this._cell(className, cellChildren, member);\n            cell.colSpan = colSpan;\n\n            row.children.push(cell);\n            row.colSpan[\"dim\" + memberIdx] = cell;\n\n            if (!this[rootName] || this[rootName] < colSpan) {\n                this[rootName] = colSpan;\n            }\n\n            if (childrenLength) {\n                row.allCell = false;\n                row.hasChild = false;\n\n                for (idx = 0; idx < childrenLength; idx++) {\n                    childRow = this._buildRows(children[idx], memberIdx);\n\n                    if (row !== childRow) {\n                        row.rowSpan += childRow.rowSpan;\n                    }\n                }\n\n                if (row.rowSpan > 1) {\n                    cell.attr.rowSpan = row.rowSpan;\n                }\n\n                metadata.children = row.rowSpan;\n\n                allCell = this._cell(\"k-grid-footer\", [this._content(member, tuple)], member);\n                allCell.colSpan = colSpan;\n\n                allRow = this._row([ allCell ]);\n                allRow.colSpan[\"dim\" + memberIdx] = allCell;\n                allRow.allCell = true;\n\n                map[tuplePath + member.name + \"all\"] = allRow;\n\n                if (nextMember) {\n                    childRow = this._buildRows(tuple, memberIdx + 1);\n                    allCell.attr.rowSpan = childRow.rowSpan;\n                }\n\n                row.rowSpan += allRow.rowSpan;\n\n                metadata.members = allRow.rowSpan;\n\n            } else if (nextMember) {\n                row.hasChild = false;\n                this._buildRows(tuple, memberIdx + 1);\n\n                (allCell || cell).attr.rowSpan = row.rowSpan;\n\n                metadata.members = row.rowSpan;\n            }\n\n            if (metadata.maxChildren < metadata.children) {\n                metadata.maxChildren = metadata.children;\n            }\n\n            if (metadata.maxMembers < metadata.members) {\n                metadata.maxMembers = metadata.members;\n            }\n\n            return row;\n        }\n    });\n\n    var ContentBuilder = Class.extend({\n        init: function() {\n            this.columnAxis = {};\n            this.rowAxis = {};\n        },\n\n        build: function(data, columnAxis, rowAxis) {\n            var index = columnAxis.indexes[0];\n            var metadata = columnAxis.metadata[index ? index.path : undefined];\n\n            this.columnAxis = columnAxis;\n            this.rowAxis = rowAxis;\n\n            this.data = data;\n\n            this.rowLength = metadata ? metadata.maxChildren + metadata.maxMembers : columnAxis.measures.length || 1;\n\n            if (!this.rowLength) {\n                this.rowLength = 1;\n            }\n\n            var tbody = this._tbody();\n            var colgroup = this._colGroup();\n\n            return [\n                element(\"table\", { className: tableStyles.contentTable }, [colgroup, tbody])\n            ];\n        },\n\n        _colGroup: function() {\n            var length = this.columnAxis.measures.length || 1;\n            var children = [];\n            var idx = 0;\n\n            if (this.rows[0]) {\n                length = this.rows[0].children.length;\n            }\n\n            for (; idx < length; idx++) {\n                children.push(element(\"col\", null));\n            }\n\n            return element(\"colgroup\", null, children);\n        },\n\n        _tbody: function() {\n            this.rows = [];\n\n            if (this.data[0]) {\n                this.columnIndexes = this._indexes(this.columnAxis, this.rowLength);\n                this.rowIndexes = this._indexes(this.rowAxis, Math.ceil(this.data.length / this.rowLength));\n\n                this._buildRows();\n            } else {\n                this.rows.push(element(\"tr\", { className: tableStyles.tableRow }, [ element(\"td\", { className: tableStyles.tableCell }, [ htmlNode(\"&nbsp;\") ]) ]));\n            }\n\n            return element(\"tbody\", { className: tableStyles.tbody }, this.rows);\n        },\n\n        _indexes: function(axisInfo, total) {\n            var result = [];\n            var axisInfoMember;\n            var indexes = axisInfo.indexes;\n            var metadata = axisInfo.metadata;\n            var measures = axisInfo.measures;\n            var measuresLength = measures.length || 1;\n\n            var current;\n            var dataIdx = 0;\n            var firstEmpty = 0;\n\n            var idx = 0;\n            var length = indexes.length;\n            var measureIdx;\n            var index;\n\n            var children;\n            var skipChildren;\n\n            if (!length) {\n                for (measureIdx = 0; measureIdx < measuresLength; measureIdx++) {\n                    result[measureIdx] = {\n                        index: measureIdx,\n                        measure: measures[measureIdx],\n                        tuple: null\n                    };\n                }\n\n                return result;\n            }\n\n            for (; idx < length; idx++) {\n                axisInfoMember = indexes[idx];\n                current = metadata[axisInfoMember.path];\n                children = current.children + current.members;\n                skipChildren = 0;\n\n                if (children) {\n                    children -= measuresLength;\n                }\n\n                if (current.expanded === false && current.children !== current.maxChildren) {\n                    skipChildren = current.maxChildren;\n                }\n\n                if (current.parentMember && current.levelNum === current.rootLevelNum) {\n                    children = -1;\n                }\n\n                if (children > -1) {\n                    for (measureIdx = 0; measureIdx < measuresLength; measureIdx++) {\n                        index = children + measureIdx;\n                        if (!current.children) {\n                            index += firstEmpty;\n                        }\n\n                        result[children + firstEmpty + measureIdx] = {\n                            children: children,\n                            index: dataIdx,\n                            measure: measures[measureIdx],\n                            tuple: axisInfoMember.tuple\n                        };\n                        dataIdx += 1;\n                    }\n\n                    while (result[firstEmpty] !== undefined) {\n                        firstEmpty += 1;\n                    }\n                }\n\n                if (firstEmpty === total) {\n                    break;\n                }\n\n                dataIdx += skipChildren;\n            }\n\n            return result;\n        },\n\n        _buildRows: function() {\n            var rowIndexes = this.rowIndexes;\n            var length = rowIndexes.length;\n            var idx = 0;\n\n            for (; idx < length; idx++) {\n                var rowIndex = rowIndexes[idx];\n                if (rowIndex) {\n                    this.rows.push(this._buildRow(rowIndex));\n                }\n            }\n        },\n\n        _buildRow: function(rowInfo) {\n            var startIdx = rowInfo.index * this.rowLength;\n            var columnIndexes = this.columnIndexes;\n            var length = columnIndexes.length;\n            var columnInfo;\n            var cells = [];\n            var idx = 0;\n\n            var templateInfo;\n            var cell, cellContent;\n            var attr, dataItem, measure;\n\n            for (; idx < length; idx++) {\n                columnInfo = columnIndexes[idx];\n\n                if (columnInfo === undefined) {\n                    continue;\n                }\n\n                attr = { className: tableStyles.tableCell };\n                if (columnInfo.children) {\n                    attr.className += \" k-alt\";\n                }\n\n                cellContent = \"\";\n                dataItem = this.data[startIdx + columnInfo.index];\n                measure = columnInfo.measure || rowInfo.measure;\n\n                templateInfo = {\n                    columnTuple: columnInfo.tuple,\n                    rowTuple: rowInfo.tuple,\n                    measure: measure,\n                    dataItem: dataItem\n                };\n\n                if (dataItem.value !== \"\" && measure && measure.type) {\n                    if (measure.type === \"status\") {\n                        cellContent = this.kpiStatusTemplate(templateInfo);\n                    } else if (measure.type === \"trend\") {\n                        cellContent = this.kpiTrendTemplate(templateInfo);\n                    }\n                }\n\n                if (!cellContent) {\n                    cellContent = this.dataTemplate(templateInfo);\n                }\n\n                cell = element(\"td\", attr, [ htmlNode(cellContent) ]);\n                cell.value = dataItem.value;\n                cells.push(cell);\n            }\n\n            attr = { className: tableStyles.tableRow };\n            if (rowInfo.children) {\n                attr.className += \" k-grid-footer\";\n            }\n\n            return element(\"tr\", attr, cells);\n        }\n    });\n\n    ui.plugin(PivotGrid);\n\n    kendo.PivotExcelExporter = kendo.Class.extend({\n        init: function(options) {\n            this.options = options;\n\n            this.widget = options.widget;\n            this.dataSource = this.widget.dataSource;\n        },\n\n        _columns: function() {\n            var columnHeaderTable = this.widget.columnsHeaderTree.children[0];\n            var rowHeaderTable = this.widget.rowsHeaderTree.children[0];\n\n            var columnHeaderLength = columnHeaderTable.children[0].children.length;\n            var rowHeaderLength = rowHeaderTable.children[0].children.length;\n\n            var width = this.widget.options.columnWidth;\n            var result = [];\n            var idx;\n\n            if (rowHeaderLength && this.dataSource.data()[0]) {\n                for (idx = 0; idx < rowHeaderLength; idx++) {\n                    result.push({\n                        autoWidth: true\n                    });\n                }\n            }\n\n            for (idx = 0; idx < columnHeaderLength; idx++) {\n                result.push({\n                    autoWidth: false,\n                    width: width\n                });\n            }\n\n            return result;\n        },\n\n        _cells: function(rows, type, callback) {\n            var result = [];\n\n            var i = 0;\n            var length = rows.length;\n\n            var cellsLength;\n            var row, cells;\n            var j, cell;\n\n            for (; i < length; i++) {\n                row = [];\n                cells = rows[i].children;\n                cellsLength = cells.length;\n\n                for (j = 0; j < cellsLength; j++) {\n                    cell = cells[j];\n\n                    row.push({\n                        background: \"#7a7a7a\",\n                        color: \"#fff\",\n                        value: cell.value,\n                        colSpan: cell.attr.colSpan || 1,\n                        rowSpan: cell.attr.rowSpan || 1\n                    });\n                }\n\n                if (callback) {\n                    callback(row, i);\n                }\n\n                result.push({\n                    cells: row,\n                    type: type\n                });\n            }\n\n            return result;\n        },\n\n        _rows: function() {\n            var columnHeaderTable = this.widget.columnsHeaderTree.children[0];\n            var rowHeaderTable = this.widget.rowsHeaderTree.children[0];\n\n            var columnHeaderLength = columnHeaderTable.children[0].children.length;\n            var rowHeaderLength = rowHeaderTable.children[0].children.length;\n\n            var columnHeaderRows = columnHeaderTable.children[1].children;\n            var rowHeaderRows = rowHeaderTable.children[1].children;\n            var contentRows = this.widget.contentTree.children[0].children[1].children;\n\n            var columnRows = this._cells(columnHeaderRows, \"header\");\n\n            if (rowHeaderLength) {\n                columnRows[0].cells.splice(0, 0, {\n                    background: \"#7a7a7a\",\n                    color: \"#fff\",\n                    value: \"\",\n                    colSpan: rowHeaderLength,\n                    rowSpan: columnHeaderRows.length\n                });\n            }\n\n            var dataCallback = function(row, index) {\n                var j = 0;\n                var cell, value;\n                var cells = contentRows[index].children;\n\n                for (; j < columnHeaderLength; j++) {\n                    cell = cells[j];\n                    value = Number(cell.value);\n\n                    if (isNaN(value)) {\n                        value = cell.value;\n                    }\n\n                    row.push({\n                        background: \"#dfdfdf\",\n                        color: \"#333\",\n                        value: value,\n                        colSpan: 1,\n                        rowSpan: 1\n                    });\n                }\n            };\n\n            var rowRows = this._cells(rowHeaderRows, \"data\", dataCallback);\n\n            return columnRows.concat(rowRows);\n        },\n\n        _freezePane: function() {\n            var columnHeaderTable = this.widget.columnsHeaderTree.children[0];\n            var rowHeaderTable = this.widget.rowsHeaderTree.children[0];\n\n            var rowHeaderLength = rowHeaderTable.children[0].children.length;\n            var columnHeaderRows = columnHeaderTable.children[1].children;\n\n            return {\n                colSplit: rowHeaderLength,\n                rowSplit: columnHeaderRows.length\n            };\n        },\n\n        _columnsV2: function() {\n            const columnHeaderTable = this.widget._columnBuilder.table[0];\n            const rowHeaderTable = this.widget._rowBuilder.table[0];\n\n            const columnHeaderLength = columnHeaderTable.children[0].children.length;\n            const rowHeaderLength = rowHeaderTable.children[0].children.length;\n\n            const width = this.widget.options.columnWidth;\n            const result = [];\n\n            if (rowHeaderLength && this.dataSource.data()[0]) {\n                for (let idx = 0; idx < rowHeaderLength; idx++) {\n                    result.push({\n                        autoWidth: true\n                    });\n                }\n            }\n\n            for (let idx = 0; idx < columnHeaderLength; idx++) {\n                result.push({\n                    autoWidth: false,\n                    width: width\n                });\n            }\n\n            return result;\n        },\n\n        _cellsV2: function(rows, type, callback) {\n            const result = [];\n\n            const length = Object.keys(rows).length;\n\n            for (let i = 0; i < length; i++) {\n                const row = [];\n                const cells = rows[i].children;\n                const cellsLength = cells.length;\n\n                for (let j = 0; j < cellsLength; j++) {\n                    const cell = cells[j];\n\n                    row.push({\n                        background: \"#7a7a7a\",\n                        color: \"#fff\",\n                        value: cell.caption,\n                        colSpan: cell.colSpan || 1,\n                        rowSpan: cell.rowSpan || 1\n                    });\n                }\n\n                if (callback) {\n                    callback(row, i);\n                }\n\n                result.push({\n                    cells: row,\n                    type: type\n                });\n            }\n\n            return result;\n        },\n\n        _rowsV2: function() {\n            const columnHeaderTable = this.widget._columnBuilder.table[0];\n            const rowHeaderTable = this.widget._rowBuilder.table[0];\n\n            const columnHeaderLength = columnHeaderTable.children[0].children.length;\n            const rowHeaderLength = rowHeaderTable.children[0].children.length;\n\n            const columnHeaderRows = this.widget._columnBuilder._exportData;\n            const rowHeaderRows = this.widget._rowBuilder._exportData;\n            const contentCells = this.widget._contentBuilder.hash;\n\n            const columnRows = this._cellsV2(columnHeaderRows, \"header\");\n\n            if (rowHeaderLength) {\n                columnRows[0].cells.splice(0, 0, {\n                    background: \"#7a7a7a\",\n                    color: \"#fff\",\n                    value: \"\",\n                    colSpan: rowHeaderLength,\n                    rowSpan: Object.keys(columnHeaderRows).length\n                });\n            }\n\n            const dataCallback = function(row, index) {\n                const startingIndex = index * columnHeaderLength;\n                const endIndex = (index + 1) * columnHeaderLength;\n\n                for (let j = startingIndex; j < endIndex; j++) {\n                    const cell = contentCells[j];\n\n                    const cellValue = cell.data !== null ? cell.data.value : cell.data;\n                    let value = Number(cellValue);\n\n                    if (isNaN(value)) {\n                        value = cellValue;\n                    }\n\n                    row.push({\n                        background: \"#dfdfdf\",\n                        color: \"#333\",\n                        value: value,\n                        colSpan: 1,\n                        rowSpan: 1\n                    });\n                }\n            };\n\n            const rowRows = this._cellsV2(rowHeaderRows, \"data\", dataCallback);\n\n            return columnRows.concat(rowRows);\n        },\n\n\n        _freezePaneV2: function() {\n            const columnHeaderTable = this.widget._columnBuilder.table[0];\n            const rowHeaderTable = this.widget._rowBuilder.table[0];\n\n            const rowHeaderLength = rowHeaderTable.children[0].children.length;\n            const columnHeaderRows = columnHeaderTable.children[1].children.length;\n\n            return {\n                colSplit: rowHeaderLength,\n                rowSplit: columnHeaderRows\n            };\n        },\n\n        _filterV2: function() {\n            const that = this;\n\n            if (!that.options.excel.filterable) {\n                return null;\n            }\n\n            const columnHeaderTable = this.widget._columnBuilder.table[0];\n            const rowHeaderTable = this.widget._rowBuilder.table[0];\n\n            const rowHeaderLength = rowHeaderTable.children[0].children.length;\n            const columnHeaderLength = columnHeaderTable.children[0].children.length;\n\n            const additionalRows = rowHeaderLength - 1;\n\n            return {\n                from: rowHeaderLength,\n                to: columnHeaderLength + additionalRows\n            };\n        },\n\n\n        workbook: function() {\n            var promise,\n                resolveFn = function() {\n                    if (this.widget.options.name === \"PivotGridV2\") {\n                        return {\n                            sheets: [ {\n                                columns: this._columnsV2(),\n                                rows: this._rowsV2(),\n                                freezePane: this._freezePaneV2(),\n                                filter: this._filterV2(),\n                            } ]\n                        };\n                    }\n                    return {\n                        sheets: [ {\n                            columns: this._columns(),\n                            rows: this._rows(),\n                            freezePane: this._freezePane(),\n                            filter: null\n                        } ]\n                    };\n                };\n\n            if (this.dataSource.view()[0]) {\n                promise = $.Deferred();\n                promise.resolve();\n            } else {\n                promise = this.dataSource.fetch();\n            }\n\n            return promise.then(resolveFn.bind(this));\n        }\n    });\n\n    var PivotExcelMixin = {\n        extend: function(proto) {\n           proto.events.push(\"excelExport\");\n           proto.options.excel = $.extend(proto.options.excel, this.options);\n           proto.saveAsExcel = this.saveAsExcel;\n        },\n        options: {\n            proxyURL: \"\",\n            filterable: false,\n            fileName: \"Export.xlsx\"\n        },\n        saveAsExcel: function() {\n            var excel = this.options.excel || {};\n\n            var exporter = new kendo.PivotExcelExporter({\n                widget: this,\n                excel\n            });\n\n            if (this._progress) {\n                this._isExport = true;\n                this._progress(true);\n            }\n\n            var resolveFn = function(book) {\n                if (!this.trigger(\"excelExport\", { workbook: book })) {\n                    var workbook = new kendo.ooxml.Workbook(book);\n\n                    workbook.toDataURLAsync().then(function(dataURI) {\n                        kendo.saveAs({\n                            dataURI: dataURI,\n                            fileName: book.fileName || excel.fileName,\n                            proxyURL: excel.proxyURL,\n                            forceProxy: excel.forceProxy\n                        });\n                    }).always(() => {\n                        if (this._progress) {\n                            this._progress(false);\n                            this._isExport = false;\n                        }\n                    });\n                }\n            };\n\n            exporter.workbook().then(resolveFn.bind(this));\n        }\n    };\n\n    kendo.PivotExcelMixin = PivotExcelMixin;\n\n    if (kendo.ooxml && kendo.ooxml.Workbook) {\n        PivotExcelMixin.extend(PivotGrid.prototype);\n    }\n\n    if (kendo.ooxml && kendo.ooxml.Workbook) {\n        PivotExcelMixin.extend(PivotGridV2.prototype);\n    }\n\n    if (kendo.PDFMixin) {\n        kendo.PDFMixin.extend(PivotGrid.prototype);\n\n        PivotGrid.fn._drawPDF = function() {\n            return this._drawPDFShadow({\n                width: this.wrapper.width()\n            }, {\n                avoidLinks: this.options.pdf.avoidLinks\n            });\n        };\n    }\n\n    if (kendo.PDFMixin) {\n        kendo.PDFMixin.extend(PivotGridV2.prototype);\n\n        PivotGridV2.prototype._saveAsPDF = kendo.PDFMixin.saveAsPDF;\n\n        PivotGridV2.fn.saveAsPDF = function() {\n            if (this._progress) {\n                this._isExport = true;\n                this._progress(true);\n            }\n            this._saveAsPDF().always(() => {\n                if (this._progress) {\n                    this._progress(false);\n                    this._isExport = false;\n                }\n            });\n        };\n\n        PivotGridV2.fn._drawPDF = function() {\n            return this._drawPDFShadow({\n                width: this.wrapper.width()\n            }, {\n                avoidLinks: this.options.pdf.avoidLinks\n            });\n        };\n    }\n\n    window.kendo.pivotgrid = window.kendo.pivotgrid || {};\n    window.kendo.pivotgrid.common = {\n        addKPI: addKPI,\n        addMultipleMeasures: addMultipleMeasures,\n        averageAggregate: averageAggregate,\n        buildKPIMeasures: buildKPIMeasures,\n        cloneDataTree: cloneDataTree,\n        compareAxes: compareAxes,\n        configuratorReducer: configuratorReducer,\n        createAxisDescriptors: createAxisDescriptors,\n        createDataState: createDataState,\n        createDataTree: createDataTree,\n        createDiscoverBody: createDiscoverBody,\n        createFlatSchemaDimensions: createFlatSchemaDimensions,\n        createLocalDataState: createLocalDataState,\n        createRequestBody: createRequestBody,\n        createTuples: createTuples,\n        discoverCommands: discoverCommands,\n        fetchData: fetchData,\n        fetchDiscover: fetchDiscover,\n        headersReducer: headersReducer,\n        maxAggregate: maxAggregate,\n        mergeTrees: mergeTrees,\n        minAggregate: minAggregate,\n        parseResponse: parseResponse,\n        readData: readData,\n        rootFields: rootFields,\n        setFilter: setFilter,\n        setSort: setSort,\n        sumAggregate: sumAggregate,\n        toColumns: toColumns,\n        toData: toData,\n        toRows: toRows,\n        toTree: toTree,\n    };\n\n})(window.kendo.jQuery);\nexport default kendo;\n\n"],"x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42],"mappings":"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"}