{"version":3,"file":"kendo.upload.min.js","names":[],"sources":["../../src/kendo.upload.js"],"sourcesContent":["import \"./kendo.core.js\";\nimport \"./kendo.progressbar.js\";\nimport \"./kendo.icons.js\";\nimport \"./kendo.html.button.js\";\n\nexport const __meta__ = {\n    id: \"upload\",\n    name: \"Upload\",\n    category: \"web\",\n    description: \"The Upload widget uses progressive enhancement to deliver the best possible uploading experience to users.\",\n    depends: [\"core\", \"progressbar\", \"icons\", \"html.button\"]\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        Widget = kendo.ui.Widget,\n        antiForgeryTokens = kendo.antiForgeryTokens,\n        logToConsole = kendo.logToConsole,\n        rFileExtension = /\\.([^\\.]+)$/,\n        NS = \".kendoUpload\",\n        SELECT = \"select\",\n        UPLOAD = \"upload\",\n        SUCCESS = \"success\",\n        ERROR = \"error\",\n        COMPLETE = \"complete\",\n        CANCEL = \"cancel\",\n        CLEAR = \"clear\",\n        PAUSE = \"pause\",\n        RESUME = \"resume\",\n        PROGRESS = \"progress\",\n        REMOVE = \"remove\",\n        VALIDATIONERRORS = \"validationErrors\",\n        INVALIDMAXFILESIZE = \"invalidMaxFileSize\",\n        INVALIDMINFILESIZE = \"invalidMinFileSize\",\n        INVALIDFILEEXTENSION = \"invalidFileExtension\",\n        PROGRESSHIDEDELAY = 1000,\n        PROGRESSHIDEDURATION = 2000,\n        HOVER_STATE = \"k-hover\",\n        FOCUS_STATE = \"k-focus\",\n        PROGRESSBAR_CLASS = \"k-progressbar\",\n        PROGRESSBAR_SELECTOR = \".\" + PROGRESSBAR_CLASS,\n        PROGRESSBAR_TEMPLATE_SELECTOR = \".k-progress\",\n        TABINDEX = \"tabindex\",\n        WARNINGICON_SELECTOR = `.k-i-exclamation-circle,.k-svg-i-exclamation-circle`;\n\n    var headerStatusIconName = {\n        loading: \"upload\",\n        warning: \"exclamation-circle\",\n        success: \"check\"\n    };\n\n    var Upload = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n            that.progressbars = [];\n\n            Widget.fn.init.call(that, element, options);\n\n            that.name = element.name;\n            that.multiple = that.options.multiple;\n            that.directory = that.options.directory;\n            that.localization = that.options.localization;\n\n            var activeInput = that.element;\n            that.wrapper = activeInput.closest(\".k-upload\");\n            if (that.wrapper.length === 0) {\n                that.wrapper = that._wrapInput(activeInput);\n            }\n\n            that._activeInput(activeInput);\n            that.element.addClass(\"k-hidden\");\n            that.toggle(that.options.enabled);\n\n            var ns = that._ns = NS + \"-\" + kendo.guid();\n            activeInput.closest(\"form\")\n                .on(\"submit\" + ns, that._onParentFormSubmit.bind(that))\n                .on(\"reset\" + ns, that._onParentFormReset.bind(that));\n\n            that._initUploadModule();\n\n            that._toggleDropZone();\n\n            that.wrapper\n                .on(\"keydown\", \".k-upload-button\", that._onUploadButtonKeydown.bind(that))\n                .on(\"click\", \".k-upload-action\", that._onFileAction.bind(that))\n                .on(\"click\", \".k-clear-selected\", that._onClearSelected.bind(that))\n                .on(\"click\", \".k-upload-button\", function(e) {\n                    e.preventDefault();\n                    that.element.click();\n                })\n                .on(\"click\", \".k-upload-selected\", that._onUploadSelected.bind(that))\n                .on(\"keydown\", that._onKeyDown.bind(that))\n                .on(\"focusout\", that._focusout.bind(that));\n\n            if (that.element.val()) {\n                that._onInputChange({ target: that.element });\n            }\n        },\n\n        events: [\n            SELECT,\n            UPLOAD,\n            SUCCESS,\n            ERROR,\n            COMPLETE,\n            CANCEL,\n            CLEAR,\n            PROGRESS,\n            REMOVE,\n            PAUSE,\n            RESUME\n        ],\n\n        options: {\n            name: \"Upload\",\n            enabled: true,\n            multiple: true,\n            directory: false,\n            showFileList: true,\n            uniqueFileUids: false,\n            template: \"\",\n            files: [],\n            async: {\n                autoRetryAfter: 0,\n                bufferChunkSize: 10000000,\n                maxAutoRetries: 1,\n                removeVerb: \"POST\",\n                autoUpload: true,\n                withCredentials: true,\n                accept: \"*/*; q=0.5, application/json\",\n                useArrayBuffer: false\n            },\n            localization: {\n                \"select\": \"Select files...\",\n                \"cancel\": \"Cancel\",\n                \"retry\": \"Retry\",\n                \"remove\": \"Remove\",\n                \"pause\": \"Pause\",\n                \"resume\": \"Resume\",\n                \"clearSelectedFiles\": \"Clear\",\n                \"uploadSelectedFiles\": \"Upload\",\n                \"dropFilesHere\": \"Drop files here to upload\",\n                \"invalidFiles\": \"Invalid file(s). Please check file upload requirements.\",\n                \"statusUploading\": \"uploading\",\n                \"statusUploaded\": \"uploaded\",\n                \"statusWarning\": \"warning\",\n                \"statusFailed\": \"failed\",\n                \"headerStatusUploading\": \"Uploading...\",\n                \"headerStatusPaused\": \"Paused\",\n                \"headerStatusUploaded\": \"Done\",\n                \"uploadSuccess\": \"File(s) uploaded successfully.\",\n                \"uploadFail\": \"File(s) failed to upload.\",\n                \"invalidMaxFileSize\": \"File size too large.\",\n                \"invalidMinFileSize\": \"File size too small.\",\n                \"invalidFileExtension\": \"File type not allowed.\"\n            },\n            validation: {\n                allowedExtensions: [],\n                maxFileSize: 0,\n                minFileSize: 0\n            },\n            dropZone: \"\"\n        },\n\n        _initUploadModule: function() {\n            var that = this,\n                options = that.options;\n\n            if (options.async.saveUrl) {\n                that._module = that._supportsFormData() ?\n                new formDataUploadModule(that) :\n                new iframeUploadModule(that);\n                that._async = true;\n\n                var initialFiles = options.files;\n                if (initialFiles.length > 0) {\n                    that._renderInitialFiles(initialFiles);\n                }\n\n            } else {\n                that._module = new syncUploadModule(that);\n            }\n        },\n\n        setOptions: function(options) {\n            var that = this,\n                activeInput = that.element;\n\n            $(that.options.dropZone).off(that._ns);\n\n            Widget.fn.setOptions.call(that, options);\n\n            that.multiple = that.options.multiple;\n            that.directory = that.options.directory;\n\n            activeInput.attr(\"multiple\", that._supportsMultiple() ? that.multiple : false);\n            if (that.directory) {\n                activeInput.attr(\"webkitdirectory\", that.directory);\n                activeInput.attr(\"directory\", that.directory);\n            }\n            that.toggle(that.options.enabled);\n\n            that._initUploadModule();\n\n            that._toggleDropZone();\n        },\n\n        enable: function(enable) {\n            enable = typeof (enable) === \"undefined\" ? true : enable;\n            this.toggle(enable);\n        },\n\n        disable: function() {\n            this.toggle(false);\n        },\n\n        toggle: function(enable) {\n            enable = typeof (enable) === \"undefined\" ? enable : !enable;\n            this.wrapper.toggleClass(\"k-disabled\", enable);\n            this.element.prop(\"disabled\", enable);\n        },\n\n        focus: function() {\n            this.wrapper.find(\".k-upload-button\").trigger(\"focus\");\n        },\n\n        destroy: function() {\n            var that = this;\n            var customDropZone = $(that.options.dropZone);\n\n            $(document)\n                .add($(\".k-dropzone\", that.wrapper))\n                .add(that.wrapper.closest(\"form\"))\n                .off(that._ns);\n\n            if (customDropZone.length > 0) {\n                customDropZone.off(that._ns);\n            }\n\n            $(that.element).off(NS);\n\n            if (that.progressbars) {\n                that.progressbars.forEach(progressbar => {\n                    progressbar.destroy();\n                });\n            }\n            Widget.fn.destroy.call(that);\n        },\n        pause: function(fileEntry) {\n            this._module.onPause({ target: $(fileEntry, this.wrapper) });\n\n            var pauseIcon = fileEntry.find(\".k-i-pause-sm,.k-svg-i-pause-sm\");\n            var resume = kendo.htmlEncode(this.localization.resume);\n            kendo.ui.icon(pauseIcon, { icon: \"play-sm\" });\n            pauseIcon.attr(\"title\", resume);\n            $(pauseIcon).parent().attr(\"aria-label\", resume);\n        },\n        resume: function(fileEntry) {\n            this._module.onResume({ target: $(fileEntry, this.wrapper) });\n\n            var playIcon = fileEntry.find(\".k-i-play-sm,.k-svg-i-play-sm\");\n            var pause = kendo.htmlEncode(this.localization.pause);\n            kendo.ui.icon(playIcon, { icon: \"pause-sm\" });\n            playIcon.attr(\"title\", pause);\n            $(playIcon).parent().attr(\"aria-label\", pause);\n        },\n        upload: function() {\n            var that = this;\n\n            that._module.onSaveSelected();\n        },\n\n        getFiles: function() {\n            var that = this;\n            var filesData;\n            var allFiles = [];\n            var listItems = that.wrapper.find(\".k-file\");\n\n            for (var i = 0; i < listItems.length; i++) {\n                filesData = $(listItems[i]).data(\"fileNames\");\n\n                if (filesData) {\n                    for (var j = 0; j < filesData.length; j++) {\n                        allFiles.push(filesData[j]);\n                    }\n                }\n            }\n\n            return allFiles;\n        },\n\n        clearAllFiles: function() {\n            var that = this;\n            var files = that.wrapper.find(\".k-file\");\n\n            files.each(function(index, file) {\n                that._removeFileByDomElement(file, false);\n            });\n        },\n\n        removeAllFiles: function() {\n            var that = this;\n            var files = that.wrapper.find(\".k-file\");\n\n            files.each(function(index, file) {\n                that._removeFileByDomElement(file, true);\n            });\n        },\n\n        removeFileByUid: function(uid) {\n            this._removeFileByUid(uid, true);\n        },\n\n        clearFileByUid: function(uid) {\n            this._removeFileByUid(uid, false);\n        },\n\n        _removeFileByUid: function(uid, shouldSendRemoveRequest) {\n            var that = this;\n            var fileEntry;\n\n            if (typeof uid !== 'string') { return; }\n\n            fileEntry = $('.k-file[' + kendo.attr('uid') + '=\"' + uid + '\"]', that.wrapper);\n\n            if (fileEntry.length > 0) {\n                that._removeFileByDomElement(fileEntry, shouldSendRemoveRequest);\n            }\n        },\n\n        clearFile: function(callback) {\n            this._removeFile(callback, false);\n        },\n\n        removeFile: function(callback) {\n            this._removeFile(callback, true);\n        },\n\n        _removeFile: function(callback, shouldSendRemoveRequest) {\n            var that = this;\n            var files = that.wrapper.find(\".k-file\");\n            var fileData;\n\n            if (typeof callback === \"function\") {\n                files.each(function(index, file) {\n                    fileData = $(file).data(\"fileNames\");\n\n                    if (callback(fileData)) {\n                        that._removeFileByDomElement(file, shouldSendRemoveRequest);\n                    }\n                });\n            }\n        },\n\n        _removeFileByDomElement: function(fileEntry, shouldSendRemoveRequest) {\n            var that = this;\n            var fileData = {\n                target: $(fileEntry, that.wrapper)\n            };\n            var allFiles;\n\n            if (that.options.async.saveUrl) {\n                if ($(fileEntry).hasClass(\"k-file-progress\")) {\n                    that._module.onCancel(fileData);\n                } else {\n                    that._module.onRemove(fileData, {}, shouldSendRemoveRequest);\n                }\n\n                allFiles = $(\".k-file\", that.wrapper);\n\n                if (allFiles.length === 0) {\n                    that._hideHeaderUploadstatus();\n                } else {\n                    that._updateHeaderUploadStatus();\n                }\n            } else {\n                that._module.onRemove(fileData, {}, shouldSendRemoveRequest);\n            }\n        },\n\n        _addInput: function(sourceInput) {\n            //check if source input is a DOM element. Required for some unit tests\n            if (!sourceInput[0].nodeType) {\n                return;\n            }\n\n            var that = this,\n                input = sourceInput.clone().val(\"\");\n\n            input\n                .insertAfter(that.element)\n                .data(\"kendo\" + that.options.prefix + that.options.name, that);\n\n            $(that.element)\n                .attr(TABINDEX, \"-1\")\n                .removeAttr(\"id\")\n                .off(NS);\n\n            that._activeInput(input);\n            that.wrapper.find(\".k-upload-button\").trigger(\"focus\");\n        },\n\n        _activeInput: function(input) {\n            var that = this,\n                wrapper = that.wrapper;\n\n            that.element = input;\n\n            if (that.directory) {\n                input.attr(\"webkitdirectory\", that.directory);\n                input.attr(\"directory\", that.directory);\n            }\n\n            input\n                .attr(\"multiple\", that._supportsMultiple() ? that.multiple : false)\n                .attr(\"autocomplete\", \"off\")\n                .on(\"click\" + NS, function(e) {\n                    if (wrapper.hasClass(\"k-disabled\")) {\n                        e.preventDefault();\n                    }\n                })\n                .on(\"change\" + NS, that._onInputChange.bind(that));\n        },\n\n        _adjustFocusState: function(focusedItem, toFocus) {\n            focusedItem.removeClass(FOCUS_STATE);\n            focusedItem.attr(TABINDEX, -1);\n            toFocus.addClass(FOCUS_STATE);\n            toFocus.attr(TABINDEX, 0);\n        },\n\n        _arrowKeyNavigation: function(e, key, focusedItem) {\n            var that = this,\n                kendoKeys = kendo.keys,\n                toFocus;\n\n            if (key === kendoKeys.DOWN) {\n                e.preventDefault();\n                e.stopPropagation();\n\n                toFocus = that.wrapper.find(\".k-upload-files .k-file\").first();\n\n                if (focusedItem.length > 0) {\n                    if (focusedItem.hasClass(\"k-upload-action\")) {\n                        focusedItem.removeClass(FOCUS_STATE);\n                        focusedItem = focusedItem.closest(\".k-file\");\n                    }\n\n                    toFocus = focusedItem.next();\n                }\n\n                that._adjustFocusState(focusedItem, toFocus);\n\n                if (!toFocus || toFocus.length === 0) {\n                    toFocus = that.wrapper.find(\".k-clear-selected\");\n                }\n            } else if (key === kendoKeys.UP) {\n                e.preventDefault();\n                e.stopPropagation();\n\n                toFocus = that.wrapper.find(\".k-upload-files .k-file:last\");\n\n                if (focusedItem.length > 0) {\n                    if (focusedItem.hasClass(\"k-upload-action\")) {\n                        focusedItem.removeClass(FOCUS_STATE);\n                        focusedItem = focusedItem.closest(\".k-file\");\n                    }\n\n                    toFocus = focusedItem.prev();\n                }\n\n                that._adjustFocusState(focusedItem, toFocus);\n            } else if (key === kendoKeys.RIGHT) {\n                if (focusedItem.hasClass(\"k-upload-action\")) {\n                    toFocus = focusedItem.next(\".k-upload-action\");\n\n                    if (!toFocus || toFocus.length === 0) {\n                        toFocus = focusedItem.parent().find(\".k-upload-action:first\");\n                    }\n                } else if (focusedItem.length > 0) {\n                    toFocus = focusedItem.find(\".k-upload-action:first\");\n                }\n\n                if (toFocus && toFocus.length > 0) {\n                    focusedItem.removeClass(FOCUS_STATE);\n                    toFocus.addClass(FOCUS_STATE);\n                }\n            } else if (key === kendoKeys.LEFT) {\n                if (focusedItem.hasClass(\"k-upload-action\")) {\n                    toFocus = focusedItem.prev(\".k-upload-action\");\n\n                    if (!toFocus || toFocus.length === 0) {\n                        toFocus = focusedItem.parent().find(\".k-upload-action:last\");\n                    }\n                } else if (focusedItem.length > 0) {\n                    toFocus = focusedItem.find(\".k-upload-action:last\");\n                }\n\n                if (toFocus && toFocus.length > 0) {\n                    focusedItem.removeClass(FOCUS_STATE);\n                    toFocus.addClass(FOCUS_STATE);\n                }\n            }\n\n            if ((!toFocus || toFocus.length === 0) && (key === kendoKeys.UP || key === kendoKeys.DOWN)) {\n                toFocus = that.wrapper.find(\".k-upload-button\");\n            }\n\n            if (toFocus && toFocus.length > 0) {\n                that._preventFocusRemove = true;\n                toFocus.trigger(\"focus\");\n            }\n        },\n\n        _asyncCommandKeyNavigation: function(key, focusedItem, eventArgs) {\n            var that = this,\n                kendoKeys = kendo.keys,\n                fileEntry = $(focusedItem, that.wrapper);\n\n            that._retryClicked = false;\n\n            if (key === kendoKeys.ESC && focusedItem.find(\".k-i-cancel,.k-svg-i-cancel\").length > 0) {\n                that.trigger(CANCEL, eventArgs);\n                that._module.onCancel({ target: fileEntry });\n                that._checkAllComplete();\n                that._updateHeaderUploadStatus();\n                that._preventFocusRemove = true;\n                that.wrapper.find(\".k-upload-button\").trigger(\"focus\");\n            } else if (key === kendoKeys.SPACEBAR) {\n                if (focusedItem.find(\".k-i-pause-sm,.k-svg-i-pause-sm\").length > 0) {\n                    that.trigger(PAUSE, eventArgs);\n                    that.pause(focusedItem);\n                    that._updateHeaderUploadStatus();\n                } else if (focusedItem.find(\".k-i-play-sm,.k-svg-i-play-sm\").length > 0) {\n                    that.trigger(RESUME, eventArgs);\n                    that.resume(focusedItem);\n                }\n            } else if (key === kendoKeys.ENTER && !focusedItem.is(\".k-file-progress, .k-file-success, .k-file-invalid\")) {\n                if (that.options.async.chunkSize && !that.options.async.concurrent && $('.k-file-progress', that.wrapper).length > 0) {\n                    return;\n                }\n\n                $(WARNINGICON_SELECTOR, focusedItem).remove();\n                $(PROGRESSBAR_SELECTOR, focusedItem).finish().show();\n\n                if (!that._module.metaData[fileEntry.data(\"uid\")]) {\n                    that._module.prepareChunk(fileEntry);\n                }\n\n                that._module.onRetry({ target: fileEntry });\n                that._retryClicked = true;\n            }\n        },\n\n        _commandKeyNavigation: function(key, focusedItem) {\n            var that = this,\n                kendoKeys = kendo.keys,\n                files = focusedItem.data(\"fileNames\"),\n                hasValidationErrors = that._filesContainValidationErrors(files),\n                eventArgs = {\n                    files: files,\n                    headers: {}\n                };\n\n            if (key === kendoKeys.DELETE) {\n                if (!that.trigger(REMOVE, eventArgs)) {\n                    that._module.onRemove({ target: $(focusedItem, that.wrapper) }, eventArgs, !hasValidationErrors);\n                    that._preventFocusRemove = true;\n                    that.wrapper.find(\".k-upload-button\").trigger(\"focus\");\n                }\n            } else if (key === kendoKeys.TAB) {\n                focusedItem.removeClass(FOCUS_STATE);\n                focusedItem.attr(TABINDEX, -1);\n            } else if (!!that.options.async.saveUrl) {\n                that._asyncCommandKeyNavigation(key, focusedItem, eventArgs);\n            }\n        },\n\n        _focusout: function() {\n            var focusedItem = this.wrapper.find(\".k-upload-files .k-file.\" + FOCUS_STATE);\n\n            if (!this._preventFocusRemove) {\n                focusedItem.removeClass(FOCUS_STATE);\n                focusedItem.attr(TABINDEX, -1);\n            } else {\n                this._preventFocusRemove = false;\n            }\n        },\n\n        _onKeyDown: function(e) {\n            var that = this,\n                focusedItem = that.wrapper.find(\".k-upload-files .k-file.\" + FOCUS_STATE + \",\" + \".k-upload-action.\" + FOCUS_STATE),\n                kendoKeys = kendo.keys,\n                commandKeys = [kendoKeys.DELETE, kendoKeys.ESC, kendoKeys.ENTER, kendoKeys.SPACEBAR, kendoKeys.TAB],\n                key = e.keyCode;\n\n            if (key === kendoKeys.DOWN || key === kendoKeys.UP || key === kendoKeys.LEFT || key === kendoKeys.RIGHT) {\n                that._arrowKeyNavigation(e, key, focusedItem);\n            } else if (focusedItem.length > 0 && focusedItem.hasClass(\"k-file\") && commandKeys.indexOf(key) > -1 && !that.wrapper.hasClass(\"k-disabled\")) {\n                if (key === kendoKeys.SPACEBAR) {\n                    e.preventDefault();\n                    e.stopPropagation();\n                }\n\n                that._commandKeyNavigation(key, focusedItem);\n            }\n        },\n\n        _onInputChange: function(e) {\n            var that = this;\n            var input = $(e.target);\n            var files = assignGuidToFiles(that._inputFiles(input), that._isAsyncNonBatch() || that.options.uniqueFileUids);\n\n            validateFiles(files, that.options.validation);\n\n            var prevented = that.trigger(SELECT, { files: files });\n            if (prevented) {\n                that._addInput(input);\n                input.remove();\n            } else {\n                that._module.onSelect({ target: input }, files);\n            }\n            that.focus();\n        },\n\n        _onUploadButtonKeydown: function(e) {\n            var key = e.keyCode,\n                kendoKeys = kendo.keys;\n\n            if (key === kendoKeys.ENTER || key === kendoKeys.SPACEBAR) {\n                this.wrapper.find(\".k-upload-button-wrap input\").last().trigger(\"click\");\n            }\n        },\n\n        _readDirectory: function(item) {\n            var deferred = new $.Deferred();\n            var dirReader = item.createReader();\n            var allFolderFiles = [];\n\n            var readEntries = function() {\n                dirReader.readEntries(function(entries) {\n                    if (!entries.length) {\n                        deferred.resolve(allFolderFiles);\n                    } else {\n                        allFolderFiles = allFolderFiles.concat(entries);\n                        readEntries();\n                    }\n                }, deferred.reject);\n            };\n\n            readEntries();\n\n             return deferred.promise();\n        },\n\n        _readFile: function(item) {\n            var that = this;\n            var fullpath = item.fullPath;\n\n            item.file(function(file) {\n                    file.relativePath = fullpath.slice(1);\n                    that.droppedFolderFiles.push(file);\n                    that.droppedFolderCounter --;\n                    if (that.droppedFolderCounter === 0) {\n                        setTimeout(function() {\n                            if (that.droppedFolderCounter === 0) {\n                                if (that.droppedFolderFiles.length) {\n                                    that._proceedDroppedItems(that.droppedFolderFiles);\n                                    that.droppedFolderFiles = [];\n                                }\n                            }\n                        },0);\n                    }\n            }, function() {\n                logToConsole(\"File error.\");\n            });\n        },\n\n        _traverseFileTree: function(item, skipCounter) {\n            var that = this;\n            if (!skipCounter) {\n                that.droppedFolderCounter--;\n            }\n\n            this._readDirectory(item).then(function(items) {\n                that.droppedFolderCounter += items.length;\n                for (var i = 0; i < items.length; i++) {\n                    if (items[i].isFile) {\n                        that._readFile(items[i]);\n                    } else if (items[i].isDirectory) {\n                        that._traverseFileTree(items[i]);\n                    }\n                }\n            });\n        },\n\n        _onDrop: function(e) {\n            var dt = e.originalEvent.dataTransfer;\n            var that = this;\n            var droppedFiles = dt.files;\n            var length;\n\n            stopEvent(e);\n           if (that.options.directoryDrop && dt.items) {\n                length = dt.items.length;\n                that.droppedFolderCounter = 0;\n                that.droppedFolderFiles = [];\n\n                for (var i = 0; i < length; i++) {\n                    if (dt.items[i].webkitGetAsEntry) {\n                        var entry = dt.items[i].webkitGetAsEntry();\n\n                        if (entry.isDirectory) {\n                            that._traverseFileTree(entry, true);\n                        } else if (entry.isFile) {\n                            that.droppedFolderFiles.push(dt.files[i]);\n                        }\n                    } else {\n                         that._proceedDroppedItems(droppedFiles);\n                    }\n                }\n           } else {\n               that._proceedDroppedItems(droppedFiles);\n           }\n        },\n\n        _proceedDroppedItems: function(droppedFiles) {\n            var that = this;\n            var files = assignGuidToFiles(getAllFileInfo(droppedFiles), that._isAsyncNonBatch() || that.options.uniqueFileUids);\n\n              if (droppedFiles.length > 0 && !that.wrapper.hasClass(\"k-disabled\")) {\n                if (!that.multiple && files.length > 1) {\n                    files.splice(1, files.length - 1);\n                }\n\n                validateFiles(files, that.options.validation);\n\n                var prevented = that.trigger(SELECT, { files: files });\n                if (!prevented) {\n                    that._module.onSelect({ target: $(\".k-dropzone\", that.wrapper) }, files);\n                }\n            }\n        },\n\n        _filesContainValidationErrors: function(files) {\n            var hasErrors = false;\n\n            $(files).each(function(index, file) {\n                if (file[VALIDATIONERRORS] && file[VALIDATIONERRORS].length > 0) {\n                    hasErrors = true;\n                    return false;\n                }\n            });\n\n            return hasErrors;\n        },\n\n        _isAsyncNonBatch: function() {\n            return (this._async && !this.options.async.batch) || false;\n        },\n\n        _renderInitialFiles: function(files) {\n            var that = this;\n            var idx = 0;\n            files = assignGuidToFiles(files, true);\n\n            for (idx = 0; idx < files.length; idx++) {\n                var currentFile = files[idx];\n\n                var fileEntry = that._enqueueFile(currentFile.name, { fileNames: [currentFile] });\n                fileEntry.addClass(\"k-file-success\").data(\"files\", [files[idx]]);\n\n                if (that._supportsRemove()) {\n                    that._fileAction(fileEntry, REMOVE);\n                }\n            }\n        },\n\n        _prepareTemplateData: function(name, data) {\n            var filesData = data.fileNames,\n                templateData = {},\n                totalSize = 0,\n                idx = 0;\n\n            for (idx = 0; idx < filesData.length; idx++) {\n                totalSize += filesData[idx].size;\n            }\n\n            templateData.name = name;\n            templateData.size = totalSize;\n            templateData.files = data.fileNames;\n\n            return templateData;\n        },\n\n        _createProgressbarWapper: function() {\n            return \"<div class='\" + PROGRESSBAR_CLASS + \" k-hidden'></div>\";\n        },\n\n        _createFileIconWrapper: function(fileTypeIcon) {\n            return \"<span class='k-file-icon-wrapper'>\" +\n                kendo.ui.icon({ icon: fileTypeIcon, iconClass: \"k-file-icon\", size: \"xxlarge\" }) +\n                \"<span class='k-file-state'></span>\" +\n                \"</span>\";\n        },\n\n        _progressbarInit: function(wrapper) {\n            let progressbar = wrapper.kendoProgressBar({\n                animation: false,\n                showStatus: false\n            }).data(\"kendoProgressBar\");\n            this.progressbars.push(progressbar);\n        },\n\n        _prepareDefaultSingleFileEntryTemplate: function(data) {\n            var that = this;\n            var file = data.fileNames[0];\n            var fileSize = getTotalFilesSizeMessage(data.fileNames);\n            var fileGroup = kendo.getFileGroup(file.extension, true);\n            var errors = file[VALIDATIONERRORS];\n            var isError = errors && errors.length > 0;\n            var invalidClass = isError ? \" k-file-invalid k-file-error\" : \"\";\n            var fileDetails = isError ?\n                    \"<span class='k-file-validation-message' aria-live='polite'>\" + kendo.htmlEncode(that.localization[errors[0]]) + \"</span>\" :\n                    \"<span class='k-file-size'>\" + fileSize + \"</span>\";\n            let encodedFileName = kendo.htmlEncode(file.name, true);\n            var template = \"\";\n\n            template += \"<li class='k-file\" + invalidClass + \"'><div class='k-file-single'>\" +\n                this._createProgressbarWapper() +\n                this._createFileIconWrapper(fileGroup) +\n                \"<span class='k-file-info'>\" +\n                    \"<span class='k-file-name' title='\" + encodedFileName + \"'>\" + encodedFileName + \"</span>\" +\n                    fileDetails +\n                \"</span>\";\n\n            template += \"<span class='k-upload-actions'></span></div>\";\n\n            return $(template);\n        },\n\n        _prepareDefaultMultipleFileEntriesTemplate: function(data) {\n            var that = this;\n            var files = data.fileNames;\n            var filesHaveValidationErrors = that._filesContainValidationErrors(files);\n            var totalFileSize = getTotalFilesSizeMessage(files);\n            var template = \"\";\n            var i, currentFile;\n            var invalidClass = filesHaveValidationErrors ? \" k-file-invalid k-file-error\" : \"\";\n\n            template += \"<li class='k-file\" + invalidClass + \"'><div class='k-file-multiple'>\" +\n                this._createProgressbarWapper() +\n                this._createFileIconWrapper(\"copy\");\n\n            files.sort(function(a, b) {\n                if (a[VALIDATIONERRORS]) { return -1; }\n\n                if (b[VALIDATIONERRORS]) { return 1; }\n\n                return 0;\n            });\n\n            template += \"<span class='k-multiple-files-wrapper'>\";\n            for (i = 0; i < files.length; i++) {\n                currentFile = files[i];\n                var fileSize = getTotalFilesSizeMessage([currentFile]);\n                let encodedFileName = kendo.htmlEncode(currentFile.name, true);\n\n                template += \"<span class='k-file-info'>\";\n                if (currentFile[VALIDATIONERRORS] && currentFile[VALIDATIONERRORS].length > 0) {\n                    template += \"<span class='k-file-name k-file-name-invalid' title='\" + encodedFileName + \"'>\" + encodedFileName + \"</span>\";\n                } else {\n                    template += \"<span class='k-file-name' title='\" + encodedFileName + \"'>\" + encodedFileName + \"</span>\";\n                }\n                template += \"<span class='k-file-size'>\" + fileSize + \"</span></span>\";\n            }\n\n            if (filesHaveValidationErrors) {\n                template += \"<span class='k-file-validation-message' aria-live='polite'>\" + kendo.htmlEncode(that.localization.invalidFiles) + \"</span>\";\n            } else {\n                template += \"<span class='k-file-summary'>Total: \" + files.length + \" files, \" + totalFileSize + \"</span>\";\n            }\n\n            template += \"</span><span class='k-upload-actions'></span></div>\";\n\n            return $(template);\n        },\n\n        _enqueueFile: function(name, data) {\n            var that = this;\n            var existingFileEntries;\n            var fileEntry;\n            var fileUid = data.fileNames[0].uid;\n            var fileList = $(\".k-upload-files\", that.wrapper);\n            var options = that.options;\n            var template = options.template;\n            var templateData;\n            var removeEventArgs;\n            var progressbarSelector = template ? PROGRESSBAR_TEMPLATE_SELECTOR : PROGRESSBAR_SELECTOR;\n            var progressbar;\n            var isProgressbar;\n\n            if (fileList.length === 0) {\n                fileList = $(\"<ul class='k-upload-files'></ul>\").appendTo(that.wrapper);\n                if (!that.options.showFileList) {\n                    fileList.hide();\n                }\n\n                that.wrapper.removeClass(\"k-upload-empty\");\n            }\n\n            existingFileEntries = $(\".k-file\", fileList);\n\n            if (!template) {\n                if (data.fileNames.length === 1) {\n                    fileEntry = that._prepareDefaultSingleFileEntryTemplate(data);\n                } else {\n                    fileEntry = that._prepareDefaultMultipleFileEntriesTemplate(data);\n                }\n            } else {\n                templateData = that._prepareTemplateData(name, data);\n                template = kendo.template(template);\n\n                fileEntry = $(\"<li class='k-file'>\" + template(templateData) + \"</li>\");\n                fileEntry.find(\".k-upload-action\").addClass(\"k-button k-icon-button k-button-flat\");\n            }\n\n            progressbar = $(progressbarSelector, fileEntry[0]);\n            isProgressbar = progressbar.length > 0;\n\n            if (isProgressbar) {\n                that._progressbarInit(progressbar);\n            }\n\n            fileEntry\n                .attr(kendo.attr(\"uid\"), fileUid)\n                .appendTo(fileList)\n                .data(data);\n\n            if (!that._async && isProgressbar) {\n                progressbar.data(\"kendoProgressBar\").value(100);\n            }\n\n            if (!that.multiple && existingFileEntries.length > 0) {\n                removeEventArgs = {\n                    files: existingFileEntries.data(\"fileNames\"),\n                    headers: {}\n                };\n                if (!that.trigger(REMOVE, removeEventArgs)) {\n                    that._module.onRemove({ target: $(existingFileEntries, that.wrapper) }, removeEventArgs);\n                }\n            }\n\n            return fileEntry;\n        },\n\n        _removeFileEntry: function(fileEntry) {\n            var that = this;\n            var fileList = fileEntry.closest(\".k-upload-files\");\n            var allFiles, allCompletedFiles, allInvalidFiles;\n\n            fileEntry.remove();\n            allFiles = $(\".k-file\", fileList);\n            allCompletedFiles = $(\".k-file-success, .k-file-error\", fileList);\n\n            if (allCompletedFiles.length === allFiles.length) {\n                this._hideActionButtons();\n            }\n\n            if (allFiles.length === 0) {\n                fileList.remove();\n                that.wrapper.addClass(\"k-upload-empty\");\n                that._hideHeaderUploadstatus();\n            } else {\n                that._updateHeaderUploadStatus();\n            }\n        },\n\n        _fileAction: function(fileElement, actionKey, skipClear) {\n            var iconsNameDictionary = { remove: \"x\", cancel: \"cancel\", retry: \"arrow-rotate-cw-small\", pause: \"pause-sm\" };\n            var firstActionButton;\n            let actionKeyText = kendo.htmlEncode(this.localization[actionKey]);\n\n            if (!iconsNameDictionary.hasOwnProperty(actionKey)) {\n                return;\n            }\n            if (!skipClear) {\n                this._clearFileAction(fileElement);\n            }\n            if (!this.options.template) {\n                if (!skipClear) {\n                    fileElement.find(\".k-upload-action\").remove();\n                }\n                fileElement.find(\".k-upload-actions\").append(\n                    this._renderAction(iconsNameDictionary[actionKey], actionKeyText, actionKey == \"retry\" ? \"k-i-retry\" : \"\")\n                );\n            } else {\n                firstActionButton = fileElement.find(\".k-upload-action\").first();\n                if (!firstActionButton.find(\".k-icon,.k-svg-icon\").length) {\n                    let firstActionIcon = kendo.ui.icon($(`<span title=\"${actionKeyText}\" aria-label=\"${actionKeyText}\"></span>`), {\n                        icon: iconsNameDictionary[actionKey],\n                        iconClass: \"k-button-icon\" + (actionKey == \"retry\" ? \" k-i-retry\" : \"\")\n                    });\n                    firstActionButton\n                        .addClass(\"k-button k-icon-button\")\n                        .append(firstActionIcon)\n                        .show();\n                } else if (firstActionButton.next(\".k-upload-action\").length) {\n                    let firstActionIcon = kendo.ui.icon($(`<span title=\"${actionKeyText}\" aria-label=\"${actionKeyText}\"></span>`), {\n                        icon: iconsNameDictionary[actionKey],\n                        iconClass: \"k-button-icon\" + (actionKey == \"retry\" ? \" k-i-retry\" : \"\")\n                    });\n                    firstActionButton.next(\".k-upload-action\")\n                        .addClass(\"k-button k-icon-button\")\n                        .append(firstActionIcon)\n                        .show();\n                }\n            }\n        },\n\n        _fileState: function(fileEntry, stateKey) {\n            var localization = this.localization,\n                states = {\n                    uploading: {\n                        text: localization.statusUploading\n                    },\n                    uploaded: {\n                        text: localization.statusUploaded\n                    },\n                    failed: {\n                        text: localization.statusFailed\n                    }\n                },\n                currentState = states[stateKey];\n\n            if (currentState) {\n                $(\"span.k-file-state\", fileEntry).text(kendo.htmlEncode(currentState.text));\n            }\n        },\n\n        _renderAction: function(iconName, actionText, iconClass) {\n            if (iconName !== \"\") {\n                return $(\n                \"<button type='button' class='k-button k-icon-button k-button-flat k-upload-action' aria-hidden='true' aria-label='\" + actionText + \"' tabindex='-1'>\" +\n                    kendo.ui.icon($(`<span title=\"${actionText}\"></span>`), { icon: iconName, iconClass: \"k-button-icon\" + (iconClass ? ` ${iconClass}` : \"\") }) +\n                \"</button>\"\n                ).on(\"focus\", function() { $(this).addClass(FOCUS_STATE); })\n                 .on(\"blur\", function() { $(this).removeClass(FOCUS_STATE); });\n            }\n            else {\n                return $(\n                \"<button type='button' class='k-button'>\" +\n                    '<span class=\"k-button-text\">' +\n                        actionText +\n                    '</span>' +\n                \"</button>\"\n                );\n            }\n        },\n\n        _clearFileAction: function(fileElement) {\n            $(\".k-upload-action\", fileElement).empty().hide();\n        },\n\n        _onFileAction: function(e) {\n            var that = this;\n            if (!that.wrapper.hasClass(\"k-disabled\")) {\n                var button = $(e.target).closest(\".k-upload-action\");\n                var icon = button.find(\".k-icon,.k-svg-icon\");\n                var fileEntry = button.closest(\".k-file\");\n                var files = fileEntry.data(\"fileNames\");\n                var hasValidationErrors = that._filesContainValidationErrors(files);\n                var eventArgs = {\n                    files: files,\n                    headers: {}\n                };\n\n                that._retryClicked = false;\n\n                if (icon.is(\".k-i-x,.k-svg-i-x\")) {\n                    if (!that.trigger(REMOVE, eventArgs)) {\n                        that._module.onRemove({ target: $(fileEntry, that.wrapper) }, eventArgs, !hasValidationErrors);\n                        that.wrapper.find(\".k-upload-button\").trigger(\"focus\");\n                    }\n                } else if (icon.is(\".k-i-cancel,.k-svg-i-cancel\")) {\n                    that.trigger(CANCEL, eventArgs);\n                    that._module.onCancel({ target: $(fileEntry, that.wrapper) });\n                    that._checkAllComplete();\n                    that._updateHeaderUploadStatus();\n                    that.wrapper.find(\".k-upload-button\").trigger(\"focus\");\n                } else if (icon.is(\".k-i-pause-sm,.k-svg-i-pause-sm\")) {\n                    that.trigger(PAUSE, eventArgs);\n                    that.pause(fileEntry);\n                    that._updateHeaderUploadStatus();\n                } else if (icon.is(\".k-i-play-sm,.k-svg-i-play-sm\")) {\n                    that.trigger(RESUME, eventArgs);\n                    that.resume(fileEntry);\n                } else if (icon.hasClass(\"k-i-retry\")) {\n                    $(\".k-i-exclamation-circle\", fileEntry).remove();\n                    $(PROGRESSBAR_SELECTOR, fileEntry).finish().show();\n                    that._module.onRetry({ target: $(fileEntry, that.wrapper) });\n                    that._retryClicked = true;\n                }\n\n                fileEntry.addClass(FOCUS_STATE);\n            }\n\n            return false;\n        },\n\n        _onUploadSelected: function() {\n            var that = this;\n            var wrapper = that.wrapper;\n\n            if (!wrapper.hasClass(\"k-disabled\")) {\n                this._module.onSaveSelected();\n            }\n\n            return false;\n        },\n\n        _onClearSelected: function() {\n            var that = this;\n            var wrapper = that.wrapper;\n\n            var clearEventArgs = { };\n            if (!wrapper.hasClass(\"k-disabled\") && !that.trigger(CLEAR, clearEventArgs)) {\n                that.clearAllFiles();\n            }\n\n            return false;\n        },\n\n        _onFileProgress: function(e, percentComplete) {\n            var progressPct;\n            var progressBar = $(PROGRESSBAR_SELECTOR, e.target).data(\"kendoProgressBar\");\n\n            if (percentComplete > 100) {\n                percentComplete = 100;\n            }\n\n            $(PROGRESSBAR_SELECTOR, e.target).removeClass('k-hidden');\n\n            if (!this.options.template) {\n                progressPct = $(\".k-upload-pct\", e.target);\n\n                if (progressPct.length === 0) {\n                    $(\".k-upload-actions\", e.target).prepend(\"<span class='k-upload-pct'></span>\");\n                }\n\n                if (percentComplete !== 100) {\n                    $(\".k-upload-pct\", e.target).text(percentComplete + \"%\");\n                } else {\n                    $(\".k-upload-pct\", e.target).remove();\n                }\n            }\n\n            if (progressBar) {\n                progressBar.value(percentComplete);\n            }\n\n            this.trigger(PROGRESS, {\n                files: getFileEntry(e).data(\"fileNames\"),\n                percentComplete: percentComplete\n            });\n        },\n\n        _onUploadSuccess: function(e, response, xhr) {\n            var that = this;\n            var fileEntry = getFileEntry(e);\n            var files = fileEntry.data(\"fileNames\");\n            var fileInfo = fileEntry.find('.k-file-summary');\n            var fileSize = fileEntry.find('.k-file-size');\n\n            var prevented = that.trigger(SUCCESS, {\n                files: fileEntry.data(\"fileNames\"),\n                response: response,\n                operation: \"upload\",\n                XMLHttpRequest: xhr\n            });\n\n            if (prevented) {\n                that._setUploadErrorState(fileEntry);\n            } else {\n                that._fileState(fileEntry, \"uploaded\");\n                fileEntry.removeClass('k-file-progress').addClass('k-file-success');\n\n                if (fileInfo.length > 0) {\n                    fileInfo.addClass('k-hidden')\n                        .after('<span class=\"k-file-validation-message\" aria-live=\"polite\">' + files.length + ' ' + kendo.htmlEncode(that.localization.uploadSuccess) + '</span>');\n                } else if (fileSize.length > 0) {\n                    fileSize.addClass('k-hidden')\n                        .after('<span class=\"k-file-validation-message\" aria-live=\"polite\">' + kendo.htmlEncode(that.localization.uploadSuccess) + '</span>');\n                }\n\n                that._updateHeaderUploadStatus();\n\n                if (that._supportsRemove()) {\n                    that._fileAction(fileEntry, REMOVE);\n                } else {\n                    that._clearFileAction(fileEntry);\n                }\n            }\n\n            that._hideUploadProgress(fileEntry);\n\n            that._checkAllComplete();\n        },\n\n        _onUploadError: function(e, xhr) {\n            var that = this;\n            var module = that._module;\n            var fileEntry = getFileEntry(e);\n            var fileUid = fileEntry.data(\"uid\");\n\n            that._setUploadErrorState(fileEntry);\n\n            that.trigger(ERROR, {\n                operation: \"upload\",\n                files: fileEntry.data(\"fileNames\"),\n                XMLHttpRequest: xhr\n            });\n\n            logToConsole(\"Server response: \" + xhr.responseText);\n\n            if (!that.options.async.chunkSize) {\n                that._hideUploadProgress(fileEntry);\n            } else {\n                if (module._decreasePosition) {\n                    module._decreasePosition(fileUid);\n                }\n            }\n\n           that._checkAllComplete();\n\n            if (this.options.async.autoRetryAfter) {\n               this._autoRetryAfter(fileEntry);\n            }\n        },\n        _autoRetryAfter: function(fileEntry) {\n            var that = this;\n            var retries = this._module.retries;\n\n            if (!retries) {\n                return;\n            }\n\n            if (!retries[fileEntry.data(\"uid\")]) {\n                retries[fileEntry.data(\"uid\")] = 1;\n            }\n\n            if (retries[fileEntry.data(\"uid\")] <= this.options.async.maxAutoRetries) {\n                retries[fileEntry.data(\"uid\")]++;\n                setTimeout(function() {\n                    that._module.performUpload(fileEntry);\n                },this.options.async.autoRetryAfter);\n            }\n        },\n        _setUploadErrorState: function(fileEntry) {\n            var that = this,\n                uploadPercentage,\n                files = fileEntry.data(\"fileNames\"),\n                fileInfo = fileEntry.find('.k-file-summary'),\n                fileSize = fileEntry.find('.k-file-size');\n\n            that._fileState(fileEntry, \"failed\");\n            fileEntry.removeClass('k-file-progress').addClass('k-file-error');\n\n            if (fileInfo.length > 0) {\n                fileInfo.addClass('k-hidden')\n                    .after('<span class=\"k-file-validation-message\" aria-live=\"polite\">' + files.length + ' ' + kendo.htmlEncode(that.localization.uploadFail) + '</span>');\n            } else if (fileSize.length > 0) {\n                fileSize.addClass('k-hidden')\n                    .after('<span class=\"k-file-validation-message\" aria-live=\"polite\">' + kendo.htmlEncode(that.localization.uploadFail) + '</span>');\n            }\n\n            that._updateUploadProgress(fileEntry);\n\n            uploadPercentage = $('.k-upload-pct', fileEntry);\n\n            if (uploadPercentage.length > 0) {\n                uploadPercentage.remove();\n            }\n\n            this._updateHeaderUploadStatus();\n            this._fileAction(fileEntry, \"retry\");\n            this._fileAction(fileEntry, REMOVE, true);\n\n            if (that._retryClicked) {\n                fileEntry.trigger(\"focus\");\n            }\n        },\n\n       _updateUploadProgress: function(fileEntry) {\n            var that = this;\n            var progressbar = $( PROGRESSBAR_SELECTOR, fileEntry);\n            var isProgressbar = progressbar.length > 0;\n\n            if (!that.options.async.chunkSize && isProgressbar) {\n                progressbar.data(\"kendoProgressBar\").value(100);\n            } else {\n                var fileUid = fileEntry.data(\"uid\");\n                if (that._module.metaData) {\n                    var fileMetaData = that._module.metaData[fileUid];\n\n                    if (fileMetaData) {\n                        var percentComplete = fileMetaData.totalChunks ? Math.round(((fileMetaData.chunkIndex) / fileMetaData.totalChunks) * 100) : 100;\n\n                        that._onFileProgress({ target: $(fileEntry, that.wrapper) }, percentComplete);\n                    }\n                }\n            }\n        },\n\n        _hideUploadProgress: function(fileEntry) {\n            $(PROGRESSBAR_SELECTOR, fileEntry)\n                .delay(PROGRESSHIDEDELAY)\n                .fadeOut(PROGRESSHIDEDURATION, function() {\n                    if ($(this).data(\"kendoProgressBar\")) {\n                        $(this).data(\"kendoProgressBar\").value(0);\n                    }\n                });\n        },\n\n        _showActionButtons: function() {\n            var that = this;\n            var actionsWrapper = $(\".k-actions\", that.wrapper);\n            var uploadButton = $(\".k-upload-selected\", that.wrapper);\n            var clearButton = $(\".k-clear-selected\", that.wrapper);\n\n            if (uploadButton.length === 0) {\n                uploadButton = $(kendo.html.renderButton(`<button class='k-upload-selected'>${kendo.htmlEncode(this.localization.uploadSelectedFiles)}</button>`, {\n                        icon: 'upload',\n                        themeColor: 'primary'\n                    }));\n\n                clearButton = $(kendo.html.renderButton(`<button class='k-clear-selected'>${kendo.htmlEncode(this.localization.clearSelectedFiles)}</button>`, {\n                    icon: 'x'\n                }));\n\n            }\n\n            if (!actionsWrapper.length) {\n                actionsWrapper = $(\"<div />\")\n                    .addClass(\"k-actions\")\n                    .append(uploadButton, clearButton);\n            }\n\n\n            this.wrapper.append(actionsWrapper);\n        },\n\n        _hideActionButtons: function() {\n            $(\".k-actions\", this.wrapper).remove();\n        },\n\n        _showHeaderUploadStatus: function(isUploading) {\n            var that = this;\n            var localization = that.localization;\n            var dropZone = $(\".k-dropzone\", that.wrapper);\n            var headerUploadStatus = $('.k-upload-status', that.wrapper);\n\n            if (headerUploadStatus.length !== 0) {\n                headerUploadStatus.remove();\n            }\n\n            $('.k-dropzone-hint', that.wrapper).addClass('k-hidden');\n\n            headerUploadStatus = '<span class=\"k-upload-status\"><span class=\"k-icon\"></span></span>';\n\n            if (isUploading) {\n                headerUploadStatus = $(headerUploadStatus).append(kendo.htmlEncode(localization.headerStatusUploading));\n                kendo.ui.icon(headerUploadStatus.find(\".k-icon,.k-svg-icon\"), { icon: headerStatusIconName.loading });\n            } else {\n                headerUploadStatus = $(headerUploadStatus).append(kendo.htmlEncode(localization.headerStatusUploaded));\n                kendo.ui.icon(headerUploadStatus.find(\".k-icon,.k-svg-icon\"), { icon: headerStatusIconName.warning });\n            }\n\n            if (dropZone.length > 0) {\n                dropZone.append(headerUploadStatus);\n            } else {\n                $('.k-upload-button', that.wrapper).after(headerUploadStatus);\n            }\n        },\n\n        _updateHeaderUploadStatus: function() {\n            var that = this;\n            var headerUploadStatus = $('.k-upload-status', this.wrapper);\n            var currentlyUploading = $('.k-file', that.wrapper).not('.k-file-success, .k-file-error');\n            var currentlyFailed = $('.k-file-error', that.wrapper);\n            var currentlyPaused = $('.k-file', that.wrapper).find(\".k-i-play-sm,.k-svg-i-play-sm\");\n            var headerUploadStatusIcon;\n\n            if (currentlyPaused.length &&\n            (currentlyPaused.length === currentlyUploading.length || !that.options.async.concurrent)) {\n                headerUploadStatusIcon = $('.k-icon,.k-svg-icon', headerUploadStatus).removeClass();\n\n                if (headerUploadStatusIcon.length) {\n                    kendo.ui.icon(headerUploadStatusIcon, { icon: \"pause-sm\" });\n\n                    headerUploadStatus.html(headerUploadStatusIcon)\n                        .append(kendo.htmlEncode(that.localization.headerStatusPaused));\n                }\n            } else if (currentlyUploading.length === 0 || currentlyFailed.length > 0) {\n                headerUploadStatus = $('.k-upload-status', that.wrapper);\n                headerUploadStatusIcon = $('.k-icon,.k-svg-icon', headerUploadStatus).removeClass();\n\n                if (headerUploadStatusIcon.length) {\n\n                    kendo.ui.icon(headerUploadStatusIcon, { icon: currentlyFailed.length !== 0 ? headerStatusIconName.warning : headerStatusIconName.success });\n\n                    headerUploadStatus.html(headerUploadStatusIcon)\n                        .append(kendo.htmlEncode(that.localization.headerStatusUploaded));\n                }\n            }\n        },\n\n        _hideHeaderUploadstatus: function() {\n            var that = this,\n                dropZone = that.options.dropZone;\n\n            $('.k-upload-status', this.wrapper).remove();\n\n            if (dropZone === \"\") {\n                $('.k-dropzone-hint', that.wrapper).removeClass('k-hidden');\n            }\n        },\n\n        _onParentFormSubmit: function() {\n            var upload = this,\n                element = upload.element;\n\n            if (typeof this._module.onAbort !== 'undefined') {\n                this._module.onAbort();\n            }\n\n            if (!element.value) {\n                var input = $(element);\n\n                // Prevent submitting an empty input\n                input.attr(\"disabled\", \"disabled\");\n\n                window.setTimeout(function() {\n                    // Restore the input so the Upload remains functional\n                    // in case the user cancels the form submit\n                    input.prop(\"disabled\", false);\n                }, 0);\n            }\n        },\n\n        _onParentFormReset: function() {\n            $(\".k-upload-files\", this.wrapper).remove();\n        },\n\n        _supportsFormData: function() {\n            return typeof(FormData) != \"undefined\";\n        },\n\n        _supportsMultiple: function() {\n            var windows = this._userAgent().indexOf(\"Windows\") > -1;\n\n            return !kendo.support.browser.opera &&\n                   !(kendo.support.browser.safari && windows);\n        },\n\n        _supportsDrop: function() {\n            var userAgent = this._userAgent().toLowerCase();\n            var isChrome = /chrome/.test(userAgent);\n            var isSafari = !isChrome && /safari/.test(userAgent);\n            var isWindowsSafari = isSafari && /windows/.test(userAgent);\n\n            return !isWindowsSafari && this._supportsFormData() && (this.options.async.saveUrl);\n        },\n\n        _userAgent: function() {\n            return navigator.userAgent;\n        },\n\n        _setupDropZone: function() {\n            var that = this;\n\n            var ns = that._ns;\n            var dropZone = $(\".k-dropzone\", that.wrapper)\n\n                .on(\"dragenter\" + ns, stopEvent)\n                .on(\"dragover\" + ns, function(e) {\n                    if (e.originalEvent) {\n                        e.originalEvent.dataTransfer.dropEffect = \"copy\";\n                    }\n                    e.preventDefault();\n                 })\n                .on(\"drop\" + ns, that._onDrop.bind(that));\n\n            if (!dropZone.find(\".k-dropzone-hint\").length) {\n                dropZone.append($(\"<span class='k-dropzone-hint'>\" + kendo.htmlEncode(that.localization.dropFilesHere) + \"</span>\"));\n            }\n\n            bindDragEventWrappers(dropZone, ns,\n                function() {\n                    if (!dropZone.closest('.k-upload').hasClass(\"k-disabled\")) {\n                        dropZone.addClass(HOVER_STATE);\n                    }\n                },\n                function() { dropZone.removeClass(HOVER_STATE); });\n\n            that._bindDocumentDragEventWrappers(dropZone);\n        },\n\n        _setupCustomDropZone: function() {\n            var that = this;\n            var dropZone = $(that.options.dropZone);\n\n            if (!that.wrapper.find(\".k-dropzone-hint\").length) {\n                $(\".k-dropzone\", that.wrapper)\n                    .append($(\"<span class='k-dropzone-hint k-hidden'>\" + kendo.htmlEncode(that.localization.dropFilesHere) + \"</span>\"));\n            } else {\n                // Dropzone hint in upload should be hidden if customDropZone is used\n                $('.k-dropzone-hint', that.wrapper).addClass('k-hidden');\n            }\n\n            var ns = that._ns;\n            dropZone.on(\"dragenter\" + ns, stopEvent)\n                    .on(\"dragover\" + ns, function(e) {\n                        if (e.originalEvent) {\n                            e.originalEvent.dataTransfer.dropEffect = \"copy\";\n                        }\n                        e.preventDefault();\n                    })\n                    .on(\"drop\" + ns, that._onDrop.bind(that));\n\n            bindDragEventWrappers(dropZone, ns,\n                function(e) {\n                    if (!that.wrapper.hasClass(\"k-disabled\")) {\n                        dropZone.removeClass(HOVER_STATE);\n                        dropZone.addClass(HOVER_STATE);\n                        $(e.target).addClass(HOVER_STATE);\n                    }\n                },\n                function() {\n                    dropZone.removeClass(HOVER_STATE);\n                }\n            );\n\n            that._bindDocumentDragEventWrappers(dropZone);\n        },\n\n        _bindDocumentDragEventWrappers: function(dropZone) {\n            var that = this;\n            var ns = that._ns;\n\n            bindDragEventWrappers($(document), ns,\n                function() {\n                    if (!that.wrapper.hasClass(\"k-disabled\")) {\n                        dropZone.addClass(\"k-dropzone-active\");\n                        dropZone.closest('.k-upload').removeClass('k-upload-empty');\n                        dropZone.find('.k-dropzone-hint').removeClass('k-hidden');\n                    }\n                },\n                function() {\n                    dropZone.removeClass(\"k-dropzone-active\");\n                    if ($('li.k-file', dropZone.closest('.k-upload')).length === 0) {\n                        dropZone.closest('.k-upload').addClass('k-upload-empty');\n                    }\n                }\n            );\n        },\n\n        _toggleDropZone: function() {\n            var that = this,\n                dropZone = that.options.dropZone;\n\n            if (!that._supportsDrop()) {\n                return;\n            }\n\n            $(dropZone).off(that._ns);\n            $(\".k-dropzone\", that.wrapper).off(that._ns);\n\n            if (dropZone !== \"\") {\n                that._setupCustomDropZone();\n            } else {\n                that._setupDropZone();\n            }\n        },\n\n        _supportsRemove: function() {\n            return !!this.options.async.removeUrl;\n        },\n\n        _submitRemove: function(fileNames, eventArgs, onSuccess, onError) {\n            var upload = this,\n                removeField = upload.options.async.removeField || \"fileNames\",\n                params = $.extend(eventArgs.data, antiForgeryTokens());\n\n            params[removeField] = fileNames;\n\n            jQuery.ajax({\n                  type: this.options.async.removeVerb,\n                  dataType: \"json\",\n                  dataFilter: normalizeJSON,\n                  url: this.options.async.removeUrl,\n                  traditional: true,\n                  data: params,\n                  headers: eventArgs.headers,\n                  success: onSuccess,\n                  error: onError,\n                  xhrFields: {\n                    withCredentials: this.options.async.withCredentials\n                  }\n            });\n        },\n\n        _wrapInput: function(input) {\n            var that = this;\n            var options = that.options;\n            var hasLabel = !!input.attr(\"id\") && $(\"[for='\" + input.attr(\"id\") + \"']\").length > 0;\n            var selectText = kendo.htmlEncode(that.localization.select);\n            var uploadButton = $(\"<div class='k-button k-upload-button' tabindex='0' role='button'><span class='k-button-text'></span></div>\");\n\n            uploadButton.find('.k-button-text').text(selectText);\n\n            input.wrap(\"<div class='k-upload' role='application'><div class='k-dropzone k-upload-dropzone'><div class='k-upload-button-wrap'></div></div></div>\");\n            uploadButton.prependTo(input.parent());\n\n            if (!options.async.saveUrl) {\n                input.closest(\".k-upload\").addClass(\"k-upload-sync\");\n            } else {\n                input.closest(\".k-upload\").addClass(\"k-upload-async\");\n            }\n\n            input.closest(\".k-upload\").addClass(\"k-upload-empty\");\n\n            if (!hasLabel && !input.attr(\"aria-label\")) {\n                input.attr(\"aria-label\", selectText);\n            }\n\n            input.attr({\n                tabindex: -1,\n                \"aria-hidden\": true\n            });\n\n            return input.closest(\".k-upload\");\n        },\n\n        _checkAllComplete: function() {\n            if ($(\".k-file.k-file-progress\", this.wrapper).length === 0) {\n                this.trigger(COMPLETE);\n            }\n        },\n\n        _inputFiles: function(sourceInput) {\n            return inputFiles(sourceInput);\n        }\n    });\n\n    // Synchronous upload module\n    var syncUploadModule = function(upload) {\n        this.name = \"syncUploadModule\";\n        this.element = upload.wrapper;\n        this.upload = upload;\n        this.element\n            .closest(\"form\")\n                .attr(\"enctype\", \"multipart/form-data\")\n                .attr(\"encoding\", \"multipart/form-data\");\n    };\n\n    syncUploadModule.prototype = {\n        onSelect: function(e, files) {\n            var upload = this.upload;\n            var sourceInput = $(e.target);\n            var filesContainErrors = upload._filesContainValidationErrors(files);\n\n            upload._addInput(sourceInput);\n\n            var fileData = { \"fileNames\": files };\n\n            if (filesContainErrors) {\n                sourceInput.remove();\n            } else {\n                fileData.relatedInput = sourceInput;\n            }\n\n            var file = upload._enqueueFile(getFileName(sourceInput), fileData);\n\n            if (filesContainErrors) {\n                upload._hideUploadProgress(file);\n            }\n\n            upload._fileAction(file, REMOVE);\n        },\n\n        onRemove: function(e) {\n            var fileEntry = getFileEntry(e);\n            var relatedInput = fileEntry.data(\"relatedInput\");\n\n            if (relatedInput) {\n                relatedInput.remove();\n            }\n\n            this.upload._removeFileEntry(fileEntry);\n        }\n    };\n\n    var iframeUploadModule = function(upload) {\n        this.name = \"iframeUploadModule\";\n        this.element = upload.wrapper;\n        this.upload = upload;\n        this.iframes = [];\n    };\n\n    Upload._frameId = 0;\n\n    iframeUploadModule.prototype = {\n        onSelect: function(e, files) {\n            var upload = this.upload;\n            var sourceInput = $(e.target);\n            var hasValidationErrors = upload._filesContainValidationErrors(files);\n\n            var fileEntry = this.prepareUpload(sourceInput, files, hasValidationErrors);\n\n            if (upload.options.async.autoUpload) {\n                if (!hasValidationErrors) {\n                    this.performUpload(fileEntry);\n                } else {\n                    upload._fileAction(fileEntry, REMOVE);\n                    upload._showHeaderUploadStatus(false);\n                }\n            } else {\n                upload._fileAction(fileEntry, REMOVE);\n\n                if (!hasValidationErrors) {\n                    upload._showActionButtons();\n                } else {\n                    upload._updateHeaderUploadStatus();\n                }\n            }\n\n            if (hasValidationErrors) {\n                upload._hideUploadProgress(fileEntry);\n            }\n        },\n\n        prepareUpload: function(sourceInput, files, hasValidationErrors) {\n            var upload = this.upload;\n            var activeInput = $(upload.element);\n            var name = upload.options.async.saveField || sourceInput.attr(\"name\");\n            var fileEntry, fileData, iframe, form;\n\n            upload._addInput(sourceInput);\n            sourceInput.attr(\"name\", name);\n\n            if (!hasValidationErrors) {\n                iframe = this.createFrame(upload.name + \"_\" + Upload._frameId++);\n                this.registerFrame(iframe);\n\n                form = this.createForm(upload.options.async.saveUrl, iframe.attr(\"name\"))\n                    .append(activeInput);\n\n                fileData = { \"frame\": iframe, \"relatedInput\": activeInput, \"fileNames\": files };\n            } else {\n                sourceInput.remove();\n\n                fileData = { \"fileNames\": files };\n            }\n\n            fileEntry = upload._enqueueFile(getFileName(sourceInput), fileData);\n\n            if (iframe) {\n                iframe.data({ \"form\": form, \"file\": fileEntry });\n            }\n\n            return fileEntry;\n        },\n\n        performUpload: function(fileEntry) {\n            var e = { files: fileEntry.data(\"fileNames\") };\n            var iframe = fileEntry.data(\"frame\");\n            var upload = this.upload;\n            var fileValidation = fileEntry.find('.k-file-validation-message');\n            var fileInfo = fileEntry.find('.k-file-summary');\n            var fileSize = fileEntry.find('.k-file-size');\n\n            if (!upload.trigger(UPLOAD, e)) {\n                upload._hideActionButtons();\n                upload._showHeaderUploadStatus(true);\n\n                iframe.appendTo(document.body);\n\n                var form = iframe.data(\"form\")\n                    .attr(\"action\", upload.options.async.saveUrl)\n                    .appendTo(document.body);\n\n                e.data = $.extend({ }, e.data, antiForgeryTokens());\n                for (var key in e.data) {\n                    var dataInput = form.find(\"input[name='\" + key + \"']\");\n                    if (dataInput.length === 0) {\n                        dataInput = $(\"<input>\", { type: \"hidden\", name: key })\n                            .prependTo(form);\n                    }\n                    dataInput.val(e.data[key]);\n                }\n\n                upload._fileAction(fileEntry, CANCEL);\n                upload._fileState(fileEntry, \"uploading\");\n                $(fileEntry).removeClass(\"k-file-error\").addClass(\"k-file-progress\");\n\n                if (fileValidation.length > 0) {\n                    fileValidation.remove();\n                }\n\n                if (fileInfo.length > 0) {\n                    fileInfo.removeClass('k-hidden');\n                } else if (fileSize.length > 0) {\n                    fileSize.removeClass('k-hidden');\n                }\n\n                iframe\n                    .one(\"load\", this.onIframeLoad.bind(this));\n\n                form[0].submit();\n            } else {\n                upload._removeFileEntry(iframe.data(\"file\"));\n                this.cleanupFrame(iframe);\n                this.unregisterFrame(iframe);\n            }\n        },\n\n        onSaveSelected: function() {\n            var module = this;\n            var upload = module.upload;\n\n            $(\".k-file\", this.element).each(function() {\n                var fileEntry = $(this);\n                var started = isFileUploadStarted(fileEntry);\n                var hasValidationErrors = upload._filesContainValidationErrors(fileEntry.data(\"fileNames\"));\n\n                if (!started && !hasValidationErrors) {\n                    module.performUpload(fileEntry);\n                }\n            });\n        },\n\n        onIframeLoad: function(e) {\n            var iframe = $(e.target),\n                responseText;\n\n            try {\n                responseText = iframe.contents().text();\n            } catch (ex) {\n                responseText = \"Error trying to get server response: \" + ex;\n            }\n\n            this.processResponse(iframe, responseText);\n        },\n\n        processResponse: function(iframe, responseText) {\n            var fileEntry = iframe.data(\"file\"),\n                module = this,\n                fakeXHR = {\n                    responseText: responseText\n                };\n            tryParseJSON(responseText,\n                function(jsonResult) {\n                    $.extend(fakeXHR, { statusText: \"OK\", status: \"200\" });\n                    module.upload._onFileProgress({ target: $(fileEntry, module.upload.wrapper) }, 100);\n                    module.upload._onUploadSuccess({ target: $(fileEntry, module.upload.wrapper) }, jsonResult, fakeXHR);\n\n                    module.cleanupFrame(iframe);\n                    module.unregisterFrame(iframe);\n                },\n                function() {\n                    $.extend(fakeXHR, { statusText: \"error\", status: \"500\" });\n                    module.upload._onUploadError({ target: $(fileEntry, module.upload.wrapper) }, fakeXHR);\n                }\n            );\n        },\n\n        onCancel: function(e) {\n            var iframe = $(e.target).data(\"frame\");\n\n            this.stopFrameSubmit(iframe);\n            this.cleanupFrame(iframe);\n            this.unregisterFrame(iframe);\n            this.upload._removeFileEntry(iframe.data(\"file\"));\n        },\n\n        onRetry: function(e) {\n            var fileEntry = getFileEntry(e);\n            this.performUpload(fileEntry);\n        },\n\n        onRemove: function(e, eventArgs, shouldSendRemoveRequest) {\n            var module = this;\n            var upload = module.upload;\n            var fileEntry = getFileEntry(e);\n            var iframe = fileEntry.data(\"frame\");\n\n            if (iframe) {\n                module.unregisterFrame(iframe);\n                upload._removeFileEntry(fileEntry);\n                module.cleanupFrame(iframe);\n            } else {\n                if (fileEntry.hasClass(\"k-file-success\")) {\n                    removeUploadedFile(fileEntry, upload, eventArgs, shouldSendRemoveRequest);\n                } else {\n                    upload._removeFileEntry(fileEntry);\n                }\n            }\n        },\n\n        onAbort: function() {\n            var element = this.element,\n                module = this;\n\n            $.each(this.iframes, function() {\n                $(\"input\", this.data(\"form\")).appendTo(element);\n                module.stopFrameSubmit(this[0]);\n                this.data(\"form\").remove();\n                this.remove();\n            });\n\n            this.iframes = [];\n        },\n\n        createFrame: function(id) {\n            return $(\n                \"<iframe\" +\n                \" name='\" + id + \"'\" +\n                \" id='\" + id + \"'\" +\n                \" />\"\n            ).hide();\n        },\n\n        createForm: function(action, target) {\n            return $(\n                \"<form enctype='multipart/form-data' method='POST'\" +\n                \" action='\" + action + \"'\" +\n                \" target='\" + target + \"'\" +\n                \"/>\");\n        },\n\n        stopFrameSubmit: function(frame) {\n            if (typeof(frame.stop) != \"undefined\") {\n                frame.stop();\n            } else if (frame.document) {\n                frame.document.execCommand(\"Stop\");\n            }\n        },\n\n        registerFrame: function(frame) {\n            this.iframes.push(frame);\n        },\n\n        unregisterFrame: function(frame) {\n            this.iframes = $.grep(this.iframes, function(value) {\n                return value.attr(\"name\") != frame.attr(\"name\");\n            });\n        },\n\n        cleanupFrame: function(frame) {\n            var form = frame.data(\"form\");\n\n            frame.data(\"file\").data(\"frame\", null);\n\n            setTimeout(function() {\n                form.remove();\n                frame.remove();\n            }, 1);\n        }\n    };\n\n    // FormData upload module\n    var formDataUploadModule = function(upload) {\n        this.name = \"formDataUploadModule\";\n        this.element = upload.wrapper;\n        this.upload = upload;\n        this.position = {};\n        this.metaData = {};\n        this.cancelled = {};\n        this.resume = {};\n        this.paused = {};\n        this.retries = {};\n    };\n\n    formDataUploadModule.prototype = {\n        onSelect: function(e, files) {\n            var upload = this.upload;\n            var module = this;\n            var sourceElement = $(e.target);\n            var fileEntries = this.prepareUpload(sourceElement, files);\n            var hasValidationErrors;\n            var prev;\n\n            $.each(fileEntries, function(index) {\n                hasValidationErrors = upload._filesContainValidationErrors($(this.data(\"fileNames\")));\n\n                if (upload.options.async.autoUpload) {\n                    if (!hasValidationErrors) {\n                        if (upload.options.async.chunkSize) {\n                            module.prepareChunk(this);\n                            prev = this.prev();\n\n                            if (upload.options.async.concurrent || (index === 0 && !prev.length) ||\n                             (index === 0 && prev.hasClass(\"k-file-success\"))) {\n                                module.performUpload(this);\n                            }\n                        } else {\n                            module.performUpload(this);\n                        }\n                    } else {\n                        upload._fileAction(this, REMOVE);\n                        upload._showHeaderUploadStatus(false);\n                    }\n                } else {\n                    upload._fileAction(this, REMOVE);\n\n                    if (!hasValidationErrors) {\n                        upload._showActionButtons();\n                        this.addClass(\"k-toupload\");\n                    } else {\n                        upload._updateHeaderUploadStatus();\n                    }\n                }\n\n                if (hasValidationErrors) {\n                    upload._hideUploadProgress(this);\n                }\n            });\n        },\n\n        prepareUpload: function(sourceElement, files) {\n            var fileEntries = this.enqueueFiles(files);\n\n            if (sourceElement.is(\"input\")) {\n                $.each(fileEntries, function() {\n                    $(this).data(\"relatedInput\", sourceElement);\n                });\n                sourceElement.data(\"relatedFileEntries\", fileEntries);\n                this.upload._addInput(sourceElement);\n            }\n\n            return fileEntries;\n        },\n\n        enqueueFiles: function(files) {\n            var upload = this.upload;\n            var name;\n            var i;\n            var filesLength = files.length;\n            var currentFile;\n            var fileEntry;\n            var fileEntries = [];\n\n            if (upload.options.async.batch === true) {\n                name = $.map(files, function(file) { return file.name; }).join(\", \");\n\n                if (upload.directory || upload.options.directoryDrop) {\n                    $(files).each(function() {\n                        if (this.rawFile.webkitRelativePath || this.rawFile.relativePath) {\n                            this.name = this.rawFile.webkitRelativePath || this.rawFile.relativePath;\n                        }\n                    });\n                }\n\n                fileEntry = upload._enqueueFile(name, { fileNames: files });\n                fileEntry.data(\"files\", files);\n\n                fileEntries.push(fileEntry);\n            } else {\n                for (i = 0; i < filesLength; i++) {\n                    currentFile = files[i];\n                    name = currentFile.name;\n                    if (upload.directory || upload.options.directoryDrop) {\n                        if (currentFile.rawFile.webkitRelativePath || currentFile.rawFile.relativePath) {\n                            currentFile.name = currentFile.rawFile.webkitRelativePath || currentFile.rawFile.relativePath;\n                        }\n                    }\n                    fileEntry = upload._enqueueFile(name, { fileNames: [currentFile] });\n                    fileEntry.data(\"files\", [currentFile]);\n\n                    fileEntries.push(fileEntry);\n                }\n            }\n\n            return fileEntries;\n        },\n\n        performUpload: function(fileEntry) {\n            var upload = this.upload,\n                formData = this.createFormData(),\n                xhr = this.createXHR(),\n                e = {\n                    files: fileEntry.data(\"fileNames\"),\n                    XMLHttpRequest: xhr\n                },\n                files;\n            var fileValidation = fileEntry.find('.k-file-validation-message');\n            var fileInfo = fileEntry.find('.k-file-summary');\n            var fileSize = fileEntry.find('.k-file-size');\n\n            if (!upload.trigger(UPLOAD, e)) {\n                if (fileEntry.find(\".k-i-cancel,.k-svg-i-cancel\").length === 0) {\n                    if (upload.options.async.chunkSize) {\n                        upload._fileAction(fileEntry, PAUSE);\n                    }\n                    upload._fileAction(fileEntry, CANCEL, upload.options.async.chunkSize);\n                }\n\n                if (!upload.wrapper.find(\".k-toupload\").length) {\n                    upload._hideActionButtons();\n                }\n\n                upload._showHeaderUploadStatus(true);\n\n                if (e.formData) {\n                    formData = e.formData;\n                } else {\n                    e.data = $.extend({ }, e.data, antiForgeryTokens());\n                    for (var key in e.data) {\n                        formData.append(key, e.data[key]);\n                    }\n\n                    files = fileEntry.data(\"files\");\n                    if (files) {\n                        this.populateFormData(formData, files);\n                    }\n                }\n\n                upload._fileState(fileEntry, \"uploading\");\n                $(fileEntry).removeClass(\"k-file-error\").addClass(\"k-file-progress\");\n\n                if (fileValidation.length > 0) {\n                    fileValidation.remove();\n                }\n\n                if (fileInfo.length > 0) {\n                    fileInfo.removeClass('k-hidden');\n                } else if (fileSize.length > 0) {\n                    fileSize.removeClass('k-hidden');\n                }\n\n                if (upload.options.async.useArrayBuffer && window.FileReader) {\n                    this._readFile(upload.options.async.saveUrl, formData, fileEntry, xhr);\n                } else {\n                    this.postFormData(upload.options.async.saveUrl, formData, fileEntry, xhr);\n                }\n            } else {\n                this.removeFileEntry(fileEntry);\n            }\n        },\n\n        _readFile: function(saveUrl, formData, fileEntry, xhr) {\n            var that = this;\n            var upload = that.upload;\n            var file = fileEntry.data(\"files\")[0];\n\n            var reader = new FileReader();\n            reader.onload = function(e) {\n                try {\n                    if (!that.fileArrayBuffer) {\n                        that.fileArrayBuffer = e.target.result;\n                    } else {\n                        that.fileArrayBuffer = that._appendBuffer(that.fileArrayBuffer, e.target.result);\n                    }\n                } catch (err) {\n                    upload._onUploadError({ target: $(fileEntry, upload.wrapper) }, xhr);\n                    return;\n                }\n\n                if (that.position[file.uid] > file.size) {\n                    that.postFormData(upload.options.async.saveUrl, that.fileArrayBuffer, fileEntry, xhr);\n                    that.fileArrayBuffer = null;\n                } else {\n                    that._readFile(saveUrl, formData, fileEntry, xhr);\n                }\n            };\n            reader.onerror = function() {\n                upload._onUploadError({ target: $(fileEntry, upload.wrapper) }, xhr);\n            };\n            reader.readAsArrayBuffer(that._getCurrentChunk(file.rawFile, file.uid));\n        },\n\n        _appendBuffer: function(buffer1, buffer2) {\n            var tmp = new Uint8Array(buffer1.byteLength + buffer2.byteLength);\n\n            tmp.set(new Uint8Array(buffer1), 0);\n            tmp.set(new Uint8Array(buffer2), buffer1.byteLength);\n\n            return tmp.buffer;\n        },\n\n        onSaveSelected: function() {\n            var module = this;\n            var upload = module.upload;\n\n            $(\".k-toupload\", this.element).filter(function() {\n                var fileEntry = $(this);\n                var started = isFileUploadStarted(fileEntry);\n                var hasValidationErrors = upload._filesContainValidationErrors(fileEntry.data(\"fileNames\"));\n\n                return !started && !hasValidationErrors;\n            }).each(function(index) {\n                var fileEntry = $(this);\n                var prevEntry = fileEntry.prev();\n\n                fileEntry.removeClass(\"k-toupload\");\n                if (upload.options.async.chunkSize) {\n                    module.prepareChunk(fileEntry);\n\n                    if (upload.options.async.concurrent || (index === 0 && !prevEntry.length) ||\n                        (index === 0 && prevEntry.hasClass(\"k-file-success\") || prevEntry.hasClass(\"k-file-error:not(k-file-invalid)\"))) {\n                        module.performUpload(fileEntry);\n                    }\n                } else {\n                    module.performUpload(fileEntry);\n                }\n            });\n        },\n\n        onCancel: function(e) {\n            var fileEntry = getFileEntry(e);\n\n            if (this.upload.options.async.chunkSize) {\n                this.cancelled[fileEntry.data(\"uid\")] = true;\n            }\n            this.stopUploadRequest(fileEntry);\n            this.removeFileEntry(fileEntry);\n        },\n\n        onPause: function(e) {\n            var fileEntry = getFileEntry(e);\n            var fileUid = fileEntry.data(\"uid\");\n            var async = this.upload.options.async;\n\n            if (async.chunkSize) {\n                this.retries[fileUid] = async.maxAutoRetries + 1;\n                this.paused[fileUid] = true;\n                this.resume[fileUid] = false;\n            }\n        },\n\n        onResume: function(e) {\n            var fileEntry = getFileEntry(e);\n            var fileUid = fileEntry.data(\"uid\");\n\n            if (this.upload.options.async.chunkSize) {\n                delete this.paused[fileUid];\n                this.resume[fileUid] = true;\n                this.retries[fileEntry.data(\"uid\")] = 1;\n                this._increaseChunkIndex(fileUid);\n                this.performUpload(fileEntry);\n            }\n        },\n\n        onRetry: function(e) {\n            var fileEntry = getFileEntry(e);\n            var async = this.upload.options.async;\n\n            if (async.chunkSize) {\n                this.retries[fileEntry.data(\"uid\")] = async.maxAutoRetries + 1;\n                delete this.paused[fileEntry.data(\"uid\")];\n            }\n\n            this.performUpload(fileEntry);\n        },\n\n        onRemove: function(e, eventArgs, shouldSendRemoveRequest) {\n            var module = this;\n            var upload = module.upload;\n            var fileEntry = getFileEntry(e);\n            var async = this.upload.options.async;\n\n            if (async.chunkSize) {\n                this.retries[fileEntry.data(\"uid\")] = async.maxAutoRetries + 1;\n            }\n\n            if (fileEntry.hasClass(\"k-file-success\")) {\n                removeUploadedFile(fileEntry, upload, eventArgs, shouldSendRemoveRequest);\n            } else {\n                module.removeFileEntry(fileEntry);\n            }\n        },\n\n        createXHR: function() {\n            return new XMLHttpRequest();\n        },\n\n        postFormData: function(url, data, fileEntry, xhr) {\n            var module = this;\n\n            fileEntry.data(\"request\", xhr);\n\n            xhr.addEventListener(\"load\", function(e) {\n                module.onRequestSuccess.call(module, e, fileEntry);\n            }, false);\n\n            xhr.addEventListener(ERROR, function(e) {\n                module.onRequestError.call(module, e, fileEntry);\n            }, false);\n\n            xhr.upload.addEventListener(\"progress\", function(e) {\n                module.onRequestProgress.call(module, e, fileEntry);\n            }, false);\n\n            xhr.open(\"POST\", url, true);\n            xhr.withCredentials = this.upload.options.async.withCredentials;\n\n            var accept = this.upload.options.async.accept;\n            if (accept) {\n                xhr.setRequestHeader(\"Accept\", accept);\n            }\n\n            xhr.send(data);\n        },\n\n        createFormData: function() {\n            return new FormData();\n        },\n\n        populateFormData: function(data, files) {\n            var chunk;\n            var i;\n            var length = files.length;\n            var uid;\n            var upload = this.upload;\n\n            if (upload.options.async.chunkSize) {\n                 uid = files[0].uid;\n                 chunk = this._getCurrentChunk(files[0].rawFile, uid);\n\n                data.append(\n                    upload.options.async.saveField || upload.name,\n                    chunk\n                );\n\n                var serializedMetaData = JSON.stringify(this.metaData[uid]);\n                data.append(\"metadata\", serializedMetaData);\n            } else {\n                 for (i = 0; i < length; i++) {\n                    data.append(\n                        upload.options.async.saveField || upload.name,\n                        files[i].rawFile\n                    );\n                 }\n            }\n\n            return data;\n        },\n\n        onRequestSuccess: function(e, fileEntry) {\n            var xhr = e.target,\n                module = this;\n\n            function raiseError() {\n                module.upload._onUploadError({ target: $(fileEntry, module.upload.wrapper) }, xhr);\n            }\n\n            function parseSuccess(jsonResult) {\n                var batch = module.upload.options.async.batch;\n                var chunkSize = module.upload.options.async.chunkSize;\n                var concurrent = module.upload.options.async.concurrent;\n                var fileUid = jsonResult.fileUid;\n\n                if (module.paused[fileUid] || module.cancelled[fileUid]) {\n                    return;\n                }\n\n                delete module.retries[fileUid];\n\n                if (chunkSize && !batch && !jsonResult.uploaded) {\n\n                    module._increaseChunkIndex(fileUid);\n                    module.performUpload(fileEntry);\n                } else if (chunkSize && !batch && !concurrent && fileEntry.next().length && !fileEntry.next().hasClass(\"k-toupload\")) {\n                        module.upload._onFileProgress({ target: $(fileEntry, module.upload.wrapper) }, 100);\n                        module._resetChunkIndex(fileUid);\n                        module.upload._onUploadSuccess({ target: $(fileEntry, module.upload.wrapper) }, jsonResult, xhr);\n\n                        module.performUpload(fileEntry.next());\n                } else {\n                    module.upload._onFileProgress({ target: $(fileEntry, module.upload.wrapper) }, 100);\n                    module.upload._onUploadSuccess({ target: $(fileEntry, module.upload.wrapper) }, jsonResult, xhr);\n                    module.cleanupFileEntry(fileEntry);\n                }\n            }\n\n            if (xhr.status >= 200 && xhr.status <= 299) {\n                tryParseJSON(xhr.responseText,\n                    parseSuccess,\n                    raiseError\n                );\n            } else {\n                raiseError();\n            }\n        },\n\n        onRequestError: function(e, fileEntry) {\n            var xhr = e.target;\n\n            this.upload._onUploadError({ target: $(fileEntry, this.upload.wrapper) }, xhr);\n        },\n\n        cleanupFileEntry: function(fileEntry) {\n            var relatedInput = fileEntry.data(\"relatedInput\"),\n                uploadComplete = true;\n\n            if (relatedInput) {\n                $.each(relatedInput.data(\"relatedFileEntries\") || [], function() {\n                    // Exclude removed file entries and self\n                    if (this.parent().length > 0 && this[0] != fileEntry[0]) {\n                        uploadComplete = uploadComplete && this.hasClass(\"k-file-success\");\n                    }\n                });\n\n                if (uploadComplete) {\n                    relatedInput.remove();\n                }\n            }\n        },\n\n        removeFileEntry: function(fileEntry) {\n            var chunkSize = this.upload.options.async.chunkSize;\n            var concurrent = this.upload.options.async.concurrent;\n            var isUploadButtonVisible = this.upload.wrapper.find(\".k-upload-selected\").length > 0;\n\n            this.cleanupFileEntry(fileEntry);\n            if (chunkSize && !concurrent && !isUploadButtonVisible) {\n                 if (fileEntry.next().length) {\n                     this.performUpload(fileEntry.next());\n                 }\n            }\n            this.upload._removeFileEntry(fileEntry);\n        },\n\n        onRequestProgress: function(e, fileEntry) {\n            var percentComplete = Math.round(e.loaded * 100 / e.total);\n            var fileUid = fileEntry.data(\"uid\");\n            var fileMetaData;\n\n            if (this.upload.options.async.chunkSize) {\n                fileMetaData = this.metaData[fileUid];\n                percentComplete = fileMetaData && fileMetaData.totalChunks ? Math.round(((fileMetaData.chunkIndex) / fileMetaData.totalChunks) * 100) : 100;\n            }\n            this.upload._onFileProgress({ target: $(fileEntry, this.upload.wrapper) }, percentComplete);\n        },\n\n        stopUploadRequest: function(fileEntry) {\n            if (fileEntry.data(\"request\")) {\n                fileEntry.data(\"request\").abort();\n            }\n        },\n\n        prepareChunk: function(fileEntry) {\n            var file = fileEntry.data(\"files\")[0];\n            var rawFile = file.rawFile;\n            var uid = file.uid;\n            var chunkSize = this.upload.options.async.chunkSize;\n            this.position[uid] = 0;\n\n            this.metaData[uid] = {\n                chunkIndex: 0,\n                contentType: rawFile.type,\n                fileName: rawFile.name,\n                relativePath: file.name,\n                totalFileSize: rawFile.size,\n                totalChunks: Math.ceil(rawFile.size / chunkSize),\n                uploadUid: uid\n            };\n        },\n\n        _decreaseChunkIndex: function(uid) {\n            this.metaData[uid].chunkIndex--;\n        },\n\n        _increaseChunkIndex: function(uid) {\n            this.metaData[uid].chunkIndex++;\n        },\n\n        _resetChunkIndex: function(uid) {\n            this.metaData[uid].chunkIndex = 0;\n        },\n\n        _decreasePosition: function(uid) {\n            this.position[uid] -= this.upload.options.async.chunkSize;\n        },\n\n        _getCurrentChunk: function(file, uid) {\n            var oldPosition = this.position[uid];\n            var methodToInvoke;\n            var async = this.upload.options.async;\n            var chunkSize = async.chunkSize || async.bufferChunkSize;\n\n            if (!this.position[uid]) {\n                this.position[uid] = 0;\n            }\n            this.position[uid] += chunkSize;\n\n            if (!!(methodToInvoke = this._getChunker(file))) {\n                return file[methodToInvoke](oldPosition, this.position[uid]);\n            } else {\n                return file;\n            }\n        },\n\n        _getChunker: function(file) {\n            if (file.slice) {\n                return \"slice\";\n            } else if (file.mozSlice) {\n                return \"mozSlice\";\n            } else if (file.webkitSlice) {\n                    return \"webkitSlice\";\n            } else {\n                return null;\n            }\n        }\n    };\n\n    // Helper functions\n    function getFileName(input) {\n        return $.map(inputFiles(input), function(file) {\n            return file.name;\n        }).join(\", \");\n    }\n\n    function inputFiles($input) {\n        var input = $input[0];\n\n        if (input.files) {\n            return getAllFileInfo(input.files);\n        } else {\n            return [{\n                name: stripPath(input.value),\n                extension: getFileExtension(input.value),\n                size: null\n            }];\n        }\n    }\n\n    function getAllFileInfo(rawFiles) {\n        return $.map(rawFiles, function(file) {\n            return getFileInfo(file);\n        });\n    }\n\n    function getFileInfo(rawFile) {\n        // Older Firefox versions (before 3.6) use fileName and fileSize\n        var fileName = rawFile.name || rawFile.fileName;\n        return {\n            name: kendo.htmlEncode(fileName),\n            extension: getFileExtension(fileName),\n            size: typeof rawFile.size == \"number\" ? rawFile.size : rawFile.fileSize, //rawFile.size || rawFile.fileSize,\n            rawFile: rawFile\n        };\n    }\n\n    function getFileExtension(fileName) {\n        var matches = fileName.match(rFileExtension);\n        return matches ? matches[0] : \"\";\n    }\n\n    function stripPath(name) {\n        var slashIndex = name.lastIndexOf(\"\\\\\");\n        return (slashIndex != -1) ? name.substr(slashIndex + 1) : name;\n    }\n\n    function assignGuidToFiles(files, unique) {\n        var uid = kendo.guid();\n\n        return $.map(files, function(file) {\n            file.uid = unique ? kendo.guid() : uid;\n\n            return file;\n        });\n    }\n\n    function validateFiles(files, validationInfo) {\n        var allowedExtensions = parseAllowedExtensions(validationInfo.allowedExtensions);\n        var maxFileSize = validationInfo.maxFileSize;\n        var minFileSize = validationInfo.minFileSize;\n\n        for (var i = 0; i < files.length; i++) {\n            validateFileExtension(files[i], allowedExtensions);\n            validateFileSize(files[i], minFileSize, maxFileSize);\n        }\n    }\n\n    function parseAllowedExtensions(extensions) {\n        var allowedExtensions = $.map(extensions, function(ext) {\n            var parsedExt = (ext.substring(0, 1) === \".\") ? ext : (\".\" + ext);\n            return parsedExt.toLowerCase();\n        });\n\n        return allowedExtensions;\n    }\n\n    function validateFileExtension(file, allowedExtensions) {\n        if (allowedExtensions.length > 0) {\n            if (allowedExtensions.indexOf(file.extension.toLowerCase()) < 0) {\n                file.validationErrors = file.validationErrors || [];\n                if ($.inArray(INVALIDFILEEXTENSION, file.validationErrors) === -1) {\n                    file.validationErrors.push(INVALIDFILEEXTENSION);\n                }\n            }\n        }\n    }\n\n    function validateFileSize(file, minFileSize, maxFileSize) {\n        if (minFileSize !== 0 && file.size < minFileSize) {\n            file.validationErrors = file.validationErrors || [];\n            if ($.inArray(INVALIDMINFILESIZE, file.validationErrors) === -1) {\n                file.validationErrors.push(INVALIDMINFILESIZE);\n            }\n        }\n\n        if (maxFileSize !== 0 && file.size > maxFileSize) {\n            file.validationErrors = file.validationErrors || [];\n            if ($.inArray(INVALIDMAXFILESIZE, file.validationErrors) === -1) {\n                file.validationErrors.push(INVALIDMAXFILESIZE);\n            }\n        }\n    }\n\n    function getTotalFilesSizeMessage(files) {\n        var totalSize = 0;\n\n        if (typeof files[0].size == \"number\") {\n            for (var i = 0; i < files.length; i++) {\n                if (files[i].size) {\n                    totalSize += files[i].size;\n                }\n            }\n        } else {\n            return \"\";\n        }\n\n        totalSize /= 1024;\n\n        if (totalSize < 1024) {\n            return totalSize.toFixed(2) + \" KB\";\n        } else {\n            return (totalSize / 1024).toFixed(2) + \" MB\";\n        }\n    }\n\n    function shouldRemoveFileEntry(upload) {\n        return !upload.multiple && $(\".k-file\", upload.wrapper).length > 1;\n    }\n\n    function removeUploadedFile(fileEntry, upload, eventArgs, shouldSendRemoveRequest) {\n        if (!upload._supportsRemove()) {\n            if (shouldRemoveFileEntry(upload) || !shouldSendRemoveRequest) {\n                upload._removeFileEntry(fileEntry);\n            }\n\n            return;\n        }\n\n        var files = fileEntry.data(\"fileNames\");\n        var fileNames = $.map(files, function(file) { return file.name; });\n\n        if (shouldSendRemoveRequest === false) {\n            upload._removeFileEntry(fileEntry);\n\n            return;\n        }\n\n        upload._submitRemove(fileNames, eventArgs,\n            function onSuccess(data, textStatus, xhr) {\n                var prevented = upload.trigger(SUCCESS, {\n                    operation: \"remove\",\n                    files: files,\n                    response: data,\n                    XMLHttpRequest: xhr\n                });\n\n                if (!prevented) {\n                    upload._removeFileEntry(fileEntry);\n                }\n            },\n\n            function onError(xhr) {\n                if (shouldRemoveFileEntry(upload)) {\n                    upload._removeFileEntry(fileEntry);\n                }\n\n                upload.trigger(ERROR, {\n                    operation: \"remove\",\n                    files: files,\n                    XMLHttpRequest: xhr\n                });\n\n                logToConsole(\"Server response: \" + xhr.responseText);\n            }\n        );\n    }\n\n    function tryParseJSON(input, onSuccess, onError) {\n        var success = false,\n            json = \"\";\n\n        try {\n            json = JSON.parse(normalizeJSON(input));\n            success = true;\n        } catch (e) {\n            onError();\n        }\n\n        if (success) {\n            onSuccess(json);\n        }\n    }\n\n    function normalizeJSON(input) {\n        if (typeof input === \"undefined\" || input === \"\") {\n            input = \"{}\";\n        }\n\n        return input;\n    }\n\n    function stopEvent(e) {\n        if (e.originalEvent) {\n            e.originalEvent.dataTransfer.dropEffect = \"copy\";\n        }\n        e.stopPropagation(); e.preventDefault();\n    }\n\n    function bindDragEventWrappers(element, namespace, onDragEnter, onDragLeave) {\n        var hideInterval, lastDrag;\n\n        element\n            .on(\"dragenter\" + namespace, function(e) {\n                onDragEnter(e);\n                lastDrag = new Date();\n\n                if (!hideInterval) {\n                    hideInterval = setInterval(function() {\n                        var sinceLastDrag = new Date() - lastDrag;\n                        if (sinceLastDrag > 100) {\n                            onDragLeave();\n\n                            clearInterval(hideInterval);\n                            hideInterval = null;\n                        }\n                    }, 100);\n                }\n            })\n            .on(\"dragover\" + namespace, function() {\n                lastDrag = new Date();\n            });\n    }\n\n    function isFileUploadStarted(fileEntry) {\n        return fileEntry.is(\".k-file-progress, .k-file-success, .k-file-error:not(.k-file-invalid)\");\n    }\n\n    function getFileEntry(e) {\n        return $(e.target).closest(\".k-file\");\n    }\n\n    kendo.ui.plugin(Upload);\n})(window.kendo.jQuery);\nexport default kendo;\n\n"],"mappings":"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"}