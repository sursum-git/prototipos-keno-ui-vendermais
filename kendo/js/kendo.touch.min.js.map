{"version":3,"file":"kendo.touch.min.js","names":[],"sources":["../../src/kendo.touch.js"],"sourcesContent":["import \"./kendo.core.js\";\nimport \"./kendo.userevents.js\";\n\nexport const __meta__ = {\n    id: \"touch\",\n    name: \"Touch\",\n    category: \"mobile\",\n    description: \"The kendo Touch widget provides a cross-platform compatible API for handling user-initiated touch events, multi-touch gestures and event sequences (drag, swipe, etc.). \",\n    depends: [ \"core\", \"userevents\" ]\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        Widget = kendo.ui.Widget,\n        abs = Math.abs,\n        MAX_DOUBLE_TAP_DISTANCE = 20;\n\n    var Touch = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            Widget.fn.init.call(that, element, options);\n            options = that.options;\n\n            element = that.element;\n            that.wrapper = element;\n\n            function eventProxy(name) {\n                return function(e) {\n                    that._triggerTouch(name, e);\n                };\n            }\n\n            function gestureEventProxy(name) {\n                return function(e) {\n                    that.trigger(name, { touches: e.touches, distance: e.distance, center: e.center, event: e.event });\n                };\n            }\n\n            that.events = new kendo.UserEvents(element, {\n                filter: options.filter,\n                surface: options.surface,\n                minHold: options.minHold,\n                multiTouch: options.multiTouch,\n                allowSelection: true,\n                fastTap: options.fastTap,\n                press: eventProxy(\"touchstart\"),\n                hold: eventProxy(\"hold\"),\n                tap: that._tap.bind(that),\n                gesturestart: gestureEventProxy(\"gesturestart\"),\n                gesturechange: gestureEventProxy(\"gesturechange\"),\n                gestureend: gestureEventProxy(\"gestureend\")\n            });\n\n            if (options.enableSwipe) {\n                that.events.bind(\"start\", that._swipestart.bind(that));\n                that.events.bind(\"move\", that._swipemove.bind(that));\n            } else {\n                that.events.bind(\"start\", that._dragstart.bind(that));\n                that.events.bind(\"move\", eventProxy(\"drag\"));\n                that.events.bind(\"end\", eventProxy(\"dragend\"));\n            }\n\n            kendo.notify(that);\n        },\n\n        events: [\n            \"touchstart\",\n            \"dragstart\",\n            \"drag\",\n            \"dragend\",\n            \"tap\",\n            \"doubletap\",\n            \"hold\",\n            \"swipe\",\n            \"gesturestart\",\n            \"gesturechange\",\n            \"gestureend\"\n        ],\n\n        options: {\n            name: \"Touch\",\n            surface: null,\n            global: false,\n            fastTap: false,\n            filter: null,\n            multiTouch: false,\n            enableSwipe: false,\n            minXDelta: 30,\n            maxYDelta: 20,\n            maxDuration: 1000,\n            minHold: 800,\n            doubleTapTimeout: 800\n        },\n\n        cancel: function() {\n            this.events.cancel();\n        },\n\n        destroy: function() {\n            Widget.fn.destroy.call(this);\n\n            this.events.destroy();\n        },\n\n        _triggerTouch: function(type, e) {\n            if (this.trigger(type, { touch: e.touch, event: e.event })) {\n                e.preventDefault();\n            }\n        },\n\n        _tap: function(e) {\n            var that = this,\n                lastTap = that.lastTap,\n                touch = e.touch;\n\n            if (lastTap &&\n                (touch.endTime - lastTap.endTime < that.options.doubleTapTimeout) &&\n                kendo.touchDelta(touch, lastTap).distance < MAX_DOUBLE_TAP_DISTANCE\n                ) {\n\n               that._triggerTouch(\"doubletap\", e);\n               that.lastTap = null;\n            } else {\n                that._triggerTouch(\"tap\", e);\n                that.lastTap = touch;\n            }\n        },\n\n        _dragstart: function(e) {\n            this._triggerTouch(\"dragstart\", e);\n        },\n\n        _swipestart: function(e) {\n            if (abs(e.x.velocity) * 2 >= abs(e.y.velocity)) {\n                e.sender.capture();\n            }\n        },\n\n        _swipemove: function(e) {\n            var that = this,\n                options = that.options,\n                touch = e.touch,\n                duration = e.event.timeStamp - touch.startTime,\n                direction = touch.x.initialDelta > 0 ? \"right\" : \"left\";\n\n            if (\n                abs(touch.x.initialDelta) >= options.minXDelta &&\n                abs(touch.y.initialDelta) < options.maxYDelta &&\n                duration < options.maxDuration\n                )\n            {\n                that.trigger(\"swipe\", {\n                    direction: direction,\n                    touch: e.touch\n                });\n\n                touch.cancel();\n            }\n        }\n    });\n\n    kendo.ui.plugin(Touch);\n})(window.kendo.jQuery);\nexport default kendo;\n\n"],"mappings":"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"}